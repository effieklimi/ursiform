"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/ask";
exports.ids = ["pages/api/ask"];
exports.modules = {

/***/ "@google/generative-ai":
/*!****************************************!*\
  !*** external "@google/generative-ai" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@google/generative-ai");;

/***/ }),

/***/ "@qdrant/js-client-rest":
/*!*****************************************!*\
  !*** external "@qdrant/js-client-rest" ***!
  \*****************************************/
/***/ ((module) => {

module.exports = import("@qdrant/js-client-rest");;

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./lib/qdrant/db.ts":
/*!**************************!*\
  !*** ./lib/qdrant/db.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"client\": () => (/* binding */ client),\n/* harmony export */   \"createCollection\": () => (/* binding */ createCollection),\n/* harmony export */   \"testConnection\": () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var _qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @qdrant/js-client-rest */ \"@qdrant/js-client-rest\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__]);\n_qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Initialize client with support for both local and cloud instances\nconst qdrantUrl = \"https://1555b3af-2ea7-409c-83a3-3a49207ac217.us-east4-0.gcp.cloud.qdrant.io:6333\" || 0;\nconst qdrantApiKey = process.env.QDRANT_API_KEY;\nlet clientConfig;\n// For cloud instances, use the recommended format from documentation\nif (qdrantApiKey) {\n    // Parse the URL to extract host\n    const url = new URL(qdrantUrl);\n    const host = url.hostname;\n    const isHttps = url.protocol === \"https:\";\n    clientConfig = {\n        host: host,\n        port: null,\n        https: isHttps,\n        apiKey: qdrantApiKey\n    };\n    console.log(`Connecting to Qdrant Cloud at ${host} (HTTPS: ${isHttps})`);\n} else {\n    // For local instances without API key\n    clientConfig = {\n        url: qdrantUrl\n    };\n    console.log(`Connecting to local Qdrant at ${qdrantUrl}`);\n}\nconst client = new _qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__.QdrantClient(clientConfig);\n\n// Test Qdrant connection\nasync function testConnection() {\n    try {\n        // Use getCollections as a simple health check\n        await client.getCollections();\n        console.log(\"Qdrant connection successful\");\n        return true;\n    } catch (error) {\n        console.error(\"Qdrant connection failed:\", error);\n        return false;\n    }\n}\nasync function createCollection(name = \"my_collection\", dimension = 768) {\n    try {\n        // First test the connection\n        const isConnected = await testConnection();\n        if (!isConnected) {\n            throw new Error(\"Cannot connect to Qdrant database. Please check your configuration.\");\n        }\n        // Check if collection already exists\n        try {\n            await client.getCollection(name);\n            console.log(`Collection \"${name}\" already exists`);\n            return;\n        } catch (error) {\n            // Collection doesn't exist, create it\n            console.log(`Collection \"${name}\" does not exist, creating...`);\n            // Check if it's a different error than \"not found\"\n            if (error.status && error.status !== 404) {\n                console.error(\"Unexpected error checking collection:\", error);\n                throw error;\n            }\n        }\n        await client.createCollection(name, {\n            vectors: {\n                size: dimension,\n                distance: \"Cosine\"\n            }\n        });\n        console.log(`Collection \"${name}\" created successfully with dimension ${dimension}`);\n    } catch (error1) {\n        console.error(`Error creating collection \"${name}\":`, error1);\n        // Provide more specific error messages\n        if (error1.message?.includes(\"authentication\") || error1.status === 401 || error1.status === 403) {\n            throw new Error(\"Authentication failed. Please check your QDRANT_API_KEY and QDRANT_URL.\");\n        } else if (error1.message?.includes(\"connection\") || error1.code === \"ECONNREFUSED\") {\n            throw new Error(\"Cannot connect to Qdrant. Please check your QDRANT_URL.\");\n        } else {\n            throw error1;\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2xDTSxPQUFPLEVBQUU7Z0JBQ1BDLElBQUksRUFBRU4sU0FBUztnQkFDZk8sUUFBUSxFQUFFLFFBQVE7YUFDbkI7U0FDRixDQUFDLENBQUM7UUFFSGYsT0FBTyxDQUFDQyxHQUFHLENBQ1QsQ0FBQyxZQUFZLEVBQUVNLElBQUksQ0FBQyxzQ0FBc0MsRUFBRUMsU0FBUyxDQUFDLENBQUMsQ0FDeEUsQ0FBQztJQUNKLEVBQUUsT0FBT0gsTUFBSyxFQUFPO1FBQ25CTCxPQUFPLENBQUNLLEtBQUssQ0FBQyxDQUFDLDJCQUEyQixFQUFFRSxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUVGLE1BQUssQ0FBQyxDQUFDO1FBRTdELHVDQUF1QztRQUN2QyxJQUNFQSxNQUFLLENBQUNXLE9BQU8sRUFBRUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLElBQ3pDWixNQUFLLENBQUNPLE1BQU0sS0FBSyxHQUFHLElBQ3BCUCxNQUFLLENBQUNPLE1BQU0sS0FBSyxHQUFHLEVBQ3BCO1lBQ0EsTUFBTSxJQUFJRixLQUFLLENBQ2IseUVBQXlFLENBQzFFLENBQUM7UUFDSixPQUFPLElBQ0xMLE1BQUssQ0FBQ1csT0FBTyxFQUFFQyxRQUFRLENBQUMsWUFBWSxDQUFDLElBQ3JDWixNQUFLLENBQUNhLElBQUksS0FBSyxjQUFjLEVBQzdCO1lBQ0EsTUFBTSxJQUFJUixLQUFLLENBQ2IseURBQXlELENBQzFELENBQUM7UUFDSixPQUFPO1lBQ0wsTUFBTUwsTUFBSyxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWVhcm4vLi9saWIvcWRyYW50L2RiLnRzPzM5NjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUWRyYW50Q2xpZW50IH0gZnJvbSBcIkBxZHJhbnQvanMtY2xpZW50LXJlc3RcIjtcblxuLy8gSW5pdGlhbGl6ZSBjbGllbnQgd2l0aCBzdXBwb3J0IGZvciBib3RoIGxvY2FsIGFuZCBjbG91ZCBpbnN0YW5jZXNcbmNvbnN0IHFkcmFudFVybCA9IHByb2Nlc3MuZW52LlFEUkFOVF9VUkwgfHwgXCJodHRwOi8vbG9jYWxob3N0OjYzMzNcIjtcbmNvbnN0IHFkcmFudEFwaUtleSA9IHByb2Nlc3MuZW52LlFEUkFOVF9BUElfS0VZO1xuXG5sZXQgY2xpZW50Q29uZmlnOiBhbnk7XG5cbi8vIEZvciBjbG91ZCBpbnN0YW5jZXMsIHVzZSB0aGUgcmVjb21tZW5kZWQgZm9ybWF0IGZyb20gZG9jdW1lbnRhdGlvblxuaWYgKHFkcmFudEFwaUtleSkge1xuICAvLyBQYXJzZSB0aGUgVVJMIHRvIGV4dHJhY3QgaG9zdFxuICBjb25zdCB1cmwgPSBuZXcgVVJMKHFkcmFudFVybCk7XG4gIGNvbnN0IGhvc3QgPSB1cmwuaG9zdG5hbWU7XG4gIGNvbnN0IGlzSHR0cHMgPSB1cmwucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XG5cbiAgY2xpZW50Q29uZmlnID0ge1xuICAgIGhvc3Q6IGhvc3QsXG4gICAgcG9ydDogbnVsbCwgLy8gVGhpcyBpcyBjcml0aWNhbCBmb3IgY2xvdWQgaW5zdGFuY2VzIC0gcHJldmVudHMgOjYzMzMgYmVpbmcgYXBwZW5kZWRcbiAgICBodHRwczogaXNIdHRwcyxcbiAgICBhcGlLZXk6IHFkcmFudEFwaUtleSxcbiAgfTtcblxuICBjb25zb2xlLmxvZyhgQ29ubmVjdGluZyB0byBRZHJhbnQgQ2xvdWQgYXQgJHtob3N0fSAoSFRUUFM6ICR7aXNIdHRwc30pYCk7XG59IGVsc2Uge1xuICAvLyBGb3IgbG9jYWwgaW5zdGFuY2VzIHdpdGhvdXQgQVBJIGtleVxuICBjbGllbnRDb25maWcgPSB7XG4gICAgdXJsOiBxZHJhbnRVcmwsXG4gIH07XG5cbiAgY29uc29sZS5sb2coYENvbm5lY3RpbmcgdG8gbG9jYWwgUWRyYW50IGF0ICR7cWRyYW50VXJsfWApO1xufVxuXG5jb25zdCBjbGllbnQgPSBuZXcgUWRyYW50Q2xpZW50KGNsaWVudENvbmZpZyk7XG5cbmV4cG9ydCB7IGNsaWVudCB9O1xuXG4vLyBUZXN0IFFkcmFudCBjb25uZWN0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgLy8gVXNlIGdldENvbGxlY3Rpb25zIGFzIGEgc2ltcGxlIGhlYWx0aCBjaGVja1xuICAgIGF3YWl0IGNsaWVudC5nZXRDb2xsZWN0aW9ucygpO1xuICAgIGNvbnNvbGUubG9nKFwiUWRyYW50IGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bFwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiUWRyYW50IGNvbm5lY3Rpb24gZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDb2xsZWN0aW9uKFxuICBuYW1lOiBzdHJpbmcgPSBcIm15X2NvbGxlY3Rpb25cIixcbiAgZGltZW5zaW9uOiBudW1iZXIgPSA3Njhcbik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIC8vIEZpcnN0IHRlc3QgdGhlIGNvbm5lY3Rpb25cbiAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IGF3YWl0IHRlc3RDb25uZWN0aW9uKCk7XG4gICAgaWYgKCFpc0Nvbm5lY3RlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbm5vdCBjb25uZWN0IHRvIFFkcmFudCBkYXRhYmFzZS4gUGxlYXNlIGNoZWNrIHlvdXIgY29uZmlndXJhdGlvbi5cIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBjb2xsZWN0aW9uIGFscmVhZHkgZXhpc3RzXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNsaWVudC5nZXRDb2xsZWN0aW9uKG5hbWUpO1xuICAgICAgY29uc29sZS5sb2coYENvbGxlY3Rpb24gXCIke25hbWV9XCIgYWxyZWFkeSBleGlzdHNgKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAvLyBDb2xsZWN0aW9uIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdFxuICAgICAgY29uc29sZS5sb2coYENvbGxlY3Rpb24gXCIke25hbWV9XCIgZG9lcyBub3QgZXhpc3QsIGNyZWF0aW5nLi4uYCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBkaWZmZXJlbnQgZXJyb3IgdGhhbiBcIm5vdCBmb3VuZFwiXG4gICAgICBpZiAoZXJyb3Iuc3RhdHVzICYmIGVycm9yLnN0YXR1cyAhPT0gNDA0KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yIGNoZWNraW5nIGNvbGxlY3Rpb246XCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgY2xpZW50LmNyZWF0ZUNvbGxlY3Rpb24obmFtZSwge1xuICAgICAgdmVjdG9yczoge1xuICAgICAgICBzaXplOiBkaW1lbnNpb24sXG4gICAgICAgIGRpc3RhbmNlOiBcIkNvc2luZVwiLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYENvbGxlY3Rpb24gXCIke25hbWV9XCIgY3JlYXRlZCBzdWNjZXNzZnVsbHkgd2l0aCBkaW1lbnNpb24gJHtkaW1lbnNpb259YFxuICAgICk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyBjb2xsZWN0aW9uIFwiJHtuYW1lfVwiOmAsIGVycm9yKTtcblxuICAgIC8vIFByb3ZpZGUgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlc1xuICAgIGlmIChcbiAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKFwiYXV0aGVudGljYXRpb25cIikgfHxcbiAgICAgIGVycm9yLnN0YXR1cyA9PT0gNDAxIHx8XG4gICAgICBlcnJvci5zdGF0dXMgPT09IDQwM1xuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZC4gUGxlYXNlIGNoZWNrIHlvdXIgUURSQU5UX0FQSV9LRVkgYW5kIFFEUkFOVF9VUkwuXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKFwiY29ubmVjdGlvblwiKSB8fFxuICAgICAgZXJyb3IuY29kZSA9PT0gXCJFQ09OTlJFRlVTRURcIlxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbm5vdCBjb25uZWN0IHRvIFFkcmFudC4gUGxlYXNlIGNoZWNrIHlvdXIgUURSQU5UX1VSTC5cIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiUWRyYW50Q2xpZW50IiwicWRyYW50VXJsIiwicHJvY2VzcyIsImVudiIsIlFEUkFOVF9VUkwiLCJxZHJhbnRBcGlLZXkiLCJRRFJBTlRfQVBJX0tFWSIsImNsaWVudENvbmZpZyIsInVybCIsIlVSTCIsImhvc3QiLCJob3N0bmFtZSIsImlzSHR0cHMiLCJwcm90b2NvbCIsInBvcnQiLCJodHRwcyIsImFwaUtleSIsImNvbnNvbGUiLCJsb2ciLCJjbGllbnQiLCJ0ZXN0Q29ubmVjdGlvbiIsImdldENvbGxlY3Rpb25zIiwiZXJyb3IiLCJjcmVhdGVDb2xsZWN0aW9uIiwibmFtZSIsImRpbWVuc2lvbiIsImlzQ29ubmVjdGVkIiwiRXJyb3IiLCJnZXRDb2xsZWN0aW9uIiwic3RhdHVzIiwidmVjdG9ycyIsInNpemUiLCJkaXN0YW5jZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImNvZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/qdrant/db.ts\n");

/***/ }),

/***/ "(api)/./lib/qdrant/nlp-query.ts":
/*!*********************************!*\
  !*** ./lib/qdrant/nlp-query.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"processNaturalQuery\": () => (/* binding */ processNaturalQuery)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @google/generative-ai */ \"@google/generative-ai\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db */ \"(api)/./lib/qdrant/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__, _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__, _db__WEBPACK_IMPORTED_MODULE_2__]);\n([openai__WEBPACK_IMPORTED_MODULE_0__, _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__, _db__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__.GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\nasync function processNaturalQuery(collection, question, provider = \"openai\", model, context // Add conversation context\n) {\n    const startTime = Date.now();\n    try {\n        // Step 1: Resolve context and enrich the question\n        const { enrichedQuestion , resolvedCollection , updatedContext  } = await resolveContext(question, collection, context);\n        // Step 2: Parse intent with context awareness\n        const intent = await parseQueryIntent(enrichedQuestion, provider, model, updatedContext);\n        // Step 3: Use resolved collection or extracted collection\n        const finalCollection = resolvedCollection || intent.extractedCollection || null;\n        // Step 4: Execute the appropriate operation\n        const result = await executeQuery(finalCollection, intent);\n        // Step 5: Generate natural language response\n        const answer = await generateResponse(enrichedQuestion, intent, result, provider, model);\n        // Step 6: Update conversation context\n        const finalContext = updateConversationContext(updatedContext, question, intent, result, finalCollection);\n        const execution_time_ms = Date.now() - startTime;\n        return {\n            answer,\n            query_type: intent.type,\n            data: result,\n            execution_time_ms,\n            context: finalContext\n        };\n    } catch (error) {\n        console.error(\"Error processing natural query:\", error);\n        // Create fallback response\n        const fallbackAnswer = \"I encountered an issue processing your query, but I'm using pattern matching to help. \" + generateFallbackResponse(question, inferIntentFromQuestion(question, context), {\n            count: 0\n        });\n        return {\n            answer: fallbackAnswer,\n            query_type: \"fallback\",\n            data: null,\n            execution_time_ms: Date.now() - startTime,\n            context: context || {\n                conversationHistory: []\n            }\n        };\n    }\n}\nasync function resolveContext(question, collection, context) {\n    // Initialize context if not provided\n    const currentContext = context || {\n        conversationHistory: []\n    };\n    let enrichedQuestion = question;\n    let resolvedCollection = collection;\n    console.log(\"\\uD83E\\uDDE0 CONTEXT RESOLUTION:\");\n    console.log(\"Original question:\", question);\n    console.log(\"Current context:\", JSON.stringify(currentContext, null, 2));\n    // Detect contextual references\n    const lowercaseQuestion = question.toLowerCase();\n    // Handle pronoun references to entities\n    if ((lowercaseQuestion.includes(\"their\") || lowercaseQuestion.includes(\"his\") || lowercaseQuestion.includes(\"her\") || lowercaseQuestion.includes(\"its\")) && currentContext.lastEntity) {\n        console.log(\"\\uD83D\\uDD04 Resolving possessive pronoun to:\", currentContext.lastEntity);\n        enrichedQuestion = enrichedQuestion.replace(/\\b(their|his|her|its)\\b/gi, currentContext.lastEntity + \"'s\");\n    }\n    // Handle \"he\" and \"him\" references\n    if ((lowercaseQuestion.includes(\"he \") || lowercaseQuestion.includes(\"him \") || lowercaseQuestion.includes(\" he\") || lowercaseQuestion.includes(\" him\")) && currentContext.lastEntity) {\n        console.log(\"\\uD83D\\uDD04 Resolving 'he/him' to:\", currentContext.lastEntity);\n        enrichedQuestion = enrichedQuestion.replace(/\\b(he|him)\\b/gi, currentContext.lastEntity);\n    }\n    // Handle \"also\" references\n    if (lowercaseQuestion.includes(\"also\") && currentContext.lastEntity) {\n        if (!enrichedQuestion.includes(currentContext.lastEntity)) {\n            console.log(\"\\uD83D\\uDD04 Resolving 'also' reference to:\", currentContext.lastEntity);\n            enrichedQuestion = enrichedQuestion.replace(/also/i, `also for ${currentContext.lastEntity}`);\n        }\n    }\n    // Handle \"them\" references\n    if (lowercaseQuestion.includes(\"them\") && currentContext.lastEntity) {\n        console.log(\"\\uD83D\\uDD04 Resolving 'them' to:\", currentContext.lastEntity);\n        enrichedQuestion = enrichedQuestion.replace(/\\bthem\\b/gi, currentContext.lastEntity);\n    }\n    // Handle \"they\" references\n    if (lowercaseQuestion.includes(\"they\") && currentContext.lastEntity) {\n        console.log(\"\\uD83D\\uDD04 Resolving 'they' to:\", currentContext.lastEntity);\n        enrichedQuestion = enrichedQuestion.replace(/\\bthey\\b/gi, currentContext.lastEntity);\n    }\n    // Handle \"it\" references to collections\n    if (lowercaseQuestion.includes(\"it\") && currentContext.lastCollection) {\n        console.log(\"\\uD83D\\uDD04 Resolving 'it' to collection:\", currentContext.lastCollection);\n        enrichedQuestion = enrichedQuestion.replace(/\\bit\\b/gi, currentContext.lastCollection);\n    }\n    // Handle continuation phrases\n    if ((lowercaseQuestion.includes(\"what about\") || lowercaseQuestion.includes(\"how about\") || lowercaseQuestion.includes(\"and\")) && currentContext.lastQueryType && currentContext.lastTarget) {\n        // If question is like \"what about John Doe?\", expand to full context\n        const entityMatch = question.match(/(?:what about|how about|and)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*)/i);\n        if (entityMatch) {\n            const newEntity = entityMatch[1];\n            const lastQueryType = currentContext.lastQueryType;\n            console.log(\"\\uD83D\\uDD04 Resolving continuation to:\", `${lastQueryType} ${currentContext.lastTarget} by ${newEntity}`);\n            enrichedQuestion = `${lastQueryType} ${currentContext.lastTarget} by ${newEntity}`;\n        }\n    }\n    // Resolve collection context\n    if (!resolvedCollection && currentContext.lastCollection) {\n        // If no collection specified but we have context, check if query seems collection-specific\n        if (lowercaseQuestion.includes(\"this collection\") || lowercaseQuestion.includes(\"that collection\") || lowercaseQuestion.includes(\"same collection\") || lowercaseQuestion.includes(\"the collection\") || lowercaseQuestion.includes(\"in that\") || lowercaseQuestion.includes(\"in this\") || !lowercaseQuestion.includes(\"all collections\") && !lowercaseQuestion.includes(\"database\") && !lowercaseQuestion.includes(\"across collections\")) {\n            console.log(\"\\uD83D\\uDD04 Resolving collection context to:\", currentContext.lastCollection);\n            resolvedCollection = currentContext.lastCollection;\n        }\n    }\n    // Special handling for queries that reference previous results\n    if (currentContext.conversationHistory.length > 0) {\n        const lastTurn = currentContext.conversationHistory[currentContext.conversationHistory.length - 1];\n        // If the last query returned collection-specific results, use that collection\n        if (lastTurn.result?.results_by_collection && !resolvedCollection) {\n            const collectionsWithResults = lastTurn.result.results_by_collection.filter((r)=>r.count > 0);\n            if (collectionsWithResults.length === 1) {\n                console.log(\"\\uD83D\\uDD04 Inferring collection from previous results:\", collectionsWithResults[0].collection);\n                resolvedCollection = collectionsWithResults[0].collection;\n            }\n        }\n    }\n    console.log(\"✅ Enriched question:\", enrichedQuestion);\n    console.log(\"✅ Resolved collection:\", resolvedCollection);\n    return {\n        enrichedQuestion,\n        resolvedCollection,\n        updatedContext: currentContext\n    };\n}\nfunction updateConversationContext(context, question, intent, result, collection) {\n    console.log(\"\\uD83D\\uDCBE UPDATING CONVERSATION CONTEXT:\");\n    console.log(\"Previous context:\", JSON.stringify(context, null, 2));\n    console.log(\"Intent:\", JSON.stringify(intent, null, 2));\n    console.log(\"Collection:\", collection);\n    // Create new conversation turn\n    const turn = {\n        id: Date.now().toString(),\n        question,\n        intent: {\n            type: intent.type,\n            target: intent.target,\n            filter: intent.filter,\n            scope: intent.scope,\n            extractedCollection: intent.extractedCollection\n        },\n        result,\n        timestamp: new Date()\n    };\n    // Update context\n    const updatedContext = {\n        ...context,\n        conversationHistory: [\n            ...context.conversationHistory,\n            turn\n        ].slice(-10)\n    };\n    // Update last entity if filter contains a name\n    if (intent.filter?.name) {\n        updatedContext.lastEntity = intent.filter.name;\n        console.log(\"\\uD83D\\uDCDD Updated lastEntity to:\", intent.filter.name);\n    }\n    // Update last collection\n    if (collection) {\n        updatedContext.lastCollection = collection;\n        console.log(\"\\uD83D\\uDCDD Updated lastCollection to:\", collection);\n    }\n    // Update last query type and target\n    updatedContext.lastQueryType = intent.type;\n    updatedContext.lastTarget = intent.target;\n    console.log(\"\\uD83D\\uDCDD Updated lastQueryType to:\", intent.type);\n    console.log(\"\\uD83D\\uDCDD Updated lastTarget to:\", intent.target);\n    // Update current topic based on query content\n    if (intent.filter?.name) {\n        updatedContext.currentTopic = `${intent.filter.name} ${intent.target}`;\n        console.log(\"\\uD83D\\uDCDD Updated currentTopic to:\", updatedContext.currentTopic);\n    }\n    console.log(\"✅ Final updated context:\", JSON.stringify(updatedContext, null, 2));\n    return updatedContext;\n}\nasync function parseQueryIntent(question, provider, model, context) {\n    // First try simple pattern matching as fallback\n    const fallbackIntent = inferIntentFromQuestion(question, context);\n    // Build context-aware system prompt\n    let systemPrompt = `You are a query intent parser for a vector database system. Parse the user's question to determine:\n1. Query type (count, search, list, filter, describe, summarize, analyze, collections, database, top, ranking)\n2. What to target (items, entities, collections, etc.)\n3. Any filters to apply (especially entity names)\n4. Query scope (collection-specific or database-wide)\n5. Collection name if mentioned\n6. Sort criteria for ranking queries\n\nAvailable scopes:\n- \"collection\": query operates on a specific collection\n- \"database\": query operates on the entire database\n\nAvailable query types:\n- \"top\": find top N items by some criteria (e.g., \"top 5 artists by image count\")\n- \"ranking\": rank items by some criteria (e.g., \"which artist has the most images\")\n- \"count\": count items matching criteria\n- \"search\": find specific items\n- \"list\": list items or entities\n- \"summarize\": provide summary of items\n- \"analyze\": analyze patterns in items\n\nIMPORTANT: Extract entity names from natural language variations:\n- \"by [Name]\", \"from [Name]\", \"of [Name]\"\n- \"done by [Name]\", \"created by [Name]\", \"made by [Name]\"\n- \"pieces by [Name]\", \"work by [Name]\", \"items by [Name]\"\n- \"[Name] items\", \"[Name] work\", \"[Name] pieces\"\n- Look for proper nouns (capitalized names) that could be entities\n\nFor ranking/top queries, identify what to sort by:\n- \"most images\" → sortBy: \"image_count\", sortOrder: \"desc\"\n- \"least popular\" → sortBy: \"popularity\", sortOrder: \"asc\"\n- \"top artists\" → sortBy: \"image_count\", sortOrder: \"desc\"\n\nWhen you find an entity name, put it in the filter with a generic field name \"name\".`;\n    // Add conversation context if available\n    if (context && context.conversationHistory.length > 0) {\n        systemPrompt += `\n\nCONVERSATION CONTEXT:\nRecent conversation history (use this to resolve references and continuations):\n`;\n        // Add last few turns for context\n        const recentTurns = context.conversationHistory.slice(-3);\n        recentTurns.forEach((turn, index)=>{\n            systemPrompt += `\n${index + 1}. User asked: \"${turn.question}\"\n   Intent: ${turn.intent.type} ${turn.intent.target}${turn.intent.filter ? ` (filter: ${JSON.stringify(turn.intent.filter)})` : \"\"}\n   Collection: ${turn.intent.extractedCollection || \"database-wide\"}`;\n        });\n        if (context.lastEntity) {\n            systemPrompt += `\nLast mentioned entity: ${context.lastEntity}`;\n        }\n        if (context.lastCollection) {\n            systemPrompt += `\nLast used collection: ${context.lastCollection}`;\n        }\n        if (context.currentTopic) {\n            systemPrompt += `\nCurrent conversation topic: ${context.currentTopic}`;\n        }\n        systemPrompt += `\n\nUse this context to resolve pronouns (they, them, their, it), continuations (also, what about), and implied references.\nFor example:\n- \"their work\" when last entity was \"John Doe\" should become filter: {\"name\": \"John Doe\"}\n- \"what about Alice?\" after asking about \"John Doe's paintings\" should become \"search paintings by Alice\"\n- \"also show me Bob\" after \"count items by Alice\" should become \"search items by Bob\"`;\n    }\n    systemPrompt += `\n\nReturn ONLY a JSON object in this format:\n{\n  \"type\": \"count|search|list|filter|describe|summarize|analyze|collections|database|top|ranking\",\n  \"target\": \"what to count/search/list (e.g., 'items', 'entities', 'collections')\",\n  \"filter\": {\"name\": \"extracted_entity_name\"} or null,\n  \"limit\": number or null,\n  \"scope\": \"collection|database\",\n  \"extractedCollection\": \"collection_name_if_mentioned_in_query\" or null,\n  \"sortBy\": \"image_count|popularity|name\" or null,\n  \"sortOrder\": \"asc|desc\" or null\n}\n\nExamples:\n- \"How many items by John Doe?\" → {\"type\": \"count\", \"target\": \"items\", \"filter\": {\"name\": \"John Doe\"}, \"limit\": null, \"scope\": \"database\", \"extractedCollection\": null}\n- \"Which artist has the most images?\" → {\"type\": \"ranking\", \"target\": \"entities\", \"filter\": null, \"limit\": 1, \"scope\": \"database\", \"extractedCollection\": null, \"sortBy\": \"image_count\", \"sortOrder\": \"desc\"}\n- \"Top 5 artists by image count in mycollection\" → {\"type\": \"top\", \"target\": \"entities\", \"filter\": null, \"limit\": 5, \"scope\": \"collection\", \"extractedCollection\": \"mycollection\", \"sortBy\": \"image_count\", \"sortOrder\": \"desc\"}\n- \"Which artist in that collection has the most images?\" → {\"type\": \"ranking\", \"target\": \"entities\", \"filter\": null, \"limit\": 1, \"scope\": \"collection\", \"extractedCollection\": null, \"sortBy\": \"image_count\", \"sortOrder\": \"desc\"}\n- \"Summarize Alice Smith's work in mycollection\" → {\"type\": \"summarize\", \"target\": \"items\", \"filter\": {\"name\": \"Alice Smith\"}, \"limit\": 10, \"scope\": \"collection\", \"extractedCollection\": \"mycollection\"}\n- \"Can you summarise the pieces done by Bob Johnson?\" → {\"type\": \"summarize\", \"target\": \"items\", \"filter\": {\"name\": \"Bob Johnson\"}, \"limit\": 10, \"scope\": \"database\", \"extractedCollection\": null}\n- \"Find all Maria Garcia artwork\" → {\"type\": \"search\", \"target\": \"items\", \"filter\": {\"name\": \"Maria Garcia\"}, \"limit\": 20, \"scope\": \"database\", \"extractedCollection\": null}\n- \"Show me data created by AI Assistant\" → {\"type\": \"search\", \"target\": \"items\", \"filter\": {\"name\": \"AI Assistant\"}, \"limit\": 10, \"scope\": \"database\", \"extractedCollection\": null}`;\n    try {\n        let response;\n        if (provider === \"gemini\" && process.env.GEMINI_API_KEY) {\n            const geminiModel = genAI.getGenerativeModel({\n                model: model || \"gemini-2.0-flash\"\n            });\n            const result = await geminiModel.generateContent([\n                {\n                    text: systemPrompt\n                },\n                {\n                    text: `Question: \"${question}\"`\n                }, \n            ]);\n            response = result.response.text();\n        } else if (provider === \"openai\" && process.env.OPENAI_API_KEY) {\n            try {\n                const completion = await openai.chat.completions.create({\n                    model: model || \"gpt-3.5-turbo\",\n                    messages: [\n                        {\n                            role: \"system\",\n                            content: systemPrompt\n                        },\n                        {\n                            role: \"user\",\n                            content: `Question: \"${question}\"`\n                        }, \n                    ],\n                    temperature: 0\n                });\n                response = completion.choices[0].message.content || \"{}\";\n            } catch (openaiError) {\n                console.warn(\"OpenAI failed, trying Gemini fallback:\", openaiError.message);\n                // Auto-fallback to Gemini if OpenAI fails\n                if (process.env.GEMINI_API_KEY) {\n                    const geminiModel1 = genAI.getGenerativeModel({\n                        model: \"gemini-2.0-flash\"\n                    });\n                    const result1 = await geminiModel1.generateContent([\n                        {\n                            text: systemPrompt\n                        },\n                        {\n                            text: `Question: \"${question}\"`\n                        }, \n                    ]);\n                    response = result1.response.text();\n                } else {\n                    throw openaiError; // Re-throw if no Gemini fallback available\n                }\n            }\n        } else {\n            throw new Error(\"No valid API key for the specified provider\");\n        }\n        // Extract JSON from response (in case there's extra text)\n        const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n        const jsonStr = jsonMatch ? jsonMatch[0] : response;\n        return JSON.parse(jsonStr);\n    } catch (e) {\n        // Fallback parsing with context awareness\n        console.warn(\"Failed to parse LLM response, using context-aware fallback:\", e);\n        return fallbackIntent;\n    }\n}\nfunction inferIntentFromQuestion(question, context) {\n    const q = question.toLowerCase();\n    // Try to extract collection name from the question\n    const extractedCollection = extractCollectionFromQuestion(question);\n    // Handle pronouns in fallback if context is available\n    let processedQuestion = question;\n    if (context?.lastEntity) {\n        // Handle pronouns using context\n        if (q.includes(\" he \") || q.includes(\" him \") || q.includes(\"he \") || q.includes(\"him \")) {\n            console.log(\"\\uD83D\\uDD04 FALLBACK: Resolving 'he/him' to:\", context.lastEntity);\n            processedQuestion = processedQuestion.replace(/\\b(he|him)\\b/gi, context.lastEntity);\n        }\n        if (q.includes(\" they \") || q.includes(\" them \") || q.includes(\"they \") || q.includes(\"them \")) {\n            console.log(\"\\uD83D\\uDD04 FALLBACK: Resolving 'they/them' to:\", context.lastEntity);\n            processedQuestion = processedQuestion.replace(/\\b(they|them)\\b/gi, context.lastEntity);\n        }\n        if (q.includes(\" their \") || q.includes(\" his \") || q.includes(\" her \")) {\n            console.log(\"\\uD83D\\uDD04 FALLBACK: Resolving possessive to:\", context.lastEntity);\n            processedQuestion = processedQuestion.replace(/\\b(their|his|her)\\b/gi, context.lastEntity + \"'s\");\n        }\n    }\n    // Handle ranking and \"most\" queries\n    if (q.includes(\"which\") && (q.includes(\"most\") || q.includes(\"top\") || q.includes(\"best\") || q.includes(\"highest\"))) {\n        const scope = extractedCollection ? \"collection\" : \"database\";\n        if (q.includes(\"artist\") && q.includes(\"most\") && q.includes(\"image\")) {\n            return {\n                type: \"ranking\",\n                target: \"entities\",\n                filter: null,\n                limit: 1,\n                scope,\n                sortBy: \"image_count\",\n                sortOrder: \"desc\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"artist\") && q.includes(\"most\")) {\n            return {\n                type: \"ranking\",\n                target: \"entities\",\n                filter: null,\n                limit: 1,\n                scope,\n                sortBy: \"image_count\",\n                sortOrder: \"desc\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n    }\n    // Handle \"top N\" queries\n    if (q.includes(\"top\") && /top\\s+(\\d+)/.test(q)) {\n        const limitMatch = q.match(/top\\s+(\\d+)/);\n        const limit = limitMatch ? parseInt(limitMatch[1]) : 5;\n        const scope1 = extractedCollection ? \"collection\" : \"database\";\n        if (q.includes(\"artist\")) {\n            return {\n                type: \"top\",\n                target: \"entities\",\n                filter: null,\n                limit,\n                scope: scope1,\n                sortBy: \"image_count\",\n                sortOrder: \"desc\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n    }\n    // Check for entity-specific queries with generic patterns (use processed question)\n    const entityMatch = processedQuestion.match(/(?:by|from|of)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*?)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i) || processedQuestion.match(/(?:done\\s+by|created\\s+by|made\\s+by|work\\s+by|items\\s+by|pieces\\s+by)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*?)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i) || processedQuestion.match(/([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)+)(?:\\s+(?:work|items|pieces|data|content))/i);\n    const entityName = entityMatch ? entityMatch[1].trim() : null;\n    // Database-level queries\n    if (q.includes(\"collections\") || q.includes(\"database\")) {\n        if (q.includes(\"how many\") || q.includes(\"count\")) {\n            return {\n                type: \"count\",\n                target: \"collections\",\n                scope: \"database\"\n            };\n        }\n        if (q.includes(\"list\") || q.includes(\"what\") || q.includes(\"show\")) {\n            return {\n                type: \"collections\",\n                target: \"list\",\n                scope: \"database\"\n            };\n        }\n        if (q.includes(\"describe\")) {\n            return {\n                type: \"database\",\n                target: \"overview\",\n                scope: \"database\"\n            };\n        }\n    }\n    // Entity-specific queries (high priority)\n    if (entityName) {\n        const filter = {\n            name: entityName\n        };\n        const scope2 = extractedCollection ? \"collection\" : \"database\";\n        if (q.includes(\"summary\") || q.includes(\"summarize\") || q.includes(\"summarise\") || q.includes(\"give me\") && q.includes(\"summary\")) {\n            return {\n                type: \"summarize\",\n                target: \"items\",\n                filter,\n                limit: 20,\n                scope: scope2,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"how many\") || q.includes(\"count\")) {\n            return {\n                type: \"count\",\n                target: \"items\",\n                filter,\n                scope: scope2,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"find\") || q.includes(\"search\") || q.includes(\"show\")) {\n            return {\n                type: \"search\",\n                target: \"items\",\n                filter,\n                limit: 10,\n                scope: scope2,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"analyze\") || q.includes(\"analysis\")) {\n            return {\n                type: \"analyze\",\n                target: \"items\",\n                filter,\n                limit: 50,\n                scope: scope2,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n    }\n    // Collection-level queries (existing logic)\n    if (q.includes(\"how many\") || q.includes(\"count\")) {\n        if (q.includes(\"entities\") || q.includes(\"names\") || q.includes(\"creators\")) {\n            return {\n                type: \"count\",\n                target: \"entities\",\n                scope: extractedCollection ? \"collection\" : \"database\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"vector\") || q.includes(\"item\") || q.includes(\"record\")) {\n            return {\n                type: \"count\",\n                target: \"total\",\n                scope: extractedCollection ? \"collection\" : \"database\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        return {\n            type: \"count\",\n            target: \"total\",\n            scope: extractedCollection ? \"collection\" : \"database\",\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    if (q.includes(\"find\") || q.includes(\"search\")) {\n        // Check if it's across all collections\n        const scope3 = q.includes(\"all collections\") || q.includes(\"across\") ? \"database\" : extractedCollection ? \"collection\" : \"database\";\n        // Try to extract entity name (fallback pattern) - generic patterns\n        const fallbackEntityMatch = question.match(/(?:by|from|of)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*?)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i) || question.match(/(?:done\\s+by|created\\s+by|made\\s+by)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*?)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i);\n        if (fallbackEntityMatch) {\n            return {\n                type: \"search\",\n                target: \"items\",\n                filter: {\n                    name: fallbackEntityMatch[1]\n                },\n                limit: 10,\n                scope: scope3,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        return {\n            type: \"search\",\n            target: \"items\",\n            limit: 10,\n            scope: scope3,\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    if (q.includes(\"list\") || q.includes(\"show\")) {\n        if (q.includes(\"entities\") || q.includes(\"names\") || q.includes(\"creators\")) {\n            return {\n                type: \"list\",\n                target: \"entities\",\n                scope: extractedCollection ? \"collection\" : \"database\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        return {\n            type: \"list\",\n            target: \"items\",\n            limit: 20,\n            scope: extractedCollection ? \"collection\" : \"database\",\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    if (q.includes(\"describe\")) {\n        return {\n            type: \"describe\",\n            target: extractedCollection ? \"collection\" : \"database\",\n            scope: extractedCollection ? \"collection\" : \"database\",\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    return {\n        type: \"describe\",\n        target: \"collection\",\n        scope: extractedCollection ? \"collection\" : \"database\",\n        ...extractedCollection && {\n            extractedCollection\n        }\n    };\n}\n// New function to extract collection names from natural language\nfunction extractCollectionFromQuestion(question) {\n    const q = question.toLowerCase();\n    // Common patterns for mentioning collections\n    const patterns = [\n        // \"in [collection]\" or \"from [collection]\"\n        /(?:in|from)\\s+([a-zA-Z][a-zA-Z0-9_-]*)/g,\n        // \"[collection] collection\"\n        /([a-zA-Z][a-zA-Z0-9_-]*)\\s+collection/g,\n        // \"collection [collection]\"\n        /collection\\s+([a-zA-Z][a-zA-Z0-9_-]*)/g, \n    ];\n    for (const pattern of patterns){\n        let match;\n        while((match = pattern.exec(q)) !== null){\n            const candidate = match[1];\n            // Filter out common words that aren't collection names\n            if (![\n                \"the\",\n                \"this\",\n                \"that\",\n                \"my\",\n                \"your\",\n                \"our\",\n                \"their\",\n                \"all\",\n                \"some\",\n                \"any\",\n                \"each\",\n                \"every\", \n            ].includes(candidate)) {\n                return candidate;\n            }\n        }\n    }\n    // Look for specific common collection names that might appear without prepositions\n    const commonCollectionNames = [\n        \"midjourneysample\",\n        \"test_collection\",\n        \"my_docs\",\n        \"test_small\",\n        \"new_test_yearn\",\n        \"docs_openai\",\n        \"docs_gemini\", \n    ];\n    for (const name of commonCollectionNames){\n        if (q.includes(name)) {\n            return name;\n        }\n    }\n    return undefined;\n}\nasync function executeQuery(collection, intent) {\n    if (intent.scope === \"database\") {\n        return await executeDatabaseQuery(intent);\n    } else {\n        // Collection-level query - require collection name\n        if (!collection) {\n            throw new Error(\"Collection name is required for collection-level queries\");\n        }\n        return await executeCollectionQuery(collection, intent);\n    }\n}\nasync function executeDatabaseQuery(intent) {\n    switch(intent.type){\n        case \"count\":\n            if (intent.target === \"collections\") {\n                return await countCollections();\n            }\n            if (intent.target === \"artists\") {\n                return await countArtistsAcrossDatabase();\n            }\n            if ((intent.target === \"images\" || intent.target === \"items\") && intent.filter) {\n                return await countImagesByArtistAcrossDatabase(intent.filter);\n            }\n            if (intent.target === \"total\") {\n                return await countTotalVectorsAcrossDatabase();\n            }\n            // Fallback for count operations\n            return await countTotalVectorsAcrossDatabase();\n        case \"collections\":\n            return await listCollections();\n        case \"database\":\n            return await describeDatabaseInfo();\n        case \"search\":\n            if (intent.filter) {\n                return await searchAcrossCollections(intent.filter, intent.limit || 10);\n            }\n            break;\n        case \"summarize\":\n            if (intent.filter) {\n                return await summarizeArtistAcrossDatabase(intent.filter, intent.limit || 20);\n            }\n            break;\n        case \"list\":\n            if (intent.target === \"artists\" || intent.target === \"entities\") {\n                return await listArtistsAcrossDatabase(intent.limit || 50);\n            }\n            break;\n        case \"top\":\n        case \"ranking\":\n            if (intent.target === \"entities\" && intent.sortBy === \"image_count\") {\n                return await getTopArtistsByImageCountAcrossDatabase(intent.limit || 1);\n            }\n            break;\n        default:\n            throw new Error(`Database-level query type '${intent.type}' not implemented yet`);\n    }\n    throw new Error(`Database-level query could not be executed: ${intent.type} ${intent.target}`);\n}\nasync function executeCollectionQuery(collection, intent) {\n    switch(intent.type){\n        case \"count\":\n            if (intent.target === \"artists\") {\n                return await countUniqueArtists(collection);\n            } else if ((intent.target === \"images\" || intent.target === \"items\") && intent.filter) {\n                return await countImagesByArtist(collection, intent.filter);\n            } else {\n                return await countTotal(collection);\n            }\n        case \"search\":\n            return await searchImages(collection, intent.filter, intent.limit || 10);\n        case \"summarize\":\n            return await summarizeArtistWork(collection, intent.filter, intent.limit || 20);\n        case \"analyze\":\n            return await analyzeArtistWork(collection, intent.filter, intent.limit || 50);\n        case \"list\":\n            if (intent.target === \"artists\" || intent.target === \"entities\") {\n                return await listUniqueArtists(collection, intent.limit || 50);\n            } else {\n                return await listImages(collection, intent.limit || 20);\n            }\n        case \"filter\":\n            return await filterImages(collection, intent.filter, intent.limit || 20);\n        case \"describe\":\n            return await describeCollection(collection);\n        case \"top\":\n        case \"ranking\":\n            if (intent.target === \"entities\" && intent.sortBy === \"image_count\") {\n                return await getTopArtistsByImageCountInCollection(collection, intent.limit || 1);\n            }\n            break;\n        default:\n            throw new Error(`Unknown collection-level query type: ${intent.type}`);\n    }\n}\n// New database-level functions\nasync function countCollections() {\n    const collectionsInfo = await _db__WEBPACK_IMPORTED_MODULE_2__.client.getCollections();\n    const collections = collectionsInfo.collections.map((c)=>c.name);\n    return {\n        count: collections.length,\n        collections: collections\n    };\n}\nasync function listCollections() {\n    const collectionsInfo = await _db__WEBPACK_IMPORTED_MODULE_2__.client.getCollections();\n    const collections = collectionsInfo.collections;\n    // Get detailed info for each collection using actual count\n    const detailedCollections = await Promise.all(collections.map(async (collection)=>{\n        try {\n            // Use the same count method that works for individual queries\n            const countResult = await _db__WEBPACK_IMPORTED_MODULE_2__.client.count(collection.name, {});\n            return {\n                name: collection.name,\n                vectors_count: countResult.count || 0\n            };\n        } catch (error) {\n            console.warn(`Failed to count vectors in collection ${collection.name}:`, error);\n            return {\n                name: collection.name,\n                vectors_count: 0\n            };\n        }\n    }));\n    return {\n        collections: detailedCollections\n    };\n}\nasync function describeDatabaseInfo() {\n    const collectionsData = await listCollections();\n    const totalVectors = collectionsData.collections.reduce((sum, col)=>sum + (col.vectors_count || 0), 0);\n    return {\n        total_collections: collectionsData.collections.length,\n        total_vectors: totalVectors,\n        collections: collectionsData.collections\n    };\n}\nasync function searchAcrossCollections(filter, limit) {\n    const collectionsData = await listCollections();\n    const allResults = [];\n    // Search each collection\n    for (const collection of collectionsData.collections){\n        try {\n            const results = await searchImages(collection.name, filter, limit);\n            if (results.images && results.images.length > 0) {\n                allResults.push({\n                    collection: collection.name,\n                    count: results.count,\n                    images: results.images\n                });\n            }\n        } catch (error) {\n            console.warn(`Failed to search collection ${collection.name}:`, error);\n        }\n    }\n    const totalCount = allResults.reduce((sum, result)=>sum + result.count, 0);\n    return {\n        total_count: totalCount,\n        collections_searched: collectionsData.collections.length,\n        results_by_collection: allResults\n    };\n}\n// Existing collection-level functions remain the same\nasync function countTotal(collection) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.count(collection, {});\n    return {\n        count: response.count\n    };\n}\nasync function countUniqueArtists(collection) {\n    // Get ALL points from the collection, not just 1000\n    let allPoints = [];\n    let offset = undefined;\n    // Scroll through all points in the collection\n    do {\n        const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n            limit: 1000,\n            ...offset !== undefined && {\n                offset\n            },\n            with_payload: true,\n            with_vector: false\n        });\n        allPoints.push(...response.points);\n        // Safely handle the offset type\n        const nextOffset = response.next_page_offset;\n        if (typeof nextOffset === \"string\" || typeof nextOffset === \"number\") {\n            offset = nextOffset;\n        } else {\n            offset = undefined;\n        }\n    }while (offset !== null && offset !== undefined);\n    const artists = new Set(allPoints.map((point)=>point.payload?.name).filter(Boolean));\n    return {\n        count: artists.size,\n        artists: Array.from(artists).slice(0, 20)\n    };\n}\nasync function searchImages(collection, filter, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    const limitedPoints = filteredPoints.slice(0, limit);\n    return {\n        count: limitedPoints.length,\n        images: limitedPoints\n    };\n}\nasync function listUniqueArtists(collection, limit) {\n    // Get ALL points from the collection to ensure accurate artist listing\n    let allPoints = [];\n    let offset = undefined;\n    // Scroll through all points in the collection\n    do {\n        const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n            limit: 1000,\n            ...offset !== undefined && {\n                offset\n            },\n            with_payload: true,\n            with_vector: false\n        });\n        allPoints.push(...response.points);\n        // Safely handle the offset type\n        const nextOffset = response.next_page_offset;\n        if (typeof nextOffset === \"string\" || typeof nextOffset === \"number\") {\n            offset = nextOffset;\n        } else {\n            offset = undefined;\n        }\n    }while (offset !== null && offset !== undefined);\n    const artists = new Set(allPoints.map((point)=>point.payload?.name).filter(Boolean));\n    // Return the requested number of artists\n    return {\n        artists: Array.from(artists).slice(0, limit)\n    };\n}\nasync function listImages(collection, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit,\n        with_payload: true,\n        with_vector: false\n    });\n    return {\n        count: response.points.length,\n        images: response.points.map((point)=>({\n                id: point.id,\n                artist: point.payload?.name,\n                filename: point.payload?.file_name\n            }))\n    };\n}\nasync function filterImages(collection, filter, limit) {\n    return await searchImages(collection, filter, limit);\n}\nasync function describeCollection(collection) {\n    const totalCount = await countTotal(collection);\n    const artistsData = await countUniqueArtists(collection);\n    const sampleImages = await listImages(collection, 5);\n    return {\n        total_images: totalCount.count,\n        unique_artists: artistsData.count,\n        sample_artists: artistsData.artists.slice(0, 10),\n        sample_images: sampleImages.images\n    };\n}\nasync function generateResponse(question, intent, data, provider, model) {\n    const fallbackResponse = generateFallbackResponse(question, intent, data);\n    if (!process.env.OPENAI_API_KEY && !process.env.GEMINI_API_KEY) {\n        return fallbackResponse;\n    }\n    const systemPrompt = `You are a helpful assistant that explains vector database query results in natural language.\n  \nThe user asked: \"${question}\"\nThe query type was: ${intent.type}\nThe data returned is: ${JSON.stringify(data, null, 2)}\n\nIMPORTANT GUIDELINES FOR RANKING/TOP QUERIES:\n- If there are ties (multiple artists with the same count), ALWAYS mention this explicitly\n- Don't say \"X has the most\" if there are ties - say \"X is tied for the most\" or \"X and Y are tied\"\n- Pay attention to the \"has_tie\", \"tie_count\", and \"artists_with_max_count\" fields in the data\n- Be precise with singular/plural forms (1 image vs 2 images)\n- If the user asked for \"the artist with most\" but there's a tie, explain the tie situation clearly\n\nProvide a concise, natural language response that directly answers the user's question. Be specific with numbers and names when available, and always be accurate about ties and rankings.`;\n    try {\n        let response;\n        if (provider === \"gemini\" && process.env.GEMINI_API_KEY) {\n            const geminiModel = genAI.getGenerativeModel({\n                model: model || \"gemini-2.0-flash\"\n            });\n            const result = await geminiModel.generateContent(systemPrompt);\n            response = result.response.text();\n        } else if (provider === \"openai\" && process.env.OPENAI_API_KEY) {\n            try {\n                const completion = await openai.chat.completions.create({\n                    model: model || \"gpt-3.5-turbo\",\n                    messages: [\n                        {\n                            role: \"system\",\n                            content: systemPrompt\n                        }\n                    ],\n                    temperature: 0.3,\n                    max_tokens: 200\n                });\n                response = completion.choices[0].message.content || fallbackResponse;\n            } catch (openaiError) {\n                console.warn(\"OpenAI failed in generateResponse, trying Gemini fallback:\", openaiError.message);\n                // Auto-fallback to Gemini if OpenAI fails\n                if (process.env.GEMINI_API_KEY) {\n                    const geminiModel1 = genAI.getGenerativeModel({\n                        model: \"gemini-2.0-flash\"\n                    });\n                    const result1 = await geminiModel1.generateContent(systemPrompt);\n                    response = result1.response.text();\n                } else {\n                    throw openaiError; // Re-throw if no Gemini fallback available\n                }\n            }\n        } else {\n            return fallbackResponse;\n        }\n        return response.trim();\n    } catch (error) {\n        console.warn(\"Failed to generate LLM response, using fallback:\", error);\n        return fallbackResponse;\n    }\n}\nfunction generateFallbackResponse(question, intent, data) {\n    // Safely handle null/undefined data\n    const safeData = data || {};\n    if (intent.scope === \"database\") {\n        switch(intent.type){\n            case \"count\":\n                if (intent.target === \"collections\") {\n                    return `I found ${safeData.count || 0} collections in the database: ${safeData.collections?.join(\", \") || \"None found\"}.`;\n                }\n                if (intent.target === \"artists\") {\n                    return `I found ${safeData.count || 0} unique artists across all collections. Some of them include: ${safeData.artists?.slice(0, 5).join(\", \") || \"No artists found\"}.`;\n                }\n                if (intent.target === \"images\" && intent.filter?.name) {\n                    return `I found ${safeData.count || 0} images by ${safeData.artist || intent.filter.name} across all collections. ${safeData.by_collection?.length > 0 ? `Found in: ${safeData.by_collection.map((c)=>`${c.collection} (${c.count})`).join(\", \")}.` : \"\"}`;\n                }\n                if (intent.target === \"total\") {\n                    return `The database contains ${safeData.count || 0} total vectors across all collections.`;\n                }\n                break;\n            case \"collections\":\n                return `The database contains ${safeData.collections?.length || 0} collections: ${safeData.collections?.map((c)=>`${c.name} (${c.vectors_count || 0} vectors)`).join(\", \") || \"None found\"}.`;\n            case \"database\":\n                return `The database contains ${safeData.total_collections || 0} collections with a total of ${safeData.total_vectors || 0} vectors.`;\n            case \"search\":\n                return `I searched across ${safeData.collections_searched || 0} collections and found ${safeData.total_count || 0} matching items.`;\n            case \"summarize\":\n                if (intent.filter?.name) {\n                    return `Summary of ${safeData.artist || intent.filter.name}'s work across the database:\\n\\n` + `Total Images: ${safeData.total_images || 0}\\n` + `Collections: Found in ${safeData.collections_found || 0} collections\\n` + `File Types: ${safeData.file_types?.join(\", \") || \"Various\"}\\n\\n` + `Breakdown by collection:\\n${safeData.by_collection?.map((c)=>`• ${c.collection}: ${c.image_count} images`).join(\"\\n\") || \"No collections found\"}\\n\\n` + `Sample Images: ${safeData.sample_images?.slice(0, 3).map((img)=>`${img.filename} (${img.collection})`).join(\", \") || \"None found\"}`;\n                }\n                break;\n            case \"list\":\n                if (intent.target === \"artists\") {\n                    return `I found ${safeData.artists?.length || 0} unique artists across all collections: ${safeData.artists?.slice(0, 10).join(\", \") || \"No artists found\"}.`;\n                }\n                break;\n        }\n    }\n    // Collection-level responses\n    switch(intent.type){\n        case \"count\":\n            if (intent.target === \"artists\") {\n                return `I found ${safeData.count || 0} unique artists in the collection. Some of them include: ${safeData.artists?.slice(0, 5).join(\", \") || \"No artists found\"}.`;\n            } else if (intent.target === \"images\" && intent.filter?.name) {\n                return `I found ${safeData.count || 0} images by ${safeData.artist || intent.filter.name} in this collection.${safeData.sample_images?.length > 0 ? ` Sample files: ${safeData.sample_images.slice(0, 3).map((img)=>img.filename).join(\", \")}.` : \"\"}`;\n            } else {\n                return `The collection contains ${safeData.count || 0} total images.`;\n            }\n        case \"search\":\n        case \"filter\":\n            return `I found ${safeData.count || 0} images matching your criteria.`;\n        case \"summarize\":\n            if (intent.filter?.name) {\n                return `Summary of ${safeData.artist || intent.filter.name}'s work in this collection:\\n\\n` + `Total Images: ${safeData.total_images || 0}\\n` + `File Types: ${safeData.file_types?.join(\", \") || \"Various\"}\\n` + `Sample Files: ${safeData.sample_filenames?.slice(0, 5).join(\", \") || \"None\"}\\n\\n` + `Image Details:\\n${safeData.images?.slice(0, 5).map((img, i)=>`${i + 1}. ${img.filename || \"Unknown file\"}`).join(\"\\n\") || \"No images found\"}`;\n            }\n            break;\n        case \"analyze\":\n            if (intent.filter?.name) {\n                return `Analysis of ${safeData.artist || intent.filter.name}'s work patterns:\\n\\n` + `Total Images: ${safeData.total_images || 0}\\n` + `File Types: ${Object.entries(safeData.file_type_distribution || {}).map(([type, count])=>`${type} (${count})`).join(\", \") || \"Various\"}\\n` + `Common Patterns: ${Object.entries(safeData.common_naming_patterns || {}).slice(0, 3).map(([pattern, count])=>`\"${pattern}\" (${count} files)`).join(\", \") || \"No patterns found\"}\\n` + `Source Domains: ${Object.keys(safeData.source_domains || {}).join(\", \") || \"Various\"}`;\n            }\n            break;\n        case \"list\":\n            if (intent.target === \"artists\") {\n                return `Here are the artists in the collection: ${safeData.artists?.slice(0, 10).join(\", \") || \"No artists found\"}${safeData.artists?.length > 10 ? \"...\" : \"\"}.`;\n            } else {\n                return `I found ${safeData.count || 0} items in the collection.`;\n            }\n        case \"describe\":\n            return `This collection contains ${safeData.total_images || 0} images from ${safeData.unique_artists || 0} unique artists. Some featured artists include: ${safeData.sample_artists?.slice(0, 5).join(\", \") || \"No artists found\"}.`;\n        case \"top\":\n        case \"ranking\":\n            if (safeData.top_artists && safeData.top_artists.length > 0) {\n                // Check for ties at the top\n                if (safeData.has_tie && intent.limit === 1) {\n                    // Handle the case where user asked for \"the artist with most\" but there's a tie\n                    const tiedArtists = safeData.artists_with_max_count || safeData.top_artists.filter((artist)=>artist.image_count === safeData.max_image_count);\n                    if (tiedArtists.length === 2) {\n                        return `There's a tie! Both ${tiedArtists[0].name} and ${tiedArtists[1].name} have the most images with ${safeData.max_image_count} image${safeData.max_image_count === 1 ? \"\" : \"s\"} each.`;\n                    } else if (tiedArtists.length > 2) {\n                        const lastArtist = tiedArtists[tiedArtists.length - 1].name;\n                        const otherArtists = tiedArtists.slice(0, -1).map((a)=>a.name).join(\", \");\n                        return `There's a ${tiedArtists.length}-way tie! ${otherArtists}, and ${lastArtist} all have the most images with ${safeData.max_image_count} image${safeData.max_image_count === 1 ? \"\" : \"s\"} each.`;\n                    }\n                }\n                // Handle regular cases (no tie or user asked for multiple results)\n                if (intent.limit === 1 && !safeData.has_tie) {\n                    const topArtist = safeData.top_artists[0];\n                    return `${topArtist.name} has the most images with ${topArtist.image_count} image${topArtist.image_count === 1 ? \"\" : \"s\"}.`;\n                } else {\n                    // Multiple results or tie situation where we show the list\n                    const artistList = safeData.top_artists.map((artist, index)=>`${index + 1}. ${artist.name} (${artist.image_count} image${artist.image_count === 1 ? \"\" : \"s\"})`).join(\", \");\n                    let response = `Top ${intent.limit || safeData.top_artists.length} artists by image count: ${artistList}`;\n                    // Add tie information if relevant\n                    if (safeData.has_tie && safeData.tie_count > 1) {\n                        response += `. Note: ${safeData.tie_count} artists are tied for the highest count of ${safeData.max_image_count} image${safeData.max_image_count === 1 ? \"\" : \"s\"}.`;\n                    }\n                    return response;\n                }\n            }\n            return \"No artists found with images.\";\n        default:\n            return \"I processed your query successfully using pattern matching.\";\n    }\n    return \"I processed your query successfully.\";\n}\n// New database-level functions for artists and total counts\nasync function countArtistsAcrossDatabase() {\n    const collectionsData = await listCollections();\n    const allArtists = new Set();\n    // Collect artists from each collection\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const artistsData = await countUniqueArtists(collection.name);\n                artistsData.artists.forEach((artist)=>allArtists.add(artist));\n            }\n        } catch (error) {\n            console.warn(`Failed to get artists from collection ${collection.name}:`, error);\n        }\n    }\n    return {\n        count: allArtists.size,\n        artists: Array.from(allArtists).slice(0, 20)\n    };\n}\nasync function countTotalVectorsAcrossDatabase() {\n    const collectionsData = await listCollections();\n    const totalVectors = collectionsData.collections.reduce((sum, col)=>sum + (col.vectors_count || 0), 0);\n    return {\n        count: totalVectors,\n        by_collection: collectionsData.collections.map((col)=>({\n                name: col.name,\n                count: col.vectors_count || 0\n            }))\n    };\n}\nasync function listArtistsAcrossDatabase(limit) {\n    const collectionsData = await listCollections();\n    const allArtists = new Set();\n    const byCollection = [];\n    // Collect artists from each collection\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const artistsData = await listUniqueArtists(collection.name, Math.min(limit, 20));\n                artistsData.artists.forEach((artist)=>allArtists.add(artist));\n                byCollection.push({\n                    collection: collection.name,\n                    artists: artistsData.artists\n                });\n            }\n        } catch (error) {\n            console.warn(`Failed to get artists from collection ${collection.name}:`, error);\n        }\n    }\n    return {\n        artists: Array.from(allArtists).slice(0, limit),\n        by_collection: byCollection\n    };\n}\n// New function to count images by specific artist\nasync function countImagesByArtist(collection, filter) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    return {\n        count: filteredPoints.length,\n        artist: filter?.name || \"unknown\",\n        sample_images: filteredPoints.slice(0, 5).map((point)=>({\n                id: point.id,\n                filename: point.payload?.file_name,\n                url: point.payload?.image_url\n            }))\n    };\n}\n// New function to provide detailed summary of artist's work\nasync function summarizeArtistWork(collection, filter, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    const limitedPoints = filteredPoints.slice(0, limit);\n    // Analyze file types and patterns\n    const fileExtensions = new Set();\n    const fileNames = [];\n    const imageUrls = [];\n    limitedPoints.forEach((point)=>{\n        if (point.payload?.file_name) {\n            const ext = point.payload.file_name.split(\".\").pop()?.toLowerCase();\n            if (ext) fileExtensions.add(ext);\n            fileNames.push(point.payload.file_name);\n        }\n        if (point.payload?.image_url) {\n            imageUrls.push(point.payload.image_url);\n        }\n    });\n    return {\n        artist: filter?.name || \"unknown\",\n        total_images: filteredPoints.length,\n        displayed_images: limitedPoints.length,\n        file_types: Array.from(fileExtensions),\n        sample_filenames: fileNames.slice(0, 8),\n        sample_urls: imageUrls.slice(0, 5),\n        images: limitedPoints.map((point)=>({\n                id: point.id,\n                filename: point.payload?.file_name,\n                image_url: point.payload?.image_url,\n                style_url: point.payload?.url\n            }))\n    };\n}\n// New function to analyze artist's work patterns\nasync function analyzeArtistWork(collection, filter, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    // Analyze patterns in the artist's work\n    const fileTypes = new Map();\n    const namingPatterns = new Map();\n    const urlPatterns = new Map();\n    filteredPoints.forEach((point)=>{\n        // File type analysis\n        if (point.payload?.file_name) {\n            const ext = point.payload.file_name.split(\".\").pop()?.toLowerCase();\n            if (ext) {\n                fileTypes.set(ext, (fileTypes.get(ext) || 0) + 1);\n            }\n            // Naming pattern analysis\n            const namePattern = point.payload.file_name.replace(/\\d+/g, \"#\").replace(/\\.(jpg|jpeg|png|gif|webp)$/i, \"\");\n            namingPatterns.set(namePattern, (namingPatterns.get(namePattern) || 0) + 1);\n        }\n        // URL pattern analysis\n        if (point.payload?.url) {\n            const domain = point.payload.url.split(\"/\")[2];\n            if (domain) {\n                urlPatterns.set(domain, (urlPatterns.get(domain) || 0) + 1);\n            }\n        }\n    });\n    return {\n        artist: filter?.name || \"unknown\",\n        total_images: filteredPoints.length,\n        file_type_distribution: Object.fromEntries(fileTypes),\n        common_naming_patterns: Object.fromEntries(Array.from(namingPatterns.entries()).filter(([_, count])=>count > 1).sort((a, b)=>b[1] - a[1]).slice(0, 5)),\n        source_domains: Object.fromEntries(urlPatterns),\n        sample_images: filteredPoints.slice(0, 10).map((point)=>({\n                id: point.id,\n                filename: point.payload?.file_name,\n                image_url: point.payload?.image_url\n            }))\n    };\n}\n// New function to count specific artist images across all collections\nasync function countImagesByArtistAcrossDatabase(filter) {\n    const collectionsData = await listCollections();\n    const resultsByCollection = [];\n    let totalCount = 0;\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const result = await countImagesByArtist(collection.name, filter);\n                if (result.count > 0) {\n                    resultsByCollection.push({\n                        collection: collection.name,\n                        count: result.count\n                    });\n                    totalCount += result.count;\n                }\n            }\n        } catch (error) {\n            console.warn(`Failed to count images in collection ${collection.name}:`, error);\n        }\n    }\n    return {\n        count: totalCount,\n        artist: filter?.name || \"unknown\",\n        by_collection: resultsByCollection\n    };\n}\n// New function to summarize artist work across all collections\nasync function summarizeArtistAcrossDatabase(filter, limit) {\n    const collectionsData = await listCollections();\n    const allImages = [];\n    const collectionSummaries = [];\n    const fileTypes = new Set();\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const summary = await summarizeArtistWork(collection.name, filter, 50);\n                if (summary.total_images > 0) {\n                    collectionSummaries.push({\n                        collection: collection.name,\n                        ...summary\n                    });\n                    allImages.push(...summary.images);\n                    summary.file_types?.forEach((type)=>fileTypes.add(type));\n                }\n            }\n        } catch (error) {\n            console.warn(`Failed to summarize artist work in collection ${collection.name}:`, error);\n        }\n    }\n    const totalImages = allImages.length;\n    const displayedImages = allImages.slice(0, limit);\n    return {\n        artist: filter?.name || \"unknown\",\n        total_images: totalImages,\n        displayed_images: displayedImages.length,\n        collections_found: collectionSummaries.length,\n        file_types: Array.from(fileTypes),\n        by_collection: collectionSummaries.map((summary)=>({\n                collection: summary.collection,\n                image_count: summary.total_images,\n                sample_filenames: summary.sample_filenames?.slice(0, 3)\n            })),\n        sample_images: displayedImages.map((image)=>({\n                id: image.id,\n                filename: image.filename,\n                image_url: image.image_url,\n                collection: collectionSummaries.find((c)=>c.images?.some((img)=>img.id === image.id))?.collection\n            }))\n    };\n}\nasync function getTopArtistsByImageCountAcrossDatabase(limit) {\n    const collectionsData = await listCollections();\n    const artistCounts = {};\n    // Collect artist counts from all collections\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                // Get ALL points from the collection to count by artist\n                let allPoints = [];\n                let offset = undefined;\n                // Scroll through all points in the collection\n                do {\n                    const scrollResult = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection.name, {\n                        limit: 1000,\n                        ...offset !== undefined && {\n                            offset\n                        },\n                        with_payload: true\n                    });\n                    allPoints.push(...scrollResult.points);\n                    // Safely handle the offset type\n                    const nextOffset = scrollResult.next_page_offset;\n                    if (typeof nextOffset === \"string\" || typeof nextOffset === \"number\") {\n                        offset = nextOffset;\n                    } else {\n                        offset = undefined;\n                    }\n                }while (offset !== null && offset !== undefined);\n                for (const point of allPoints){\n                    const artistName = point.payload?.name;\n                    if (artistName && typeof artistName === \"string\") {\n                        if (!artistCounts[artistName]) {\n                            artistCounts[artistName] = {\n                                count: 0,\n                                collections: []\n                            };\n                        }\n                        artistCounts[artistName].count++;\n                        if (!artistCounts[artistName].collections.includes(collection.name)) {\n                            artistCounts[artistName].collections.push(collection.name);\n                        }\n                    }\n                }\n            }\n        } catch (error) {\n            console.warn(`Failed to get artists from collection ${collection.name}:`, error);\n        }\n    }\n    // Sort artists by image count\n    const sortedArtists = Object.entries(artistCounts).map(([name, data])=>({\n            name,\n            image_count: data.count,\n            collections: data.collections\n        })).sort((a, b)=>b.image_count - a.image_count);\n    // Analyze the distribution to detect ties\n    const maxCount = sortedArtists.length > 0 ? sortedArtists[0].image_count : 0;\n    const artistsWithMaxCount = sortedArtists.filter((artist)=>artist.image_count === maxCount);\n    const hasTie = artistsWithMaxCount.length > 1;\n    // Get the requested number of top artists\n    const topArtists = sortedArtists.slice(0, limit);\n    // Calculate some statistics\n    const totalImages = Object.values(artistCounts).reduce((sum, data)=>sum + data.count, 0);\n    const averageImagesPerArtist = totalImages / Object.keys(artistCounts).length;\n    // Group artists by image count for better analysis\n    const countGroups = {};\n    sortedArtists.forEach((artist)=>{\n        if (!countGroups[artist.image_count]) {\n            countGroups[artist.image_count] = [];\n        }\n        countGroups[artist.image_count].push(artist.name);\n    });\n    return {\n        top_artists: topArtists,\n        total_artists_found: Object.keys(artistCounts).length,\n        collections_searched: collectionsData.collections.length,\n        max_image_count: maxCount,\n        artists_with_max_count: artistsWithMaxCount,\n        has_tie: hasTie,\n        tie_count: artistsWithMaxCount.length,\n        total_images: totalImages,\n        average_images_per_artist: Math.round(averageImagesPerArtist * 100) / 100,\n        distribution: countGroups,\n        analysis: {\n            is_evenly_distributed: Object.keys(countGroups).length === Object.keys(artistCounts).length,\n            most_common_count: Object.entries(countGroups).sort((a, b)=>b[1].length - a[1].length)[0]?.[0] || \"0\"\n        }\n    };\n}\nasync function getTopArtistsByImageCountInCollection(collection, limit) {\n    // Get ALL points from the collection, not just 1000\n    let allPoints = [];\n    let offset = undefined;\n    // Scroll through all points in the collection\n    do {\n        const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n            limit: 1000,\n            ...offset !== undefined && {\n                offset\n            },\n            with_payload: true,\n            with_vector: false\n        });\n        allPoints.push(...response.points);\n        // Safely handle the offset type\n        const nextOffset = response.next_page_offset;\n        if (typeof nextOffset === \"string\" || typeof nextOffset === \"number\") {\n            offset = nextOffset;\n        } else {\n            offset = undefined;\n        }\n    }while (offset !== null && offset !== undefined);\n    const artistCounts = {};\n    for (const point of allPoints){\n        const artistName = point.payload?.name;\n        if (artistName && typeof artistName === \"string\") {\n            if (!artistCounts[artistName]) {\n                artistCounts[artistName] = 0;\n            }\n            artistCounts[artistName]++;\n        }\n    }\n    const sortedArtists = Object.entries(artistCounts).map(([name, count])=>({\n            name,\n            image_count: count\n        })).sort((a, b)=>b.image_count - a.image_count);\n    // Analyze the distribution to detect ties\n    const maxCount = sortedArtists.length > 0 ? sortedArtists[0].image_count : 0;\n    const artistsWithMaxCount = sortedArtists.filter((artist)=>artist.image_count === maxCount);\n    const hasTie = artistsWithMaxCount.length > 1;\n    // Get the requested number of top artists\n    const topArtists = sortedArtists.slice(0, limit);\n    // Calculate some statistics\n    const totalImages = Object.values(artistCounts).reduce((sum, count)=>sum + count, 0);\n    const averageImagesPerArtist = totalImages / Object.keys(artistCounts).length;\n    // Group artists by image count for better analysis\n    const countGroups = {};\n    sortedArtists.forEach((artist)=>{\n        if (!countGroups[artist.image_count]) {\n            countGroups[artist.image_count] = [];\n        }\n        countGroups[artist.image_count].push(artist.name);\n    });\n    return {\n        top_artists: topArtists,\n        total_artists_found: Object.keys(artistCounts).length,\n        collections_searched: 1,\n        max_image_count: maxCount,\n        artists_with_max_count: artistsWithMaxCount,\n        has_tie: hasTie,\n        tie_count: artistsWithMaxCount.length,\n        total_images: totalImages,\n        average_images_per_artist: Math.round(averageImagesPerArtist * 100) / 100,\n        distribution: countGroups,\n        analysis: {\n            is_evenly_distributed: Object.keys(countGroups).length === Object.keys(artistCounts).length,\n            most_common_count: Object.entries(countGroups).sort((a, b)=>b[1].length - a[1].length)[0]?.[0] || \"0\"\n        }\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ3JILElBQUksQ0FBQyxDQUFDO0lBQ3BELENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTztRQUNMNkksV0FBVyxFQUFFdUQsVUFBVTtRQUN2QkksbUJBQW1CLEVBQUV6RixNQUFNLENBQUM0QixJQUFJLENBQUNrRCxZQUFZLENBQUMsQ0FBQzFNLE1BQU07UUFDckQwRyxvQkFBb0IsRUFBRSxDQUFDO1FBQ3ZCb0QsZUFBZSxFQUFFZ0QsUUFBUTtRQUN6QmpELHNCQUFzQixFQUFFa0QsbUJBQW1CO1FBQzNDcEQsT0FBTyxFQUFFcUQsTUFBTTtRQUNmNUMsU0FBUyxFQUFFMkMsbUJBQW1CLENBQUMvTSxNQUFNO1FBQ3JDdUksWUFBWSxFQUFFOEQsV0FBVztRQUN6QmlCLHlCQUF5QixFQUFFOUMsSUFBSSxDQUFDK0MsS0FBSyxDQUFDSixzQkFBc0IsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHO1FBQ3pFSyxZQUFZLEVBQUVKLFdBQVc7UUFDekJLLFFBQVEsRUFBRTtZQUNSQyxxQkFBcUIsRUFDbkI5RixNQUFNLENBQUM0QixJQUFJLENBQUM0RCxXQUFXLENBQUMsQ0FBQ3BOLE1BQU0sS0FBSzRILE1BQU0sQ0FBQzRCLElBQUksQ0FBQ2tELFlBQVksQ0FBQyxDQUFDMU0sTUFBTTtZQUN0RTJOLGlCQUFpQixFQUNmL0YsTUFBTSxDQUFDQyxPQUFPLENBQUN1RixXQUFXLENBQUMsQ0FBQ3JCLElBQUksQ0FDOUIsQ0FBQzlCLENBQUMsRUFBRStCLENBQUMsR0FBS0EsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDaE0sTUFBTSxHQUFHaUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDakssTUFBTSxDQUNwQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRztTQUNuQjtLQUNGLENBQUM7QUFDSixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWVhcm4vLi9saWIvcWRyYW50L25scC1xdWVyeS50cz80NzRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPcGVuQUkgZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJIH0gZnJvbSBcIkBnb29nbGUvZ2VuZXJhdGl2ZS1haVwiO1xuaW1wb3J0IHsgY2xpZW50IH0gZnJvbSBcIi4vZGJcIjtcbmltcG9ydCB7IEVtYmVkZGluZ1Byb3ZpZGVyIH0gZnJvbSBcIi4uL3NjaGVtYXNcIjtcbmltcG9ydCB7IENvbnZlcnNhdGlvbkNvbnRleHQsIENvbnZlcnNhdGlvblR1cm4gfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG59KTtcblxuY29uc3QgZ2VuQUkgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZIHx8IFwiXCIpO1xuXG5pbnRlcmZhY2UgUXVlcnlJbnRlbnQge1xuICB0eXBlOlxuICAgIHwgXCJjb3VudFwiXG4gICAgfCBcInNlYXJjaFwiXG4gICAgfCBcImxpc3RcIlxuICAgIHwgXCJmaWx0ZXJcIlxuICAgIHwgXCJkZXNjcmliZVwiXG4gICAgfCBcImNvbGxlY3Rpb25zXCJcbiAgICB8IFwiZGF0YWJhc2VcIlxuICAgIHwgXCJzdW1tYXJpemVcIlxuICAgIHwgXCJhbmFseXplXCJcbiAgICB8IFwidG9wXCJcbiAgICB8IFwicmFua2luZ1wiOyAvLyBBZGQgbmV3IHF1ZXJ5IHR5cGVzIGZvciBjb21wbGV4IHF1ZXJpZXNcbiAgdGFyZ2V0OiBzdHJpbmc7IC8vIHdoYXQgdG8gY291bnQvc2VhcmNoL2xpc3RcbiAgZmlsdGVyPzogYW55OyAvLyBhbnkgZmlsdGVycyB0byBhcHBseVxuICBsaW1pdD86IG51bWJlcjtcbiAgc2NvcGU6IFwiY29sbGVjdGlvblwiIHwgXCJkYXRhYmFzZVwiOyAvLyBuZXc6IHNjb3BlIG9mIHRoZSBxdWVyeVxuICBleHRyYWN0ZWRDb2xsZWN0aW9uPzogc3RyaW5nOyAvLyBuZXc6IGNvbGxlY3Rpb24gbmFtZSBleHRyYWN0ZWQgZnJvbSBxdWVyeSB0ZXh0XG4gIHNvcnRCeT86IHN0cmluZzsgLy8gbmV3OiB3aGF0IHRvIHNvcnQgYnkgKGUuZy4sIFwiaW1hZ2VfY291bnRcIiwgXCJwb3B1bGFyaXR5XCIpXG4gIHNvcnRPcmRlcj86IFwiYXNjXCIgfCBcImRlc2NcIjsgLy8gbmV3OiBzb3J0IG9yZGVyXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzTmF0dXJhbFF1ZXJ5KFxuICBjb2xsZWN0aW9uOiBzdHJpbmcgfCBudWxsLCAvLyBNYWtlIGNvbGxlY3Rpb24gb3B0aW9uYWxcbiAgcXVlc3Rpb246IHN0cmluZyxcbiAgcHJvdmlkZXI6IEVtYmVkZGluZ1Byb3ZpZGVyID0gXCJvcGVuYWlcIixcbiAgbW9kZWw/OiBzdHJpbmcsIC8vIEFkZCBzcGVjaWZpYyBtb2RlbCBwYXJhbWV0ZXJcbiAgY29udGV4dD86IENvbnZlcnNhdGlvbkNvbnRleHQgLy8gQWRkIGNvbnZlcnNhdGlvbiBjb250ZXh0XG4pOiBQcm9taXNlPHtcbiAgYW5zd2VyOiBzdHJpbmc7XG4gIHF1ZXJ5X3R5cGU6IHN0cmluZztcbiAgZGF0YT86IGFueTtcbiAgZXhlY3V0aW9uX3RpbWVfbXM6IG51bWJlcjtcbiAgY29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dDsgLy8gUmV0dXJuIHVwZGF0ZWQgY29udGV4dFxufT4ge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gIHRyeSB7XG4gICAgLy8gU3RlcCAxOiBSZXNvbHZlIGNvbnRleHQgYW5kIGVucmljaCB0aGUgcXVlc3Rpb25cbiAgICBjb25zdCB7IGVucmljaGVkUXVlc3Rpb24sIHJlc29sdmVkQ29sbGVjdGlvbiwgdXBkYXRlZENvbnRleHQgfSA9XG4gICAgICBhd2FpdCByZXNvbHZlQ29udGV4dChxdWVzdGlvbiwgY29sbGVjdGlvbiwgY29udGV4dCk7XG5cbiAgICAvLyBTdGVwIDI6IFBhcnNlIGludGVudCB3aXRoIGNvbnRleHQgYXdhcmVuZXNzXG4gICAgY29uc3QgaW50ZW50ID0gYXdhaXQgcGFyc2VRdWVyeUludGVudChcbiAgICAgIGVucmljaGVkUXVlc3Rpb24sXG4gICAgICBwcm92aWRlcixcbiAgICAgIG1vZGVsLFxuICAgICAgdXBkYXRlZENvbnRleHRcbiAgICApO1xuXG4gICAgLy8gU3RlcCAzOiBVc2UgcmVzb2x2ZWQgY29sbGVjdGlvbiBvciBleHRyYWN0ZWQgY29sbGVjdGlvblxuICAgIGNvbnN0IGZpbmFsQ29sbGVjdGlvbiA9XG4gICAgICByZXNvbHZlZENvbGxlY3Rpb24gfHwgaW50ZW50LmV4dHJhY3RlZENvbGxlY3Rpb24gfHwgbnVsbDtcblxuICAgIC8vIFN0ZXAgNDogRXhlY3V0ZSB0aGUgYXBwcm9wcmlhdGUgb3BlcmF0aW9uXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KGZpbmFsQ29sbGVjdGlvbiwgaW50ZW50KTtcblxuICAgIC8vIFN0ZXAgNTogR2VuZXJhdGUgbmF0dXJhbCBsYW5ndWFnZSByZXNwb25zZVxuICAgIGNvbnN0IGFuc3dlciA9IGF3YWl0IGdlbmVyYXRlUmVzcG9uc2UoXG4gICAgICBlbnJpY2hlZFF1ZXN0aW9uLFxuICAgICAgaW50ZW50LFxuICAgICAgcmVzdWx0LFxuICAgICAgcHJvdmlkZXIsXG4gICAgICBtb2RlbFxuICAgICk7XG5cbiAgICAvLyBTdGVwIDY6IFVwZGF0ZSBjb252ZXJzYXRpb24gY29udGV4dFxuICAgIGNvbnN0IGZpbmFsQ29udGV4dCA9IHVwZGF0ZUNvbnZlcnNhdGlvbkNvbnRleHQoXG4gICAgICB1cGRhdGVkQ29udGV4dCxcbiAgICAgIHF1ZXN0aW9uLFxuICAgICAgaW50ZW50LFxuICAgICAgcmVzdWx0LFxuICAgICAgZmluYWxDb2xsZWN0aW9uXG4gICAgKTtcblxuICAgIGNvbnN0IGV4ZWN1dGlvbl90aW1lX21zID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgIHJldHVybiB7XG4gICAgICBhbnN3ZXIsXG4gICAgICBxdWVyeV90eXBlOiBpbnRlbnQudHlwZSxcbiAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgIGV4ZWN1dGlvbl90aW1lX21zLFxuICAgICAgY29udGV4dDogZmluYWxDb250ZXh0LFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgbmF0dXJhbCBxdWVyeTpcIiwgZXJyb3IpO1xuXG4gICAgLy8gQ3JlYXRlIGZhbGxiYWNrIHJlc3BvbnNlXG4gICAgY29uc3QgZmFsbGJhY2tBbnN3ZXIgPVxuICAgICAgXCJJIGVuY291bnRlcmVkIGFuIGlzc3VlIHByb2Nlc3NpbmcgeW91ciBxdWVyeSwgYnV0IEknbSB1c2luZyBwYXR0ZXJuIG1hdGNoaW5nIHRvIGhlbHAuIFwiICtcbiAgICAgIGdlbmVyYXRlRmFsbGJhY2tSZXNwb25zZShcbiAgICAgICAgcXVlc3Rpb24sXG4gICAgICAgIGluZmVySW50ZW50RnJvbVF1ZXN0aW9uKHF1ZXN0aW9uLCBjb250ZXh0KSxcbiAgICAgICAge1xuICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFuc3dlcjogZmFsbGJhY2tBbnN3ZXIsXG4gICAgICBxdWVyeV90eXBlOiBcImZhbGxiYWNrXCIsXG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgZXhlY3V0aW9uX3RpbWVfbXM6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICBjb250ZXh0OiBjb250ZXh0IHx8IHsgY29udmVyc2F0aW9uSGlzdG9yeTogW10gfSxcbiAgICB9O1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlc29sdmVDb250ZXh0KFxuICBxdWVzdGlvbjogc3RyaW5nLFxuICBjb2xsZWN0aW9uOiBzdHJpbmcgfCBudWxsLFxuICBjb250ZXh0PzogQ29udmVyc2F0aW9uQ29udGV4dFxuKTogUHJvbWlzZTx7XG4gIGVucmljaGVkUXVlc3Rpb246IHN0cmluZztcbiAgcmVzb2x2ZWRDb2xsZWN0aW9uOiBzdHJpbmcgfCBudWxsO1xuICB1cGRhdGVkQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dDtcbn0+IHtcbiAgLy8gSW5pdGlhbGl6ZSBjb250ZXh0IGlmIG5vdCBwcm92aWRlZFxuICBjb25zdCBjdXJyZW50Q29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dCA9IGNvbnRleHQgfHwge1xuICAgIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IFtdLFxuICB9O1xuXG4gIGxldCBlbnJpY2hlZFF1ZXN0aW9uID0gcXVlc3Rpb247XG4gIGxldCByZXNvbHZlZENvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuXG4gIGNvbnNvbGUubG9nKFwi8J+noCBDT05URVhUIFJFU09MVVRJT046XCIpO1xuICBjb25zb2xlLmxvZyhcIk9yaWdpbmFsIHF1ZXN0aW9uOlwiLCBxdWVzdGlvbik7XG4gIGNvbnNvbGUubG9nKFwiQ3VycmVudCBjb250ZXh0OlwiLCBKU09OLnN0cmluZ2lmeShjdXJyZW50Q29udGV4dCwgbnVsbCwgMikpO1xuXG4gIC8vIERldGVjdCBjb250ZXh0dWFsIHJlZmVyZW5jZXNcbiAgY29uc3QgbG93ZXJjYXNlUXVlc3Rpb24gPSBxdWVzdGlvbi50b0xvd2VyQ2FzZSgpO1xuXG4gIC8vIEhhbmRsZSBwcm9ub3VuIHJlZmVyZW5jZXMgdG8gZW50aXRpZXNcbiAgaWYgKFxuICAgIChsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcInRoZWlyXCIpIHx8XG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcImhpc1wiKSB8fFxuICAgICAgbG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJoZXJcIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiaXRzXCIpKSAmJlxuICAgIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHlcbiAgKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBcIvCflIQgUmVzb2x2aW5nIHBvc3Nlc3NpdmUgcHJvbm91biB0bzpcIixcbiAgICAgIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHlcbiAgICApO1xuICAgIGVucmljaGVkUXVlc3Rpb24gPSBlbnJpY2hlZFF1ZXN0aW9uLnJlcGxhY2UoXG4gICAgICAvXFxiKHRoZWlyfGhpc3xoZXJ8aXRzKVxcYi9naSxcbiAgICAgIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHkgKyBcIidzXCJcbiAgICApO1xuICB9XG5cbiAgLy8gSGFuZGxlIFwiaGVcIiBhbmQgXCJoaW1cIiByZWZlcmVuY2VzXG4gIGlmIChcbiAgICAobG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJoZSBcIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiaGltIFwiKSB8fFxuICAgICAgbG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCIgaGVcIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiIGhpbVwiKSkgJiZcbiAgICBjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5XG4gICkge1xuICAgIGNvbnNvbGUubG9nKFwi8J+UhCBSZXNvbHZpbmcgJ2hlL2hpbScgdG86XCIsIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHkpO1xuICAgIGVucmljaGVkUXVlc3Rpb24gPSBlbnJpY2hlZFF1ZXN0aW9uLnJlcGxhY2UoXG4gICAgICAvXFxiKGhlfGhpbSlcXGIvZ2ksXG4gICAgICBjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5XG4gICAgKTtcbiAgfVxuXG4gIC8vIEhhbmRsZSBcImFsc29cIiByZWZlcmVuY2VzXG4gIGlmIChsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcImFsc29cIikgJiYgY3VycmVudENvbnRleHQubGFzdEVudGl0eSkge1xuICAgIGlmICghZW5yaWNoZWRRdWVzdGlvbi5pbmNsdWRlcyhjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5KSkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIFwi8J+UhCBSZXNvbHZpbmcgJ2Fsc28nIHJlZmVyZW5jZSB0bzpcIixcbiAgICAgICAgY3VycmVudENvbnRleHQubGFzdEVudGl0eVxuICAgICAgKTtcbiAgICAgIGVucmljaGVkUXVlc3Rpb24gPSBlbnJpY2hlZFF1ZXN0aW9uLnJlcGxhY2UoXG4gICAgICAgIC9hbHNvL2ksXG4gICAgICAgIGBhbHNvIGZvciAke2N1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHl9YFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgXCJ0aGVtXCIgcmVmZXJlbmNlc1xuICBpZiAobG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJ0aGVtXCIpICYmIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHkpIHtcbiAgICBjb25zb2xlLmxvZyhcIvCflIQgUmVzb2x2aW5nICd0aGVtJyB0bzpcIiwgY3VycmVudENvbnRleHQubGFzdEVudGl0eSk7XG4gICAgZW5yaWNoZWRRdWVzdGlvbiA9IGVucmljaGVkUXVlc3Rpb24ucmVwbGFjZShcbiAgICAgIC9cXGJ0aGVtXFxiL2dpLFxuICAgICAgY3VycmVudENvbnRleHQubGFzdEVudGl0eVxuICAgICk7XG4gIH1cblxuICAvLyBIYW5kbGUgXCJ0aGV5XCIgcmVmZXJlbmNlc1xuICBpZiAobG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJ0aGV5XCIpICYmIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHkpIHtcbiAgICBjb25zb2xlLmxvZyhcIvCflIQgUmVzb2x2aW5nICd0aGV5JyB0bzpcIiwgY3VycmVudENvbnRleHQubGFzdEVudGl0eSk7XG4gICAgZW5yaWNoZWRRdWVzdGlvbiA9IGVucmljaGVkUXVlc3Rpb24ucmVwbGFjZShcbiAgICAgIC9cXGJ0aGV5XFxiL2dpLFxuICAgICAgY3VycmVudENvbnRleHQubGFzdEVudGl0eVxuICAgICk7XG4gIH1cblxuICAvLyBIYW5kbGUgXCJpdFwiIHJlZmVyZW5jZXMgdG8gY29sbGVjdGlvbnNcbiAgaWYgKGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiaXRcIikgJiYgY3VycmVudENvbnRleHQubGFzdENvbGxlY3Rpb24pIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwi8J+UhCBSZXNvbHZpbmcgJ2l0JyB0byBjb2xsZWN0aW9uOlwiLFxuICAgICAgY3VycmVudENvbnRleHQubGFzdENvbGxlY3Rpb25cbiAgICApO1xuICAgIGVucmljaGVkUXVlc3Rpb24gPSBlbnJpY2hlZFF1ZXN0aW9uLnJlcGxhY2UoXG4gICAgICAvXFxiaXRcXGIvZ2ksXG4gICAgICBjdXJyZW50Q29udGV4dC5sYXN0Q29sbGVjdGlvblxuICAgICk7XG4gIH1cblxuICAvLyBIYW5kbGUgY29udGludWF0aW9uIHBocmFzZXNcbiAgaWYgKFxuICAgIChsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcIndoYXQgYWJvdXRcIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiaG93IGFib3V0XCIpIHx8XG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcImFuZFwiKSkgJiZcbiAgICBjdXJyZW50Q29udGV4dC5sYXN0UXVlcnlUeXBlICYmXG4gICAgY3VycmVudENvbnRleHQubGFzdFRhcmdldFxuICApIHtcbiAgICAvLyBJZiBxdWVzdGlvbiBpcyBsaWtlIFwid2hhdCBhYm91dCBKb2huIERvZT9cIiwgZXhwYW5kIHRvIGZ1bGwgY29udGV4dFxuICAgIGNvbnN0IGVudGl0eU1hdGNoID0gcXVlc3Rpb24ubWF0Y2goXG4gICAgICAvKD86d2hhdCBhYm91dHxob3cgYWJvdXR8YW5kKVxccysoW0EtWl1bYS16XSsoPzpcXHMrW0EtWl1bYS16XSspKikvaVxuICAgICk7XG4gICAgaWYgKGVudGl0eU1hdGNoKSB7XG4gICAgICBjb25zdCBuZXdFbnRpdHkgPSBlbnRpdHlNYXRjaFsxXTtcbiAgICAgIGNvbnN0IGxhc3RRdWVyeVR5cGUgPSBjdXJyZW50Q29udGV4dC5sYXN0UXVlcnlUeXBlO1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIFwi8J+UhCBSZXNvbHZpbmcgY29udGludWF0aW9uIHRvOlwiLFxuICAgICAgICBgJHtsYXN0UXVlcnlUeXBlfSAke2N1cnJlbnRDb250ZXh0Lmxhc3RUYXJnZXR9IGJ5ICR7bmV3RW50aXR5fWBcbiAgICAgICk7XG4gICAgICBlbnJpY2hlZFF1ZXN0aW9uID0gYCR7bGFzdFF1ZXJ5VHlwZX0gJHtjdXJyZW50Q29udGV4dC5sYXN0VGFyZ2V0fSBieSAke25ld0VudGl0eX1gO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlc29sdmUgY29sbGVjdGlvbiBjb250ZXh0XG4gIGlmICghcmVzb2x2ZWRDb2xsZWN0aW9uICYmIGN1cnJlbnRDb250ZXh0Lmxhc3RDb2xsZWN0aW9uKSB7XG4gICAgLy8gSWYgbm8gY29sbGVjdGlvbiBzcGVjaWZpZWQgYnV0IHdlIGhhdmUgY29udGV4dCwgY2hlY2sgaWYgcXVlcnkgc2VlbXMgY29sbGVjdGlvbi1zcGVjaWZpY1xuICAgIGlmIChcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwidGhpcyBjb2xsZWN0aW9uXCIpIHx8XG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcInRoYXQgY29sbGVjdGlvblwiKSB8fFxuICAgICAgbG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJzYW1lIGNvbGxlY3Rpb25cIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwidGhlIGNvbGxlY3Rpb25cIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiaW4gdGhhdFwiKSB8fFxuICAgICAgbG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJpbiB0aGlzXCIpIHx8XG4gICAgICAoIWxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiYWxsIGNvbGxlY3Rpb25zXCIpICYmXG4gICAgICAgICFsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcImRhdGFiYXNlXCIpICYmXG4gICAgICAgICFsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcImFjcm9zcyBjb2xsZWN0aW9uc1wiKSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIvCflIQgUmVzb2x2aW5nIGNvbGxlY3Rpb24gY29udGV4dCB0bzpcIixcbiAgICAgICAgY3VycmVudENvbnRleHQubGFzdENvbGxlY3Rpb25cbiAgICAgICk7XG4gICAgICByZXNvbHZlZENvbGxlY3Rpb24gPSBjdXJyZW50Q29udGV4dC5sYXN0Q29sbGVjdGlvbjtcbiAgICB9XG4gIH1cblxuICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBxdWVyaWVzIHRoYXQgcmVmZXJlbmNlIHByZXZpb3VzIHJlc3VsdHNcbiAgaWYgKGN1cnJlbnRDb250ZXh0LmNvbnZlcnNhdGlvbkhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGxhc3RUdXJuID1cbiAgICAgIGN1cnJlbnRDb250ZXh0LmNvbnZlcnNhdGlvbkhpc3RvcnlbXG4gICAgICAgIGN1cnJlbnRDb250ZXh0LmNvbnZlcnNhdGlvbkhpc3RvcnkubGVuZ3RoIC0gMVxuICAgICAgXTtcblxuICAgIC8vIElmIHRoZSBsYXN0IHF1ZXJ5IHJldHVybmVkIGNvbGxlY3Rpb24tc3BlY2lmaWMgcmVzdWx0cywgdXNlIHRoYXQgY29sbGVjdGlvblxuICAgIGlmIChsYXN0VHVybi5yZXN1bHQ/LnJlc3VsdHNfYnlfY29sbGVjdGlvbiAmJiAhcmVzb2x2ZWRDb2xsZWN0aW9uKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uc1dpdGhSZXN1bHRzID1cbiAgICAgICAgbGFzdFR1cm4ucmVzdWx0LnJlc3VsdHNfYnlfY29sbGVjdGlvbi5maWx0ZXIoKHI6IGFueSkgPT4gci5jb3VudCA+IDApO1xuICAgICAgaWYgKGNvbGxlY3Rpb25zV2l0aFJlc3VsdHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIFwi8J+UhCBJbmZlcnJpbmcgY29sbGVjdGlvbiBmcm9tIHByZXZpb3VzIHJlc3VsdHM6XCIsXG4gICAgICAgICAgY29sbGVjdGlvbnNXaXRoUmVzdWx0c1swXS5jb2xsZWN0aW9uXG4gICAgICAgICk7XG4gICAgICAgIHJlc29sdmVkQ29sbGVjdGlvbiA9IGNvbGxlY3Rpb25zV2l0aFJlc3VsdHNbMF0uY29sbGVjdGlvbjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zb2xlLmxvZyhcIuKchSBFbnJpY2hlZCBxdWVzdGlvbjpcIiwgZW5yaWNoZWRRdWVzdGlvbik7XG4gIGNvbnNvbGUubG9nKFwi4pyFIFJlc29sdmVkIGNvbGxlY3Rpb246XCIsIHJlc29sdmVkQ29sbGVjdGlvbik7XG5cbiAgcmV0dXJuIHtcbiAgICBlbnJpY2hlZFF1ZXN0aW9uLFxuICAgIHJlc29sdmVkQ29sbGVjdGlvbixcbiAgICB1cGRhdGVkQ29udGV4dDogY3VycmVudENvbnRleHQsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNvbnZlcnNhdGlvbkNvbnRleHQoXG4gIGNvbnRleHQ6IENvbnZlcnNhdGlvbkNvbnRleHQsXG4gIHF1ZXN0aW9uOiBzdHJpbmcsXG4gIGludGVudDogUXVlcnlJbnRlbnQsXG4gIHJlc3VsdDogYW55LFxuICBjb2xsZWN0aW9uOiBzdHJpbmcgfCBudWxsXG4pOiBDb252ZXJzYXRpb25Db250ZXh0IHtcbiAgY29uc29sZS5sb2coXCLwn5K+IFVQREFUSU5HIENPTlZFUlNBVElPTiBDT05URVhUOlwiKTtcbiAgY29uc29sZS5sb2coXCJQcmV2aW91cyBjb250ZXh0OlwiLCBKU09OLnN0cmluZ2lmeShjb250ZXh0LCBudWxsLCAyKSk7XG4gIGNvbnNvbGUubG9nKFwiSW50ZW50OlwiLCBKU09OLnN0cmluZ2lmeShpbnRlbnQsIG51bGwsIDIpKTtcbiAgY29uc29sZS5sb2coXCJDb2xsZWN0aW9uOlwiLCBjb2xsZWN0aW9uKTtcblxuICAvLyBDcmVhdGUgbmV3IGNvbnZlcnNhdGlvbiB0dXJuXG4gIGNvbnN0IHR1cm46IENvbnZlcnNhdGlvblR1cm4gPSB7XG4gICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICBxdWVzdGlvbixcbiAgICBpbnRlbnQ6IHtcbiAgICAgIHR5cGU6IGludGVudC50eXBlLFxuICAgICAgdGFyZ2V0OiBpbnRlbnQudGFyZ2V0LFxuICAgICAgZmlsdGVyOiBpbnRlbnQuZmlsdGVyLFxuICAgICAgc2NvcGU6IGludGVudC5zY29wZSxcbiAgICAgIGV4dHJhY3RlZENvbGxlY3Rpb246IGludGVudC5leHRyYWN0ZWRDb2xsZWN0aW9uLFxuICAgIH0sXG4gICAgcmVzdWx0LFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgfTtcblxuICAvLyBVcGRhdGUgY29udGV4dFxuICBjb25zdCB1cGRhdGVkQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dCA9IHtcbiAgICAuLi5jb250ZXh0LFxuICAgIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IFsuLi5jb250ZXh0LmNvbnZlcnNhdGlvbkhpc3RvcnksIHR1cm5dLnNsaWNlKC0xMCksIC8vIEtlZXAgbGFzdCAxMCB0dXJuc1xuICB9O1xuXG4gIC8vIFVwZGF0ZSBsYXN0IGVudGl0eSBpZiBmaWx0ZXIgY29udGFpbnMgYSBuYW1lXG4gIGlmIChpbnRlbnQuZmlsdGVyPy5uYW1lKSB7XG4gICAgdXBkYXRlZENvbnRleHQubGFzdEVudGl0eSA9IGludGVudC5maWx0ZXIubmFtZTtcbiAgICBjb25zb2xlLmxvZyhcIvCfk50gVXBkYXRlZCBsYXN0RW50aXR5IHRvOlwiLCBpbnRlbnQuZmlsdGVyLm5hbWUpO1xuICB9XG5cbiAgLy8gVXBkYXRlIGxhc3QgY29sbGVjdGlvblxuICBpZiAoY29sbGVjdGlvbikge1xuICAgIHVwZGF0ZWRDb250ZXh0Lmxhc3RDb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICBjb25zb2xlLmxvZyhcIvCfk50gVXBkYXRlZCBsYXN0Q29sbGVjdGlvbiB0bzpcIiwgY29sbGVjdGlvbik7XG4gIH1cblxuICAvLyBVcGRhdGUgbGFzdCBxdWVyeSB0eXBlIGFuZCB0YXJnZXRcbiAgdXBkYXRlZENvbnRleHQubGFzdFF1ZXJ5VHlwZSA9IGludGVudC50eXBlO1xuICB1cGRhdGVkQ29udGV4dC5sYXN0VGFyZ2V0ID0gaW50ZW50LnRhcmdldDtcbiAgY29uc29sZS5sb2coXCLwn5OdIFVwZGF0ZWQgbGFzdFF1ZXJ5VHlwZSB0bzpcIiwgaW50ZW50LnR5cGUpO1xuICBjb25zb2xlLmxvZyhcIvCfk50gVXBkYXRlZCBsYXN0VGFyZ2V0IHRvOlwiLCBpbnRlbnQudGFyZ2V0KTtcblxuICAvLyBVcGRhdGUgY3VycmVudCB0b3BpYyBiYXNlZCBvbiBxdWVyeSBjb250ZW50XG4gIGlmIChpbnRlbnQuZmlsdGVyPy5uYW1lKSB7XG4gICAgdXBkYXRlZENvbnRleHQuY3VycmVudFRvcGljID0gYCR7aW50ZW50LmZpbHRlci5uYW1lfSAke2ludGVudC50YXJnZXR9YDtcbiAgICBjb25zb2xlLmxvZyhcIvCfk50gVXBkYXRlZCBjdXJyZW50VG9waWMgdG86XCIsIHVwZGF0ZWRDb250ZXh0LmN1cnJlbnRUb3BpYyk7XG4gIH1cblxuICBjb25zb2xlLmxvZyhcbiAgICBcIuKchSBGaW5hbCB1cGRhdGVkIGNvbnRleHQ6XCIsXG4gICAgSlNPTi5zdHJpbmdpZnkodXBkYXRlZENvbnRleHQsIG51bGwsIDIpXG4gICk7XG5cbiAgcmV0dXJuIHVwZGF0ZWRDb250ZXh0O1xufVxuXG5hc3luYyBmdW5jdGlvbiBwYXJzZVF1ZXJ5SW50ZW50KFxuICBxdWVzdGlvbjogc3RyaW5nLFxuICBwcm92aWRlcjogRW1iZWRkaW5nUHJvdmlkZXIsXG4gIG1vZGVsPzogc3RyaW5nLFxuICBjb250ZXh0PzogQ29udmVyc2F0aW9uQ29udGV4dFxuKTogUHJvbWlzZTxRdWVyeUludGVudD4ge1xuICAvLyBGaXJzdCB0cnkgc2ltcGxlIHBhdHRlcm4gbWF0Y2hpbmcgYXMgZmFsbGJhY2tcbiAgY29uc3QgZmFsbGJhY2tJbnRlbnQgPSBpbmZlckludGVudEZyb21RdWVzdGlvbihxdWVzdGlvbiwgY29udGV4dCk7XG5cbiAgLy8gQnVpbGQgY29udGV4dC1hd2FyZSBzeXN0ZW0gcHJvbXB0XG4gIGxldCBzeXN0ZW1Qcm9tcHQgPSBgWW91IGFyZSBhIHF1ZXJ5IGludGVudCBwYXJzZXIgZm9yIGEgdmVjdG9yIGRhdGFiYXNlIHN5c3RlbS4gUGFyc2UgdGhlIHVzZXIncyBxdWVzdGlvbiB0byBkZXRlcm1pbmU6XG4xLiBRdWVyeSB0eXBlIChjb3VudCwgc2VhcmNoLCBsaXN0LCBmaWx0ZXIsIGRlc2NyaWJlLCBzdW1tYXJpemUsIGFuYWx5emUsIGNvbGxlY3Rpb25zLCBkYXRhYmFzZSwgdG9wLCByYW5raW5nKVxuMi4gV2hhdCB0byB0YXJnZXQgKGl0ZW1zLCBlbnRpdGllcywgY29sbGVjdGlvbnMsIGV0Yy4pXG4zLiBBbnkgZmlsdGVycyB0byBhcHBseSAoZXNwZWNpYWxseSBlbnRpdHkgbmFtZXMpXG40LiBRdWVyeSBzY29wZSAoY29sbGVjdGlvbi1zcGVjaWZpYyBvciBkYXRhYmFzZS13aWRlKVxuNS4gQ29sbGVjdGlvbiBuYW1lIGlmIG1lbnRpb25lZFxuNi4gU29ydCBjcml0ZXJpYSBmb3IgcmFua2luZyBxdWVyaWVzXG5cbkF2YWlsYWJsZSBzY29wZXM6XG4tIFwiY29sbGVjdGlvblwiOiBxdWVyeSBvcGVyYXRlcyBvbiBhIHNwZWNpZmljIGNvbGxlY3Rpb25cbi0gXCJkYXRhYmFzZVwiOiBxdWVyeSBvcGVyYXRlcyBvbiB0aGUgZW50aXJlIGRhdGFiYXNlXG5cbkF2YWlsYWJsZSBxdWVyeSB0eXBlczpcbi0gXCJ0b3BcIjogZmluZCB0b3AgTiBpdGVtcyBieSBzb21lIGNyaXRlcmlhIChlLmcuLCBcInRvcCA1IGFydGlzdHMgYnkgaW1hZ2UgY291bnRcIilcbi0gXCJyYW5raW5nXCI6IHJhbmsgaXRlbXMgYnkgc29tZSBjcml0ZXJpYSAoZS5nLiwgXCJ3aGljaCBhcnRpc3QgaGFzIHRoZSBtb3N0IGltYWdlc1wiKVxuLSBcImNvdW50XCI6IGNvdW50IGl0ZW1zIG1hdGNoaW5nIGNyaXRlcmlhXG4tIFwic2VhcmNoXCI6IGZpbmQgc3BlY2lmaWMgaXRlbXNcbi0gXCJsaXN0XCI6IGxpc3QgaXRlbXMgb3IgZW50aXRpZXNcbi0gXCJzdW1tYXJpemVcIjogcHJvdmlkZSBzdW1tYXJ5IG9mIGl0ZW1zXG4tIFwiYW5hbHl6ZVwiOiBhbmFseXplIHBhdHRlcm5zIGluIGl0ZW1zXG5cbklNUE9SVEFOVDogRXh0cmFjdCBlbnRpdHkgbmFtZXMgZnJvbSBuYXR1cmFsIGxhbmd1YWdlIHZhcmlhdGlvbnM6XG4tIFwiYnkgW05hbWVdXCIsIFwiZnJvbSBbTmFtZV1cIiwgXCJvZiBbTmFtZV1cIlxuLSBcImRvbmUgYnkgW05hbWVdXCIsIFwiY3JlYXRlZCBieSBbTmFtZV1cIiwgXCJtYWRlIGJ5IFtOYW1lXVwiXG4tIFwicGllY2VzIGJ5IFtOYW1lXVwiLCBcIndvcmsgYnkgW05hbWVdXCIsIFwiaXRlbXMgYnkgW05hbWVdXCJcbi0gXCJbTmFtZV0gaXRlbXNcIiwgXCJbTmFtZV0gd29ya1wiLCBcIltOYW1lXSBwaWVjZXNcIlxuLSBMb29rIGZvciBwcm9wZXIgbm91bnMgKGNhcGl0YWxpemVkIG5hbWVzKSB0aGF0IGNvdWxkIGJlIGVudGl0aWVzXG5cbkZvciByYW5raW5nL3RvcCBxdWVyaWVzLCBpZGVudGlmeSB3aGF0IHRvIHNvcnQgYnk6XG4tIFwibW9zdCBpbWFnZXNcIiDihpIgc29ydEJ5OiBcImltYWdlX2NvdW50XCIsIHNvcnRPcmRlcjogXCJkZXNjXCJcbi0gXCJsZWFzdCBwb3B1bGFyXCIg4oaSIHNvcnRCeTogXCJwb3B1bGFyaXR5XCIsIHNvcnRPcmRlcjogXCJhc2NcIlxuLSBcInRvcCBhcnRpc3RzXCIg4oaSIHNvcnRCeTogXCJpbWFnZV9jb3VudFwiLCBzb3J0T3JkZXI6IFwiZGVzY1wiXG5cbldoZW4geW91IGZpbmQgYW4gZW50aXR5IG5hbWUsIHB1dCBpdCBpbiB0aGUgZmlsdGVyIHdpdGggYSBnZW5lcmljIGZpZWxkIG5hbWUgXCJuYW1lXCIuYDtcblxuICAvLyBBZGQgY29udmVyc2F0aW9uIGNvbnRleHQgaWYgYXZhaWxhYmxlXG4gIGlmIChjb250ZXh0ICYmIGNvbnRleHQuY29udmVyc2F0aW9uSGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgc3lzdGVtUHJvbXB0ICs9IGBcblxuQ09OVkVSU0FUSU9OIENPTlRFWFQ6XG5SZWNlbnQgY29udmVyc2F0aW9uIGhpc3RvcnkgKHVzZSB0aGlzIHRvIHJlc29sdmUgcmVmZXJlbmNlcyBhbmQgY29udGludWF0aW9ucyk6XG5gO1xuXG4gICAgLy8gQWRkIGxhc3QgZmV3IHR1cm5zIGZvciBjb250ZXh0XG4gICAgY29uc3QgcmVjZW50VHVybnMgPSBjb250ZXh0LmNvbnZlcnNhdGlvbkhpc3Rvcnkuc2xpY2UoLTMpO1xuICAgIHJlY2VudFR1cm5zLmZvckVhY2goKHR1cm4sIGluZGV4KSA9PiB7XG4gICAgICBzeXN0ZW1Qcm9tcHQgKz0gYFxuJHtpbmRleCArIDF9LiBVc2VyIGFza2VkOiBcIiR7dHVybi5xdWVzdGlvbn1cIlxuICAgSW50ZW50OiAke3R1cm4uaW50ZW50LnR5cGV9ICR7dHVybi5pbnRlbnQudGFyZ2V0fSR7XG4gICAgICAgIHR1cm4uaW50ZW50LmZpbHRlclxuICAgICAgICAgID8gYCAoZmlsdGVyOiAke0pTT04uc3RyaW5naWZ5KHR1cm4uaW50ZW50LmZpbHRlcil9KWBcbiAgICAgICAgICA6IFwiXCJcbiAgICAgIH1cbiAgIENvbGxlY3Rpb246ICR7dHVybi5pbnRlbnQuZXh0cmFjdGVkQ29sbGVjdGlvbiB8fCBcImRhdGFiYXNlLXdpZGVcIn1gO1xuICAgIH0pO1xuXG4gICAgaWYgKGNvbnRleHQubGFzdEVudGl0eSkge1xuICAgICAgc3lzdGVtUHJvbXB0ICs9IGBcbkxhc3QgbWVudGlvbmVkIGVudGl0eTogJHtjb250ZXh0Lmxhc3RFbnRpdHl9YDtcbiAgICB9XG5cbiAgICBpZiAoY29udGV4dC5sYXN0Q29sbGVjdGlvbikge1xuICAgICAgc3lzdGVtUHJvbXB0ICs9IGBcbkxhc3QgdXNlZCBjb2xsZWN0aW9uOiAke2NvbnRleHQubGFzdENvbGxlY3Rpb259YDtcbiAgICB9XG5cbiAgICBpZiAoY29udGV4dC5jdXJyZW50VG9waWMpIHtcbiAgICAgIHN5c3RlbVByb21wdCArPSBgXG5DdXJyZW50IGNvbnZlcnNhdGlvbiB0b3BpYzogJHtjb250ZXh0LmN1cnJlbnRUb3BpY31gO1xuICAgIH1cblxuICAgIHN5c3RlbVByb21wdCArPSBgXG5cblVzZSB0aGlzIGNvbnRleHQgdG8gcmVzb2x2ZSBwcm9ub3VucyAodGhleSwgdGhlbSwgdGhlaXIsIGl0KSwgY29udGludWF0aW9ucyAoYWxzbywgd2hhdCBhYm91dCksIGFuZCBpbXBsaWVkIHJlZmVyZW5jZXMuXG5Gb3IgZXhhbXBsZTpcbi0gXCJ0aGVpciB3b3JrXCIgd2hlbiBsYXN0IGVudGl0eSB3YXMgXCJKb2huIERvZVwiIHNob3VsZCBiZWNvbWUgZmlsdGVyOiB7XCJuYW1lXCI6IFwiSm9obiBEb2VcIn1cbi0gXCJ3aGF0IGFib3V0IEFsaWNlP1wiIGFmdGVyIGFza2luZyBhYm91dCBcIkpvaG4gRG9lJ3MgcGFpbnRpbmdzXCIgc2hvdWxkIGJlY29tZSBcInNlYXJjaCBwYWludGluZ3MgYnkgQWxpY2VcIlxuLSBcImFsc28gc2hvdyBtZSBCb2JcIiBhZnRlciBcImNvdW50IGl0ZW1zIGJ5IEFsaWNlXCIgc2hvdWxkIGJlY29tZSBcInNlYXJjaCBpdGVtcyBieSBCb2JcImA7XG4gIH1cblxuICBzeXN0ZW1Qcm9tcHQgKz0gYFxuXG5SZXR1cm4gT05MWSBhIEpTT04gb2JqZWN0IGluIHRoaXMgZm9ybWF0Olxue1xuICBcInR5cGVcIjogXCJjb3VudHxzZWFyY2h8bGlzdHxmaWx0ZXJ8ZGVzY3JpYmV8c3VtbWFyaXplfGFuYWx5emV8Y29sbGVjdGlvbnN8ZGF0YWJhc2V8dG9wfHJhbmtpbmdcIixcbiAgXCJ0YXJnZXRcIjogXCJ3aGF0IHRvIGNvdW50L3NlYXJjaC9saXN0IChlLmcuLCAnaXRlbXMnLCAnZW50aXRpZXMnLCAnY29sbGVjdGlvbnMnKVwiLFxuICBcImZpbHRlclwiOiB7XCJuYW1lXCI6IFwiZXh0cmFjdGVkX2VudGl0eV9uYW1lXCJ9IG9yIG51bGwsXG4gIFwibGltaXRcIjogbnVtYmVyIG9yIG51bGwsXG4gIFwic2NvcGVcIjogXCJjb2xsZWN0aW9ufGRhdGFiYXNlXCIsXG4gIFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiOiBcImNvbGxlY3Rpb25fbmFtZV9pZl9tZW50aW9uZWRfaW5fcXVlcnlcIiBvciBudWxsLFxuICBcInNvcnRCeVwiOiBcImltYWdlX2NvdW50fHBvcHVsYXJpdHl8bmFtZVwiIG9yIG51bGwsXG4gIFwic29ydE9yZGVyXCI6IFwiYXNjfGRlc2NcIiBvciBudWxsXG59XG5cbkV4YW1wbGVzOlxuLSBcIkhvdyBtYW55IGl0ZW1zIGJ5IEpvaG4gRG9lP1wiIOKGkiB7XCJ0eXBlXCI6IFwiY291bnRcIiwgXCJ0YXJnZXRcIjogXCJpdGVtc1wiLCBcImZpbHRlclwiOiB7XCJuYW1lXCI6IFwiSm9obiBEb2VcIn0sIFwibGltaXRcIjogbnVsbCwgXCJzY29wZVwiOiBcImRhdGFiYXNlXCIsIFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiOiBudWxsfVxuLSBcIldoaWNoIGFydGlzdCBoYXMgdGhlIG1vc3QgaW1hZ2VzP1wiIOKGkiB7XCJ0eXBlXCI6IFwicmFua2luZ1wiLCBcInRhcmdldFwiOiBcImVudGl0aWVzXCIsIFwiZmlsdGVyXCI6IG51bGwsIFwibGltaXRcIjogMSwgXCJzY29wZVwiOiBcImRhdGFiYXNlXCIsIFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiOiBudWxsLCBcInNvcnRCeVwiOiBcImltYWdlX2NvdW50XCIsIFwic29ydE9yZGVyXCI6IFwiZGVzY1wifVxuLSBcIlRvcCA1IGFydGlzdHMgYnkgaW1hZ2UgY291bnQgaW4gbXljb2xsZWN0aW9uXCIg4oaSIHtcInR5cGVcIjogXCJ0b3BcIiwgXCJ0YXJnZXRcIjogXCJlbnRpdGllc1wiLCBcImZpbHRlclwiOiBudWxsLCBcImxpbWl0XCI6IDUsIFwic2NvcGVcIjogXCJjb2xsZWN0aW9uXCIsIFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiOiBcIm15Y29sbGVjdGlvblwiLCBcInNvcnRCeVwiOiBcImltYWdlX2NvdW50XCIsIFwic29ydE9yZGVyXCI6IFwiZGVzY1wifVxuLSBcIldoaWNoIGFydGlzdCBpbiB0aGF0IGNvbGxlY3Rpb24gaGFzIHRoZSBtb3N0IGltYWdlcz9cIiDihpIge1widHlwZVwiOiBcInJhbmtpbmdcIiwgXCJ0YXJnZXRcIjogXCJlbnRpdGllc1wiLCBcImZpbHRlclwiOiBudWxsLCBcImxpbWl0XCI6IDEsIFwic2NvcGVcIjogXCJjb2xsZWN0aW9uXCIsIFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiOiBudWxsLCBcInNvcnRCeVwiOiBcImltYWdlX2NvdW50XCIsIFwic29ydE9yZGVyXCI6IFwiZGVzY1wifVxuLSBcIlN1bW1hcml6ZSBBbGljZSBTbWl0aCdzIHdvcmsgaW4gbXljb2xsZWN0aW9uXCIg4oaSIHtcInR5cGVcIjogXCJzdW1tYXJpemVcIiwgXCJ0YXJnZXRcIjogXCJpdGVtc1wiLCBcImZpbHRlclwiOiB7XCJuYW1lXCI6IFwiQWxpY2UgU21pdGhcIn0sIFwibGltaXRcIjogMTAsIFwic2NvcGVcIjogXCJjb2xsZWN0aW9uXCIsIFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiOiBcIm15Y29sbGVjdGlvblwifVxuLSBcIkNhbiB5b3Ugc3VtbWFyaXNlIHRoZSBwaWVjZXMgZG9uZSBieSBCb2IgSm9obnNvbj9cIiDihpIge1widHlwZVwiOiBcInN1bW1hcml6ZVwiLCBcInRhcmdldFwiOiBcIml0ZW1zXCIsIFwiZmlsdGVyXCI6IHtcIm5hbWVcIjogXCJCb2IgSm9obnNvblwifSwgXCJsaW1pdFwiOiAxMCwgXCJzY29wZVwiOiBcImRhdGFiYXNlXCIsIFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiOiBudWxsfVxuLSBcIkZpbmQgYWxsIE1hcmlhIEdhcmNpYSBhcnR3b3JrXCIg4oaSIHtcInR5cGVcIjogXCJzZWFyY2hcIiwgXCJ0YXJnZXRcIjogXCJpdGVtc1wiLCBcImZpbHRlclwiOiB7XCJuYW1lXCI6IFwiTWFyaWEgR2FyY2lhXCJ9LCBcImxpbWl0XCI6IDIwLCBcInNjb3BlXCI6IFwiZGF0YWJhc2VcIiwgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IG51bGx9XG4tIFwiU2hvdyBtZSBkYXRhIGNyZWF0ZWQgYnkgQUkgQXNzaXN0YW50XCIg4oaSIHtcInR5cGVcIjogXCJzZWFyY2hcIiwgXCJ0YXJnZXRcIjogXCJpdGVtc1wiLCBcImZpbHRlclwiOiB7XCJuYW1lXCI6IFwiQUkgQXNzaXN0YW50XCJ9LCBcImxpbWl0XCI6IDEwLCBcInNjb3BlXCI6IFwiZGF0YWJhc2VcIiwgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IG51bGx9YDtcblxuICB0cnkge1xuICAgIGxldCByZXNwb25zZTogc3RyaW5nO1xuXG4gICAgaWYgKHByb3ZpZGVyID09PSBcImdlbWluaVwiICYmIHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZKSB7XG4gICAgICBjb25zdCBnZW1pbmlNb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7XG4gICAgICAgIG1vZGVsOiBtb2RlbCB8fCBcImdlbWluaS0yLjAtZmxhc2hcIiwgLy8gVXNlIHNwZWNpZmljIG1vZGVsIHBhcmFtZXRlclxuICAgICAgfSk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW1pbmlNb2RlbC5nZW5lcmF0ZUNvbnRlbnQoW1xuICAgICAgICB7IHRleHQ6IHN5c3RlbVByb21wdCB9LFxuICAgICAgICB7IHRleHQ6IGBRdWVzdGlvbjogXCIke3F1ZXN0aW9ufVwiYCB9LFxuICAgICAgXSk7XG4gICAgICByZXNwb25zZSA9IHJlc3VsdC5yZXNwb25zZS50ZXh0KCk7XG4gICAgfSBlbHNlIGlmIChwcm92aWRlciA9PT0gXCJvcGVuYWlcIiAmJiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICAgICAgbW9kZWw6IG1vZGVsIHx8IFwiZ3B0LTMuNS10dXJib1wiLCAvLyBVc2Ugc3BlY2lmaWMgbW9kZWwgcGFyYW1ldGVyXG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogc3lzdGVtUHJvbXB0IH0sXG4gICAgICAgICAgICB7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBgUXVlc3Rpb246IFwiJHtxdWVzdGlvbn1cImAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzcG9uc2UgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50IHx8IFwie31cIjtcbiAgICAgIH0gY2F0Y2ggKG9wZW5haUVycm9yOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiT3BlbkFJIGZhaWxlZCwgdHJ5aW5nIEdlbWluaSBmYWxsYmFjazpcIixcbiAgICAgICAgICBvcGVuYWlFcnJvci5tZXNzYWdlXG4gICAgICAgICk7XG4gICAgICAgIC8vIEF1dG8tZmFsbGJhY2sgdG8gR2VtaW5pIGlmIE9wZW5BSSBmYWlsc1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpIHtcbiAgICAgICAgICBjb25zdCBnZW1pbmlNb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7XG4gICAgICAgICAgICBtb2RlbDogXCJnZW1pbmktMi4wLWZsYXNoXCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2VtaW5pTW9kZWwuZ2VuZXJhdGVDb250ZW50KFtcbiAgICAgICAgICAgIHsgdGV4dDogc3lzdGVtUHJvbXB0IH0sXG4gICAgICAgICAgICB7IHRleHQ6IGBRdWVzdGlvbjogXCIke3F1ZXN0aW9ufVwiYCB9LFxuICAgICAgICAgIF0pO1xuICAgICAgICAgIHJlc3BvbnNlID0gcmVzdWx0LnJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBvcGVuYWlFcnJvcjsgLy8gUmUtdGhyb3cgaWYgbm8gR2VtaW5pIGZhbGxiYWNrIGF2YWlsYWJsZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHZhbGlkIEFQSSBrZXkgZm9yIHRoZSBzcGVjaWZpZWQgcHJvdmlkZXJcIik7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBKU09OIGZyb20gcmVzcG9uc2UgKGluIGNhc2UgdGhlcmUncyBleHRyYSB0ZXh0KVxuICAgIGNvbnN0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcbiAgICBjb25zdCBqc29uU3RyID0ganNvbk1hdGNoID8ganNvbk1hdGNoWzBdIDogcmVzcG9uc2U7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoanNvblN0cik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBGYWxsYmFjayBwYXJzaW5nIHdpdGggY29udGV4dCBhd2FyZW5lc3NcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIkZhaWxlZCB0byBwYXJzZSBMTE0gcmVzcG9uc2UsIHVzaW5nIGNvbnRleHQtYXdhcmUgZmFsbGJhY2s6XCIsXG4gICAgICBlXG4gICAgKTtcbiAgICByZXR1cm4gZmFsbGJhY2tJbnRlbnQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5mZXJJbnRlbnRGcm9tUXVlc3Rpb24oXG4gIHF1ZXN0aW9uOiBzdHJpbmcsXG4gIGNvbnRleHQ/OiBDb252ZXJzYXRpb25Db250ZXh0XG4pOiBRdWVyeUludGVudCB7XG4gIGNvbnN0IHEgPSBxdWVzdGlvbi50b0xvd2VyQ2FzZSgpO1xuXG4gIC8vIFRyeSB0byBleHRyYWN0IGNvbGxlY3Rpb24gbmFtZSBmcm9tIHRoZSBxdWVzdGlvblxuICBjb25zdCBleHRyYWN0ZWRDb2xsZWN0aW9uID0gZXh0cmFjdENvbGxlY3Rpb25Gcm9tUXVlc3Rpb24ocXVlc3Rpb24pO1xuXG4gIC8vIEhhbmRsZSBwcm9ub3VucyBpbiBmYWxsYmFjayBpZiBjb250ZXh0IGlzIGF2YWlsYWJsZVxuICBsZXQgcHJvY2Vzc2VkUXVlc3Rpb24gPSBxdWVzdGlvbjtcbiAgaWYgKGNvbnRleHQ/Lmxhc3RFbnRpdHkpIHtcbiAgICAvLyBIYW5kbGUgcHJvbm91bnMgdXNpbmcgY29udGV4dFxuICAgIGlmIChcbiAgICAgIHEuaW5jbHVkZXMoXCIgaGUgXCIpIHx8XG4gICAgICBxLmluY2x1ZGVzKFwiIGhpbSBcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJoZSBcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJoaW0gXCIpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIvCflIQgRkFMTEJBQ0s6IFJlc29sdmluZyAnaGUvaGltJyB0bzpcIiwgY29udGV4dC5sYXN0RW50aXR5KTtcbiAgICAgIHByb2Nlc3NlZFF1ZXN0aW9uID0gcHJvY2Vzc2VkUXVlc3Rpb24ucmVwbGFjZShcbiAgICAgICAgL1xcYihoZXxoaW0pXFxiL2dpLFxuICAgICAgICBjb250ZXh0Lmxhc3RFbnRpdHlcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHEuaW5jbHVkZXMoXCIgdGhleSBcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCIgdGhlbSBcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJ0aGV5IFwiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcInRoZW0gXCIpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIvCflIQgRkFMTEJBQ0s6IFJlc29sdmluZyAndGhleS90aGVtJyB0bzpcIiwgY29udGV4dC5sYXN0RW50aXR5KTtcbiAgICAgIHByb2Nlc3NlZFF1ZXN0aW9uID0gcHJvY2Vzc2VkUXVlc3Rpb24ucmVwbGFjZShcbiAgICAgICAgL1xcYih0aGV5fHRoZW0pXFxiL2dpLFxuICAgICAgICBjb250ZXh0Lmxhc3RFbnRpdHlcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChxLmluY2x1ZGVzKFwiIHRoZWlyIFwiKSB8fCBxLmluY2x1ZGVzKFwiIGhpcyBcIikgfHwgcS5pbmNsdWRlcyhcIiBoZXIgXCIpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIvCflIQgRkFMTEJBQ0s6IFJlc29sdmluZyBwb3NzZXNzaXZlIHRvOlwiLCBjb250ZXh0Lmxhc3RFbnRpdHkpO1xuICAgICAgcHJvY2Vzc2VkUXVlc3Rpb24gPSBwcm9jZXNzZWRRdWVzdGlvbi5yZXBsYWNlKFxuICAgICAgICAvXFxiKHRoZWlyfGhpc3xoZXIpXFxiL2dpLFxuICAgICAgICBjb250ZXh0Lmxhc3RFbnRpdHkgKyBcIidzXCJcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIHJhbmtpbmcgYW5kIFwibW9zdFwiIHF1ZXJpZXNcbiAgaWYgKFxuICAgIHEuaW5jbHVkZXMoXCJ3aGljaFwiKSAmJlxuICAgIChxLmluY2x1ZGVzKFwibW9zdFwiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcInRvcFwiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcImJlc3RcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJoaWdoZXN0XCIpKVxuICApIHtcbiAgICBjb25zdCBzY29wZSA9IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIjtcblxuICAgIGlmIChxLmluY2x1ZGVzKFwiYXJ0aXN0XCIpICYmIHEuaW5jbHVkZXMoXCJtb3N0XCIpICYmIHEuaW5jbHVkZXMoXCJpbWFnZVwiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJyYW5raW5nXCIsXG4gICAgICAgIHRhcmdldDogXCJlbnRpdGllc1wiLFxuICAgICAgICBmaWx0ZXI6IG51bGwsXG4gICAgICAgIGxpbWl0OiAxLFxuICAgICAgICBzY29wZSxcbiAgICAgICAgc29ydEJ5OiBcImltYWdlX2NvdW50XCIsXG4gICAgICAgIHNvcnRPcmRlcjogXCJkZXNjXCIsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHEuaW5jbHVkZXMoXCJhcnRpc3RcIikgJiYgcS5pbmNsdWRlcyhcIm1vc3RcIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwicmFua2luZ1wiLFxuICAgICAgICB0YXJnZXQ6IFwiZW50aXRpZXNcIixcbiAgICAgICAgZmlsdGVyOiBudWxsLFxuICAgICAgICBsaW1pdDogMSxcbiAgICAgICAgc2NvcGUsXG4gICAgICAgIHNvcnRCeTogXCJpbWFnZV9jb3VudFwiLFxuICAgICAgICBzb3J0T3JkZXI6IFwiZGVzY1wiLFxuICAgICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBcInRvcCBOXCIgcXVlcmllc1xuICBpZiAocS5pbmNsdWRlcyhcInRvcFwiKSAmJiAvdG9wXFxzKyhcXGQrKS8udGVzdChxKSkge1xuICAgIGNvbnN0IGxpbWl0TWF0Y2ggPSBxLm1hdGNoKC90b3BcXHMrKFxcZCspLyk7XG4gICAgY29uc3QgbGltaXQgPSBsaW1pdE1hdGNoID8gcGFyc2VJbnQobGltaXRNYXRjaFsxXSkgOiA1O1xuICAgIGNvbnN0IHNjb3BlID0gZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiO1xuXG4gICAgaWYgKHEuaW5jbHVkZXMoXCJhcnRpc3RcIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwidG9wXCIsXG4gICAgICAgIHRhcmdldDogXCJlbnRpdGllc1wiLFxuICAgICAgICBmaWx0ZXI6IG51bGwsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICBzY29wZSxcbiAgICAgICAgc29ydEJ5OiBcImltYWdlX2NvdW50XCIsXG4gICAgICAgIHNvcnRPcmRlcjogXCJkZXNjXCIsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGVudGl0eS1zcGVjaWZpYyBxdWVyaWVzIHdpdGggZ2VuZXJpYyBwYXR0ZXJucyAodXNlIHByb2Nlc3NlZCBxdWVzdGlvbilcbiAgY29uc3QgZW50aXR5TWF0Y2ggPVxuICAgIHByb2Nlc3NlZFF1ZXN0aW9uLm1hdGNoKFxuICAgICAgLyg/OmJ5fGZyb218b2YpXFxzKyhbQS1aXVthLXpdKyg/OlxccytbQS1aXVthLXpdKykqPykoPz1cXHMrKD86aW58ZnJvbXxvZnxhdHx3aXRofGZvcilcXGJ8JCkvaVxuICAgICkgfHxcbiAgICBwcm9jZXNzZWRRdWVzdGlvbi5tYXRjaChcbiAgICAgIC8oPzpkb25lXFxzK2J5fGNyZWF0ZWRcXHMrYnl8bWFkZVxccytieXx3b3JrXFxzK2J5fGl0ZW1zXFxzK2J5fHBpZWNlc1xccytieSlcXHMrKFtBLVpdW2Etel0rKD86XFxzK1tBLVpdW2Etel0rKSo/KSg/PVxccysoPzppbnxmcm9tfG9mfGF0fHdpdGh8Zm9yKVxcYnwkKS9pXG4gICAgKSB8fFxuICAgIHByb2Nlc3NlZFF1ZXN0aW9uLm1hdGNoKFxuICAgICAgLyhbQS1aXVthLXpdKyg/OlxccytbQS1aXVthLXpdKykrKSg/OlxccysoPzp3b3JrfGl0ZW1zfHBpZWNlc3xkYXRhfGNvbnRlbnQpKS9pXG4gICAgKTtcbiAgY29uc3QgZW50aXR5TmFtZSA9IGVudGl0eU1hdGNoID8gZW50aXR5TWF0Y2hbMV0udHJpbSgpIDogbnVsbDtcblxuICAvLyBEYXRhYmFzZS1sZXZlbCBxdWVyaWVzXG4gIGlmIChxLmluY2x1ZGVzKFwiY29sbGVjdGlvbnNcIikgfHwgcS5pbmNsdWRlcyhcImRhdGFiYXNlXCIpKSB7XG4gICAgaWYgKHEuaW5jbHVkZXMoXCJob3cgbWFueVwiKSB8fCBxLmluY2x1ZGVzKFwiY291bnRcIikpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwiY291bnRcIiwgdGFyZ2V0OiBcImNvbGxlY3Rpb25zXCIsIHNjb3BlOiBcImRhdGFiYXNlXCIgfTtcbiAgICB9XG4gICAgaWYgKHEuaW5jbHVkZXMoXCJsaXN0XCIpIHx8IHEuaW5jbHVkZXMoXCJ3aGF0XCIpIHx8IHEuaW5jbHVkZXMoXCJzaG93XCIpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcImNvbGxlY3Rpb25zXCIsIHRhcmdldDogXCJsaXN0XCIsIHNjb3BlOiBcImRhdGFiYXNlXCIgfTtcbiAgICB9XG4gICAgaWYgKHEuaW5jbHVkZXMoXCJkZXNjcmliZVwiKSkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJkYXRhYmFzZVwiLCB0YXJnZXQ6IFwib3ZlcnZpZXdcIiwgc2NvcGU6IFwiZGF0YWJhc2VcIiB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEVudGl0eS1zcGVjaWZpYyBxdWVyaWVzIChoaWdoIHByaW9yaXR5KVxuICBpZiAoZW50aXR5TmFtZSkge1xuICAgIGNvbnN0IGZpbHRlciA9IHsgbmFtZTogZW50aXR5TmFtZSB9O1xuICAgIGNvbnN0IHNjb3BlID0gZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiO1xuXG4gICAgaWYgKFxuICAgICAgcS5pbmNsdWRlcyhcInN1bW1hcnlcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJzdW1tYXJpemVcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJzdW1tYXJpc2VcIikgfHxcbiAgICAgIChxLmluY2x1ZGVzKFwiZ2l2ZSBtZVwiKSAmJiBxLmluY2x1ZGVzKFwic3VtbWFyeVwiKSlcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwic3VtbWFyaXplXCIsXG4gICAgICAgIHRhcmdldDogXCJpdGVtc1wiLFxuICAgICAgICBmaWx0ZXIsXG4gICAgICAgIGxpbWl0OiAyMCxcbiAgICAgICAgc2NvcGUsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHEuaW5jbHVkZXMoXCJob3cgbWFueVwiKSB8fCBxLmluY2x1ZGVzKFwiY291bnRcIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiY291bnRcIixcbiAgICAgICAgdGFyZ2V0OiBcIml0ZW1zXCIsXG4gICAgICAgIGZpbHRlcixcbiAgICAgICAgc2NvcGUsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHEuaW5jbHVkZXMoXCJmaW5kXCIpIHx8IHEuaW5jbHVkZXMoXCJzZWFyY2hcIikgfHwgcS5pbmNsdWRlcyhcInNob3dcIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwic2VhcmNoXCIsXG4gICAgICAgIHRhcmdldDogXCJpdGVtc1wiLFxuICAgICAgICBmaWx0ZXIsXG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgc2NvcGUsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHEuaW5jbHVkZXMoXCJhbmFseXplXCIpIHx8IHEuaW5jbHVkZXMoXCJhbmFseXNpc1wiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJhbmFseXplXCIsXG4gICAgICAgIHRhcmdldDogXCJpdGVtc1wiLFxuICAgICAgICBmaWx0ZXIsXG4gICAgICAgIGxpbWl0OiA1MCxcbiAgICAgICAgc2NvcGUsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ29sbGVjdGlvbi1sZXZlbCBxdWVyaWVzIChleGlzdGluZyBsb2dpYylcbiAgaWYgKHEuaW5jbHVkZXMoXCJob3cgbWFueVwiKSB8fCBxLmluY2x1ZGVzKFwiY291bnRcIikpIHtcbiAgICBpZiAoXG4gICAgICBxLmluY2x1ZGVzKFwiZW50aXRpZXNcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJuYW1lc1wiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcImNyZWF0b3JzXCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImNvdW50XCIsXG4gICAgICAgIHRhcmdldDogXCJlbnRpdGllc1wiLFxuICAgICAgICBzY29wZTogZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiLFxuICAgICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAocS5pbmNsdWRlcyhcInZlY3RvclwiKSB8fCBxLmluY2x1ZGVzKFwiaXRlbVwiKSB8fCBxLmluY2x1ZGVzKFwicmVjb3JkXCIpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImNvdW50XCIsXG4gICAgICAgIHRhcmdldDogXCJ0b3RhbFwiLFxuICAgICAgICBzY29wZTogZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiLFxuICAgICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJjb3VudFwiLFxuICAgICAgdGFyZ2V0OiBcInRvdGFsXCIsXG4gICAgICBzY29wZTogZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiLFxuICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgIH07XG4gIH1cblxuICBpZiAocS5pbmNsdWRlcyhcImZpbmRcIikgfHwgcS5pbmNsdWRlcyhcInNlYXJjaFwiKSkge1xuICAgIC8vIENoZWNrIGlmIGl0J3MgYWNyb3NzIGFsbCBjb2xsZWN0aW9uc1xuICAgIGNvbnN0IHNjb3BlID1cbiAgICAgIHEuaW5jbHVkZXMoXCJhbGwgY29sbGVjdGlvbnNcIikgfHwgcS5pbmNsdWRlcyhcImFjcm9zc1wiKVxuICAgICAgICA/IFwiZGF0YWJhc2VcIlxuICAgICAgICA6IGV4dHJhY3RlZENvbGxlY3Rpb25cbiAgICAgICAgPyBcImNvbGxlY3Rpb25cIlxuICAgICAgICA6IFwiZGF0YWJhc2VcIjtcblxuICAgIC8vIFRyeSB0byBleHRyYWN0IGVudGl0eSBuYW1lIChmYWxsYmFjayBwYXR0ZXJuKSAtIGdlbmVyaWMgcGF0dGVybnNcbiAgICBjb25zdCBmYWxsYmFja0VudGl0eU1hdGNoID1cbiAgICAgIHF1ZXN0aW9uLm1hdGNoKFxuICAgICAgICAvKD86Ynl8ZnJvbXxvZilcXHMrKFtBLVpdW2Etel0rKD86XFxzK1tBLVpdW2Etel0rKSo/KSg/PVxccysoPzppbnxmcm9tfG9mfGF0fHdpdGh8Zm9yKVxcYnwkKS9pXG4gICAgICApIHx8XG4gICAgICBxdWVzdGlvbi5tYXRjaChcbiAgICAgICAgLyg/OmRvbmVcXHMrYnl8Y3JlYXRlZFxccytieXxtYWRlXFxzK2J5KVxccysoW0EtWl1bYS16XSsoPzpcXHMrW0EtWl1bYS16XSspKj8pKD89XFxzKyg/OmlufGZyb218b2Z8YXR8d2l0aHxmb3IpXFxifCQpL2lcbiAgICAgICk7XG4gICAgaWYgKGZhbGxiYWNrRW50aXR5TWF0Y2gpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwic2VhcmNoXCIsXG4gICAgICAgIHRhcmdldDogXCJpdGVtc1wiLFxuICAgICAgICBmaWx0ZXI6IHsgbmFtZTogZmFsbGJhY2tFbnRpdHlNYXRjaFsxXSB9LFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgIHNjb3BlLFxuICAgICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJzZWFyY2hcIixcbiAgICAgIHRhcmdldDogXCJpdGVtc1wiLFxuICAgICAgbGltaXQ6IDEwLFxuICAgICAgc2NvcGUsXG4gICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgfTtcbiAgfVxuXG4gIGlmIChxLmluY2x1ZGVzKFwibGlzdFwiKSB8fCBxLmluY2x1ZGVzKFwic2hvd1wiKSkge1xuICAgIGlmIChcbiAgICAgIHEuaW5jbHVkZXMoXCJlbnRpdGllc1wiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcIm5hbWVzXCIpIHx8XG4gICAgICBxLmluY2x1ZGVzKFwiY3JlYXRvcnNcIilcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwibGlzdFwiLFxuICAgICAgICB0YXJnZXQ6IFwiZW50aXRpZXNcIixcbiAgICAgICAgc2NvcGU6IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIixcbiAgICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwibGlzdFwiLFxuICAgICAgdGFyZ2V0OiBcIml0ZW1zXCIsXG4gICAgICBsaW1pdDogMjAsXG4gICAgICBzY29wZTogZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiLFxuICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgIH07XG4gIH1cblxuICBpZiAocS5pbmNsdWRlcyhcImRlc2NyaWJlXCIpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiZGVzY3JpYmVcIixcbiAgICAgIHRhcmdldDogZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiLFxuICAgICAgc2NvcGU6IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIixcbiAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcImRlc2NyaWJlXCIsXG4gICAgdGFyZ2V0OiBcImNvbGxlY3Rpb25cIixcbiAgICBzY29wZTogZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiLFxuICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgfTtcbn1cblxuLy8gTmV3IGZ1bmN0aW9uIHRvIGV4dHJhY3QgY29sbGVjdGlvbiBuYW1lcyBmcm9tIG5hdHVyYWwgbGFuZ3VhZ2VcbmZ1bmN0aW9uIGV4dHJhY3RDb2xsZWN0aW9uRnJvbVF1ZXN0aW9uKHF1ZXN0aW9uOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBjb25zdCBxID0gcXVlc3Rpb24udG9Mb3dlckNhc2UoKTtcblxuICAvLyBDb21tb24gcGF0dGVybnMgZm9yIG1lbnRpb25pbmcgY29sbGVjdGlvbnNcbiAgY29uc3QgcGF0dGVybnMgPSBbXG4gICAgLy8gXCJpbiBbY29sbGVjdGlvbl1cIiBvciBcImZyb20gW2NvbGxlY3Rpb25dXCJcbiAgICAvKD86aW58ZnJvbSlcXHMrKFthLXpBLVpdW2EtekEtWjAtOV8tXSopL2csXG4gICAgLy8gXCJbY29sbGVjdGlvbl0gY29sbGVjdGlvblwiXG4gICAgLyhbYS16QS1aXVthLXpBLVowLTlfLV0qKVxccytjb2xsZWN0aW9uL2csXG4gICAgLy8gXCJjb2xsZWN0aW9uIFtjb2xsZWN0aW9uXVwiXG4gICAgL2NvbGxlY3Rpb25cXHMrKFthLXpBLVpdW2EtekEtWjAtOV8tXSopL2csXG4gIF07XG5cbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHBhdHRlcm5zKSB7XG4gICAgbGV0IG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSBwYXR0ZXJuLmV4ZWMocSkpICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBtYXRjaFsxXTtcbiAgICAgIC8vIEZpbHRlciBvdXQgY29tbW9uIHdvcmRzIHRoYXQgYXJlbid0IGNvbGxlY3Rpb24gbmFtZXNcbiAgICAgIGlmIChcbiAgICAgICAgIVtcbiAgICAgICAgICBcInRoZVwiLFxuICAgICAgICAgIFwidGhpc1wiLFxuICAgICAgICAgIFwidGhhdFwiLFxuICAgICAgICAgIFwibXlcIixcbiAgICAgICAgICBcInlvdXJcIixcbiAgICAgICAgICBcIm91clwiLFxuICAgICAgICAgIFwidGhlaXJcIixcbiAgICAgICAgICBcImFsbFwiLFxuICAgICAgICAgIFwic29tZVwiLFxuICAgICAgICAgIFwiYW55XCIsXG4gICAgICAgICAgXCJlYWNoXCIsXG4gICAgICAgICAgXCJldmVyeVwiLFxuICAgICAgICBdLmluY2x1ZGVzKGNhbmRpZGF0ZSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gY2FuZGlkYXRlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIExvb2sgZm9yIHNwZWNpZmljIGNvbW1vbiBjb2xsZWN0aW9uIG5hbWVzIHRoYXQgbWlnaHQgYXBwZWFyIHdpdGhvdXQgcHJlcG9zaXRpb25zXG4gIGNvbnN0IGNvbW1vbkNvbGxlY3Rpb25OYW1lcyA9IFtcbiAgICBcIm1pZGpvdXJuZXlzYW1wbGVcIixcbiAgICBcInRlc3RfY29sbGVjdGlvblwiLFxuICAgIFwibXlfZG9jc1wiLFxuICAgIFwidGVzdF9zbWFsbFwiLFxuICAgIFwibmV3X3Rlc3RfeWVhcm5cIixcbiAgICBcImRvY3Nfb3BlbmFpXCIsXG4gICAgXCJkb2NzX2dlbWluaVwiLFxuICBdO1xuICBmb3IgKGNvbnN0IG5hbWUgb2YgY29tbW9uQ29sbGVjdGlvbk5hbWVzKSB7XG4gICAgaWYgKHEuaW5jbHVkZXMobmFtZSkpIHtcbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVRdWVyeShcbiAgY29sbGVjdGlvbjogc3RyaW5nIHwgbnVsbCxcbiAgaW50ZW50OiBRdWVyeUludGVudFxuKTogUHJvbWlzZTxhbnk+IHtcbiAgaWYgKGludGVudC5zY29wZSA9PT0gXCJkYXRhYmFzZVwiKSB7XG4gICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVEYXRhYmFzZVF1ZXJ5KGludGVudCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQ29sbGVjdGlvbi1sZXZlbCBxdWVyeSAtIHJlcXVpcmUgY29sbGVjdGlvbiBuYW1lXG4gICAgaWYgKCFjb2xsZWN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiQ29sbGVjdGlvbiBuYW1lIGlzIHJlcXVpcmVkIGZvciBjb2xsZWN0aW9uLWxldmVsIHF1ZXJpZXNcIlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVDb2xsZWN0aW9uUXVlcnkoY29sbGVjdGlvbiwgaW50ZW50KTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBleGVjdXRlRGF0YWJhc2VRdWVyeShpbnRlbnQ6IFF1ZXJ5SW50ZW50KTogUHJvbWlzZTxhbnk+IHtcbiAgc3dpdGNoIChpbnRlbnQudHlwZSkge1xuICAgIGNhc2UgXCJjb3VudFwiOlxuICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiY29sbGVjdGlvbnNcIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgY291bnRDb2xsZWN0aW9ucygpO1xuICAgICAgfVxuICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiYXJ0aXN0c1wiKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjb3VudEFydGlzdHNBY3Jvc3NEYXRhYmFzZSgpO1xuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICAoaW50ZW50LnRhcmdldCA9PT0gXCJpbWFnZXNcIiB8fCBpbnRlbnQudGFyZ2V0ID09PSBcIml0ZW1zXCIpICYmXG4gICAgICAgIGludGVudC5maWx0ZXJcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gYXdhaXQgY291bnRJbWFnZXNCeUFydGlzdEFjcm9zc0RhdGFiYXNlKGludGVudC5maWx0ZXIpO1xuICAgICAgfVxuICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwidG90YWxcIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgY291bnRUb3RhbFZlY3RvcnNBY3Jvc3NEYXRhYmFzZSgpO1xuICAgICAgfVxuICAgICAgLy8gRmFsbGJhY2sgZm9yIGNvdW50IG9wZXJhdGlvbnNcbiAgICAgIHJldHVybiBhd2FpdCBjb3VudFRvdGFsVmVjdG9yc0Fjcm9zc0RhdGFiYXNlKCk7XG5cbiAgICBjYXNlIFwiY29sbGVjdGlvbnNcIjpcbiAgICAgIHJldHVybiBhd2FpdCBsaXN0Q29sbGVjdGlvbnMoKTtcblxuICAgIGNhc2UgXCJkYXRhYmFzZVwiOlxuICAgICAgcmV0dXJuIGF3YWl0IGRlc2NyaWJlRGF0YWJhc2VJbmZvKCk7XG5cbiAgICBjYXNlIFwic2VhcmNoXCI6XG4gICAgICBpZiAoaW50ZW50LmZpbHRlcikge1xuICAgICAgICByZXR1cm4gYXdhaXQgc2VhcmNoQWNyb3NzQ29sbGVjdGlvbnMoaW50ZW50LmZpbHRlciwgaW50ZW50LmxpbWl0IHx8IDEwKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcInN1bW1hcml6ZVwiOlxuICAgICAgaWYgKGludGVudC5maWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHN1bW1hcml6ZUFydGlzdEFjcm9zc0RhdGFiYXNlKFxuICAgICAgICAgIGludGVudC5maWx0ZXIsXG4gICAgICAgICAgaW50ZW50LmxpbWl0IHx8IDIwXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJsaXN0XCI6XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJhcnRpc3RzXCIgfHwgaW50ZW50LnRhcmdldCA9PT0gXCJlbnRpdGllc1wiKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBsaXN0QXJ0aXN0c0Fjcm9zc0RhdGFiYXNlKGludGVudC5saW1pdCB8fCA1MCk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJ0b3BcIjpcbiAgICBjYXNlIFwicmFua2luZ1wiOlxuICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiZW50aXRpZXNcIiAmJiBpbnRlbnQuc29ydEJ5ID09PSBcImltYWdlX2NvdW50XCIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGdldFRvcEFydGlzdHNCeUltYWdlQ291bnRBY3Jvc3NEYXRhYmFzZShpbnRlbnQubGltaXQgfHwgMSk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBEYXRhYmFzZS1sZXZlbCBxdWVyeSB0eXBlICcke2ludGVudC50eXBlfScgbm90IGltcGxlbWVudGVkIHlldGBcbiAgICAgICk7XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgYERhdGFiYXNlLWxldmVsIHF1ZXJ5IGNvdWxkIG5vdCBiZSBleGVjdXRlZDogJHtpbnRlbnQudHlwZX0gJHtpbnRlbnQudGFyZ2V0fWBcbiAgKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvbGxlY3Rpb25RdWVyeShcbiAgY29sbGVjdGlvbjogc3RyaW5nLFxuICBpbnRlbnQ6IFF1ZXJ5SW50ZW50XG4pOiBQcm9taXNlPGFueT4ge1xuICBzd2l0Y2ggKGludGVudC50eXBlKSB7XG4gICAgY2FzZSBcImNvdW50XCI6XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJhcnRpc3RzXCIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvdW50VW5pcXVlQXJ0aXN0cyhjb2xsZWN0aW9uKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIChpbnRlbnQudGFyZ2V0ID09PSBcImltYWdlc1wiIHx8IGludGVudC50YXJnZXQgPT09IFwiaXRlbXNcIikgJiZcbiAgICAgICAgaW50ZW50LmZpbHRlclxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjb3VudEltYWdlc0J5QXJ0aXN0KGNvbGxlY3Rpb24sIGludGVudC5maWx0ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvdW50VG90YWwoY29sbGVjdGlvbik7XG4gICAgICB9XG5cbiAgICBjYXNlIFwic2VhcmNoXCI6XG4gICAgICByZXR1cm4gYXdhaXQgc2VhcmNoSW1hZ2VzKGNvbGxlY3Rpb24sIGludGVudC5maWx0ZXIsIGludGVudC5saW1pdCB8fCAxMCk7XG5cbiAgICBjYXNlIFwic3VtbWFyaXplXCI6XG4gICAgICByZXR1cm4gYXdhaXQgc3VtbWFyaXplQXJ0aXN0V29yayhcbiAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgaW50ZW50LmZpbHRlcixcbiAgICAgICAgaW50ZW50LmxpbWl0IHx8IDIwXG4gICAgICApO1xuXG4gICAgY2FzZSBcImFuYWx5emVcIjpcbiAgICAgIHJldHVybiBhd2FpdCBhbmFseXplQXJ0aXN0V29yayhcbiAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgaW50ZW50LmZpbHRlcixcbiAgICAgICAgaW50ZW50LmxpbWl0IHx8IDUwXG4gICAgICApO1xuXG4gICAgY2FzZSBcImxpc3RcIjpcbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImFydGlzdHNcIiB8fCBpbnRlbnQudGFyZ2V0ID09PSBcImVudGl0aWVzXCIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGxpc3RVbmlxdWVBcnRpc3RzKGNvbGxlY3Rpb24sIGludGVudC5saW1pdCB8fCA1MCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgbGlzdEltYWdlcyhjb2xsZWN0aW9uLCBpbnRlbnQubGltaXQgfHwgMjApO1xuICAgICAgfVxuXG4gICAgY2FzZSBcImZpbHRlclwiOlxuICAgICAgcmV0dXJuIGF3YWl0IGZpbHRlckltYWdlcyhjb2xsZWN0aW9uLCBpbnRlbnQuZmlsdGVyLCBpbnRlbnQubGltaXQgfHwgMjApO1xuXG4gICAgY2FzZSBcImRlc2NyaWJlXCI6XG4gICAgICByZXR1cm4gYXdhaXQgZGVzY3JpYmVDb2xsZWN0aW9uKGNvbGxlY3Rpb24pO1xuXG4gICAgY2FzZSBcInRvcFwiOlxuICAgIGNhc2UgXCJyYW5raW5nXCI6XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJlbnRpdGllc1wiICYmIGludGVudC5zb3J0QnkgPT09IFwiaW1hZ2VfY291bnRcIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgZ2V0VG9wQXJ0aXN0c0J5SW1hZ2VDb3VudEluQ29sbGVjdGlvbihcbiAgICAgICAgICBjb2xsZWN0aW9uLFxuICAgICAgICAgIGludGVudC5saW1pdCB8fCAxXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY29sbGVjdGlvbi1sZXZlbCBxdWVyeSB0eXBlOiAke2ludGVudC50eXBlfWApO1xuICB9XG59XG5cbi8vIE5ldyBkYXRhYmFzZS1sZXZlbCBmdW5jdGlvbnNcbmFzeW5jIGZ1bmN0aW9uIGNvdW50Q29sbGVjdGlvbnMoKTogUHJvbWlzZTx7XG4gIGNvdW50OiBudW1iZXI7XG4gIGNvbGxlY3Rpb25zOiBzdHJpbmdbXTtcbn0+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNJbmZvID0gYXdhaXQgY2xpZW50LmdldENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IGNvbGxlY3Rpb25zID0gY29sbGVjdGlvbnNJbmZvLmNvbGxlY3Rpb25zLm1hcCgoYzogYW55KSA9PiBjLm5hbWUpO1xuXG4gIHJldHVybiB7XG4gICAgY291bnQ6IGNvbGxlY3Rpb25zLmxlbmd0aCxcbiAgICBjb2xsZWN0aW9uczogY29sbGVjdGlvbnMsXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RDb2xsZWN0aW9ucygpOiBQcm9taXNlPHtcbiAgY29sbGVjdGlvbnM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyB2ZWN0b3JzX2NvdW50PzogbnVtYmVyIH0+O1xufT4ge1xuICBjb25zdCBjb2xsZWN0aW9uc0luZm8gPSBhd2FpdCBjbGllbnQuZ2V0Q29sbGVjdGlvbnMoKTtcbiAgY29uc3QgY29sbGVjdGlvbnMgPSBjb2xsZWN0aW9uc0luZm8uY29sbGVjdGlvbnM7XG5cbiAgLy8gR2V0IGRldGFpbGVkIGluZm8gZm9yIGVhY2ggY29sbGVjdGlvbiB1c2luZyBhY3R1YWwgY291bnRcbiAgY29uc3QgZGV0YWlsZWRDb2xsZWN0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgIGNvbGxlY3Rpb25zLm1hcChhc3luYyAoY29sbGVjdGlvbjogYW55KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBVc2UgdGhlIHNhbWUgY291bnQgbWV0aG9kIHRoYXQgd29ya3MgZm9yIGluZGl2aWR1YWwgcXVlcmllc1xuICAgICAgICBjb25zdCBjb3VudFJlc3VsdCA9IGF3YWl0IGNsaWVudC5jb3VudChjb2xsZWN0aW9uLm5hbWUsIHt9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuYW1lOiBjb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgdmVjdG9yc19jb3VudDogY291bnRSZXN1bHQuY291bnQgfHwgMCxcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgRmFpbGVkIHRvIGNvdW50IHZlY3RvcnMgaW4gY29sbGVjdGlvbiAke2NvbGxlY3Rpb24ubmFtZX06YCxcbiAgICAgICAgICBlcnJvclxuICAgICAgICApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWU6IGNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICB2ZWN0b3JzX2NvdW50OiAwLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pXG4gICk7XG5cbiAgcmV0dXJuIHsgY29sbGVjdGlvbnM6IGRldGFpbGVkQ29sbGVjdGlvbnMgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVzY3JpYmVEYXRhYmFzZUluZm8oKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNEYXRhID0gYXdhaXQgbGlzdENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IHRvdGFsVmVjdG9ycyA9IGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucy5yZWR1Y2UoXG4gICAgKHN1bSwgY29sKSA9PiBzdW0gKyAoY29sLnZlY3RvcnNfY291bnQgfHwgMCksXG4gICAgMFxuICApO1xuXG4gIHJldHVybiB7XG4gICAgdG90YWxfY29sbGVjdGlvbnM6IGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucy5sZW5ndGgsXG4gICAgdG90YWxfdmVjdG9yczogdG90YWxWZWN0b3JzLFxuICAgIGNvbGxlY3Rpb25zOiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMsXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaEFjcm9zc0NvbGxlY3Rpb25zKFxuICBmaWx0ZXI6IGFueSxcbiAgbGltaXQ6IG51bWJlclxuKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNEYXRhID0gYXdhaXQgbGlzdENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IGFsbFJlc3VsdHM6IGFueVtdID0gW107XG5cbiAgLy8gU2VhcmNoIGVhY2ggY29sbGVjdGlvblxuICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBzZWFyY2hJbWFnZXMoY29sbGVjdGlvbi5uYW1lLCBmaWx0ZXIsIGxpbWl0KTtcbiAgICAgIGlmIChyZXN1bHRzLmltYWdlcyAmJiByZXN1bHRzLmltYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFsbFJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgIGNvdW50OiByZXN1bHRzLmNvdW50LFxuICAgICAgICAgIGltYWdlczogcmVzdWx0cy5pbWFnZXMsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBzZWFyY2ggY29sbGVjdGlvbiAke2NvbGxlY3Rpb24ubmFtZX06YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHRvdGFsQ291bnQgPSBhbGxSZXN1bHRzLnJlZHVjZSgoc3VtLCByZXN1bHQpID0+IHN1bSArIHJlc3VsdC5jb3VudCwgMCk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3RhbF9jb3VudDogdG90YWxDb3VudCxcbiAgICBjb2xsZWN0aW9uc19zZWFyY2hlZDogY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zLmxlbmd0aCxcbiAgICByZXN1bHRzX2J5X2NvbGxlY3Rpb246IGFsbFJlc3VsdHMsXG4gIH07XG59XG5cbi8vIEV4aXN0aW5nIGNvbGxlY3Rpb24tbGV2ZWwgZnVuY3Rpb25zIHJlbWFpbiB0aGUgc2FtZVxuYXN5bmMgZnVuY3Rpb24gY291bnRUb3RhbChjb2xsZWN0aW9uOiBzdHJpbmcpOiBQcm9taXNlPHsgY291bnQ6IG51bWJlciB9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmNvdW50KGNvbGxlY3Rpb24sIHt9KTtcbiAgcmV0dXJuIHsgY291bnQ6IHJlc3BvbnNlLmNvdW50IH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNvdW50VW5pcXVlQXJ0aXN0cyhcbiAgY29sbGVjdGlvbjogc3RyaW5nXG4pOiBQcm9taXNlPHsgY291bnQ6IG51bWJlcjsgYXJ0aXN0czogc3RyaW5nW10gfT4ge1xuICAvLyBHZXQgQUxMIHBvaW50cyBmcm9tIHRoZSBjb2xsZWN0aW9uLCBub3QganVzdCAxMDAwXG4gIGxldCBhbGxQb2ludHM6IGFueVtdID0gW107XG4gIGxldCBvZmZzZXQ6IHN0cmluZyB8IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAvLyBTY3JvbGwgdGhyb3VnaCBhbGwgcG9pbnRzIGluIHRoZSBjb2xsZWN0aW9uXG4gIGRvIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5zY3JvbGwoY29sbGVjdGlvbiwge1xuICAgICAgbGltaXQ6IDEwMDAsIC8vIFByb2Nlc3MgaW4gYmF0Y2hlcyBvZiAxMDAwXG4gICAgICAuLi4ob2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgeyBvZmZzZXQgfSksXG4gICAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgICB3aXRoX3ZlY3RvcjogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBhbGxQb2ludHMucHVzaCguLi5yZXNwb25zZS5wb2ludHMpO1xuICAgIC8vIFNhZmVseSBoYW5kbGUgdGhlIG9mZnNldCB0eXBlXG4gICAgY29uc3QgbmV4dE9mZnNldCA9IHJlc3BvbnNlLm5leHRfcGFnZV9vZmZzZXQ7XG4gICAgaWYgKHR5cGVvZiBuZXh0T2Zmc2V0ID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBuZXh0T2Zmc2V0ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBvZmZzZXQgPSBuZXh0T2Zmc2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICBvZmZzZXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9IHdoaWxlIChvZmZzZXQgIT09IG51bGwgJiYgb2Zmc2V0ICE9PSB1bmRlZmluZWQpO1xuXG4gIGNvbnN0IGFydGlzdHMgPSBuZXcgU2V0KFxuICAgIGFsbFBvaW50cy5tYXAoKHBvaW50OiBhbnkpID0+IHBvaW50LnBheWxvYWQ/Lm5hbWUpLmZpbHRlcihCb29sZWFuKVxuICApO1xuXG4gIHJldHVybiB7XG4gICAgY291bnQ6IGFydGlzdHMuc2l6ZSxcbiAgICBhcnRpc3RzOiBBcnJheS5mcm9tKGFydGlzdHMpLnNsaWNlKDAsIDIwKSwgLy8gU3RpbGwgbGltaXQgdGhlIHJldHVybmVkIGxpc3QgZm9yIGRpc3BsYXlcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoSW1hZ2VzKFxuICBjb2xsZWN0aW9uOiBzdHJpbmcsXG4gIGZpbHRlcjogYW55LFxuICBsaW1pdDogbnVtYmVyXG4pOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5zY3JvbGwoY29sbGVjdGlvbiwge1xuICAgIGxpbWl0OiAxMDAwLFxuICAgIHdpdGhfcGF5bG9hZDogdHJ1ZSxcbiAgICB3aXRoX3ZlY3RvcjogZmFsc2UsXG4gIH0pO1xuXG4gIGxldCBmaWx0ZXJlZFBvaW50cyA9IHJlc3BvbnNlLnBvaW50cztcblxuICBpZiAoZmlsdGVyKSB7XG4gICAgZmlsdGVyZWRQb2ludHMgPSByZXNwb25zZS5wb2ludHMuZmlsdGVyKChwb2ludDogYW55KSA9PiB7XG4gICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZmlsdGVyKS5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIHJldHVybiBwb2ludC5wYXlsb2FkPy5ba2V5XSA9PT0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IGxpbWl0ZWRQb2ludHMgPSBmaWx0ZXJlZFBvaW50cy5zbGljZSgwLCBsaW1pdCk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb3VudDogbGltaXRlZFBvaW50cy5sZW5ndGgsXG4gICAgaW1hZ2VzOiBsaW1pdGVkUG9pbnRzLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0VW5pcXVlQXJ0aXN0cyhcbiAgY29sbGVjdGlvbjogc3RyaW5nLFxuICBsaW1pdDogbnVtYmVyXG4pOiBQcm9taXNlPHsgYXJ0aXN0czogc3RyaW5nW10gfT4ge1xuICAvLyBHZXQgQUxMIHBvaW50cyBmcm9tIHRoZSBjb2xsZWN0aW9uIHRvIGVuc3VyZSBhY2N1cmF0ZSBhcnRpc3QgbGlzdGluZ1xuICBsZXQgYWxsUG9pbnRzOiBhbnlbXSA9IFtdO1xuICBsZXQgb2Zmc2V0OiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgLy8gU2Nyb2xsIHRocm91Z2ggYWxsIHBvaW50cyBpbiB0aGUgY29sbGVjdGlvblxuICBkbyB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICAgIGxpbWl0OiAxMDAwLCAvLyBQcm9jZXNzIGluIGJhdGNoZXMgb2YgMTAwMFxuICAgICAgLi4uKG9mZnNldCAhPT0gdW5kZWZpbmVkICYmIHsgb2Zmc2V0IH0pLFxuICAgICAgd2l0aF9wYXlsb2FkOiB0cnVlLFxuICAgICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgYWxsUG9pbnRzLnB1c2goLi4ucmVzcG9uc2UucG9pbnRzKTtcbiAgICAvLyBTYWZlbHkgaGFuZGxlIHRoZSBvZmZzZXQgdHlwZVxuICAgIGNvbnN0IG5leHRPZmZzZXQgPSByZXNwb25zZS5uZXh0X3BhZ2Vfb2Zmc2V0O1xuICAgIGlmICh0eXBlb2YgbmV4dE9mZnNldCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgbmV4dE9mZnNldCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgb2Zmc2V0ID0gbmV4dE9mZnNldDtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSB3aGlsZSAob2Zmc2V0ICE9PSBudWxsICYmIG9mZnNldCAhPT0gdW5kZWZpbmVkKTtcblxuICBjb25zdCBhcnRpc3RzID0gbmV3IFNldChcbiAgICBhbGxQb2ludHMubWFwKChwb2ludDogYW55KSA9PiBwb2ludC5wYXlsb2FkPy5uYW1lKS5maWx0ZXIoQm9vbGVhbilcbiAgKTtcblxuICAvLyBSZXR1cm4gdGhlIHJlcXVlc3RlZCBudW1iZXIgb2YgYXJ0aXN0c1xuICByZXR1cm4geyBhcnRpc3RzOiBBcnJheS5mcm9tKGFydGlzdHMpLnNsaWNlKDAsIGxpbWl0KSB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0SW1hZ2VzKGNvbGxlY3Rpb246IHN0cmluZywgbGltaXQ6IG51bWJlcik6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnNjcm9sbChjb2xsZWN0aW9uLCB7XG4gICAgbGltaXQsXG4gICAgd2l0aF9wYXlsb2FkOiB0cnVlLFxuICAgIHdpdGhfdmVjdG9yOiBmYWxzZSxcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb3VudDogcmVzcG9uc2UucG9pbnRzLmxlbmd0aCxcbiAgICBpbWFnZXM6IHJlc3BvbnNlLnBvaW50cy5tYXAoKHBvaW50OiBhbnkpID0+ICh7XG4gICAgICBpZDogcG9pbnQuaWQsXG4gICAgICBhcnRpc3Q6IHBvaW50LnBheWxvYWQ/Lm5hbWUsXG4gICAgICBmaWxlbmFtZTogcG9pbnQucGF5bG9hZD8uZmlsZV9uYW1lLFxuICAgIH0pKSxcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmlsdGVySW1hZ2VzKFxuICBjb2xsZWN0aW9uOiBzdHJpbmcsXG4gIGZpbHRlcjogYW55LFxuICBsaW1pdDogbnVtYmVyXG4pOiBQcm9taXNlPGFueT4ge1xuICByZXR1cm4gYXdhaXQgc2VhcmNoSW1hZ2VzKGNvbGxlY3Rpb24sIGZpbHRlciwgbGltaXQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBkZXNjcmliZUNvbGxlY3Rpb24oY29sbGVjdGlvbjogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgdG90YWxDb3VudCA9IGF3YWl0IGNvdW50VG90YWwoY29sbGVjdGlvbik7XG4gIGNvbnN0IGFydGlzdHNEYXRhID0gYXdhaXQgY291bnRVbmlxdWVBcnRpc3RzKGNvbGxlY3Rpb24pO1xuICBjb25zdCBzYW1wbGVJbWFnZXMgPSBhd2FpdCBsaXN0SW1hZ2VzKGNvbGxlY3Rpb24sIDUpO1xuXG4gIHJldHVybiB7XG4gICAgdG90YWxfaW1hZ2VzOiB0b3RhbENvdW50LmNvdW50LFxuICAgIHVuaXF1ZV9hcnRpc3RzOiBhcnRpc3RzRGF0YS5jb3VudCxcbiAgICBzYW1wbGVfYXJ0aXN0czogYXJ0aXN0c0RhdGEuYXJ0aXN0cy5zbGljZSgwLCAxMCksXG4gICAgc2FtcGxlX2ltYWdlczogc2FtcGxlSW1hZ2VzLmltYWdlcyxcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVSZXNwb25zZShcbiAgcXVlc3Rpb246IHN0cmluZyxcbiAgaW50ZW50OiBRdWVyeUludGVudCxcbiAgZGF0YTogYW55LFxuICBwcm92aWRlcjogRW1iZWRkaW5nUHJvdmlkZXIsXG4gIG1vZGVsPzogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBmYWxsYmFja1Jlc3BvbnNlID0gZ2VuZXJhdGVGYWxsYmFja1Jlc3BvbnNlKHF1ZXN0aW9uLCBpbnRlbnQsIGRhdGEpO1xuXG4gIGlmICghcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgJiYgIXByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZKSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrUmVzcG9uc2U7XG4gIH1cblxuICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgZXhwbGFpbnMgdmVjdG9yIGRhdGFiYXNlIHF1ZXJ5IHJlc3VsdHMgaW4gbmF0dXJhbCBsYW5ndWFnZS5cbiAgXG5UaGUgdXNlciBhc2tlZDogXCIke3F1ZXN0aW9ufVwiXG5UaGUgcXVlcnkgdHlwZSB3YXM6ICR7aW50ZW50LnR5cGV9XG5UaGUgZGF0YSByZXR1cm5lZCBpczogJHtKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKX1cblxuSU1QT1JUQU5UIEdVSURFTElORVMgRk9SIFJBTktJTkcvVE9QIFFVRVJJRVM6XG4tIElmIHRoZXJlIGFyZSB0aWVzIChtdWx0aXBsZSBhcnRpc3RzIHdpdGggdGhlIHNhbWUgY291bnQpLCBBTFdBWVMgbWVudGlvbiB0aGlzIGV4cGxpY2l0bHlcbi0gRG9uJ3Qgc2F5IFwiWCBoYXMgdGhlIG1vc3RcIiBpZiB0aGVyZSBhcmUgdGllcyAtIHNheSBcIlggaXMgdGllZCBmb3IgdGhlIG1vc3RcIiBvciBcIlggYW5kIFkgYXJlIHRpZWRcIlxuLSBQYXkgYXR0ZW50aW9uIHRvIHRoZSBcImhhc190aWVcIiwgXCJ0aWVfY291bnRcIiwgYW5kIFwiYXJ0aXN0c193aXRoX21heF9jb3VudFwiIGZpZWxkcyBpbiB0aGUgZGF0YVxuLSBCZSBwcmVjaXNlIHdpdGggc2luZ3VsYXIvcGx1cmFsIGZvcm1zICgxIGltYWdlIHZzIDIgaW1hZ2VzKVxuLSBJZiB0aGUgdXNlciBhc2tlZCBmb3IgXCJ0aGUgYXJ0aXN0IHdpdGggbW9zdFwiIGJ1dCB0aGVyZSdzIGEgdGllLCBleHBsYWluIHRoZSB0aWUgc2l0dWF0aW9uIGNsZWFybHlcblxuUHJvdmlkZSBhIGNvbmNpc2UsIG5hdHVyYWwgbGFuZ3VhZ2UgcmVzcG9uc2UgdGhhdCBkaXJlY3RseSBhbnN3ZXJzIHRoZSB1c2VyJ3MgcXVlc3Rpb24uIEJlIHNwZWNpZmljIHdpdGggbnVtYmVycyBhbmQgbmFtZXMgd2hlbiBhdmFpbGFibGUsIGFuZCBhbHdheXMgYmUgYWNjdXJhdGUgYWJvdXQgdGllcyBhbmQgcmFua2luZ3MuYDtcblxuICB0cnkge1xuICAgIGxldCByZXNwb25zZTogc3RyaW5nO1xuXG4gICAgaWYgKHByb3ZpZGVyID09PSBcImdlbWluaVwiICYmIHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZKSB7XG4gICAgICBjb25zdCBnZW1pbmlNb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7XG4gICAgICAgIG1vZGVsOiBtb2RlbCB8fCBcImdlbWluaS0yLjAtZmxhc2hcIiwgLy8gVXNlIHNwZWNpZmljIG1vZGVsIHBhcmFtZXRlclxuICAgICAgfSk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW1pbmlNb2RlbC5nZW5lcmF0ZUNvbnRlbnQoc3lzdGVtUHJvbXB0KTtcbiAgICAgIHJlc3BvbnNlID0gcmVzdWx0LnJlc3BvbnNlLnRleHQoKTtcbiAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSBcIm9wZW5haVwiICYmIHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgICBtb2RlbDogbW9kZWwgfHwgXCJncHQtMy41LXR1cmJvXCIsIC8vIFVzZSBzcGVjaWZpYyBtb2RlbCBwYXJhbWV0ZXJcbiAgICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogc3lzdGVtUHJvbXB0IH1dLFxuICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXG4gICAgICAgICAgbWF4X3Rva2VuczogMjAwLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzcG9uc2UgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50IHx8IGZhbGxiYWNrUmVzcG9uc2U7XG4gICAgICB9IGNhdGNoIChvcGVuYWlFcnJvcjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIk9wZW5BSSBmYWlsZWQgaW4gZ2VuZXJhdGVSZXNwb25zZSwgdHJ5aW5nIEdlbWluaSBmYWxsYmFjazpcIixcbiAgICAgICAgICBvcGVuYWlFcnJvci5tZXNzYWdlXG4gICAgICAgICk7XG4gICAgICAgIC8vIEF1dG8tZmFsbGJhY2sgdG8gR2VtaW5pIGlmIE9wZW5BSSBmYWlsc1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpIHtcbiAgICAgICAgICBjb25zdCBnZW1pbmlNb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7XG4gICAgICAgICAgICBtb2RlbDogXCJnZW1pbmktMi4wLWZsYXNoXCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2VtaW5pTW9kZWwuZ2VuZXJhdGVDb250ZW50KHN5c3RlbVByb21wdCk7XG4gICAgICAgICAgcmVzcG9uc2UgPSByZXN1bHQucmVzcG9uc2UudGV4dCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG9wZW5haUVycm9yOyAvLyBSZS10aHJvdyBpZiBubyBHZW1pbmkgZmFsbGJhY2sgYXZhaWxhYmxlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbGxiYWNrUmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlLnRyaW0oKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZ2VuZXJhdGUgTExNIHJlc3BvbnNlLCB1c2luZyBmYWxsYmFjazpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBmYWxsYmFja1Jlc3BvbnNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlRmFsbGJhY2tSZXNwb25zZShcbiAgcXVlc3Rpb246IHN0cmluZyxcbiAgaW50ZW50OiBRdWVyeUludGVudCxcbiAgZGF0YTogYW55XG4pOiBzdHJpbmcge1xuICAvLyBTYWZlbHkgaGFuZGxlIG51bGwvdW5kZWZpbmVkIGRhdGFcbiAgY29uc3Qgc2FmZURhdGEgPSBkYXRhIHx8IHt9O1xuXG4gIGlmIChpbnRlbnQuc2NvcGUgPT09IFwiZGF0YWJhc2VcIikge1xuICAgIHN3aXRjaCAoaW50ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgXCJjb3VudFwiOlxuICAgICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJjb2xsZWN0aW9uc1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGBJIGZvdW5kICR7c2FmZURhdGEuY291bnQgfHwgMH0gY29sbGVjdGlvbnMgaW4gdGhlIGRhdGFiYXNlOiAke1xuICAgICAgICAgICAgc2FmZURhdGEuY29sbGVjdGlvbnM/LmpvaW4oXCIsIFwiKSB8fCBcIk5vbmUgZm91bmRcIlxuICAgICAgICAgIH0uYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJhcnRpc3RzXCIpIHtcbiAgICAgICAgICByZXR1cm4gYEkgZm91bmQgJHtcbiAgICAgICAgICAgIHNhZmVEYXRhLmNvdW50IHx8IDBcbiAgICAgICAgICB9IHVuaXF1ZSBhcnRpc3RzIGFjcm9zcyBhbGwgY29sbGVjdGlvbnMuIFNvbWUgb2YgdGhlbSBpbmNsdWRlOiAke1xuICAgICAgICAgICAgc2FmZURhdGEuYXJ0aXN0cz8uc2xpY2UoMCwgNSkuam9pbihcIiwgXCIpIHx8IFwiTm8gYXJ0aXN0cyBmb3VuZFwiXG4gICAgICAgICAgfS5gO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImltYWdlc1wiICYmIGludGVudC5maWx0ZXI/Lm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gYEkgZm91bmQgJHtzYWZlRGF0YS5jb3VudCB8fCAwfSBpbWFnZXMgYnkgJHtcbiAgICAgICAgICAgIHNhZmVEYXRhLmFydGlzdCB8fCBpbnRlbnQuZmlsdGVyLm5hbWVcbiAgICAgICAgICB9IGFjcm9zcyBhbGwgY29sbGVjdGlvbnMuICR7XG4gICAgICAgICAgICBzYWZlRGF0YS5ieV9jb2xsZWN0aW9uPy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgID8gYEZvdW5kIGluOiAke3NhZmVEYXRhLmJ5X2NvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICAgIC5tYXAoKGM6IGFueSkgPT4gYCR7Yy5jb2xsZWN0aW9ufSAoJHtjLmNvdW50fSlgKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX0uYFxuICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICB9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJ0b3RhbFwiKSB7XG4gICAgICAgICAgcmV0dXJuIGBUaGUgZGF0YWJhc2UgY29udGFpbnMgJHtcbiAgICAgICAgICAgIHNhZmVEYXRhLmNvdW50IHx8IDBcbiAgICAgICAgICB9IHRvdGFsIHZlY3RvcnMgYWNyb3NzIGFsbCBjb2xsZWN0aW9ucy5gO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNvbGxlY3Rpb25zXCI6XG4gICAgICAgIHJldHVybiBgVGhlIGRhdGFiYXNlIGNvbnRhaW5zICR7XG4gICAgICAgICAgc2FmZURhdGEuY29sbGVjdGlvbnM/Lmxlbmd0aCB8fCAwXG4gICAgICAgIH0gY29sbGVjdGlvbnM6ICR7XG4gICAgICAgICAgc2FmZURhdGEuY29sbGVjdGlvbnNcbiAgICAgICAgICAgID8ubWFwKChjOiBhbnkpID0+IGAke2MubmFtZX0gKCR7Yy52ZWN0b3JzX2NvdW50IHx8IDB9IHZlY3RvcnMpYClcbiAgICAgICAgICAgIC5qb2luKFwiLCBcIikgfHwgXCJOb25lIGZvdW5kXCJcbiAgICAgICAgfS5gO1xuICAgICAgY2FzZSBcImRhdGFiYXNlXCI6XG4gICAgICAgIHJldHVybiBgVGhlIGRhdGFiYXNlIGNvbnRhaW5zICR7XG4gICAgICAgICAgc2FmZURhdGEudG90YWxfY29sbGVjdGlvbnMgfHwgMFxuICAgICAgICB9IGNvbGxlY3Rpb25zIHdpdGggYSB0b3RhbCBvZiAke3NhZmVEYXRhLnRvdGFsX3ZlY3RvcnMgfHwgMH0gdmVjdG9ycy5gO1xuICAgICAgY2FzZSBcInNlYXJjaFwiOlxuICAgICAgICByZXR1cm4gYEkgc2VhcmNoZWQgYWNyb3NzICR7XG4gICAgICAgICAgc2FmZURhdGEuY29sbGVjdGlvbnNfc2VhcmNoZWQgfHwgMFxuICAgICAgICB9IGNvbGxlY3Rpb25zIGFuZCBmb3VuZCAke3NhZmVEYXRhLnRvdGFsX2NvdW50IHx8IDB9IG1hdGNoaW5nIGl0ZW1zLmA7XG4gICAgICBjYXNlIFwic3VtbWFyaXplXCI6XG4gICAgICAgIGlmIChpbnRlbnQuZmlsdGVyPy5uYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGBTdW1tYXJ5IG9mICR7XG4gICAgICAgICAgICAgIHNhZmVEYXRhLmFydGlzdCB8fCBpbnRlbnQuZmlsdGVyLm5hbWVcbiAgICAgICAgICAgIH0ncyB3b3JrIGFjcm9zcyB0aGUgZGF0YWJhc2U6XFxuXFxuYCArXG4gICAgICAgICAgICBgVG90YWwgSW1hZ2VzOiAke3NhZmVEYXRhLnRvdGFsX2ltYWdlcyB8fCAwfVxcbmAgK1xuICAgICAgICAgICAgYENvbGxlY3Rpb25zOiBGb3VuZCBpbiAke1xuICAgICAgICAgICAgICBzYWZlRGF0YS5jb2xsZWN0aW9uc19mb3VuZCB8fCAwXG4gICAgICAgICAgICB9IGNvbGxlY3Rpb25zXFxuYCArXG4gICAgICAgICAgICBgRmlsZSBUeXBlczogJHtzYWZlRGF0YS5maWxlX3R5cGVzPy5qb2luKFwiLCBcIikgfHwgXCJWYXJpb3VzXCJ9XFxuXFxuYCArXG4gICAgICAgICAgICBgQnJlYWtkb3duIGJ5IGNvbGxlY3Rpb246XFxuJHtcbiAgICAgICAgICAgICAgc2FmZURhdGEuYnlfY29sbGVjdGlvblxuICAgICAgICAgICAgICAgID8ubWFwKChjOiBhbnkpID0+IGDigKIgJHtjLmNvbGxlY3Rpb259OiAke2MuaW1hZ2VfY291bnR9IGltYWdlc2ApXG4gICAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIikgfHwgXCJObyBjb2xsZWN0aW9ucyBmb3VuZFwiXG4gICAgICAgICAgICB9XFxuXFxuYCArXG4gICAgICAgICAgICBgU2FtcGxlIEltYWdlczogJHtcbiAgICAgICAgICAgICAgc2FmZURhdGEuc2FtcGxlX2ltYWdlc1xuICAgICAgICAgICAgICAgID8uc2xpY2UoMCwgMylcbiAgICAgICAgICAgICAgICAubWFwKChpbWc6IGFueSkgPT4gYCR7aW1nLmZpbGVuYW1lfSAoJHtpbWcuY29sbGVjdGlvbn0pYClcbiAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpIHx8IFwiTm9uZSBmb3VuZFwiXG4gICAgICAgICAgICB9YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibGlzdFwiOlxuICAgICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJhcnRpc3RzXCIpIHtcbiAgICAgICAgICByZXR1cm4gYEkgZm91bmQgJHtcbiAgICAgICAgICAgIHNhZmVEYXRhLmFydGlzdHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgfSB1bmlxdWUgYXJ0aXN0cyBhY3Jvc3MgYWxsIGNvbGxlY3Rpb25zOiAke1xuICAgICAgICAgICAgc2FmZURhdGEuYXJ0aXN0cz8uc2xpY2UoMCwgMTApLmpvaW4oXCIsIFwiKSB8fCBcIk5vIGFydGlzdHMgZm91bmRcIlxuICAgICAgICAgIH0uYDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBDb2xsZWN0aW9uLWxldmVsIHJlc3BvbnNlc1xuICBzd2l0Y2ggKGludGVudC50eXBlKSB7XG4gICAgY2FzZSBcImNvdW50XCI6XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJhcnRpc3RzXCIpIHtcbiAgICAgICAgcmV0dXJuIGBJIGZvdW5kICR7XG4gICAgICAgICAgc2FmZURhdGEuY291bnQgfHwgMFxuICAgICAgICB9IHVuaXF1ZSBhcnRpc3RzIGluIHRoZSBjb2xsZWN0aW9uLiBTb21lIG9mIHRoZW0gaW5jbHVkZTogJHtcbiAgICAgICAgICBzYWZlRGF0YS5hcnRpc3RzPy5zbGljZSgwLCA1KS5qb2luKFwiLCBcIikgfHwgXCJObyBhcnRpc3RzIGZvdW5kXCJcbiAgICAgICAgfS5gO1xuICAgICAgfSBlbHNlIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImltYWdlc1wiICYmIGludGVudC5maWx0ZXI/Lm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGBJIGZvdW5kICR7c2FmZURhdGEuY291bnQgfHwgMH0gaW1hZ2VzIGJ5ICR7XG4gICAgICAgICAgc2FmZURhdGEuYXJ0aXN0IHx8IGludGVudC5maWx0ZXIubmFtZVxuICAgICAgICB9IGluIHRoaXMgY29sbGVjdGlvbi4ke1xuICAgICAgICAgIHNhZmVEYXRhLnNhbXBsZV9pbWFnZXM/Lmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gYCBTYW1wbGUgZmlsZXM6ICR7c2FmZURhdGEuc2FtcGxlX2ltYWdlc1xuICAgICAgICAgICAgICAgIC5zbGljZSgwLCAzKVxuICAgICAgICAgICAgICAgIC5tYXAoKGltZzogYW55KSA9PiBpbWcuZmlsZW5hbWUpXG4gICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX0uYFxuICAgICAgICAgICAgOiBcIlwiXG4gICAgICAgIH1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGBUaGUgY29sbGVjdGlvbiBjb250YWlucyAke3NhZmVEYXRhLmNvdW50IHx8IDB9IHRvdGFsIGltYWdlcy5gO1xuICAgICAgfVxuXG4gICAgY2FzZSBcInNlYXJjaFwiOlxuICAgIGNhc2UgXCJmaWx0ZXJcIjpcbiAgICAgIHJldHVybiBgSSBmb3VuZCAke3NhZmVEYXRhLmNvdW50IHx8IDB9IGltYWdlcyBtYXRjaGluZyB5b3VyIGNyaXRlcmlhLmA7XG5cbiAgICBjYXNlIFwic3VtbWFyaXplXCI6XG4gICAgICBpZiAoaW50ZW50LmZpbHRlcj8ubmFtZSkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGBTdW1tYXJ5IG9mICR7XG4gICAgICAgICAgICBzYWZlRGF0YS5hcnRpc3QgfHwgaW50ZW50LmZpbHRlci5uYW1lXG4gICAgICAgICAgfSdzIHdvcmsgaW4gdGhpcyBjb2xsZWN0aW9uOlxcblxcbmAgK1xuICAgICAgICAgIGBUb3RhbCBJbWFnZXM6ICR7c2FmZURhdGEudG90YWxfaW1hZ2VzIHx8IDB9XFxuYCArXG4gICAgICAgICAgYEZpbGUgVHlwZXM6ICR7c2FmZURhdGEuZmlsZV90eXBlcz8uam9pbihcIiwgXCIpIHx8IFwiVmFyaW91c1wifVxcbmAgK1xuICAgICAgICAgIGBTYW1wbGUgRmlsZXM6ICR7XG4gICAgICAgICAgICBzYWZlRGF0YS5zYW1wbGVfZmlsZW5hbWVzPy5zbGljZSgwLCA1KS5qb2luKFwiLCBcIikgfHwgXCJOb25lXCJcbiAgICAgICAgICB9XFxuXFxuYCArXG4gICAgICAgICAgYEltYWdlIERldGFpbHM6XFxuJHtcbiAgICAgICAgICAgIHNhZmVEYXRhLmltYWdlc1xuICAgICAgICAgICAgICA/LnNsaWNlKDAsIDUpXG4gICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgKGltZzogYW55LCBpOiBudW1iZXIpID0+XG4gICAgICAgICAgICAgICAgICBgJHtpICsgMX0uICR7aW1nLmZpbGVuYW1lIHx8IFwiVW5rbm93biBmaWxlXCJ9YFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpIHx8IFwiTm8gaW1hZ2VzIGZvdW5kXCJcbiAgICAgICAgICB9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwiYW5hbHl6ZVwiOlxuICAgICAgaWYgKGludGVudC5maWx0ZXI/Lm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBgQW5hbHlzaXMgb2YgJHtcbiAgICAgICAgICAgIHNhZmVEYXRhLmFydGlzdCB8fCBpbnRlbnQuZmlsdGVyLm5hbWVcbiAgICAgICAgICB9J3Mgd29yayBwYXR0ZXJuczpcXG5cXG5gICtcbiAgICAgICAgICBgVG90YWwgSW1hZ2VzOiAke3NhZmVEYXRhLnRvdGFsX2ltYWdlcyB8fCAwfVxcbmAgK1xuICAgICAgICAgIGBGaWxlIFR5cGVzOiAke1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoc2FmZURhdGEuZmlsZV90eXBlX2Rpc3RyaWJ1dGlvbiB8fCB7fSlcbiAgICAgICAgICAgICAgLm1hcCgoW3R5cGUsIGNvdW50XSkgPT4gYCR7dHlwZX0gKCR7Y291bnR9KWApXG4gICAgICAgICAgICAgIC5qb2luKFwiLCBcIikgfHwgXCJWYXJpb3VzXCJcbiAgICAgICAgICB9XFxuYCArXG4gICAgICAgICAgYENvbW1vbiBQYXR0ZXJuczogJHtcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHNhZmVEYXRhLmNvbW1vbl9uYW1pbmdfcGF0dGVybnMgfHwge30pXG4gICAgICAgICAgICAgIC5zbGljZSgwLCAzKVxuICAgICAgICAgICAgICAubWFwKChbcGF0dGVybiwgY291bnRdKSA9PiBgXCIke3BhdHRlcm59XCIgKCR7Y291bnR9IGZpbGVzKWApXG4gICAgICAgICAgICAgIC5qb2luKFwiLCBcIikgfHwgXCJObyBwYXR0ZXJucyBmb3VuZFwiXG4gICAgICAgICAgfVxcbmAgK1xuICAgICAgICAgIGBTb3VyY2UgRG9tYWluczogJHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNhZmVEYXRhLnNvdXJjZV9kb21haW5zIHx8IHt9KS5qb2luKFwiLCBcIikgfHwgXCJWYXJpb3VzXCJcbiAgICAgICAgICB9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwibGlzdFwiOlxuICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiYXJ0aXN0c1wiKSB7XG4gICAgICAgIHJldHVybiBgSGVyZSBhcmUgdGhlIGFydGlzdHMgaW4gdGhlIGNvbGxlY3Rpb246ICR7XG4gICAgICAgICAgc2FmZURhdGEuYXJ0aXN0cz8uc2xpY2UoMCwgMTApLmpvaW4oXCIsIFwiKSB8fCBcIk5vIGFydGlzdHMgZm91bmRcIlxuICAgICAgICB9JHtzYWZlRGF0YS5hcnRpc3RzPy5sZW5ndGggPiAxMCA/IFwiLi4uXCIgOiBcIlwifS5gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGBJIGZvdW5kICR7c2FmZURhdGEuY291bnQgfHwgMH0gaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb24uYDtcbiAgICAgIH1cblxuICAgIGNhc2UgXCJkZXNjcmliZVwiOlxuICAgICAgcmV0dXJuIGBUaGlzIGNvbGxlY3Rpb24gY29udGFpbnMgJHtcbiAgICAgICAgc2FmZURhdGEudG90YWxfaW1hZ2VzIHx8IDBcbiAgICAgIH0gaW1hZ2VzIGZyb20gJHtcbiAgICAgICAgc2FmZURhdGEudW5pcXVlX2FydGlzdHMgfHwgMFxuICAgICAgfSB1bmlxdWUgYXJ0aXN0cy4gU29tZSBmZWF0dXJlZCBhcnRpc3RzIGluY2x1ZGU6ICR7XG4gICAgICAgIHNhZmVEYXRhLnNhbXBsZV9hcnRpc3RzPy5zbGljZSgwLCA1KS5qb2luKFwiLCBcIikgfHwgXCJObyBhcnRpc3RzIGZvdW5kXCJcbiAgICAgIH0uYDtcblxuICAgIGNhc2UgXCJ0b3BcIjpcbiAgICBjYXNlIFwicmFua2luZ1wiOlxuICAgICAgaWYgKHNhZmVEYXRhLnRvcF9hcnRpc3RzICYmIHNhZmVEYXRhLnRvcF9hcnRpc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIHRpZXMgYXQgdGhlIHRvcFxuICAgICAgICBpZiAoc2FmZURhdGEuaGFzX3RpZSAmJiBpbnRlbnQubGltaXQgPT09IDEpIHtcbiAgICAgICAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdXNlciBhc2tlZCBmb3IgXCJ0aGUgYXJ0aXN0IHdpdGggbW9zdFwiIGJ1dCB0aGVyZSdzIGEgdGllXG4gICAgICAgICAgY29uc3QgdGllZEFydGlzdHMgPVxuICAgICAgICAgICAgc2FmZURhdGEuYXJ0aXN0c193aXRoX21heF9jb3VudCB8fFxuICAgICAgICAgICAgc2FmZURhdGEudG9wX2FydGlzdHMuZmlsdGVyKFxuICAgICAgICAgICAgICAoYXJ0aXN0OiBhbnkpID0+IGFydGlzdC5pbWFnZV9jb3VudCA9PT0gc2FmZURhdGEubWF4X2ltYWdlX2NvdW50XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKHRpZWRBcnRpc3RzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgcmV0dXJuIGBUaGVyZSdzIGEgdGllISBCb3RoICR7dGllZEFydGlzdHNbMF0ubmFtZX0gYW5kICR7XG4gICAgICAgICAgICAgIHRpZWRBcnRpc3RzWzFdLm5hbWVcbiAgICAgICAgICAgIH0gaGF2ZSB0aGUgbW9zdCBpbWFnZXMgd2l0aCAke3NhZmVEYXRhLm1heF9pbWFnZV9jb3VudH0gaW1hZ2Uke1xuICAgICAgICAgICAgICBzYWZlRGF0YS5tYXhfaW1hZ2VfY291bnQgPT09IDEgPyBcIlwiIDogXCJzXCJcbiAgICAgICAgICAgIH0gZWFjaC5gO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGllZEFydGlzdHMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgY29uc3QgbGFzdEFydGlzdCA9IHRpZWRBcnRpc3RzW3RpZWRBcnRpc3RzLmxlbmd0aCAtIDFdLm5hbWU7XG4gICAgICAgICAgICBjb25zdCBvdGhlckFydGlzdHMgPSB0aWVkQXJ0aXN0c1xuICAgICAgICAgICAgICAuc2xpY2UoMCwgLTEpXG4gICAgICAgICAgICAgIC5tYXAoKGE6IGFueSkgPT4gYS5uYW1lKVxuICAgICAgICAgICAgICAuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGBUaGVyZSdzIGEgJHtcbiAgICAgICAgICAgICAgdGllZEFydGlzdHMubGVuZ3RoXG4gICAgICAgICAgICB9LXdheSB0aWUhICR7b3RoZXJBcnRpc3RzfSwgYW5kICR7bGFzdEFydGlzdH0gYWxsIGhhdmUgdGhlIG1vc3QgaW1hZ2VzIHdpdGggJHtcbiAgICAgICAgICAgICAgc2FmZURhdGEubWF4X2ltYWdlX2NvdW50XG4gICAgICAgICAgICB9IGltYWdlJHtzYWZlRGF0YS5tYXhfaW1hZ2VfY291bnQgPT09IDEgPyBcIlwiIDogXCJzXCJ9IGVhY2guYDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIYW5kbGUgcmVndWxhciBjYXNlcyAobm8gdGllIG9yIHVzZXIgYXNrZWQgZm9yIG11bHRpcGxlIHJlc3VsdHMpXG4gICAgICAgIGlmIChpbnRlbnQubGltaXQgPT09IDEgJiYgIXNhZmVEYXRhLmhhc190aWUpIHtcbiAgICAgICAgICBjb25zdCB0b3BBcnRpc3QgPSBzYWZlRGF0YS50b3BfYXJ0aXN0c1swXTtcbiAgICAgICAgICByZXR1cm4gYCR7dG9wQXJ0aXN0Lm5hbWV9IGhhcyB0aGUgbW9zdCBpbWFnZXMgd2l0aCAke1xuICAgICAgICAgICAgdG9wQXJ0aXN0LmltYWdlX2NvdW50XG4gICAgICAgICAgfSBpbWFnZSR7dG9wQXJ0aXN0LmltYWdlX2NvdW50ID09PSAxID8gXCJcIiA6IFwic1wifS5gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE11bHRpcGxlIHJlc3VsdHMgb3IgdGllIHNpdHVhdGlvbiB3aGVyZSB3ZSBzaG93IHRoZSBsaXN0XG4gICAgICAgICAgY29uc3QgYXJ0aXN0TGlzdCA9IHNhZmVEYXRhLnRvcF9hcnRpc3RzXG4gICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAoYXJ0aXN0OiBhbnksIGluZGV4OiBudW1iZXIpID0+XG4gICAgICAgICAgICAgICAgYCR7aW5kZXggKyAxfS4gJHthcnRpc3QubmFtZX0gKCR7YXJ0aXN0LmltYWdlX2NvdW50fSBpbWFnZSR7XG4gICAgICAgICAgICAgICAgICBhcnRpc3QuaW1hZ2VfY291bnQgPT09IDEgPyBcIlwiIDogXCJzXCJcbiAgICAgICAgICAgICAgICB9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5qb2luKFwiLCBcIik7XG5cbiAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBgVG9wICR7XG4gICAgICAgICAgICBpbnRlbnQubGltaXQgfHwgc2FmZURhdGEudG9wX2FydGlzdHMubGVuZ3RoXG4gICAgICAgICAgfSBhcnRpc3RzIGJ5IGltYWdlIGNvdW50OiAke2FydGlzdExpc3R9YDtcblxuICAgICAgICAgIC8vIEFkZCB0aWUgaW5mb3JtYXRpb24gaWYgcmVsZXZhbnRcbiAgICAgICAgICBpZiAoc2FmZURhdGEuaGFzX3RpZSAmJiBzYWZlRGF0YS50aWVfY291bnQgPiAxKSB7XG4gICAgICAgICAgICByZXNwb25zZSArPSBgLiBOb3RlOiAke1xuICAgICAgICAgICAgICBzYWZlRGF0YS50aWVfY291bnRcbiAgICAgICAgICAgIH0gYXJ0aXN0cyBhcmUgdGllZCBmb3IgdGhlIGhpZ2hlc3QgY291bnQgb2YgJHtcbiAgICAgICAgICAgICAgc2FmZURhdGEubWF4X2ltYWdlX2NvdW50XG4gICAgICAgICAgICB9IGltYWdlJHtzYWZlRGF0YS5tYXhfaW1hZ2VfY291bnQgPT09IDEgPyBcIlwiIDogXCJzXCJ9LmA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJObyBhcnRpc3RzIGZvdW5kIHdpdGggaW1hZ2VzLlwiO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcIkkgcHJvY2Vzc2VkIHlvdXIgcXVlcnkgc3VjY2Vzc2Z1bGx5IHVzaW5nIHBhdHRlcm4gbWF0Y2hpbmcuXCI7XG4gIH1cblxuICByZXR1cm4gXCJJIHByb2Nlc3NlZCB5b3VyIHF1ZXJ5IHN1Y2Nlc3NmdWxseS5cIjtcbn1cblxuLy8gTmV3IGRhdGFiYXNlLWxldmVsIGZ1bmN0aW9ucyBmb3IgYXJ0aXN0cyBhbmQgdG90YWwgY291bnRzXG5hc3luYyBmdW5jdGlvbiBjb3VudEFydGlzdHNBY3Jvc3NEYXRhYmFzZSgpOiBQcm9taXNlPHtcbiAgY291bnQ6IG51bWJlcjtcbiAgYXJ0aXN0czogc3RyaW5nW107XG59PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zRGF0YSA9IGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuICBjb25zdCBhbGxBcnRpc3RzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgLy8gQ29sbGVjdCBhcnRpc3RzIGZyb20gZWFjaCBjb2xsZWN0aW9uXG4gIGZvciAoY29uc3QgY29sbGVjdGlvbiBvZiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGNvbGxlY3Rpb24udmVjdG9yc19jb3VudCAmJiBjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgPiAwKSB7XG4gICAgICAgIGNvbnN0IGFydGlzdHNEYXRhID0gYXdhaXQgY291bnRVbmlxdWVBcnRpc3RzKGNvbGxlY3Rpb24ubmFtZSk7XG4gICAgICAgIGFydGlzdHNEYXRhLmFydGlzdHMuZm9yRWFjaCgoYXJ0aXN0KSA9PiBhbGxBcnRpc3RzLmFkZChhcnRpc3QpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgRmFpbGVkIHRvIGdldCBhcnRpc3RzIGZyb20gY29sbGVjdGlvbiAke2NvbGxlY3Rpb24ubmFtZX06YCxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjb3VudDogYWxsQXJ0aXN0cy5zaXplLFxuICAgIGFydGlzdHM6IEFycmF5LmZyb20oYWxsQXJ0aXN0cykuc2xpY2UoMCwgMjApLCAvLyBTaG93IGZpcnN0IDIwXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNvdW50VG90YWxWZWN0b3JzQWNyb3NzRGF0YWJhc2UoKTogUHJvbWlzZTx7XG4gIGNvdW50OiBudW1iZXI7XG4gIGJ5X2NvbGxlY3Rpb246IEFycmF5PHsgbmFtZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH0+O1xufT4ge1xuICBjb25zdCBjb2xsZWN0aW9uc0RhdGEgPSBhd2FpdCBsaXN0Q29sbGVjdGlvbnMoKTtcbiAgY29uc3QgdG90YWxWZWN0b3JzID0gY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zLnJlZHVjZShcbiAgICAoc3VtLCBjb2wpID0+IHN1bSArIChjb2wudmVjdG9yc19jb3VudCB8fCAwKSxcbiAgICAwXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb3VudDogdG90YWxWZWN0b3JzLFxuICAgIGJ5X2NvbGxlY3Rpb246IGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucy5tYXAoKGNvbCkgPT4gKHtcbiAgICAgIG5hbWU6IGNvbC5uYW1lLFxuICAgICAgY291bnQ6IGNvbC52ZWN0b3JzX2NvdW50IHx8IDAsXG4gICAgfSkpLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0QXJ0aXN0c0Fjcm9zc0RhdGFiYXNlKGxpbWl0OiBudW1iZXIpOiBQcm9taXNlPHtcbiAgYXJ0aXN0czogc3RyaW5nW107XG4gIGJ5X2NvbGxlY3Rpb246IEFycmF5PHsgY29sbGVjdGlvbjogc3RyaW5nOyBhcnRpc3RzOiBzdHJpbmdbXSB9Pjtcbn0+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNEYXRhID0gYXdhaXQgbGlzdENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IGFsbEFydGlzdHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgY29uc3QgYnlDb2xsZWN0aW9uOiBBcnJheTx7IGNvbGxlY3Rpb246IHN0cmluZzsgYXJ0aXN0czogc3RyaW5nW10gfT4gPSBbXTtcblxuICAvLyBDb2xsZWN0IGFydGlzdHMgZnJvbSBlYWNoIGNvbGxlY3Rpb25cbiAgZm9yIChjb25zdCBjb2xsZWN0aW9uIG9mIGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICBpZiAoY29sbGVjdGlvbi52ZWN0b3JzX2NvdW50ICYmIGNvbGxlY3Rpb24udmVjdG9yc19jb3VudCA+IDApIHtcbiAgICAgICAgY29uc3QgYXJ0aXN0c0RhdGEgPSBhd2FpdCBsaXN0VW5pcXVlQXJ0aXN0cyhcbiAgICAgICAgICBjb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgTWF0aC5taW4obGltaXQsIDIwKVxuICAgICAgICApO1xuICAgICAgICBhcnRpc3RzRGF0YS5hcnRpc3RzLmZvckVhY2goKGFydGlzdCkgPT4gYWxsQXJ0aXN0cy5hZGQoYXJ0aXN0KSk7XG4gICAgICAgIGJ5Q29sbGVjdGlvbi5wdXNoKHtcbiAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgYXJ0aXN0czogYXJ0aXN0c0RhdGEuYXJ0aXN0cyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYEZhaWxlZCB0byBnZXQgYXJ0aXN0cyBmcm9tIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uLm5hbWV9OmAsXG4gICAgICAgIGVycm9yXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYXJ0aXN0czogQXJyYXkuZnJvbShhbGxBcnRpc3RzKS5zbGljZSgwLCBsaW1pdCksXG4gICAgYnlfY29sbGVjdGlvbjogYnlDb2xsZWN0aW9uLFxuICB9O1xufVxuXG4vLyBOZXcgZnVuY3Rpb24gdG8gY291bnQgaW1hZ2VzIGJ5IHNwZWNpZmljIGFydGlzdFxuYXN5bmMgZnVuY3Rpb24gY291bnRJbWFnZXNCeUFydGlzdChcbiAgY29sbGVjdGlvbjogc3RyaW5nLFxuICBmaWx0ZXI6IGFueVxuKTogUHJvbWlzZTx7IGNvdW50OiBudW1iZXI7IGFydGlzdDogc3RyaW5nOyBzYW1wbGVfaW1hZ2VzOiBhbnlbXSB9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnNjcm9sbChjb2xsZWN0aW9uLCB7XG4gICAgbGltaXQ6IDEwMDAsXG4gICAgd2l0aF9wYXlsb2FkOiB0cnVlLFxuICAgIHdpdGhfdmVjdG9yOiBmYWxzZSxcbiAgfSk7XG5cbiAgbGV0IGZpbHRlcmVkUG9pbnRzID0gcmVzcG9uc2UucG9pbnRzO1xuICBpZiAoZmlsdGVyKSB7XG4gICAgZmlsdGVyZWRQb2ludHMgPSByZXNwb25zZS5wb2ludHMuZmlsdGVyKChwb2ludDogYW55KSA9PiB7XG4gICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZmlsdGVyKS5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIHJldHVybiBwb2ludC5wYXlsb2FkPy5ba2V5XSA9PT0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY291bnQ6IGZpbHRlcmVkUG9pbnRzLmxlbmd0aCxcbiAgICBhcnRpc3Q6IGZpbHRlcj8ubmFtZSB8fCBcInVua25vd25cIixcbiAgICBzYW1wbGVfaW1hZ2VzOiBmaWx0ZXJlZFBvaW50cy5zbGljZSgwLCA1KS5tYXAoKHBvaW50OiBhbnkpID0+ICh7XG4gICAgICBpZDogcG9pbnQuaWQsXG4gICAgICBmaWxlbmFtZTogcG9pbnQucGF5bG9hZD8uZmlsZV9uYW1lLFxuICAgICAgdXJsOiBwb2ludC5wYXlsb2FkPy5pbWFnZV91cmwsXG4gICAgfSkpLFxuICB9O1xufVxuXG4vLyBOZXcgZnVuY3Rpb24gdG8gcHJvdmlkZSBkZXRhaWxlZCBzdW1tYXJ5IG9mIGFydGlzdCdzIHdvcmtcbmFzeW5jIGZ1bmN0aW9uIHN1bW1hcml6ZUFydGlzdFdvcmsoXG4gIGNvbGxlY3Rpb246IHN0cmluZyxcbiAgZmlsdGVyOiBhbnksXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnNjcm9sbChjb2xsZWN0aW9uLCB7XG4gICAgbGltaXQ6IDEwMDAsXG4gICAgd2l0aF9wYXlsb2FkOiB0cnVlLFxuICAgIHdpdGhfdmVjdG9yOiBmYWxzZSxcbiAgfSk7XG5cbiAgbGV0IGZpbHRlcmVkUG9pbnRzID0gcmVzcG9uc2UucG9pbnRzO1xuICBpZiAoZmlsdGVyKSB7XG4gICAgZmlsdGVyZWRQb2ludHMgPSByZXNwb25zZS5wb2ludHMuZmlsdGVyKChwb2ludDogYW55KSA9PiB7XG4gICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZmlsdGVyKS5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIHJldHVybiBwb2ludC5wYXlsb2FkPy5ba2V5XSA9PT0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IGxpbWl0ZWRQb2ludHMgPSBmaWx0ZXJlZFBvaW50cy5zbGljZSgwLCBsaW1pdCk7XG5cbiAgLy8gQW5hbHl6ZSBmaWxlIHR5cGVzIGFuZCBwYXR0ZXJuc1xuICBjb25zdCBmaWxlRXh0ZW5zaW9ucyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCBmaWxlTmFtZXM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IGltYWdlVXJsczogc3RyaW5nW10gPSBbXTtcblxuICBsaW1pdGVkUG9pbnRzLmZvckVhY2goKHBvaW50OiBhbnkpID0+IHtcbiAgICBpZiAocG9pbnQucGF5bG9hZD8uZmlsZV9uYW1lKSB7XG4gICAgICBjb25zdCBleHQgPSBwb2ludC5wYXlsb2FkLmZpbGVfbmFtZS5zcGxpdChcIi5cIikucG9wKCk/LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoZXh0KSBmaWxlRXh0ZW5zaW9ucy5hZGQoZXh0KTtcbiAgICAgIGZpbGVOYW1lcy5wdXNoKHBvaW50LnBheWxvYWQuZmlsZV9uYW1lKTtcbiAgICB9XG4gICAgaWYgKHBvaW50LnBheWxvYWQ/LmltYWdlX3VybCkge1xuICAgICAgaW1hZ2VVcmxzLnB1c2gocG9pbnQucGF5bG9hZC5pbWFnZV91cmwpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhcnRpc3Q6IGZpbHRlcj8ubmFtZSB8fCBcInVua25vd25cIixcbiAgICB0b3RhbF9pbWFnZXM6IGZpbHRlcmVkUG9pbnRzLmxlbmd0aCxcbiAgICBkaXNwbGF5ZWRfaW1hZ2VzOiBsaW1pdGVkUG9pbnRzLmxlbmd0aCxcbiAgICBmaWxlX3R5cGVzOiBBcnJheS5mcm9tKGZpbGVFeHRlbnNpb25zKSxcbiAgICBzYW1wbGVfZmlsZW5hbWVzOiBmaWxlTmFtZXMuc2xpY2UoMCwgOCksXG4gICAgc2FtcGxlX3VybHM6IGltYWdlVXJscy5zbGljZSgwLCA1KSxcbiAgICBpbWFnZXM6IGxpbWl0ZWRQb2ludHMubWFwKChwb2ludDogYW55KSA9PiAoe1xuICAgICAgaWQ6IHBvaW50LmlkLFxuICAgICAgZmlsZW5hbWU6IHBvaW50LnBheWxvYWQ/LmZpbGVfbmFtZSxcbiAgICAgIGltYWdlX3VybDogcG9pbnQucGF5bG9hZD8uaW1hZ2VfdXJsLFxuICAgICAgc3R5bGVfdXJsOiBwb2ludC5wYXlsb2FkPy51cmwsXG4gICAgfSkpLFxuICB9O1xufVxuXG4vLyBOZXcgZnVuY3Rpb24gdG8gYW5hbHl6ZSBhcnRpc3QncyB3b3JrIHBhdHRlcm5zXG5hc3luYyBmdW5jdGlvbiBhbmFseXplQXJ0aXN0V29yayhcbiAgY29sbGVjdGlvbjogc3RyaW5nLFxuICBmaWx0ZXI6IGFueSxcbiAgbGltaXQ6IG51bWJlclxuKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICBsaW1pdDogMTAwMCxcbiAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICB9KTtcblxuICBsZXQgZmlsdGVyZWRQb2ludHMgPSByZXNwb25zZS5wb2ludHM7XG4gIGlmIChmaWx0ZXIpIHtcbiAgICBmaWx0ZXJlZFBvaW50cyA9IHJlc3BvbnNlLnBvaW50cy5maWx0ZXIoKHBvaW50OiBhbnkpID0+IHtcbiAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhmaWx0ZXIpLmV2ZXJ5KChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgcmV0dXJuIHBvaW50LnBheWxvYWQ/LltrZXldID09PSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQW5hbHl6ZSBwYXR0ZXJucyBpbiB0aGUgYXJ0aXN0J3Mgd29ya1xuICBjb25zdCBmaWxlVHlwZXMgPSBuZXcgTWFwKCk7XG4gIGNvbnN0IG5hbWluZ1BhdHRlcm5zID0gbmV3IE1hcCgpO1xuICBjb25zdCB1cmxQYXR0ZXJucyA9IG5ldyBNYXAoKTtcblxuICBmaWx0ZXJlZFBvaW50cy5mb3JFYWNoKChwb2ludDogYW55KSA9PiB7XG4gICAgLy8gRmlsZSB0eXBlIGFuYWx5c2lzXG4gICAgaWYgKHBvaW50LnBheWxvYWQ/LmZpbGVfbmFtZSkge1xuICAgICAgY29uc3QgZXh0ID0gcG9pbnQucGF5bG9hZC5maWxlX25hbWUuc3BsaXQoXCIuXCIpLnBvcCgpPy50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGV4dCkge1xuICAgICAgICBmaWxlVHlwZXMuc2V0KGV4dCwgKGZpbGVUeXBlcy5nZXQoZXh0KSB8fCAwKSArIDEpO1xuICAgICAgfVxuXG4gICAgICAvLyBOYW1pbmcgcGF0dGVybiBhbmFseXNpc1xuICAgICAgY29uc3QgbmFtZVBhdHRlcm4gPSBwb2ludC5wYXlsb2FkLmZpbGVfbmFtZVxuICAgICAgICAucmVwbGFjZSgvXFxkKy9nLCBcIiNcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcLihqcGd8anBlZ3xwbmd8Z2lmfHdlYnApJC9pLCBcIlwiKTtcbiAgICAgIG5hbWluZ1BhdHRlcm5zLnNldChcbiAgICAgICAgbmFtZVBhdHRlcm4sXG4gICAgICAgIChuYW1pbmdQYXR0ZXJucy5nZXQobmFtZVBhdHRlcm4pIHx8IDApICsgMVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBVUkwgcGF0dGVybiBhbmFseXNpc1xuICAgIGlmIChwb2ludC5wYXlsb2FkPy51cmwpIHtcbiAgICAgIGNvbnN0IGRvbWFpbiA9IHBvaW50LnBheWxvYWQudXJsLnNwbGl0KFwiL1wiKVsyXTtcbiAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgdXJsUGF0dGVybnMuc2V0KGRvbWFpbiwgKHVybFBhdHRlcm5zLmdldChkb21haW4pIHx8IDApICsgMSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGFydGlzdDogZmlsdGVyPy5uYW1lIHx8IFwidW5rbm93blwiLFxuICAgIHRvdGFsX2ltYWdlczogZmlsdGVyZWRQb2ludHMubGVuZ3RoLFxuICAgIGZpbGVfdHlwZV9kaXN0cmlidXRpb246IE9iamVjdC5mcm9tRW50cmllcyhmaWxlVHlwZXMpLFxuICAgIGNvbW1vbl9uYW1pbmdfcGF0dGVybnM6IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIEFycmF5LmZyb20obmFtaW5nUGF0dGVybnMuZW50cmllcygpKVxuICAgICAgICAuZmlsdGVyKChbXywgY291bnRdKSA9PiBjb3VudCA+IDEpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBiWzFdIC0gYVsxXSlcbiAgICAgICAgLnNsaWNlKDAsIDUpXG4gICAgKSxcbiAgICBzb3VyY2VfZG9tYWluczogT2JqZWN0LmZyb21FbnRyaWVzKHVybFBhdHRlcm5zKSxcbiAgICBzYW1wbGVfaW1hZ2VzOiBmaWx0ZXJlZFBvaW50cy5zbGljZSgwLCAxMCkubWFwKChwb2ludDogYW55KSA9PiAoe1xuICAgICAgaWQ6IHBvaW50LmlkLFxuICAgICAgZmlsZW5hbWU6IHBvaW50LnBheWxvYWQ/LmZpbGVfbmFtZSxcbiAgICAgIGltYWdlX3VybDogcG9pbnQucGF5bG9hZD8uaW1hZ2VfdXJsLFxuICAgIH0pKSxcbiAgfTtcbn1cblxuLy8gTmV3IGZ1bmN0aW9uIHRvIGNvdW50IHNwZWNpZmljIGFydGlzdCBpbWFnZXMgYWNyb3NzIGFsbCBjb2xsZWN0aW9uc1xuYXN5bmMgZnVuY3Rpb24gY291bnRJbWFnZXNCeUFydGlzdEFjcm9zc0RhdGFiYXNlKGZpbHRlcjogYW55KTogUHJvbWlzZTx7XG4gIGNvdW50OiBudW1iZXI7XG4gIGFydGlzdDogc3RyaW5nO1xuICBieV9jb2xsZWN0aW9uOiBBcnJheTx7IGNvbGxlY3Rpb246IHN0cmluZzsgY291bnQ6IG51bWJlciB9Pjtcbn0+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNEYXRhID0gYXdhaXQgbGlzdENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IHJlc3VsdHNCeUNvbGxlY3Rpb246IEFycmF5PHsgY29sbGVjdGlvbjogc3RyaW5nOyBjb3VudDogbnVtYmVyIH0+ID0gW107XG4gIGxldCB0b3RhbENvdW50ID0gMDtcblxuICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgJiYgY29sbGVjdGlvbi52ZWN0b3JzX2NvdW50ID4gMCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb3VudEltYWdlc0J5QXJ0aXN0KGNvbGxlY3Rpb24ubmFtZSwgZmlsdGVyKTtcbiAgICAgICAgaWYgKHJlc3VsdC5jb3VudCA+IDApIHtcbiAgICAgICAgICByZXN1bHRzQnlDb2xsZWN0aW9uLnB1c2goe1xuICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgICAgY291bnQ6IHJlc3VsdC5jb3VudCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0b3RhbENvdW50ICs9IHJlc3VsdC5jb3VudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBGYWlsZWQgdG8gY291bnQgaW1hZ2VzIGluIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uLm5hbWV9OmAsXG4gICAgICAgIGVycm9yXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY291bnQ6IHRvdGFsQ291bnQsXG4gICAgYXJ0aXN0OiBmaWx0ZXI/Lm5hbWUgfHwgXCJ1bmtub3duXCIsXG4gICAgYnlfY29sbGVjdGlvbjogcmVzdWx0c0J5Q29sbGVjdGlvbixcbiAgfTtcbn1cblxuLy8gTmV3IGZ1bmN0aW9uIHRvIHN1bW1hcml6ZSBhcnRpc3Qgd29yayBhY3Jvc3MgYWxsIGNvbGxlY3Rpb25zXG5hc3luYyBmdW5jdGlvbiBzdW1tYXJpemVBcnRpc3RBY3Jvc3NEYXRhYmFzZShcbiAgZmlsdGVyOiBhbnksXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zRGF0YSA9IGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuICBjb25zdCBhbGxJbWFnZXM6IGFueVtdID0gW107XG4gIGNvbnN0IGNvbGxlY3Rpb25TdW1tYXJpZXM6IGFueVtdID0gW107XG4gIGNvbnN0IGZpbGVUeXBlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGZvciAoY29uc3QgY29sbGVjdGlvbiBvZiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGNvbGxlY3Rpb24udmVjdG9yc19jb3VudCAmJiBjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgPiAwKSB7XG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSBhd2FpdCBzdW1tYXJpemVBcnRpc3RXb3JrKGNvbGxlY3Rpb24ubmFtZSwgZmlsdGVyLCA1MCk7XG4gICAgICAgIGlmIChzdW1tYXJ5LnRvdGFsX2ltYWdlcyA+IDApIHtcbiAgICAgICAgICBjb2xsZWN0aW9uU3VtbWFyaWVzLnB1c2goe1xuICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgICAgLi4uc3VtbWFyeSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhbGxJbWFnZXMucHVzaCguLi5zdW1tYXJ5LmltYWdlcyk7XG4gICAgICAgICAgc3VtbWFyeS5maWxlX3R5cGVzPy5mb3JFYWNoKCh0eXBlOiBzdHJpbmcpID0+IGZpbGVUeXBlcy5hZGQodHlwZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYEZhaWxlZCB0byBzdW1tYXJpemUgYXJ0aXN0IHdvcmsgaW4gY29sbGVjdGlvbiAke2NvbGxlY3Rpb24ubmFtZX06YCxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdG90YWxJbWFnZXMgPSBhbGxJbWFnZXMubGVuZ3RoO1xuICBjb25zdCBkaXNwbGF5ZWRJbWFnZXMgPSBhbGxJbWFnZXMuc2xpY2UoMCwgbGltaXQpO1xuXG4gIHJldHVybiB7XG4gICAgYXJ0aXN0OiBmaWx0ZXI/Lm5hbWUgfHwgXCJ1bmtub3duXCIsXG4gICAgdG90YWxfaW1hZ2VzOiB0b3RhbEltYWdlcyxcbiAgICBkaXNwbGF5ZWRfaW1hZ2VzOiBkaXNwbGF5ZWRJbWFnZXMubGVuZ3RoLFxuICAgIGNvbGxlY3Rpb25zX2ZvdW5kOiBjb2xsZWN0aW9uU3VtbWFyaWVzLmxlbmd0aCxcbiAgICBmaWxlX3R5cGVzOiBBcnJheS5mcm9tKGZpbGVUeXBlcyksXG4gICAgYnlfY29sbGVjdGlvbjogY29sbGVjdGlvblN1bW1hcmllcy5tYXAoKHN1bW1hcnkpID0+ICh7XG4gICAgICBjb2xsZWN0aW9uOiBzdW1tYXJ5LmNvbGxlY3Rpb24sXG4gICAgICBpbWFnZV9jb3VudDogc3VtbWFyeS50b3RhbF9pbWFnZXMsXG4gICAgICBzYW1wbGVfZmlsZW5hbWVzOiBzdW1tYXJ5LnNhbXBsZV9maWxlbmFtZXM/LnNsaWNlKDAsIDMpLFxuICAgIH0pKSxcbiAgICBzYW1wbGVfaW1hZ2VzOiBkaXNwbGF5ZWRJbWFnZXMubWFwKChpbWFnZTogYW55KSA9PiAoe1xuICAgICAgaWQ6IGltYWdlLmlkLFxuICAgICAgZmlsZW5hbWU6IGltYWdlLmZpbGVuYW1lLFxuICAgICAgaW1hZ2VfdXJsOiBpbWFnZS5pbWFnZV91cmwsXG4gICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU3VtbWFyaWVzLmZpbmQoKGMpID0+XG4gICAgICAgIGMuaW1hZ2VzPy5zb21lKChpbWc6IGFueSkgPT4gaW1nLmlkID09PSBpbWFnZS5pZClcbiAgICAgICk/LmNvbGxlY3Rpb24sXG4gICAgfSkpLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRUb3BBcnRpc3RzQnlJbWFnZUNvdW50QWNyb3NzRGF0YWJhc2UoXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zRGF0YSA9IGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuICBjb25zdCBhcnRpc3RDb3VudHM6IHtcbiAgICBbYXJ0aXN0TmFtZTogc3RyaW5nXTogeyBjb3VudDogbnVtYmVyOyBjb2xsZWN0aW9uczogc3RyaW5nW10gfTtcbiAgfSA9IHt9O1xuXG4gIC8vIENvbGxlY3QgYXJ0aXN0IGNvdW50cyBmcm9tIGFsbCBjb2xsZWN0aW9uc1xuICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgJiYgY29sbGVjdGlvbi52ZWN0b3JzX2NvdW50ID4gMCkge1xuICAgICAgICAvLyBHZXQgQUxMIHBvaW50cyBmcm9tIHRoZSBjb2xsZWN0aW9uIHRvIGNvdW50IGJ5IGFydGlzdFxuICAgICAgICBsZXQgYWxsUG9pbnRzOiBhbnlbXSA9IFtdO1xuICAgICAgICBsZXQgb2Zmc2V0OiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgLy8gU2Nyb2xsIHRocm91Z2ggYWxsIHBvaW50cyBpbiB0aGUgY29sbGVjdGlvblxuICAgICAgICBkbyB7XG4gICAgICAgICAgY29uc3Qgc2Nyb2xsUmVzdWx0ID0gYXdhaXQgY2xpZW50LnNjcm9sbChjb2xsZWN0aW9uLm5hbWUsIHtcbiAgICAgICAgICAgIGxpbWl0OiAxMDAwLCAvLyBQcm9jZXNzIGluIGJhdGNoZXMgb2YgMTAwMFxuICAgICAgICAgICAgLi4uKG9mZnNldCAhPT0gdW5kZWZpbmVkICYmIHsgb2Zmc2V0IH0pLFxuICAgICAgICAgICAgd2l0aF9wYXlsb2FkOiB0cnVlLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYWxsUG9pbnRzLnB1c2goLi4uc2Nyb2xsUmVzdWx0LnBvaW50cyk7XG4gICAgICAgICAgLy8gU2FmZWx5IGhhbmRsZSB0aGUgb2Zmc2V0IHR5cGVcbiAgICAgICAgICBjb25zdCBuZXh0T2Zmc2V0ID0gc2Nyb2xsUmVzdWx0Lm5leHRfcGFnZV9vZmZzZXQ7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdHlwZW9mIG5leHRPZmZzZXQgPT09IFwic3RyaW5nXCIgfHxcbiAgICAgICAgICAgIHR5cGVvZiBuZXh0T2Zmc2V0ID09PSBcIm51bWJlclwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBuZXh0T2Zmc2V0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChvZmZzZXQgIT09IG51bGwgJiYgb2Zmc2V0ICE9PSB1bmRlZmluZWQpO1xuXG4gICAgICAgIGZvciAoY29uc3QgcG9pbnQgb2YgYWxsUG9pbnRzKSB7XG4gICAgICAgICAgY29uc3QgYXJ0aXN0TmFtZSA9IHBvaW50LnBheWxvYWQ/Lm5hbWU7XG4gICAgICAgICAgaWYgKGFydGlzdE5hbWUgJiYgdHlwZW9mIGFydGlzdE5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGlmICghYXJ0aXN0Q291bnRzW2FydGlzdE5hbWVdKSB7XG4gICAgICAgICAgICAgIGFydGlzdENvdW50c1thcnRpc3ROYW1lXSA9IHsgY291bnQ6IDAsIGNvbGxlY3Rpb25zOiBbXSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJ0aXN0Q291bnRzW2FydGlzdE5hbWVdLmNvdW50Kys7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICFhcnRpc3RDb3VudHNbYXJ0aXN0TmFtZV0uY29sbGVjdGlvbnMuaW5jbHVkZXMoY29sbGVjdGlvbi5uYW1lKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGFydGlzdENvdW50c1thcnRpc3ROYW1lXS5jb2xsZWN0aW9ucy5wdXNoKGNvbGxlY3Rpb24ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYEZhaWxlZCB0byBnZXQgYXJ0aXN0cyBmcm9tIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uLm5hbWV9OmAsXG4gICAgICAgIGVycm9yXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNvcnQgYXJ0aXN0cyBieSBpbWFnZSBjb3VudFxuICBjb25zdCBzb3J0ZWRBcnRpc3RzID0gT2JqZWN0LmVudHJpZXMoYXJ0aXN0Q291bnRzKVxuICAgIC5tYXAoKFtuYW1lLCBkYXRhXSkgPT4gKHtcbiAgICAgIG5hbWUsXG4gICAgICBpbWFnZV9jb3VudDogZGF0YS5jb3VudCxcbiAgICAgIGNvbGxlY3Rpb25zOiBkYXRhLmNvbGxlY3Rpb25zLFxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmltYWdlX2NvdW50IC0gYS5pbWFnZV9jb3VudCk7XG5cbiAgLy8gQW5hbHl6ZSB0aGUgZGlzdHJpYnV0aW9uIHRvIGRldGVjdCB0aWVzXG4gIGNvbnN0IG1heENvdW50ID0gc29ydGVkQXJ0aXN0cy5sZW5ndGggPiAwID8gc29ydGVkQXJ0aXN0c1swXS5pbWFnZV9jb3VudCA6IDA7XG4gIGNvbnN0IGFydGlzdHNXaXRoTWF4Q291bnQgPSBzb3J0ZWRBcnRpc3RzLmZpbHRlcihcbiAgICAoYXJ0aXN0KSA9PiBhcnRpc3QuaW1hZ2VfY291bnQgPT09IG1heENvdW50XG4gICk7XG4gIGNvbnN0IGhhc1RpZSA9IGFydGlzdHNXaXRoTWF4Q291bnQubGVuZ3RoID4gMTtcblxuICAvLyBHZXQgdGhlIHJlcXVlc3RlZCBudW1iZXIgb2YgdG9wIGFydGlzdHNcbiAgY29uc3QgdG9wQXJ0aXN0cyA9IHNvcnRlZEFydGlzdHMuc2xpY2UoMCwgbGltaXQpO1xuXG4gIC8vIENhbGN1bGF0ZSBzb21lIHN0YXRpc3RpY3NcbiAgY29uc3QgdG90YWxJbWFnZXMgPSBPYmplY3QudmFsdWVzKGFydGlzdENvdW50cykucmVkdWNlKFxuICAgIChzdW0sIGRhdGEpID0+IHN1bSArIGRhdGEuY291bnQsXG4gICAgMFxuICApO1xuICBjb25zdCBhdmVyYWdlSW1hZ2VzUGVyQXJ0aXN0ID0gdG90YWxJbWFnZXMgLyBPYmplY3Qua2V5cyhhcnRpc3RDb3VudHMpLmxlbmd0aDtcblxuICAvLyBHcm91cCBhcnRpc3RzIGJ5IGltYWdlIGNvdW50IGZvciBiZXR0ZXIgYW5hbHlzaXNcbiAgY29uc3QgY291bnRHcm91cHM6IHsgW2NvdW50OiBudW1iZXJdOiBzdHJpbmdbXSB9ID0ge307XG4gIHNvcnRlZEFydGlzdHMuZm9yRWFjaCgoYXJ0aXN0KSA9PiB7XG4gICAgaWYgKCFjb3VudEdyb3Vwc1thcnRpc3QuaW1hZ2VfY291bnRdKSB7XG4gICAgICBjb3VudEdyb3Vwc1thcnRpc3QuaW1hZ2VfY291bnRdID0gW107XG4gICAgfVxuICAgIGNvdW50R3JvdXBzW2FydGlzdC5pbWFnZV9jb3VudF0ucHVzaChhcnRpc3QubmFtZSk7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgdG9wX2FydGlzdHM6IHRvcEFydGlzdHMsXG4gICAgdG90YWxfYXJ0aXN0c19mb3VuZDogT2JqZWN0LmtleXMoYXJ0aXN0Q291bnRzKS5sZW5ndGgsXG4gICAgY29sbGVjdGlvbnNfc2VhcmNoZWQ6IGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucy5sZW5ndGgsXG4gICAgbWF4X2ltYWdlX2NvdW50OiBtYXhDb3VudCxcbiAgICBhcnRpc3RzX3dpdGhfbWF4X2NvdW50OiBhcnRpc3RzV2l0aE1heENvdW50LFxuICAgIGhhc190aWU6IGhhc1RpZSxcbiAgICB0aWVfY291bnQ6IGFydGlzdHNXaXRoTWF4Q291bnQubGVuZ3RoLFxuICAgIHRvdGFsX2ltYWdlczogdG90YWxJbWFnZXMsXG4gICAgYXZlcmFnZV9pbWFnZXNfcGVyX2FydGlzdDogTWF0aC5yb3VuZChhdmVyYWdlSW1hZ2VzUGVyQXJ0aXN0ICogMTAwKSAvIDEwMCxcbiAgICBkaXN0cmlidXRpb246IGNvdW50R3JvdXBzLFxuICAgIGFuYWx5c2lzOiB7XG4gICAgICBpc19ldmVubHlfZGlzdHJpYnV0ZWQ6XG4gICAgICAgIE9iamVjdC5rZXlzKGNvdW50R3JvdXBzKS5sZW5ndGggPT09IE9iamVjdC5rZXlzKGFydGlzdENvdW50cykubGVuZ3RoLFxuICAgICAgbW9zdF9jb21tb25fY291bnQ6XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGNvdW50R3JvdXBzKS5zb3J0KFxuICAgICAgICAgIChhLCBiKSA9PiBiWzFdLmxlbmd0aCAtIGFbMV0ubGVuZ3RoXG4gICAgICAgIClbMF0/LlswXSB8fCBcIjBcIixcbiAgICB9LFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRUb3BBcnRpc3RzQnlJbWFnZUNvdW50SW5Db2xsZWN0aW9uKFxuICBjb2xsZWN0aW9uOiBzdHJpbmcsXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8YW55PiB7XG4gIC8vIEdldCBBTEwgcG9pbnRzIGZyb20gdGhlIGNvbGxlY3Rpb24sIG5vdCBqdXN0IDEwMDBcbiAgbGV0IGFsbFBvaW50czogYW55W10gPSBbXTtcbiAgbGV0IG9mZnNldDogc3RyaW5nIHwgbnVtYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIC8vIFNjcm9sbCB0aHJvdWdoIGFsbCBwb2ludHMgaW4gdGhlIGNvbGxlY3Rpb25cbiAgZG8ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnNjcm9sbChjb2xsZWN0aW9uLCB7XG4gICAgICBsaW1pdDogMTAwMCwgLy8gUHJvY2VzcyBpbiBiYXRjaGVzIG9mIDEwMDBcbiAgICAgIC4uLihvZmZzZXQgIT09IHVuZGVmaW5lZCAmJiB7IG9mZnNldCB9KSxcbiAgICAgIHdpdGhfcGF5bG9hZDogdHJ1ZSxcbiAgICAgIHdpdGhfdmVjdG9yOiBmYWxzZSxcbiAgICB9KTtcblxuICAgIGFsbFBvaW50cy5wdXNoKC4uLnJlc3BvbnNlLnBvaW50cyk7XG4gICAgLy8gU2FmZWx5IGhhbmRsZSB0aGUgb2Zmc2V0IHR5cGVcbiAgICBjb25zdCBuZXh0T2Zmc2V0ID0gcmVzcG9uc2UubmV4dF9wYWdlX29mZnNldDtcbiAgICBpZiAodHlwZW9mIG5leHRPZmZzZXQgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG5leHRPZmZzZXQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIG9mZnNldCA9IG5leHRPZmZzZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZnNldCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0gd2hpbGUgKG9mZnNldCAhPT0gbnVsbCAmJiBvZmZzZXQgIT09IHVuZGVmaW5lZCk7XG5cbiAgY29uc3QgYXJ0aXN0Q291bnRzOiB7IFthcnRpc3ROYW1lOiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xuXG4gIGZvciAoY29uc3QgcG9pbnQgb2YgYWxsUG9pbnRzKSB7XG4gICAgY29uc3QgYXJ0aXN0TmFtZSA9IHBvaW50LnBheWxvYWQ/Lm5hbWU7XG4gICAgaWYgKGFydGlzdE5hbWUgJiYgdHlwZW9mIGFydGlzdE5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGlmICghYXJ0aXN0Q291bnRzW2FydGlzdE5hbWVdKSB7XG4gICAgICAgIGFydGlzdENvdW50c1thcnRpc3ROYW1lXSA9IDA7XG4gICAgICB9XG4gICAgICBhcnRpc3RDb3VudHNbYXJ0aXN0TmFtZV0rKztcbiAgICB9XG4gIH1cblxuICBjb25zdCBzb3J0ZWRBcnRpc3RzID0gT2JqZWN0LmVudHJpZXMoYXJ0aXN0Q291bnRzKVxuICAgIC5tYXAoKFtuYW1lLCBjb3VudF0pID0+ICh7XG4gICAgICBuYW1lLFxuICAgICAgaW1hZ2VfY291bnQ6IGNvdW50LFxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmltYWdlX2NvdW50IC0gYS5pbWFnZV9jb3VudCk7XG5cbiAgLy8gQW5hbHl6ZSB0aGUgZGlzdHJpYnV0aW9uIHRvIGRldGVjdCB0aWVzXG4gIGNvbnN0IG1heENvdW50ID0gc29ydGVkQXJ0aXN0cy5sZW5ndGggPiAwID8gc29ydGVkQXJ0aXN0c1swXS5pbWFnZV9jb3VudCA6IDA7XG4gIGNvbnN0IGFydGlzdHNXaXRoTWF4Q291bnQgPSBzb3J0ZWRBcnRpc3RzLmZpbHRlcihcbiAgICAoYXJ0aXN0KSA9PiBhcnRpc3QuaW1hZ2VfY291bnQgPT09IG1heENvdW50XG4gICk7XG4gIGNvbnN0IGhhc1RpZSA9IGFydGlzdHNXaXRoTWF4Q291bnQubGVuZ3RoID4gMTtcblxuICAvLyBHZXQgdGhlIHJlcXVlc3RlZCBudW1iZXIgb2YgdG9wIGFydGlzdHNcbiAgY29uc3QgdG9wQXJ0aXN0cyA9IHNvcnRlZEFydGlzdHMuc2xpY2UoMCwgbGltaXQpO1xuXG4gIC8vIENhbGN1bGF0ZSBzb21lIHN0YXRpc3RpY3NcbiAgY29uc3QgdG90YWxJbWFnZXMgPSBPYmplY3QudmFsdWVzKGFydGlzdENvdW50cykucmVkdWNlKFxuICAgIChzdW0sIGNvdW50KSA9PiBzdW0gKyBjb3VudCxcbiAgICAwXG4gICk7XG4gIGNvbnN0IGF2ZXJhZ2VJbWFnZXNQZXJBcnRpc3QgPSB0b3RhbEltYWdlcyAvIE9iamVjdC5rZXlzKGFydGlzdENvdW50cykubGVuZ3RoO1xuXG4gIC8vIEdyb3VwIGFydGlzdHMgYnkgaW1hZ2UgY291bnQgZm9yIGJldHRlciBhbmFseXNpc1xuICBjb25zdCBjb3VudEdyb3VwczogeyBbY291bnQ6IG51bWJlcl06IHN0cmluZ1tdIH0gPSB7fTtcbiAgc29ydGVkQXJ0aXN0cy5mb3JFYWNoKChhcnRpc3QpID0+IHtcbiAgICBpZiAoIWNvdW50R3JvdXBzW2FydGlzdC5pbWFnZV9jb3VudF0pIHtcbiAgICAgIGNvdW50R3JvdXBzW2FydGlzdC5pbWFnZV9jb3VudF0gPSBbXTtcbiAgICB9XG4gICAgY291bnRHcm91cHNbYXJ0aXN0LmltYWdlX2NvdW50XS5wdXNoKGFydGlzdC5uYW1lKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3BfYXJ0aXN0czogdG9wQXJ0aXN0cyxcbiAgICB0b3RhbF9hcnRpc3RzX2ZvdW5kOiBPYmplY3Qua2V5cyhhcnRpc3RDb3VudHMpLmxlbmd0aCxcbiAgICBjb2xsZWN0aW9uc19zZWFyY2hlZDogMSxcbiAgICBtYXhfaW1hZ2VfY291bnQ6IG1heENvdW50LFxuICAgIGFydGlzdHNfd2l0aF9tYXhfY291bnQ6IGFydGlzdHNXaXRoTWF4Q291bnQsXG4gICAgaGFzX3RpZTogaGFzVGllLFxuICAgIHRpZV9jb3VudDogYXJ0aXN0c1dpdGhNYXhDb3VudC5sZW5ndGgsXG4gICAgdG90YWxfaW1hZ2VzOiB0b3RhbEltYWdlcyxcbiAgICBhdmVyYWdlX2ltYWdlc19wZXJfYXJ0aXN0OiBNYXRoLnJvdW5kKGF2ZXJhZ2VJbWFnZXNQZXJBcnRpc3QgKiAxMDApIC8gMTAwLFxuICAgIGRpc3RyaWJ1dGlvbjogY291bnRHcm91cHMsXG4gICAgYW5hbHlzaXM6IHtcbiAgICAgIGlzX2V2ZW5seV9kaXN0cmlidXRlZDpcbiAgICAgICAgT2JqZWN0LmtleXMoY291bnRHcm91cHMpLmxlbmd0aCA9PT0gT2JqZWN0LmtleXMoYXJ0aXN0Q291bnRzKS5sZW5ndGgsXG4gICAgICBtb3N0X2NvbW1vbl9jb3VudDpcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoY291bnRHcm91cHMpLnNvcnQoXG4gICAgICAgICAgKGEsIGIpID0+IGJbMV0ubGVuZ3RoIC0gYVsxXS5sZW5ndGhcbiAgICAgICAgKVswXT8uWzBdIHx8IFwiMFwiLFxuICAgIH0sXG4gIH07XG59XG4iXSwibmFtZXMiOlsiT3BlbkFJIiwiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiY2xpZW50Iiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiZ2VuQUkiLCJHRU1JTklfQVBJX0tFWSIsInByb2Nlc3NOYXR1cmFsUXVlcnkiLCJjb2xsZWN0aW9uIiwicXVlc3Rpb24iLCJwcm92aWRlciIsIm1vZGVsIiwiY29udGV4dCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJlbnJpY2hlZFF1ZXN0aW9uIiwicmVzb2x2ZWRDb2xsZWN0aW9uIiwidXBkYXRlZENvbnRleHQiLCJyZXNvbHZlQ29udGV4dCIsImludGVudCIsInBhcnNlUXVlcnlJbnRlbnQiLCJmaW5hbENvbGxlY3Rpb24iLCJleHRyYWN0ZWRDb2xsZWN0aW9uIiwicmVzdWx0IiwiZXhlY3V0ZVF1ZXJ5IiwiYW5zd2VyIiwiZ2VuZXJhdGVSZXNwb25zZSIsImZpbmFsQ29udGV4dCIsInVwZGF0ZUNvbnZlcnNhdGlvbkNvbnRleHQiLCJleGVjdXRpb25fdGltZV9tcyIsInF1ZXJ5X3R5cGUiLCJ0eXBlIiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsImZhbGxiYWNrQW5zd2VyIiwiZ2VuZXJhdGVGYWxsYmFja1Jlc3BvbnNlIiwiaW5mZXJJbnRlbnRGcm9tUXVlc3Rpb24iLCJjb3VudCIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJjdXJyZW50Q29udGV4dCIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb3dlcmNhc2VRdWVzdGlvbiIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJsYXN0RW50aXR5IiwicmVwbGFjZSIsImxhc3RDb2xsZWN0aW9uIiwibGFzdFF1ZXJ5VHlwZSIsImxhc3RUYXJnZXQiLCJlbnRpdHlNYXRjaCIsIm1hdGNoIiwibmV3RW50aXR5IiwibGVuZ3RoIiwibGFzdFR1cm4iLCJyZXN1bHRzX2J5X2NvbGxlY3Rpb24iLCJjb2xsZWN0aW9uc1dpdGhSZXN1bHRzIiwiZmlsdGVyIiwiciIsInR1cm4iLCJpZCIsInRvU3RyaW5nIiwidGFyZ2V0Iiwic2NvcGUiLCJ0aW1lc3RhbXAiLCJzbGljZSIsIm5hbWUiLCJjdXJyZW50VG9waWMiLCJmYWxsYmFja0ludGVudCIsInN5c3RlbVByb21wdCIsInJlY2VudFR1cm5zIiwiZm9yRWFjaCIsImluZGV4IiwicmVzcG9uc2UiLCJnZW1pbmlNb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsImdlbmVyYXRlQ29udGVudCIsInRleHQiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJvcGVuYWlFcnJvciIsIndhcm4iLCJFcnJvciIsImpzb25NYXRjaCIsImpzb25TdHIiLCJwYXJzZSIsImUiLCJxIiwiZXh0cmFjdENvbGxlY3Rpb25Gcm9tUXVlc3Rpb24iLCJwcm9jZXNzZWRRdWVzdGlvbiIsImxpbWl0Iiwic29ydEJ5Iiwic29ydE9yZGVyIiwidGVzdCIsImxpbWl0TWF0Y2giLCJwYXJzZUludCIsImVudGl0eU5hbWUiLCJ0cmltIiwiZmFsbGJhY2tFbnRpdHlNYXRjaCIsInBhdHRlcm5zIiwicGF0dGVybiIsImV4ZWMiLCJjYW5kaWRhdGUiLCJjb21tb25Db2xsZWN0aW9uTmFtZXMiLCJ1bmRlZmluZWQiLCJleGVjdXRlRGF0YWJhc2VRdWVyeSIsImV4ZWN1dGVDb2xsZWN0aW9uUXVlcnkiLCJjb3VudENvbGxlY3Rpb25zIiwiY291bnRBcnRpc3RzQWNyb3NzRGF0YWJhc2UiLCJjb3VudEltYWdlc0J5QXJ0aXN0QWNyb3NzRGF0YWJhc2UiLCJjb3VudFRvdGFsVmVjdG9yc0Fjcm9zc0RhdGFiYXNlIiwibGlzdENvbGxlY3Rpb25zIiwiZGVzY3JpYmVEYXRhYmFzZUluZm8iLCJzZWFyY2hBY3Jvc3NDb2xsZWN0aW9ucyIsInN1bW1hcml6ZUFydGlzdEFjcm9zc0RhdGFiYXNlIiwibGlzdEFydGlzdHNBY3Jvc3NEYXRhYmFzZSIsImdldFRvcEFydGlzdHNCeUltYWdlQ291bnRBY3Jvc3NEYXRhYmFzZSIsImNvdW50VW5pcXVlQXJ0aXN0cyIsImNvdW50SW1hZ2VzQnlBcnRpc3QiLCJjb3VudFRvdGFsIiwic2VhcmNoSW1hZ2VzIiwic3VtbWFyaXplQXJ0aXN0V29yayIsImFuYWx5emVBcnRpc3RXb3JrIiwibGlzdFVuaXF1ZUFydGlzdHMiLCJsaXN0SW1hZ2VzIiwiZmlsdGVySW1hZ2VzIiwiZGVzY3JpYmVDb2xsZWN0aW9uIiwiZ2V0VG9wQXJ0aXN0c0J5SW1hZ2VDb3VudEluQ29sbGVjdGlvbiIsImNvbGxlY3Rpb25zSW5mbyIsImdldENvbGxlY3Rpb25zIiwiY29sbGVjdGlvbnMiLCJtYXAiLCJjIiwiZGV0YWlsZWRDb2xsZWN0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJjb3VudFJlc3VsdCIsInZlY3RvcnNfY291bnQiLCJjb2xsZWN0aW9uc0RhdGEiLCJ0b3RhbFZlY3RvcnMiLCJyZWR1Y2UiLCJzdW0iLCJjb2wiLCJ0b3RhbF9jb2xsZWN0aW9ucyIsInRvdGFsX3ZlY3RvcnMiLCJhbGxSZXN1bHRzIiwicmVzdWx0cyIsImltYWdlcyIsInB1c2giLCJ0b3RhbENvdW50IiwidG90YWxfY291bnQiLCJjb2xsZWN0aW9uc19zZWFyY2hlZCIsImFsbFBvaW50cyIsIm9mZnNldCIsInNjcm9sbCIsIndpdGhfcGF5bG9hZCIsIndpdGhfdmVjdG9yIiwicG9pbnRzIiwibmV4dE9mZnNldCIsIm5leHRfcGFnZV9vZmZzZXQiLCJhcnRpc3RzIiwiU2V0IiwicG9pbnQiLCJwYXlsb2FkIiwiQm9vbGVhbiIsInNpemUiLCJBcnJheSIsImZyb20iLCJmaWx0ZXJlZFBvaW50cyIsIk9iamVjdCIsImVudHJpZXMiLCJldmVyeSIsImtleSIsInZhbHVlIiwibGltaXRlZFBvaW50cyIsImFydGlzdCIsImZpbGVuYW1lIiwiZmlsZV9uYW1lIiwiYXJ0aXN0c0RhdGEiLCJzYW1wbGVJbWFnZXMiLCJ0b3RhbF9pbWFnZXMiLCJ1bmlxdWVfYXJ0aXN0cyIsInNhbXBsZV9hcnRpc3RzIiwic2FtcGxlX2ltYWdlcyIsImZhbGxiYWNrUmVzcG9uc2UiLCJtYXhfdG9rZW5zIiwic2FmZURhdGEiLCJqb2luIiwiYnlfY29sbGVjdGlvbiIsImNvbGxlY3Rpb25zX2ZvdW5kIiwiZmlsZV90eXBlcyIsImltYWdlX2NvdW50IiwiaW1nIiwic2FtcGxlX2ZpbGVuYW1lcyIsImkiLCJmaWxlX3R5cGVfZGlzdHJpYnV0aW9uIiwiY29tbW9uX25hbWluZ19wYXR0ZXJucyIsImtleXMiLCJzb3VyY2VfZG9tYWlucyIsInRvcF9hcnRpc3RzIiwiaGFzX3RpZSIsInRpZWRBcnRpc3RzIiwiYXJ0aXN0c193aXRoX21heF9jb3VudCIsIm1heF9pbWFnZV9jb3VudCIsImxhc3RBcnRpc3QiLCJvdGhlckFydGlzdHMiLCJhIiwidG9wQXJ0aXN0IiwiYXJ0aXN0TGlzdCIsInRpZV9jb3VudCIsImFsbEFydGlzdHMiLCJhZGQiLCJieUNvbGxlY3Rpb24iLCJNYXRoIiwibWluIiwidXJsIiwiaW1hZ2VfdXJsIiwiZmlsZUV4dGVuc2lvbnMiLCJmaWxlTmFtZXMiLCJpbWFnZVVybHMiLCJleHQiLCJzcGxpdCIsInBvcCIsImRpc3BsYXllZF9pbWFnZXMiLCJzYW1wbGVfdXJscyIsInN0eWxlX3VybCIsImZpbGVUeXBlcyIsIk1hcCIsIm5hbWluZ1BhdHRlcm5zIiwidXJsUGF0dGVybnMiLCJzZXQiLCJnZXQiLCJuYW1lUGF0dGVybiIsImRvbWFpbiIsImZyb21FbnRyaWVzIiwiXyIsInNvcnQiLCJiIiwicmVzdWx0c0J5Q29sbGVjdGlvbiIsImFsbEltYWdlcyIsImNvbGxlY3Rpb25TdW1tYXJpZXMiLCJzdW1tYXJ5IiwidG90YWxJbWFnZXMiLCJkaXNwbGF5ZWRJbWFnZXMiLCJpbWFnZSIsImZpbmQiLCJzb21lIiwiYXJ0aXN0Q291bnRzIiwic2Nyb2xsUmVzdWx0IiwiYXJ0aXN0TmFtZSIsInNvcnRlZEFydGlzdHMiLCJtYXhDb3VudCIsImFydGlzdHNXaXRoTWF4Q291bnQiLCJoYXNUaWUiLCJ0b3BBcnRpc3RzIiwidmFsdWVzIiwiYXZlcmFnZUltYWdlc1BlckFydGlzdCIsImNvdW50R3JvdXBzIiwidG90YWxfYXJ0aXN0c19mb3VuZCIsImF2ZXJhZ2VfaW1hZ2VzX3Blcl9hcnRpc3QiLCJyb3VuZCIsImRpc3RyaWJ1dGlvbiIsImFuYWx5c2lzIiwiaXNfZXZlbmx5X2Rpc3RyaWJ1dGVkIiwibW9zdF9jb21tb25fY291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/qdrant/nlp-query.ts\n");

/***/ }),

/***/ "(api)/./lib/types.ts":
/*!**********************!*\
  !*** ./lib/types.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AVAILABLE_MODELS\": () => (/* binding */ AVAILABLE_MODELS)\n/* harmony export */ });\n// Available models\nconst AVAILABLE_MODELS = {\n    // OpenAI models (using correct model names)\n    \"gpt-4o\": {\n        provider: \"openai\",\n        name: \"GPT-4o\"\n    },\n    \"gpt-4o-mini\": {\n        provider: \"openai\",\n        name: \"GPT-4o Mini\"\n    },\n    \"gpt-4-turbo\": {\n        provider: \"openai\",\n        name: \"GPT-4 Turbo\"\n    },\n    \"gpt-3.5-turbo\": {\n        provider: \"openai\",\n        name: \"GPT-3.5 Turbo\"\n    },\n    // Gemini models (using correct model names)\n    \"gemini-2.0-flash\": {\n        provider: \"gemini\",\n        name: \"Gemini 2.0 Flash\"\n    },\n    \"gemini-1.5-pro\": {\n        provider: \"gemini\",\n        name: \"Gemini 1.5 Pro\"\n    },\n    \"gemini-1.5-flash\": {\n        provider: \"gemini\",\n        name: \"Gemini 1.5 Flash\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdHlwZXMudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQWlEQSxtQkFBbUI7QUFDWixNQUFNQSxnQkFBZ0IsR0FBRztJQUM5Qiw0Q0FBNEM7SUFDNUMsUUFBUSxFQUFFO1FBQUVDLFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxRQUFRO0tBQUU7SUFDaEQsYUFBYSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxhQUFhO0tBQUU7SUFDMUQsYUFBYSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxhQUFhO0tBQUU7SUFDMUQsZUFBZSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxlQUFlO0tBQUU7SUFFOUQsNENBQTRDO0lBQzVDLGtCQUFrQixFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxrQkFBa0I7S0FBRTtJQUNwRSxnQkFBZ0IsRUFBRTtRQUFFRCxRQUFRLEVBQUUsUUFBUTtRQUFFQyxJQUFJLEVBQUUsZ0JBQWdCO0tBQUU7SUFDaEUsa0JBQWtCLEVBQUU7UUFBRUQsUUFBUSxFQUFFLFFBQVE7UUFBRUMsSUFBSSxFQUFFLGtCQUFrQjtLQUFFO0NBQ3JFLENBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95ZWFybi8uL2xpYi90eXBlcy50cz8yYTU1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgTmF0dXJhbFF1ZXJ5UmVxdWVzdCB7XG4gIGNvbGxlY3Rpb24/OiBzdHJpbmc7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIG1vZGVsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5hdHVyYWxRdWVyeVJlc3BvbnNlIHtcbiAgcXVlc3Rpb246IHN0cmluZztcbiAgYW5zd2VyOiBzdHJpbmc7XG4gIHF1ZXJ5X3R5cGU6IHN0cmluZztcbiAgZGF0YT86IGFueTtcbiAgZXhlY3V0aW9uX3RpbWVfbXM6IG51bWJlcjtcbiAgY29udGV4dD86IENvbnZlcnNhdGlvbkNvbnRleHQ7IC8vIEFkZCBjb252ZXJzYXRpb24gY29udGV4dCB0byByZXNwb25zZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnZlcnNhdGlvbkNvbnRleHQge1xuICBsYXN0RW50aXR5Pzogc3RyaW5nOyAvLyBMYXN0IG1lbnRpb25lZCBlbnRpdHkgKHBlcnNvbiwgY3JlYXRvciwgZXRjLilcbiAgbGFzdENvbGxlY3Rpb24/OiBzdHJpbmc7IC8vIExhc3QgbWVudGlvbmVkIG9yIHVzZWQgY29sbGVjdGlvblxuICBsYXN0UXVlcnlUeXBlPzogc3RyaW5nOyAvLyBMYXN0IHF1ZXJ5IHR5cGUgKHNlYXJjaCwgc3VtbWFyaXplLCBjb3VudCwgZXRjLilcbiAgbGFzdFRhcmdldD86IHN0cmluZzsgLy8gTGFzdCB0YXJnZXQgKGl0ZW1zLCBlbnRpdGllcywgZXRjLilcbiAgY29udmVyc2F0aW9uSGlzdG9yeTogQ29udmVyc2F0aW9uVHVybltdO1xuICBjdXJyZW50VG9waWM/OiBzdHJpbmc7IC8vIEN1cnJlbnQgdG9waWMgYmVpbmcgZGlzY3Vzc2VkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udmVyc2F0aW9uVHVybiB7XG4gIGlkOiBzdHJpbmc7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIGludGVudDoge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICB0YXJnZXQ6IHN0cmluZztcbiAgICBmaWx0ZXI/OiBhbnk7XG4gICAgc2NvcGU6IHN0cmluZztcbiAgICBleHRyYWN0ZWRDb2xsZWN0aW9uPzogc3RyaW5nO1xuICB9O1xuICByZXN1bHQ6IGFueTtcbiAgdGltZXN0YW1wOiBEYXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogXCJ1c2VyXCIgfCBcImFzc2lzdGFudFwiO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgcXVlcnlUeXBlPzogc3RyaW5nO1xuICBleGVjdXRpb25UaW1lPzogbnVtYmVyO1xuICBkYXRhPzogYW55O1xuICBjb250ZXh0PzogQ29udmVyc2F0aW9uQ29udGV4dDsgLy8gQWRkIGNvbnRleHQgdG8gbWVzc2FnZXNcbn1cblxuLy8gQXZhaWxhYmxlIG1vZGVsc1xuZXhwb3J0IGNvbnN0IEFWQUlMQUJMRV9NT0RFTFMgPSB7XG4gIC8vIE9wZW5BSSBtb2RlbHMgKHVzaW5nIGNvcnJlY3QgbW9kZWwgbmFtZXMpXG4gIFwiZ3B0LTRvXCI6IHsgcHJvdmlkZXI6IFwib3BlbmFpXCIsIG5hbWU6IFwiR1BULTRvXCIgfSxcbiAgXCJncHQtNG8tbWluaVwiOiB7IHByb3ZpZGVyOiBcIm9wZW5haVwiLCBuYW1lOiBcIkdQVC00byBNaW5pXCIgfSxcbiAgXCJncHQtNC10dXJib1wiOiB7IHByb3ZpZGVyOiBcIm9wZW5haVwiLCBuYW1lOiBcIkdQVC00IFR1cmJvXCIgfSxcbiAgXCJncHQtMy41LXR1cmJvXCI6IHsgcHJvdmlkZXI6IFwib3BlbmFpXCIsIG5hbWU6IFwiR1BULTMuNSBUdXJib1wiIH0sXG5cbiAgLy8gR2VtaW5pIG1vZGVscyAodXNpbmcgY29ycmVjdCBtb2RlbCBuYW1lcylcbiAgXCJnZW1pbmktMi4wLWZsYXNoXCI6IHsgcHJvdmlkZXI6IFwiZ2VtaW5pXCIsIG5hbWU6IFwiR2VtaW5pIDIuMCBGbGFzaFwiIH0sXG4gIFwiZ2VtaW5pLTEuNS1wcm9cIjogeyBwcm92aWRlcjogXCJnZW1pbmlcIiwgbmFtZTogXCJHZW1pbmkgMS41IFByb1wiIH0sXG4gIFwiZ2VtaW5pLTEuNS1mbGFzaFwiOiB7IHByb3ZpZGVyOiBcImdlbWluaVwiLCBuYW1lOiBcIkdlbWluaSAxLjUgRmxhc2hcIiB9LFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgTW9kZWxLZXkgPSBrZXlvZiB0eXBlb2YgQVZBSUxBQkxFX01PREVMUztcbmV4cG9ydCB0eXBlIEVtYmVkZGluZ1Byb3ZpZGVyID0gXCJvcGVuYWlcIiB8IFwiZ2VtaW5pXCI7XG4iXSwibmFtZXMiOlsiQVZBSUxBQkxFX01PREVMUyIsInByb3ZpZGVyIiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/types.ts\n");

/***/ }),

/***/ "(api)/./pages/api/ask.ts":
/*!**************************!*\
  !*** ./pages/api/ask.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/qdrant/nlp-query */ \"(api)/./lib/qdrant/nlp-query.ts\");\n/* harmony import */ var _lib_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/types */ \"(api)/./lib/types.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n    // Enable CORS\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET, POST, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type\");\n    if (req.method === \"OPTIONS\") {\n        res.status(200).end();\n        return;\n    }\n    if (req.method !== \"POST\") {\n        res.setHeader(\"Allow\", [\n            \"POST\"\n        ]);\n        res.status(405).json({\n            error: `Method ${req.method} Not Allowed`\n        });\n        return;\n    }\n    try {\n        const { question , collection , provider =\"openai\" , model , context  } = req.body;\n        if (!question) {\n            res.status(400).json({\n                error: \"Missing required field: question\"\n            });\n            return;\n        }\n        // Determine provider from model, default to gemini-2.0-flash\n        const selectedModel = model || \"gemini-2.0-flash\";\n        const modelInfo = _lib_types__WEBPACK_IMPORTED_MODULE_1__.AVAILABLE_MODELS[selectedModel];\n        const providerInfo = modelInfo?.provider || \"gemini\";\n        console.log(`Processing natural language query: \"${question}\" for collection: ${collection || \"database-level\"} using model: ${selectedModel}`);\n        const result = await (0,_lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__.processNaturalQuery)(collection || null, question, providerInfo, selectedModel, context // Pass context to processing function\n        );\n        // Transform the result to match NaturalQueryResponse interface\n        const response = {\n            question,\n            answer: result.answer,\n            query_type: result.query_type,\n            data: result.data,\n            execution_time_ms: result.execution_time_ms,\n            context: result.context\n        };\n        res.status(200).json(response);\n    } catch (error) {\n        console.error(\"Error processing natural language query:\", error);\n        res.status(500).json({\n            error: error instanceof Error ? error.message : \"Internal server error\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixLQUFLLEdBQUdsQixLQUFLLENBQUNtQixPQUFPLEdBQUcsdUJBQXVCO1NBQ3hFLENBQUMsQ0FBQztJQUNMLENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWVhcm4vLi9wYWdlcy9hcGkvYXNrLnRzPzY2NDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IHByb2Nlc3NOYXR1cmFsUXVlcnkgfSBmcm9tIFwiLi4vLi4vbGliL3FkcmFudC9ubHAtcXVlcnlcIjtcbmltcG9ydCB7XG4gIE5hdHVyYWxRdWVyeVJlcXVlc3QsXG4gIE5hdHVyYWxRdWVyeVJlc3BvbnNlLFxuICBBVkFJTEFCTEVfTU9ERUxTLFxuICBDb252ZXJzYXRpb25Db250ZXh0LFxufSBmcm9tIFwiLi4vLi4vbGliL3R5cGVzXCI7XG5pbXBvcnQgeyBFbWJlZGRpbmdQcm92aWRlciB9IGZyb20gXCIuLi8uLi9saWIvc2NoZW1hc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZTxOYXR1cmFsUXVlcnlSZXNwb25zZSB8IHsgZXJyb3I6IHN0cmluZyB9PlxuKSB7XG4gIC8vIEVuYWJsZSBDT1JTXG4gIHJlcy5zZXRIZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiwgXCIqXCIpO1xuICByZXMuc2V0SGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiLCBcIkdFVCwgUE9TVCwgT1BUSU9OU1wiKTtcbiAgcmVzLnNldEhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIiwgXCJDb250ZW50LVR5cGVcIik7XG5cbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiT1BUSU9OU1wiKSB7XG4gICAgcmVzLnN0YXR1cygyMDApLmVuZCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChyZXEubWV0aG9kICE9PSBcIlBPU1RcIikge1xuICAgIHJlcy5zZXRIZWFkZXIoXCJBbGxvd1wiLCBbXCJQT1NUXCJdKTtcbiAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3Qge1xuICAgICAgcXVlc3Rpb24sXG4gICAgICBjb2xsZWN0aW9uLFxuICAgICAgcHJvdmlkZXIgPSBcIm9wZW5haVwiLFxuICAgICAgbW9kZWwsXG4gICAgICBjb250ZXh0LCAvLyBBZGQgY29udmVyc2F0aW9uIGNvbnRleHQgcGFyYW1ldGVyXG4gICAgfToge1xuICAgICAgcXVlc3Rpb246IHN0cmluZztcbiAgICAgIGNvbGxlY3Rpb24/OiBzdHJpbmc7XG4gICAgICBwcm92aWRlcj86IEVtYmVkZGluZ1Byb3ZpZGVyO1xuICAgICAgbW9kZWw/OiBzdHJpbmc7XG4gICAgICBjb250ZXh0PzogQ29udmVyc2F0aW9uQ29udGV4dDsgLy8gQWRkIGNvbnRleHQgdHlwZVxuICAgIH0gPSByZXEuYm9keSBhcyBOYXR1cmFsUXVlcnlSZXF1ZXN0O1xuXG4gICAgaWYgKCFxdWVzdGlvbikge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJNaXNzaW5nIHJlcXVpcmVkIGZpZWxkOiBxdWVzdGlvblwiLFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHByb3ZpZGVyIGZyb20gbW9kZWwsIGRlZmF1bHQgdG8gZ2VtaW5pLTIuMC1mbGFzaFxuICAgIGNvbnN0IHNlbGVjdGVkTW9kZWwgPSBtb2RlbCB8fCBcImdlbWluaS0yLjAtZmxhc2hcIjtcbiAgICBjb25zdCBtb2RlbEluZm8gPVxuICAgICAgQVZBSUxBQkxFX01PREVMU1tzZWxlY3RlZE1vZGVsIGFzIGtleW9mIHR5cGVvZiBBVkFJTEFCTEVfTU9ERUxTXTtcbiAgICBjb25zdCBwcm92aWRlckluZm8gPSBtb2RlbEluZm8/LnByb3ZpZGVyIHx8IFwiZ2VtaW5pXCI7XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBQcm9jZXNzaW5nIG5hdHVyYWwgbGFuZ3VhZ2UgcXVlcnk6IFwiJHtxdWVzdGlvbn1cIiBmb3IgY29sbGVjdGlvbjogJHtcbiAgICAgICAgY29sbGVjdGlvbiB8fCBcImRhdGFiYXNlLWxldmVsXCJcbiAgICAgIH0gdXNpbmcgbW9kZWw6ICR7c2VsZWN0ZWRNb2RlbH1gXG4gICAgKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2Nlc3NOYXR1cmFsUXVlcnkoXG4gICAgICBjb2xsZWN0aW9uIHx8IG51bGwsXG4gICAgICBxdWVzdGlvbixcbiAgICAgIHByb3ZpZGVySW5mbyxcbiAgICAgIHNlbGVjdGVkTW9kZWwsXG4gICAgICBjb250ZXh0IC8vIFBhc3MgY29udGV4dCB0byBwcm9jZXNzaW5nIGZ1bmN0aW9uXG4gICAgKTtcblxuICAgIC8vIFRyYW5zZm9ybSB0aGUgcmVzdWx0IHRvIG1hdGNoIE5hdHVyYWxRdWVyeVJlc3BvbnNlIGludGVyZmFjZVxuICAgIGNvbnN0IHJlc3BvbnNlOiBOYXR1cmFsUXVlcnlSZXNwb25zZSA9IHtcbiAgICAgIHF1ZXN0aW9uLFxuICAgICAgYW5zd2VyOiByZXN1bHQuYW5zd2VyLFxuICAgICAgcXVlcnlfdHlwZTogcmVzdWx0LnF1ZXJ5X3R5cGUsXG4gICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICAgIGV4ZWN1dGlvbl90aW1lX21zOiByZXN1bHQuZXhlY3V0aW9uX3RpbWVfbXMsXG4gICAgICBjb250ZXh0OiByZXN1bHQuY29udGV4dCwgLy8gUmV0dXJuIHVwZGF0ZWQgY29udmVyc2F0aW9uIGNvbnRleHRcbiAgICB9O1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzcG9uc2UpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIG5hdHVyYWwgbGFuZ3VhZ2UgcXVlcnk6XCIsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsicHJvY2Vzc05hdHVyYWxRdWVyeSIsIkFWQUlMQUJMRV9NT0RFTFMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIiwianNvbiIsImVycm9yIiwicXVlc3Rpb24iLCJjb2xsZWN0aW9uIiwicHJvdmlkZXIiLCJtb2RlbCIsImNvbnRleHQiLCJib2R5Iiwic2VsZWN0ZWRNb2RlbCIsIm1vZGVsSW5mbyIsInByb3ZpZGVySW5mbyIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJyZXNwb25zZSIsImFuc3dlciIsInF1ZXJ5X3R5cGUiLCJkYXRhIiwiZXhlY3V0aW9uX3RpbWVfbXMiLCJFcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/ask.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/ask.ts"));
module.exports = __webpack_exports__;

})();