"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/ask";
exports.ids = ["pages/api/ask"];
exports.modules = {

/***/ "@google/generative-ai":
/*!****************************************!*\
  !*** external "@google/generative-ai" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@google/generative-ai");;

/***/ }),

/***/ "@qdrant/js-client-rest":
/*!*****************************************!*\
  !*** external "@qdrant/js-client-rest" ***!
  \*****************************************/
/***/ ((module) => {

module.exports = import("@qdrant/js-client-rest");;

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./lib/qdrant/db.ts":
/*!**************************!*\
  !*** ./lib/qdrant/db.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"client\": () => (/* binding */ client),\n/* harmony export */   \"createCollection\": () => (/* binding */ createCollection),\n/* harmony export */   \"testConnection\": () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var _qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @qdrant/js-client-rest */ \"@qdrant/js-client-rest\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__]);\n_qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Initialize client with support for both local and cloud instances\nconst qdrantUrl = \"https://1555b3af-2ea7-409c-83a3-3a49207ac217.us-east4-0.gcp.cloud.qdrant.io:6333\" || 0;\nconst qdrantApiKey = process.env.QDRANT_API_KEY;\nlet clientConfig;\n// For cloud instances, use the recommended format from documentation\nif (qdrantApiKey) {\n    // Parse the URL to extract host\n    const url = new URL(qdrantUrl);\n    const host = url.hostname;\n    const isHttps = url.protocol === \"https:\";\n    clientConfig = {\n        host: host,\n        port: null,\n        https: isHttps,\n        apiKey: qdrantApiKey\n    };\n    console.log(`Connecting to Qdrant Cloud at ${host} (HTTPS: ${isHttps})`);\n} else {\n    // For local instances without API key\n    clientConfig = {\n        url: qdrantUrl\n    };\n    console.log(`Connecting to local Qdrant at ${qdrantUrl}`);\n}\nconst client = new _qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__.QdrantClient(clientConfig);\n\n// Test Qdrant connection\nasync function testConnection() {\n    try {\n        // Use getCollections as a simple health check\n        await client.getCollections();\n        console.log(\"Qdrant connection successful\");\n        return true;\n    } catch (error) {\n        console.error(\"Qdrant connection failed:\", error);\n        return false;\n    }\n}\nasync function createCollection(name = \"my_collection\", dimension = 768) {\n    try {\n        // First test the connection\n        const isConnected = await testConnection();\n        if (!isConnected) {\n            throw new Error(\"Cannot connect to Qdrant database. Please check your configuration.\");\n        }\n        // Check if collection already exists\n        try {\n            await client.getCollection(name);\n            console.log(`Collection \"${name}\" already exists`);\n            return;\n        } catch (error) {\n            // Collection doesn't exist, create it\n            console.log(`Collection \"${name}\" does not exist, creating...`);\n            // Check if it's a different error than \"not found\"\n            if (error.status && error.status !== 404) {\n                console.error(\"Unexpected error checking collection:\", error);\n                throw error;\n            }\n        }\n        await client.createCollection(name, {\n            vectors: {\n                size: dimension,\n                distance: \"Cosine\"\n            }\n        });\n        console.log(`Collection \"${name}\" created successfully with dimension ${dimension}`);\n    } catch (error1) {\n        console.error(`Error creating collection \"${name}\":`, error1);\n        // Provide more specific error messages\n        if (error1.message?.includes(\"authentication\") || error1.status === 401 || error1.status === 403) {\n            throw new Error(\"Authentication failed. Please check your QDRANT_API_KEY and QDRANT_URL.\");\n        } else if (error1.message?.includes(\"connection\") || error1.code === \"ECONNREFUSED\") {\n            throw new Error(\"Cannot connect to Qdrant. Please check your QDRANT_URL.\");\n        } else {\n            throw error1;\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2xDTSxPQUFPLEVBQUU7Z0JBQ1BDLElBQUksRUFBRU4sU0FBUztnQkFDZk8sUUFBUSxFQUFFLFFBQVE7YUFDbkI7U0FDRixDQUFDLENBQUM7UUFFSGYsT0FBTyxDQUFDQyxHQUFHLENBQ1QsQ0FBQyxZQUFZLEVBQUVNLElBQUksQ0FBQyxzQ0FBc0MsRUFBRUMsU0FBUyxDQUFDLENBQUMsQ0FDeEUsQ0FBQztJQUNKLEVBQUUsT0FBT0gsTUFBSyxFQUFPO1FBQ25CTCxPQUFPLENBQUNLLEtBQUssQ0FBQyxDQUFDLDJCQUEyQixFQUFFRSxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUVGLE1BQUssQ0FBQyxDQUFDO1FBRTdELHVDQUF1QztRQUN2QyxJQUNFQSxNQUFLLENBQUNXLE9BQU8sRUFBRUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLElBQ3pDWixNQUFLLENBQUNPLE1BQU0sS0FBSyxHQUFHLElBQ3BCUCxNQUFLLENBQUNPLE1BQU0sS0FBSyxHQUFHLEVBQ3BCO1lBQ0EsTUFBTSxJQUFJRixLQUFLLENBQ2IseUVBQXlFLENBQzFFLENBQUM7UUFDSixPQUFPLElBQ0xMLE1BQUssQ0FBQ1csT0FBTyxFQUFFQyxRQUFRLENBQUMsWUFBWSxDQUFDLElBQ3JDWixNQUFLLENBQUNhLElBQUksS0FBSyxjQUFjLEVBQzdCO1lBQ0EsTUFBTSxJQUFJUixLQUFLLENBQ2IseURBQXlELENBQzFELENBQUM7UUFDSixPQUFPO1lBQ0wsTUFBTUwsTUFBSyxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWVhcm4vLi9saWIvcWRyYW50L2RiLnRzPzM5NjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUWRyYW50Q2xpZW50IH0gZnJvbSBcIkBxZHJhbnQvanMtY2xpZW50LXJlc3RcIjtcblxuLy8gSW5pdGlhbGl6ZSBjbGllbnQgd2l0aCBzdXBwb3J0IGZvciBib3RoIGxvY2FsIGFuZCBjbG91ZCBpbnN0YW5jZXNcbmNvbnN0IHFkcmFudFVybCA9IHByb2Nlc3MuZW52LlFEUkFOVF9VUkwgfHwgXCJodHRwOi8vbG9jYWxob3N0OjYzMzNcIjtcbmNvbnN0IHFkcmFudEFwaUtleSA9IHByb2Nlc3MuZW52LlFEUkFOVF9BUElfS0VZO1xuXG5sZXQgY2xpZW50Q29uZmlnOiBhbnk7XG5cbi8vIEZvciBjbG91ZCBpbnN0YW5jZXMsIHVzZSB0aGUgcmVjb21tZW5kZWQgZm9ybWF0IGZyb20gZG9jdW1lbnRhdGlvblxuaWYgKHFkcmFudEFwaUtleSkge1xuICAvLyBQYXJzZSB0aGUgVVJMIHRvIGV4dHJhY3QgaG9zdFxuICBjb25zdCB1cmwgPSBuZXcgVVJMKHFkcmFudFVybCk7XG4gIGNvbnN0IGhvc3QgPSB1cmwuaG9zdG5hbWU7XG4gIGNvbnN0IGlzSHR0cHMgPSB1cmwucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XG5cbiAgY2xpZW50Q29uZmlnID0ge1xuICAgIGhvc3Q6IGhvc3QsXG4gICAgcG9ydDogbnVsbCwgLy8gVGhpcyBpcyBjcml0aWNhbCBmb3IgY2xvdWQgaW5zdGFuY2VzIC0gcHJldmVudHMgOjYzMzMgYmVpbmcgYXBwZW5kZWRcbiAgICBodHRwczogaXNIdHRwcyxcbiAgICBhcGlLZXk6IHFkcmFudEFwaUtleSxcbiAgfTtcblxuICBjb25zb2xlLmxvZyhgQ29ubmVjdGluZyB0byBRZHJhbnQgQ2xvdWQgYXQgJHtob3N0fSAoSFRUUFM6ICR7aXNIdHRwc30pYCk7XG59IGVsc2Uge1xuICAvLyBGb3IgbG9jYWwgaW5zdGFuY2VzIHdpdGhvdXQgQVBJIGtleVxuICBjbGllbnRDb25maWcgPSB7XG4gICAgdXJsOiBxZHJhbnRVcmwsXG4gIH07XG5cbiAgY29uc29sZS5sb2coYENvbm5lY3RpbmcgdG8gbG9jYWwgUWRyYW50IGF0ICR7cWRyYW50VXJsfWApO1xufVxuXG5jb25zdCBjbGllbnQgPSBuZXcgUWRyYW50Q2xpZW50KGNsaWVudENvbmZpZyk7XG5cbmV4cG9ydCB7IGNsaWVudCB9O1xuXG4vLyBUZXN0IFFkcmFudCBjb25uZWN0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgLy8gVXNlIGdldENvbGxlY3Rpb25zIGFzIGEgc2ltcGxlIGhlYWx0aCBjaGVja1xuICAgIGF3YWl0IGNsaWVudC5nZXRDb2xsZWN0aW9ucygpO1xuICAgIGNvbnNvbGUubG9nKFwiUWRyYW50IGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bFwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiUWRyYW50IGNvbm5lY3Rpb24gZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDb2xsZWN0aW9uKFxuICBuYW1lOiBzdHJpbmcgPSBcIm15X2NvbGxlY3Rpb25cIixcbiAgZGltZW5zaW9uOiBudW1iZXIgPSA3Njhcbik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIC8vIEZpcnN0IHRlc3QgdGhlIGNvbm5lY3Rpb25cbiAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IGF3YWl0IHRlc3RDb25uZWN0aW9uKCk7XG4gICAgaWYgKCFpc0Nvbm5lY3RlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbm5vdCBjb25uZWN0IHRvIFFkcmFudCBkYXRhYmFzZS4gUGxlYXNlIGNoZWNrIHlvdXIgY29uZmlndXJhdGlvbi5cIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBjb2xsZWN0aW9uIGFscmVhZHkgZXhpc3RzXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNsaWVudC5nZXRDb2xsZWN0aW9uKG5hbWUpO1xuICAgICAgY29uc29sZS5sb2coYENvbGxlY3Rpb24gXCIke25hbWV9XCIgYWxyZWFkeSBleGlzdHNgKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAvLyBDb2xsZWN0aW9uIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdFxuICAgICAgY29uc29sZS5sb2coYENvbGxlY3Rpb24gXCIke25hbWV9XCIgZG9lcyBub3QgZXhpc3QsIGNyZWF0aW5nLi4uYCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBkaWZmZXJlbnQgZXJyb3IgdGhhbiBcIm5vdCBmb3VuZFwiXG4gICAgICBpZiAoZXJyb3Iuc3RhdHVzICYmIGVycm9yLnN0YXR1cyAhPT0gNDA0KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yIGNoZWNraW5nIGNvbGxlY3Rpb246XCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgY2xpZW50LmNyZWF0ZUNvbGxlY3Rpb24obmFtZSwge1xuICAgICAgdmVjdG9yczoge1xuICAgICAgICBzaXplOiBkaW1lbnNpb24sXG4gICAgICAgIGRpc3RhbmNlOiBcIkNvc2luZVwiLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYENvbGxlY3Rpb24gXCIke25hbWV9XCIgY3JlYXRlZCBzdWNjZXNzZnVsbHkgd2l0aCBkaW1lbnNpb24gJHtkaW1lbnNpb259YFxuICAgICk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyBjb2xsZWN0aW9uIFwiJHtuYW1lfVwiOmAsIGVycm9yKTtcblxuICAgIC8vIFByb3ZpZGUgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlc1xuICAgIGlmIChcbiAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKFwiYXV0aGVudGljYXRpb25cIikgfHxcbiAgICAgIGVycm9yLnN0YXR1cyA9PT0gNDAxIHx8XG4gICAgICBlcnJvci5zdGF0dXMgPT09IDQwM1xuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZC4gUGxlYXNlIGNoZWNrIHlvdXIgUURSQU5UX0FQSV9LRVkgYW5kIFFEUkFOVF9VUkwuXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKFwiY29ubmVjdGlvblwiKSB8fFxuICAgICAgZXJyb3IuY29kZSA9PT0gXCJFQ09OTlJFRlVTRURcIlxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbm5vdCBjb25uZWN0IHRvIFFkcmFudC4gUGxlYXNlIGNoZWNrIHlvdXIgUURSQU5UX1VSTC5cIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiUWRyYW50Q2xpZW50IiwicWRyYW50VXJsIiwicHJvY2VzcyIsImVudiIsIlFEUkFOVF9VUkwiLCJxZHJhbnRBcGlLZXkiLCJRRFJBTlRfQVBJX0tFWSIsImNsaWVudENvbmZpZyIsInVybCIsIlVSTCIsImhvc3QiLCJob3N0bmFtZSIsImlzSHR0cHMiLCJwcm90b2NvbCIsInBvcnQiLCJodHRwcyIsImFwaUtleSIsImNvbnNvbGUiLCJsb2ciLCJjbGllbnQiLCJ0ZXN0Q29ubmVjdGlvbiIsImdldENvbGxlY3Rpb25zIiwiZXJyb3IiLCJjcmVhdGVDb2xsZWN0aW9uIiwibmFtZSIsImRpbWVuc2lvbiIsImlzQ29ubmVjdGVkIiwiRXJyb3IiLCJnZXRDb2xsZWN0aW9uIiwic3RhdHVzIiwidmVjdG9ycyIsInNpemUiLCJkaXN0YW5jZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImNvZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/qdrant/db.ts\n");

/***/ }),

/***/ "(api)/./lib/qdrant/nlp-query.ts":
/*!*********************************!*\
  !*** ./lib/qdrant/nlp-query.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"processNaturalQuery\": () => (/* binding */ processNaturalQuery)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @google/generative-ai */ \"@google/generative-ai\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db */ \"(api)/./lib/qdrant/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__, _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__, _db__WEBPACK_IMPORTED_MODULE_2__]);\n([openai__WEBPACK_IMPORTED_MODULE_0__, _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__, _db__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__.GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\nasync function processNaturalQuery(collection, question, provider = \"openai\", model // Add specific model parameter\n) {\n    const startTime = Date.now();\n    try {\n        // Step 1: Understand the intent using LLM\n        const intent = await parseQueryIntent(question, provider, model);\n        // Step 2: Use extracted collection name if available and no explicit collection provided\n        const finalCollection = collection || intent.extractedCollection || null;\n        // Step 3: Execute the appropriate operation (database or collection level)\n        const result = await executeQuery(finalCollection, intent);\n        // Step 4: Generate natural language response\n        const answer = await generateResponse(question, intent, result, provider, model);\n        const execution_time_ms = Date.now() - startTime;\n        return {\n            answer,\n            query_type: intent.type,\n            data: result,\n            execution_time_ms\n        };\n    } catch (error) {\n        console.error(\"Error processing natural query:\", error);\n        // Create fallback response even if everything fails\n        const fallbackAnswer = \"I encountered an issue processing your query, but I'm using pattern matching to help. \" + generateFallbackResponse(question, inferIntentFromQuestion(question), {\n            count: 0\n        });\n        return {\n            answer: fallbackAnswer,\n            query_type: \"fallback\",\n            data: null,\n            execution_time_ms: Date.now() - startTime\n        };\n    }\n}\nasync function parseQueryIntent(question, provider, model) {\n    // First try simple pattern matching as fallback\n    const fallbackIntent = inferIntentFromQuestion(question);\n    // If we don't have API keys, use fallback\n    if (!process.env.OPENAI_API_KEY && !process.env.GEMINI_API_KEY) {\n        console.log(\"No API keys available, using pattern matching fallback\");\n        return fallbackIntent;\n    }\n    const systemPrompt = `You are an expert query analyzer for a vector database system containing image data with artist information. Parse the user's question and return a JSON object with the query intent.\n\nThe system contains multiple collections, each with image data with these fields:\n- name (artist name)\n- file_name (image filename)\n- image_url (URL to image)\n- url (style URL)\n\nAvailable query types:\n- \"count\": count items (e.g., \"how many images by Chris Dyer\")\n- \"search\": find specific items (e.g., \"find Chris Dyer images\", \"show me artwork by specific artist\")\n- \"list\": list unique values (e.g., \"list all artists\")\n- \"filter\": filter by criteria (e.g., \"images with .jpeg extension\")\n- \"describe\": get general info (e.g., \"describe this collection\")\n- \"summarize\": provide detailed summary of specific subset (e.g., \"summarize Chris Dyer's images\")\n- \"analyze\": analyze or categorize specific artist's work\n- \"collections\": collection management (e.g., \"what collections exist\")\n- \"database\": database-level queries (e.g., \"describe the database\")\n\nAvailable scopes:\n- \"collection\": query operates on a specific collection\n- \"database\": query operates on the entire database\n\nIMPORTANT: If the user asks about a specific artist's work, images, or style:\n1. Set type to \"search\" or \"summarize\" (not just \"describe\")\n2. Extract the artist name in the filter\n3. Be specific about what they want to know\n\nReturn ONLY a JSON object in this format:\n{\n  \"type\": \"count|search|list|filter|describe|summarize|analyze|collections|database\",\n  \"target\": \"what to count/search/list (e.g., 'images', 'artists', 'collections')\",\n  \"filter\": {\"field\": \"value\"} or null,\n  \"limit\": number or null,\n  \"scope\": \"collection|database\",\n  \"extractedCollection\": \"collection_name_if_mentioned_in_query\" or null\n}\n\nExamples:\n- \"How many images by Chris Dyer?\" → {\"type\": \"count\", \"target\": \"images\", \"filter\": {\"name\": \"Chris Dyer\"}, \"limit\": null, \"scope\": \"database\", \"extractedCollection\": null}\n- \"Summarize Chris Dyer's images in midjourneysample\" → {\"type\": \"summarize\", \"target\": \"images\", \"filter\": {\"name\": \"Chris Dyer\"}, \"limit\": 10, \"scope\": \"collection\", \"extractedCollection\": \"midjourneysample\"}\n- \"Give me a summary of the images by Chris Dyer\" → {\"type\": \"summarize\", \"target\": \"images\", \"filter\": {\"name\": \"Chris Dyer\"}, \"limit\": 10, \"scope\": \"database\", \"extractedCollection\": null}\n- \"Find all Chris Dyer artwork\" → {\"type\": \"search\", \"target\": \"images\", \"filter\": {\"name\": \"Chris Dyer\"}, \"limit\": 20, \"scope\": \"database\", \"extractedCollection\": null}\n- \"Show me Peter Paul Rubens images in midjourneysample\" → {\"type\": \"search\", \"target\": \"images\", \"filter\": {\"name\": \"Peter Paul Rubens\"}, \"limit\": 10, \"scope\": \"collection\", \"extractedCollection\": \"midjourneysample\"}`;\n    try {\n        let response;\n        if (provider === \"gemini\" && process.env.GEMINI_API_KEY) {\n            const geminiModel = genAI.getGenerativeModel({\n                model: model || \"gemini-2.0-flash\"\n            });\n            const result = await geminiModel.generateContent([\n                {\n                    text: systemPrompt\n                },\n                {\n                    text: `Question: \"${question}\"`\n                }, \n            ]);\n            response = result.response.text();\n        } else if (provider === \"openai\" && process.env.OPENAI_API_KEY) {\n            const completion = await openai.chat.completions.create({\n                model: model || \"gpt-3.5-turbo\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: systemPrompt\n                    },\n                    {\n                        role: \"user\",\n                        content: `Question: \"${question}\"`\n                    }, \n                ],\n                temperature: 0\n            });\n            response = completion.choices[0].message.content || \"{}\";\n        } else {\n            throw new Error(\"No valid API key for the specified provider\");\n        }\n        // Extract JSON from response (in case there's extra text)\n        const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n        const jsonStr = jsonMatch ? jsonMatch[0] : response;\n        return JSON.parse(jsonStr);\n    } catch (e) {\n        // Fallback parsing\n        console.warn(\"Failed to parse LLM response, using fallback:\", e);\n        return fallbackIntent;\n    }\n}\nfunction inferIntentFromQuestion(question) {\n    const q = question.toLowerCase();\n    // Try to extract collection name from the question\n    const extractedCollection = extractCollectionFromQuestion(question);\n    // Check for artist-specific queries first - fixed regex with lookahead\n    const artistMatch = question.match(/artist\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*?)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i) || question.match(/(?:by|from|of)\\s+([A-Z][a-z]+\\s+[A-Z][a-z]+)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i);\n    const artistName = artistMatch ? artistMatch[1].trim() : null;\n    // Database-level queries\n    if (q.includes(\"collections\") || q.includes(\"database\")) {\n        if (q.includes(\"how many\") || q.includes(\"count\")) {\n            return {\n                type: \"count\",\n                target: \"collections\",\n                scope: \"database\"\n            };\n        }\n        if (q.includes(\"list\") || q.includes(\"what\") || q.includes(\"show\")) {\n            return {\n                type: \"collections\",\n                target: \"list\",\n                scope: \"database\"\n            };\n        }\n        if (q.includes(\"describe\")) {\n            return {\n                type: \"database\",\n                target: \"overview\",\n                scope: \"database\"\n            };\n        }\n    }\n    // Artist-specific queries (high priority)\n    if (artistName) {\n        const filter = {\n            name: artistName\n        };\n        const scope = extractedCollection ? \"collection\" : \"database\";\n        if (q.includes(\"summary\") || q.includes(\"summarize\") || q.includes(\"give me\") && q.includes(\"summary\")) {\n            return {\n                type: \"summarize\",\n                target: \"images\",\n                filter,\n                limit: 20,\n                scope,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"how many\") || q.includes(\"count\")) {\n            return {\n                type: \"count\",\n                target: \"images\",\n                filter,\n                scope,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"find\") || q.includes(\"search\") || q.includes(\"show\")) {\n            return {\n                type: \"search\",\n                target: \"images\",\n                filter,\n                limit: 10,\n                scope,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"analyze\") || q.includes(\"analysis\")) {\n            return {\n                type: \"analyze\",\n                target: \"images\",\n                filter,\n                limit: 50,\n                scope,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n    }\n    // Collection-level queries (existing logic)\n    if (q.includes(\"how many\") || q.includes(\"count\")) {\n        if (q.includes(\"artist\")) {\n            return {\n                type: \"count\",\n                target: \"artists\",\n                scope: extractedCollection ? \"collection\" : \"database\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"vector\") || q.includes(\"image\") || q.includes(\"item\")) {\n            return {\n                type: \"count\",\n                target: \"total\",\n                scope: extractedCollection ? \"collection\" : \"database\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        return {\n            type: \"count\",\n            target: \"total\",\n            scope: extractedCollection ? \"collection\" : \"database\",\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    if (q.includes(\"find\") || q.includes(\"search\")) {\n        // Check if it's across all collections\n        const scope1 = q.includes(\"all collections\") || q.includes(\"across\") ? \"database\" : extractedCollection ? \"collection\" : \"database\";\n        // Try to extract artist name (fallback pattern) - fixed with lookahead\n        const fallbackArtistMatch = question.match(/(?:by|from|of)\\s+([A-Z][a-z]+\\s+[A-Z][a-z]+)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i);\n        if (fallbackArtistMatch) {\n            return {\n                type: \"search\",\n                target: \"images\",\n                filter: {\n                    name: fallbackArtistMatch[1]\n                },\n                limit: 10,\n                scope: scope1,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        return {\n            type: \"search\",\n            target: \"images\",\n            limit: 10,\n            scope: scope1,\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    if (q.includes(\"list\") || q.includes(\"show\")) {\n        if (q.includes(\"artist\")) {\n            return {\n                type: \"list\",\n                target: \"artists\",\n                scope: extractedCollection ? \"collection\" : \"database\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        return {\n            type: \"list\",\n            target: \"images\",\n            limit: 20,\n            scope: extractedCollection ? \"collection\" : \"database\",\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    if (q.includes(\"describe\")) {\n        return {\n            type: \"describe\",\n            target: extractedCollection ? \"collection\" : \"database\",\n            scope: extractedCollection ? \"collection\" : \"database\",\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    return {\n        type: \"describe\",\n        target: \"collection\",\n        scope: extractedCollection ? \"collection\" : \"database\",\n        ...extractedCollection && {\n            extractedCollection\n        }\n    };\n}\n// New function to extract collection names from natural language\nfunction extractCollectionFromQuestion(question) {\n    const q = question.toLowerCase();\n    // Common patterns for mentioning collections\n    const patterns = [\n        // \"in [collection]\" or \"from [collection]\"\n        /(?:in|from)\\s+([a-zA-Z][a-zA-Z0-9_-]*)/g,\n        // \"[collection] collection\"\n        /([a-zA-Z][a-zA-Z0-9_-]*)\\s+collection/g,\n        // \"collection [collection]\"\n        /collection\\s+([a-zA-Z][a-zA-Z0-9_-]*)/g, \n    ];\n    for (const pattern of patterns){\n        const matches = [\n            ...q.matchAll(pattern)\n        ];\n        for (const match of matches){\n            const candidate = match[1];\n            // Filter out common words that aren't collection names\n            if (![\n                \"the\",\n                \"this\",\n                \"that\",\n                \"my\",\n                \"your\",\n                \"our\",\n                \"their\",\n                \"all\",\n                \"some\",\n                \"any\",\n                \"each\",\n                \"every\", \n            ].includes(candidate)) {\n                return candidate;\n            }\n        }\n    }\n    // Look for specific common collection names that might appear without prepositions\n    const commonCollectionNames = [\n        \"midjourneysample\",\n        \"test_collection\",\n        \"my_docs\",\n        \"test_small\",\n        \"new_test_yearn\",\n        \"docs_openai\",\n        \"docs_gemini\", \n    ];\n    for (const name of commonCollectionNames){\n        if (q.includes(name)) {\n            return name;\n        }\n    }\n    return undefined;\n}\nasync function executeQuery(collection, intent) {\n    if (intent.scope === \"database\") {\n        return await executeDatabaseQuery(intent);\n    } else {\n        // Collection-level query - require collection name\n        if (!collection) {\n            throw new Error(\"Collection name is required for collection-level queries\");\n        }\n        return await executeCollectionQuery(collection, intent);\n    }\n}\nasync function executeDatabaseQuery(intent) {\n    switch(intent.type){\n        case \"count\":\n            if (intent.target === \"collections\") {\n                return await countCollections();\n            }\n            if (intent.target === \"artists\") {\n                return await countArtistsAcrossDatabase();\n            }\n            if (intent.target === \"images\" && intent.filter) {\n                return await countImagesByArtistAcrossDatabase(intent.filter);\n            }\n            if (intent.target === \"total\") {\n                return await countTotalVectorsAcrossDatabase();\n            }\n            break;\n        case \"collections\":\n            return await listCollections();\n        case \"database\":\n            return await describeDatabaseInfo();\n        case \"search\":\n            if (intent.filter) {\n                return await searchAcrossCollections(intent.filter, intent.limit || 10);\n            }\n            break;\n        case \"summarize\":\n            if (intent.filter) {\n                return await summarizeArtistAcrossDatabase(intent.filter, intent.limit || 20);\n            }\n            break;\n        case \"list\":\n            if (intent.target === \"artists\") {\n                return await listArtistsAcrossDatabase(intent.limit || 50);\n            }\n            break;\n        default:\n            throw new Error(`Database-level query type '${intent.type}' not implemented yet`);\n    }\n}\nasync function executeCollectionQuery(collection, intent) {\n    switch(intent.type){\n        case \"count\":\n            if (intent.target === \"artists\") {\n                return await countUniqueArtists(collection);\n            } else if (intent.target === \"images\" && intent.filter) {\n                return await countImagesByArtist(collection, intent.filter);\n            } else {\n                return await countTotal(collection);\n            }\n        case \"search\":\n            return await searchImages(collection, intent.filter, intent.limit || 10);\n        case \"summarize\":\n            return await summarizeArtistWork(collection, intent.filter, intent.limit || 20);\n        case \"analyze\":\n            return await analyzeArtistWork(collection, intent.filter, intent.limit || 50);\n        case \"list\":\n            if (intent.target === \"artists\") {\n                return await listUniqueArtists(collection, intent.limit || 50);\n            } else {\n                return await listImages(collection, intent.limit || 20);\n            }\n        case \"filter\":\n            return await filterImages(collection, intent.filter, intent.limit || 20);\n        case \"describe\":\n            return await describeCollection(collection);\n        default:\n            throw new Error(`Unknown collection-level query type: ${intent.type}`);\n    }\n}\n// New database-level functions\nasync function countCollections() {\n    const collectionsInfo = await _db__WEBPACK_IMPORTED_MODULE_2__.client.getCollections();\n    const collections = collectionsInfo.collections.map((c)=>c.name);\n    return {\n        count: collections.length,\n        collections: collections\n    };\n}\nasync function listCollections() {\n    const collectionsInfo = await _db__WEBPACK_IMPORTED_MODULE_2__.client.getCollections();\n    const collections = collectionsInfo.collections;\n    // Get detailed info for each collection using actual count\n    const detailedCollections = await Promise.all(collections.map(async (collection)=>{\n        try {\n            // Use the same count method that works for individual queries\n            const countResult = await _db__WEBPACK_IMPORTED_MODULE_2__.client.count(collection.name, {});\n            return {\n                name: collection.name,\n                vectors_count: countResult.count || 0\n            };\n        } catch (error) {\n            console.warn(`Failed to count vectors in collection ${collection.name}:`, error);\n            return {\n                name: collection.name,\n                vectors_count: 0\n            };\n        }\n    }));\n    return {\n        collections: detailedCollections\n    };\n}\nasync function describeDatabaseInfo() {\n    const collectionsData = await listCollections();\n    const totalVectors = collectionsData.collections.reduce((sum, col)=>sum + (col.vectors_count || 0), 0);\n    return {\n        total_collections: collectionsData.collections.length,\n        total_vectors: totalVectors,\n        collections: collectionsData.collections\n    };\n}\nasync function searchAcrossCollections(filter, limit) {\n    const collectionsData = await listCollections();\n    const allResults = [];\n    // Search each collection\n    for (const collection of collectionsData.collections){\n        try {\n            const results = await searchImages(collection.name, filter, limit);\n            if (results.images && results.images.length > 0) {\n                allResults.push({\n                    collection: collection.name,\n                    count: results.count,\n                    images: results.images\n                });\n            }\n        } catch (error) {\n            console.warn(`Failed to search collection ${collection.name}:`, error);\n        }\n    }\n    const totalCount = allResults.reduce((sum, result)=>sum + result.count, 0);\n    return {\n        total_count: totalCount,\n        collections_searched: collectionsData.collections.length,\n        results_by_collection: allResults\n    };\n}\n// Existing collection-level functions remain the same\nasync function countTotal(collection) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.count(collection, {});\n    return {\n        count: response.count\n    };\n}\nasync function countUniqueArtists(collection) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    const artists = new Set(response.points.map((point)=>point.payload?.name).filter(Boolean));\n    return {\n        count: artists.size,\n        artists: Array.from(artists).slice(0, 20)\n    };\n}\nasync function searchImages(collection, filter, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    const limitedPoints = filteredPoints.slice(0, limit);\n    return {\n        count: limitedPoints.length,\n        images: limitedPoints\n    };\n}\nasync function listUniqueArtists(collection, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit,\n        with_payload: true,\n        with_vector: false\n    });\n    const artists = new Set(response.points.map((point)=>point.payload?.name).filter(Boolean));\n    return {\n        artists: Array.from(artists)\n    };\n}\nasync function listImages(collection, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit,\n        with_payload: true,\n        with_vector: false\n    });\n    return {\n        count: response.points.length,\n        images: response.points.map((point)=>({\n                id: point.id,\n                artist: point.payload?.name,\n                filename: point.payload?.file_name\n            }))\n    };\n}\nasync function filterImages(collection, filter, limit) {\n    return await searchImages(collection, filter, limit);\n}\nasync function describeCollection(collection) {\n    const totalCount = await countTotal(collection);\n    const artistsData = await countUniqueArtists(collection);\n    const sampleImages = await listImages(collection, 5);\n    return {\n        total_images: totalCount.count,\n        unique_artists: artistsData.count,\n        sample_artists: artistsData.artists.slice(0, 10),\n        sample_images: sampleImages.images\n    };\n}\nasync function generateResponse(question, intent, data, provider, model) {\n    const fallbackResponse = generateFallbackResponse(question, intent, data);\n    if (!process.env.OPENAI_API_KEY && !process.env.GEMINI_API_KEY) {\n        return fallbackResponse;\n    }\n    const systemPrompt = `You are a helpful assistant that explains vector database query results in natural language.\n  \nThe user asked: \"${question}\"\nThe query type was: ${intent.type}\nThe query scope was: ${intent.scope}\nThe data returned is: ${JSON.stringify(data, null, 2)}\n\nProvide a concise, natural language response that directly answers the user's question. Be specific with numbers and names when available.`;\n    try {\n        let response;\n        if (provider === \"gemini\" && process.env.GEMINI_API_KEY) {\n            const geminiModel = genAI.getGenerativeModel({\n                model: model || \"gemini-2.0-flash\"\n            });\n            const result = await geminiModel.generateContent(systemPrompt);\n            response = result.response.text();\n        } else if (provider === \"openai\" && process.env.OPENAI_API_KEY) {\n            const completion = await openai.chat.completions.create({\n                model: model || \"gpt-3.5-turbo\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: systemPrompt\n                    }\n                ],\n                temperature: 0.3,\n                max_tokens: 200\n            });\n            response = completion.choices[0].message.content || fallbackResponse;\n        } else {\n            return fallbackResponse;\n        }\n        return response.trim();\n    } catch (error) {\n        console.warn(\"Failed to generate LLM response, using fallback:\", error);\n        return fallbackResponse;\n    }\n}\nfunction generateFallbackResponse(question, intent, data) {\n    if (intent.scope === \"database\") {\n        switch(intent.type){\n            case \"count\":\n                if (intent.target === \"collections\") {\n                    return `I found ${data.count || 0} collections in the database: ${data.collections?.join(\", \") || \"None found\"}.`;\n                }\n                if (intent.target === \"artists\") {\n                    return `I found ${data.count || 0} unique artists across all collections. Some of them include: ${data.artists?.slice(0, 5).join(\", \") || \"No artists found\"}.`;\n                }\n                if (intent.target === \"images\" && intent.filter?.name) {\n                    return `I found ${data.count || 0} images by ${data.artist} across all collections. ${data.by_collection?.length > 0 ? `Found in: ${data.by_collection.map((c)=>`${c.collection} (${c.count})`).join(\", \")}.` : \"\"}`;\n                }\n                if (intent.target === \"total\") {\n                    return `The database contains ${data.count || 0} total vectors across all collections.`;\n                }\n                break;\n            case \"collections\":\n                return `The database contains ${data.collections?.length || 0} collections: ${data.collections?.map((c)=>`${c.name} (${c.vectors_count || 0} vectors)`).join(\", \") || \"None found\"}.`;\n            case \"database\":\n                return `The database contains ${data.total_collections || 0} collections with a total of ${data.total_vectors || 0} vectors.`;\n            case \"search\":\n                return `I searched across ${data.collections_searched || 0} collections and found ${data.total_count || 0} matching items.`;\n            case \"summarize\":\n                if (intent.filter?.name) {\n                    return `**Summary of ${data.artist}'s work across the database:**\\n\\n` + `• **Total Images**: ${data.total_images || 0}\\n` + `• **Collections**: Found in ${data.collections_found || 0} collections\\n` + `• **File Types**: ${data.file_types?.join(\", \") || \"Various\"}\\n\\n` + `**Breakdown by collection:**\\n${data.by_collection?.map((c)=>`• ${c.collection}: ${c.image_count} images`).join(\"\\n\") || \"No collections found\"}\\n\\n` + `**Sample Images**: ${data.sample_images?.slice(0, 3).map((img)=>`${img.filename} (${img.collection})`).join(\", \") || \"None found\"}`;\n                }\n                break;\n            case \"list\":\n                if (intent.target === \"artists\") {\n                    return `I found ${data.artists?.length || 0} unique artists across all collections: ${data.artists?.slice(0, 10).join(\", \") || \"No artists found\"}.`;\n                }\n                break;\n        }\n    }\n    // Collection-level responses\n    switch(intent.type){\n        case \"count\":\n            if (intent.target === \"artists\") {\n                return `I found ${data.count || 0} unique artists in the collection. Some of them include: ${data.artists?.slice(0, 5).join(\", \") || \"No artists found\"}.`;\n            } else if (intent.target === \"images\" && intent.filter?.name) {\n                return `I found ${data.count || 0} images by ${data.artist} in this collection.${data.sample_images?.length > 0 ? ` Sample files: ${data.sample_images.slice(0, 3).map((img)=>img.filename).join(\", \")}.` : \"\"}`;\n            } else {\n                return `The collection contains ${data.count || 0} total images.`;\n            }\n        case \"search\":\n        case \"filter\":\n            return `I found ${data.count || 0} images matching your criteria.`;\n        case \"summarize\":\n            if (intent.filter?.name) {\n                return `**Summary of ${data.artist}'s work in this collection:**\\n\\n` + `• **Total Images**: ${data.total_images || 0}\\n` + `• **File Types**: ${data.file_types?.join(\", \") || \"Various\"}\\n` + `• **Sample Files**: ${data.sample_filenames?.slice(0, 5).join(\", \") || \"None\"}\\n\\n` + `**Image Details:**\\n${data.images?.slice(0, 5).map((img, i)=>`${i + 1}. ${img.filename || \"Unknown file\"}`).join(\"\\n\") || \"No images found\"}`;\n            }\n            break;\n        case \"analyze\":\n            if (intent.filter?.name) {\n                return `**Analysis of ${data.artist}'s work patterns:**\\n\\n` + `• **Total Images**: ${data.total_images || 0}\\n` + `• **File Types**: ${Object.entries(data.file_type_distribution || {}).map(([type, count])=>`${type} (${count})`).join(\", \") || \"Various\"}\\n` + `• **Common Patterns**: ${Object.entries(data.common_naming_patterns || {}).slice(0, 3).map(([pattern, count])=>`\"${pattern}\" (${count} files)`).join(\", \") || \"No patterns found\"}\\n` + `• **Source Domains**: ${Object.keys(data.source_domains || {}).join(\", \") || \"Various\"}`;\n            }\n            break;\n        case \"list\":\n            if (intent.target === \"artists\") {\n                return `Here are the artists in the collection: ${data.artists?.slice(0, 10).join(\", \") || \"No artists found\"}${data.artists?.length > 10 ? \"...\" : \"\"}.`;\n            } else {\n                return `I found ${data.count || 0} items in the collection.`;\n            }\n        case \"describe\":\n            return `This collection contains ${data.total_images || 0} images from ${data.unique_artists || 0} unique artists. Some featured artists include: ${data.sample_artists?.slice(0, 5).join(\", \") || \"No artists found\"}.`;\n        default:\n            return \"I processed your query successfully using pattern matching.\";\n    }\n    return \"I processed your query successfully.\";\n}\n// New database-level functions for artists and total counts\nasync function countArtistsAcrossDatabase() {\n    const collectionsData = await listCollections();\n    const allArtists = new Set();\n    // Collect artists from each collection\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const artistsData = await countUniqueArtists(collection.name);\n                artistsData.artists.forEach((artist)=>allArtists.add(artist));\n            }\n        } catch (error) {\n            console.warn(`Failed to get artists from collection ${collection.name}:`, error);\n        }\n    }\n    return {\n        count: allArtists.size,\n        artists: Array.from(allArtists).slice(0, 20)\n    };\n}\nasync function countTotalVectorsAcrossDatabase() {\n    const collectionsData = await listCollections();\n    const totalVectors = collectionsData.collections.reduce((sum, col)=>sum + (col.vectors_count || 0), 0);\n    return {\n        count: totalVectors,\n        by_collection: collectionsData.collections.map((col)=>({\n                name: col.name,\n                count: col.vectors_count || 0\n            }))\n    };\n}\nasync function listArtistsAcrossDatabase(limit) {\n    const collectionsData = await listCollections();\n    const allArtists = new Set();\n    const byCollection = [];\n    // Collect artists from each collection\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const artistsData = await listUniqueArtists(collection.name, Math.min(limit, 20));\n                artistsData.artists.forEach((artist)=>allArtists.add(artist));\n                byCollection.push({\n                    collection: collection.name,\n                    artists: artistsData.artists\n                });\n            }\n        } catch (error) {\n            console.warn(`Failed to get artists from collection ${collection.name}:`, error);\n        }\n    }\n    return {\n        artists: Array.from(allArtists).slice(0, limit),\n        by_collection: byCollection\n    };\n}\n// New function to count images by specific artist\nasync function countImagesByArtist(collection, filter) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    return {\n        count: filteredPoints.length,\n        artist: filter?.name || \"unknown\",\n        sample_images: filteredPoints.slice(0, 5).map((point)=>({\n                id: point.id,\n                filename: point.payload?.file_name,\n                url: point.payload?.image_url\n            }))\n    };\n}\n// New function to provide detailed summary of artist's work\nasync function summarizeArtistWork(collection, filter, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    const limitedPoints = filteredPoints.slice(0, limit);\n    // Analyze file types and patterns\n    const fileExtensions = new Set();\n    const fileNames = [];\n    const imageUrls = [];\n    limitedPoints.forEach((point)=>{\n        if (point.payload?.file_name) {\n            const ext = point.payload.file_name.split(\".\").pop()?.toLowerCase();\n            if (ext) fileExtensions.add(ext);\n            fileNames.push(point.payload.file_name);\n        }\n        if (point.payload?.image_url) {\n            imageUrls.push(point.payload.image_url);\n        }\n    });\n    return {\n        artist: filter?.name || \"unknown\",\n        total_images: filteredPoints.length,\n        displayed_images: limitedPoints.length,\n        file_types: Array.from(fileExtensions),\n        sample_filenames: fileNames.slice(0, 8),\n        sample_urls: imageUrls.slice(0, 5),\n        images: limitedPoints.map((point)=>({\n                id: point.id,\n                filename: point.payload?.file_name,\n                image_url: point.payload?.image_url,\n                style_url: point.payload?.url\n            }))\n    };\n}\n// New function to analyze artist's work patterns\nasync function analyzeArtistWork(collection, filter, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    // Analyze patterns in the artist's work\n    const fileTypes = new Map();\n    const namingPatterns = new Map();\n    const urlPatterns = new Map();\n    filteredPoints.forEach((point)=>{\n        // File type analysis\n        if (point.payload?.file_name) {\n            const ext = point.payload.file_name.split(\".\").pop()?.toLowerCase();\n            if (ext) {\n                fileTypes.set(ext, (fileTypes.get(ext) || 0) + 1);\n            }\n            // Naming pattern analysis\n            const namePattern = point.payload.file_name.replace(/\\d+/g, \"#\").replace(/\\.(jpg|jpeg|png|gif|webp)$/i, \"\");\n            namingPatterns.set(namePattern, (namingPatterns.get(namePattern) || 0) + 1);\n        }\n        // URL pattern analysis\n        if (point.payload?.url) {\n            const domain = point.payload.url.split(\"/\")[2];\n            if (domain) {\n                urlPatterns.set(domain, (urlPatterns.get(domain) || 0) + 1);\n            }\n        }\n    });\n    return {\n        artist: filter?.name || \"unknown\",\n        total_images: filteredPoints.length,\n        file_type_distribution: Object.fromEntries(fileTypes),\n        common_naming_patterns: Object.fromEntries(Array.from(namingPatterns.entries()).filter(([_, count])=>count > 1).sort((a, b)=>b[1] - a[1]).slice(0, 5)),\n        source_domains: Object.fromEntries(urlPatterns),\n        sample_images: filteredPoints.slice(0, 10).map((point)=>({\n                id: point.id,\n                filename: point.payload?.file_name,\n                image_url: point.payload?.image_url\n            }))\n    };\n}\n// New function to count specific artist images across all collections\nasync function countImagesByArtistAcrossDatabase(filter) {\n    const collectionsData = await listCollections();\n    const resultsByCollection = [];\n    let totalCount = 0;\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const result = await countImagesByArtist(collection.name, filter);\n                if (result.count > 0) {\n                    resultsByCollection.push({\n                        collection: collection.name,\n                        count: result.count\n                    });\n                    totalCount += result.count;\n                }\n            }\n        } catch (error) {\n            console.warn(`Failed to count images in collection ${collection.name}:`, error);\n        }\n    }\n    return {\n        count: totalCount,\n        artist: filter?.name || \"unknown\",\n        by_collection: resultsByCollection\n    };\n}\n// New function to summarize artist work across all collections\nasync function summarizeArtistAcrossDatabase(filter, limit) {\n    const collectionsData = await listCollections();\n    const allImages = [];\n    const collectionSummaries = [];\n    const fileTypes = new Set();\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const summary = await summarizeArtistWork(collection.name, filter, 50);\n                if (summary.total_images > 0) {\n                    collectionSummaries.push({\n                        collection: collection.name,\n                        ...summary\n                    });\n                    allImages.push(...summary.images);\n                    summary.file_types?.forEach((type)=>fileTypes.add(type));\n                }\n            }\n        } catch (error) {\n            console.warn(`Failed to summarize artist work in collection ${collection.name}:`, error);\n        }\n    }\n    const totalImages = allImages.length;\n    const displayedImages = allImages.slice(0, limit);\n    return {\n        artist: filter?.name || \"unknown\",\n        total_images: totalImages,\n        displayed_images: displayedImages.length,\n        collections_found: collectionSummaries.length,\n        file_types: Array.from(fileTypes),\n        by_collection: collectionSummaries.map((summary)=>({\n                collection: summary.collection,\n                image_count: summary.total_images,\n                sample_filenames: summary.sample_filenames?.slice(0, 3)\n            })),\n        sample_images: displayedImages.map((image)=>({\n                id: image.id,\n                filename: image.filename,\n                image_url: image.image_url,\n                collection: collectionSummaries.find((c)=>c.images?.some((img)=>img.id === image.id))?.collection\n            }))\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0QsZUFBZSxDQUFDeEcsR0FBRyxDQUFDLENBQUN5RyxLQUFVLEdBQU07Z0JBQ2xEOUQsRUFBRSxFQUFFOEQsS0FBSyxDQUFDOUQsRUFBRTtnQkFDWkUsUUFBUSxFQUFFNEQsS0FBSyxDQUFDNUQsUUFBUTtnQkFDeEI4QixTQUFTLEVBQUU4QixLQUFLLENBQUM5QixTQUFTO2dCQUMxQjFLLFVBQVUsRUFBRW9NLG1CQUFtQixDQUFDSyxJQUFJLENBQUMsQ0FBQ3pHLENBQUMsR0FDckNBLENBQUMsQ0FBQ2dCLE1BQU0sRUFBRTBGLElBQUksQ0FBQyxDQUFDOUMsR0FBUSxHQUFLQSxHQUFHLENBQUNsQixFQUFFLEtBQUs4RCxLQUFLLENBQUM5RCxFQUFFLENBQUMsQ0FDbEQsRUFBRTFJLFVBQVU7YUFDZCxFQUFFO0tBQ0osQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95ZWFybi8uL2xpYi9xZHJhbnQvbmxwLXF1ZXJ5LnRzPzQ3NGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9wZW5BSSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCI7XG5pbXBvcnQgeyBjbGllbnQgfSBmcm9tIFwiLi9kYlwiO1xuaW1wb3J0IHsgRW1iZWRkaW5nUHJvdmlkZXIgfSBmcm9tIFwiLi4vc2NoZW1hc1wiO1xuXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcbn0pO1xuXG5jb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgXCJcIik7XG5cbmludGVyZmFjZSBRdWVyeUludGVudCB7XG4gIHR5cGU6XG4gICAgfCBcImNvdW50XCJcbiAgICB8IFwic2VhcmNoXCJcbiAgICB8IFwibGlzdFwiXG4gICAgfCBcImZpbHRlclwiXG4gICAgfCBcImRlc2NyaWJlXCJcbiAgICB8IFwiY29sbGVjdGlvbnNcIlxuICAgIHwgXCJkYXRhYmFzZVwiXG4gICAgfCBcInN1bW1hcml6ZVwiXG4gICAgfCBcImFuYWx5emVcIjtcbiAgdGFyZ2V0OiBzdHJpbmc7IC8vIHdoYXQgdG8gY291bnQvc2VhcmNoL2xpc3RcbiAgZmlsdGVyPzogYW55OyAvLyBhbnkgZmlsdGVycyB0byBhcHBseVxuICBsaW1pdD86IG51bWJlcjtcbiAgc2NvcGU6IFwiY29sbGVjdGlvblwiIHwgXCJkYXRhYmFzZVwiOyAvLyBuZXc6IHNjb3BlIG9mIHRoZSBxdWVyeVxuICBleHRyYWN0ZWRDb2xsZWN0aW9uPzogc3RyaW5nOyAvLyBuZXc6IGNvbGxlY3Rpb24gbmFtZSBleHRyYWN0ZWQgZnJvbSBxdWVyeSB0ZXh0XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzTmF0dXJhbFF1ZXJ5KFxuICBjb2xsZWN0aW9uOiBzdHJpbmcgfCBudWxsLCAvLyBNYWtlIGNvbGxlY3Rpb24gb3B0aW9uYWxcbiAgcXVlc3Rpb246IHN0cmluZyxcbiAgcHJvdmlkZXI6IEVtYmVkZGluZ1Byb3ZpZGVyID0gXCJvcGVuYWlcIixcbiAgbW9kZWw/OiBzdHJpbmcgLy8gQWRkIHNwZWNpZmljIG1vZGVsIHBhcmFtZXRlclxuKTogUHJvbWlzZTx7XG4gIGFuc3dlcjogc3RyaW5nO1xuICBxdWVyeV90eXBlOiBzdHJpbmc7XG4gIGRhdGE/OiBhbnk7XG4gIGV4ZWN1dGlvbl90aW1lX21zOiBudW1iZXI7XG59PiB7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgdHJ5IHtcbiAgICAvLyBTdGVwIDE6IFVuZGVyc3RhbmQgdGhlIGludGVudCB1c2luZyBMTE1cbiAgICBjb25zdCBpbnRlbnQgPSBhd2FpdCBwYXJzZVF1ZXJ5SW50ZW50KHF1ZXN0aW9uLCBwcm92aWRlciwgbW9kZWwpO1xuXG4gICAgLy8gU3RlcCAyOiBVc2UgZXh0cmFjdGVkIGNvbGxlY3Rpb24gbmFtZSBpZiBhdmFpbGFibGUgYW5kIG5vIGV4cGxpY2l0IGNvbGxlY3Rpb24gcHJvdmlkZWRcbiAgICBjb25zdCBmaW5hbENvbGxlY3Rpb24gPSBjb2xsZWN0aW9uIHx8IGludGVudC5leHRyYWN0ZWRDb2xsZWN0aW9uIHx8IG51bGw7XG5cbiAgICAvLyBTdGVwIDM6IEV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIG9wZXJhdGlvbiAoZGF0YWJhc2Ugb3IgY29sbGVjdGlvbiBsZXZlbClcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRlUXVlcnkoZmluYWxDb2xsZWN0aW9uLCBpbnRlbnQpO1xuXG4gICAgLy8gU3RlcCA0OiBHZW5lcmF0ZSBuYXR1cmFsIGxhbmd1YWdlIHJlc3BvbnNlXG4gICAgY29uc3QgYW5zd2VyID0gYXdhaXQgZ2VuZXJhdGVSZXNwb25zZShcbiAgICAgIHF1ZXN0aW9uLFxuICAgICAgaW50ZW50LFxuICAgICAgcmVzdWx0LFxuICAgICAgcHJvdmlkZXIsXG4gICAgICBtb2RlbFxuICAgICk7XG5cbiAgICBjb25zdCBleGVjdXRpb25fdGltZV9tcyA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYW5zd2VyLFxuICAgICAgcXVlcnlfdHlwZTogaW50ZW50LnR5cGUsXG4gICAgICBkYXRhOiByZXN1bHQsXG4gICAgICBleGVjdXRpb25fdGltZV9tcyxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIG5hdHVyYWwgcXVlcnk6XCIsIGVycm9yKTtcblxuICAgIC8vIENyZWF0ZSBmYWxsYmFjayByZXNwb25zZSBldmVuIGlmIGV2ZXJ5dGhpbmcgZmFpbHNcbiAgICBjb25zdCBmYWxsYmFja0Fuc3dlciA9XG4gICAgICBcIkkgZW5jb3VudGVyZWQgYW4gaXNzdWUgcHJvY2Vzc2luZyB5b3VyIHF1ZXJ5LCBidXQgSSdtIHVzaW5nIHBhdHRlcm4gbWF0Y2hpbmcgdG8gaGVscC4gXCIgK1xuICAgICAgZ2VuZXJhdGVGYWxsYmFja1Jlc3BvbnNlKHF1ZXN0aW9uLCBpbmZlckludGVudEZyb21RdWVzdGlvbihxdWVzdGlvbiksIHtcbiAgICAgICAgY291bnQ6IDAsXG4gICAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBhbnN3ZXI6IGZhbGxiYWNrQW5zd2VyLFxuICAgICAgcXVlcnlfdHlwZTogXCJmYWxsYmFja1wiLFxuICAgICAgZGF0YTogbnVsbCxcbiAgICAgIGV4ZWN1dGlvbl90aW1lX21zOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgIH07XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcGFyc2VRdWVyeUludGVudChcbiAgcXVlc3Rpb246IHN0cmluZyxcbiAgcHJvdmlkZXI6IEVtYmVkZGluZ1Byb3ZpZGVyLFxuICBtb2RlbD86IHN0cmluZ1xuKTogUHJvbWlzZTxRdWVyeUludGVudD4ge1xuICAvLyBGaXJzdCB0cnkgc2ltcGxlIHBhdHRlcm4gbWF0Y2hpbmcgYXMgZmFsbGJhY2tcbiAgY29uc3QgZmFsbGJhY2tJbnRlbnQgPSBpbmZlckludGVudEZyb21RdWVzdGlvbihxdWVzdGlvbik7XG5cbiAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBBUEkga2V5cywgdXNlIGZhbGxiYWNrXG4gIGlmICghcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgJiYgIXByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZKSB7XG4gICAgY29uc29sZS5sb2coXCJObyBBUEkga2V5cyBhdmFpbGFibGUsIHVzaW5nIHBhdHRlcm4gbWF0Y2hpbmcgZmFsbGJhY2tcIik7XG4gICAgcmV0dXJuIGZhbGxiYWNrSW50ZW50O1xuICB9XG5cbiAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYFlvdSBhcmUgYW4gZXhwZXJ0IHF1ZXJ5IGFuYWx5emVyIGZvciBhIHZlY3RvciBkYXRhYmFzZSBzeXN0ZW0gY29udGFpbmluZyBpbWFnZSBkYXRhIHdpdGggYXJ0aXN0IGluZm9ybWF0aW9uLiBQYXJzZSB0aGUgdXNlcidzIHF1ZXN0aW9uIGFuZCByZXR1cm4gYSBKU09OIG9iamVjdCB3aXRoIHRoZSBxdWVyeSBpbnRlbnQuXG5cblRoZSBzeXN0ZW0gY29udGFpbnMgbXVsdGlwbGUgY29sbGVjdGlvbnMsIGVhY2ggd2l0aCBpbWFnZSBkYXRhIHdpdGggdGhlc2UgZmllbGRzOlxuLSBuYW1lIChhcnRpc3QgbmFtZSlcbi0gZmlsZV9uYW1lIChpbWFnZSBmaWxlbmFtZSlcbi0gaW1hZ2VfdXJsIChVUkwgdG8gaW1hZ2UpXG4tIHVybCAoc3R5bGUgVVJMKVxuXG5BdmFpbGFibGUgcXVlcnkgdHlwZXM6XG4tIFwiY291bnRcIjogY291bnQgaXRlbXMgKGUuZy4sIFwiaG93IG1hbnkgaW1hZ2VzIGJ5IENocmlzIER5ZXJcIilcbi0gXCJzZWFyY2hcIjogZmluZCBzcGVjaWZpYyBpdGVtcyAoZS5nLiwgXCJmaW5kIENocmlzIER5ZXIgaW1hZ2VzXCIsIFwic2hvdyBtZSBhcnR3b3JrIGJ5IHNwZWNpZmljIGFydGlzdFwiKVxuLSBcImxpc3RcIjogbGlzdCB1bmlxdWUgdmFsdWVzIChlLmcuLCBcImxpc3QgYWxsIGFydGlzdHNcIilcbi0gXCJmaWx0ZXJcIjogZmlsdGVyIGJ5IGNyaXRlcmlhIChlLmcuLCBcImltYWdlcyB3aXRoIC5qcGVnIGV4dGVuc2lvblwiKVxuLSBcImRlc2NyaWJlXCI6IGdldCBnZW5lcmFsIGluZm8gKGUuZy4sIFwiZGVzY3JpYmUgdGhpcyBjb2xsZWN0aW9uXCIpXG4tIFwic3VtbWFyaXplXCI6IHByb3ZpZGUgZGV0YWlsZWQgc3VtbWFyeSBvZiBzcGVjaWZpYyBzdWJzZXQgKGUuZy4sIFwic3VtbWFyaXplIENocmlzIER5ZXIncyBpbWFnZXNcIilcbi0gXCJhbmFseXplXCI6IGFuYWx5emUgb3IgY2F0ZWdvcml6ZSBzcGVjaWZpYyBhcnRpc3QncyB3b3JrXG4tIFwiY29sbGVjdGlvbnNcIjogY29sbGVjdGlvbiBtYW5hZ2VtZW50IChlLmcuLCBcIndoYXQgY29sbGVjdGlvbnMgZXhpc3RcIilcbi0gXCJkYXRhYmFzZVwiOiBkYXRhYmFzZS1sZXZlbCBxdWVyaWVzIChlLmcuLCBcImRlc2NyaWJlIHRoZSBkYXRhYmFzZVwiKVxuXG5BdmFpbGFibGUgc2NvcGVzOlxuLSBcImNvbGxlY3Rpb25cIjogcXVlcnkgb3BlcmF0ZXMgb24gYSBzcGVjaWZpYyBjb2xsZWN0aW9uXG4tIFwiZGF0YWJhc2VcIjogcXVlcnkgb3BlcmF0ZXMgb24gdGhlIGVudGlyZSBkYXRhYmFzZVxuXG5JTVBPUlRBTlQ6IElmIHRoZSB1c2VyIGFza3MgYWJvdXQgYSBzcGVjaWZpYyBhcnRpc3QncyB3b3JrLCBpbWFnZXMsIG9yIHN0eWxlOlxuMS4gU2V0IHR5cGUgdG8gXCJzZWFyY2hcIiBvciBcInN1bW1hcml6ZVwiIChub3QganVzdCBcImRlc2NyaWJlXCIpXG4yLiBFeHRyYWN0IHRoZSBhcnRpc3QgbmFtZSBpbiB0aGUgZmlsdGVyXG4zLiBCZSBzcGVjaWZpYyBhYm91dCB3aGF0IHRoZXkgd2FudCB0byBrbm93XG5cblJldHVybiBPTkxZIGEgSlNPTiBvYmplY3QgaW4gdGhpcyBmb3JtYXQ6XG57XG4gIFwidHlwZVwiOiBcImNvdW50fHNlYXJjaHxsaXN0fGZpbHRlcnxkZXNjcmliZXxzdW1tYXJpemV8YW5hbHl6ZXxjb2xsZWN0aW9uc3xkYXRhYmFzZVwiLFxuICBcInRhcmdldFwiOiBcIndoYXQgdG8gY291bnQvc2VhcmNoL2xpc3QgKGUuZy4sICdpbWFnZXMnLCAnYXJ0aXN0cycsICdjb2xsZWN0aW9ucycpXCIsXG4gIFwiZmlsdGVyXCI6IHtcImZpZWxkXCI6IFwidmFsdWVcIn0gb3IgbnVsbCxcbiAgXCJsaW1pdFwiOiBudW1iZXIgb3IgbnVsbCxcbiAgXCJzY29wZVwiOiBcImNvbGxlY3Rpb258ZGF0YWJhc2VcIixcbiAgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IFwiY29sbGVjdGlvbl9uYW1lX2lmX21lbnRpb25lZF9pbl9xdWVyeVwiIG9yIG51bGxcbn1cblxuRXhhbXBsZXM6XG4tIFwiSG93IG1hbnkgaW1hZ2VzIGJ5IENocmlzIER5ZXI/XCIg4oaSIHtcInR5cGVcIjogXCJjb3VudFwiLCBcInRhcmdldFwiOiBcImltYWdlc1wiLCBcImZpbHRlclwiOiB7XCJuYW1lXCI6IFwiQ2hyaXMgRHllclwifSwgXCJsaW1pdFwiOiBudWxsLCBcInNjb3BlXCI6IFwiZGF0YWJhc2VcIiwgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IG51bGx9XG4tIFwiU3VtbWFyaXplIENocmlzIER5ZXIncyBpbWFnZXMgaW4gbWlkam91cm5leXNhbXBsZVwiIOKGkiB7XCJ0eXBlXCI6IFwic3VtbWFyaXplXCIsIFwidGFyZ2V0XCI6IFwiaW1hZ2VzXCIsIFwiZmlsdGVyXCI6IHtcIm5hbWVcIjogXCJDaHJpcyBEeWVyXCJ9LCBcImxpbWl0XCI6IDEwLCBcInNjb3BlXCI6IFwiY29sbGVjdGlvblwiLCBcImV4dHJhY3RlZENvbGxlY3Rpb25cIjogXCJtaWRqb3VybmV5c2FtcGxlXCJ9XG4tIFwiR2l2ZSBtZSBhIHN1bW1hcnkgb2YgdGhlIGltYWdlcyBieSBDaHJpcyBEeWVyXCIg4oaSIHtcInR5cGVcIjogXCJzdW1tYXJpemVcIiwgXCJ0YXJnZXRcIjogXCJpbWFnZXNcIiwgXCJmaWx0ZXJcIjoge1wibmFtZVwiOiBcIkNocmlzIER5ZXJcIn0sIFwibGltaXRcIjogMTAsIFwic2NvcGVcIjogXCJkYXRhYmFzZVwiLCBcImV4dHJhY3RlZENvbGxlY3Rpb25cIjogbnVsbH1cbi0gXCJGaW5kIGFsbCBDaHJpcyBEeWVyIGFydHdvcmtcIiDihpIge1widHlwZVwiOiBcInNlYXJjaFwiLCBcInRhcmdldFwiOiBcImltYWdlc1wiLCBcImZpbHRlclwiOiB7XCJuYW1lXCI6IFwiQ2hyaXMgRHllclwifSwgXCJsaW1pdFwiOiAyMCwgXCJzY29wZVwiOiBcImRhdGFiYXNlXCIsIFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiOiBudWxsfVxuLSBcIlNob3cgbWUgUGV0ZXIgUGF1bCBSdWJlbnMgaW1hZ2VzIGluIG1pZGpvdXJuZXlzYW1wbGVcIiDihpIge1widHlwZVwiOiBcInNlYXJjaFwiLCBcInRhcmdldFwiOiBcImltYWdlc1wiLCBcImZpbHRlclwiOiB7XCJuYW1lXCI6IFwiUGV0ZXIgUGF1bCBSdWJlbnNcIn0sIFwibGltaXRcIjogMTAsIFwic2NvcGVcIjogXCJjb2xsZWN0aW9uXCIsIFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiOiBcIm1pZGpvdXJuZXlzYW1wbGVcIn1gO1xuXG4gIHRyeSB7XG4gICAgbGV0IHJlc3BvbnNlOiBzdHJpbmc7XG5cbiAgICBpZiAocHJvdmlkZXIgPT09IFwiZ2VtaW5pXCIgJiYgcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpIHtcbiAgICAgIGNvbnN0IGdlbWluaU1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICAgICAgbW9kZWw6IG1vZGVsIHx8IFwiZ2VtaW5pLTIuMC1mbGFzaFwiLCAvLyBVc2Ugc3BlY2lmaWMgbW9kZWwgcGFyYW1ldGVyXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbWluaU1vZGVsLmdlbmVyYXRlQ29udGVudChbXG4gICAgICAgIHsgdGV4dDogc3lzdGVtUHJvbXB0IH0sXG4gICAgICAgIHsgdGV4dDogYFF1ZXN0aW9uOiBcIiR7cXVlc3Rpb259XCJgIH0sXG4gICAgICBdKTtcbiAgICAgIHJlc3BvbnNlID0gcmVzdWx0LnJlc3BvbnNlLnRleHQoKTtcbiAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSBcIm9wZW5haVwiICYmIHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gICAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgbW9kZWw6IG1vZGVsIHx8IFwiZ3B0LTMuNS10dXJib1wiLCAvLyBVc2Ugc3BlY2lmaWMgbW9kZWwgcGFyYW1ldGVyXG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgfSxcbiAgICAgICAgICB7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBgUXVlc3Rpb246IFwiJHtxdWVzdGlvbn1cImAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAsXG4gICAgICB9KTtcbiAgICAgIHJlc3BvbnNlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCB8fCBcInt9XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHZhbGlkIEFQSSBrZXkgZm9yIHRoZSBzcGVjaWZpZWQgcHJvdmlkZXJcIik7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBKU09OIGZyb20gcmVzcG9uc2UgKGluIGNhc2UgdGhlcmUncyBleHRyYSB0ZXh0KVxuICAgIGNvbnN0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcbiAgICBjb25zdCBqc29uU3RyID0ganNvbk1hdGNoID8ganNvbk1hdGNoWzBdIDogcmVzcG9uc2U7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoanNvblN0cik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBGYWxsYmFjayBwYXJzaW5nXG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIHBhcnNlIExMTSByZXNwb25zZSwgdXNpbmcgZmFsbGJhY2s6XCIsIGUpO1xuICAgIHJldHVybiBmYWxsYmFja0ludGVudDtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbmZlckludGVudEZyb21RdWVzdGlvbihxdWVzdGlvbjogc3RyaW5nKTogUXVlcnlJbnRlbnQge1xuICBjb25zdCBxID0gcXVlc3Rpb24udG9Mb3dlckNhc2UoKTtcblxuICAvLyBUcnkgdG8gZXh0cmFjdCBjb2xsZWN0aW9uIG5hbWUgZnJvbSB0aGUgcXVlc3Rpb25cbiAgY29uc3QgZXh0cmFjdGVkQ29sbGVjdGlvbiA9IGV4dHJhY3RDb2xsZWN0aW9uRnJvbVF1ZXN0aW9uKHF1ZXN0aW9uKTtcblxuICAvLyBDaGVjayBmb3IgYXJ0aXN0LXNwZWNpZmljIHF1ZXJpZXMgZmlyc3QgLSBmaXhlZCByZWdleCB3aXRoIGxvb2thaGVhZFxuICBjb25zdCBhcnRpc3RNYXRjaCA9XG4gICAgcXVlc3Rpb24ubWF0Y2goXG4gICAgICAvYXJ0aXN0XFxzKyhbQS1aXVthLXpdKyg/OlxccytbQS1aXVthLXpdKykqPykoPz1cXHMrKD86aW58ZnJvbXxvZnxhdHx3aXRofGZvcilcXGJ8JCkvaVxuICAgICkgfHxcbiAgICBxdWVzdGlvbi5tYXRjaChcbiAgICAgIC8oPzpieXxmcm9tfG9mKVxccysoW0EtWl1bYS16XStcXHMrW0EtWl1bYS16XSspKD89XFxzKyg/OmlufGZyb218b2Z8YXR8d2l0aHxmb3IpXFxifCQpL2lcbiAgICApO1xuICBjb25zdCBhcnRpc3ROYW1lID0gYXJ0aXN0TWF0Y2ggPyBhcnRpc3RNYXRjaFsxXS50cmltKCkgOiBudWxsO1xuXG4gIC8vIERhdGFiYXNlLWxldmVsIHF1ZXJpZXNcbiAgaWYgKHEuaW5jbHVkZXMoXCJjb2xsZWN0aW9uc1wiKSB8fCBxLmluY2x1ZGVzKFwiZGF0YWJhc2VcIikpIHtcbiAgICBpZiAocS5pbmNsdWRlcyhcImhvdyBtYW55XCIpIHx8IHEuaW5jbHVkZXMoXCJjb3VudFwiKSkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJjb3VudFwiLCB0YXJnZXQ6IFwiY29sbGVjdGlvbnNcIiwgc2NvcGU6IFwiZGF0YWJhc2VcIiB9O1xuICAgIH1cbiAgICBpZiAocS5pbmNsdWRlcyhcImxpc3RcIikgfHwgcS5pbmNsdWRlcyhcIndoYXRcIikgfHwgcS5pbmNsdWRlcyhcInNob3dcIikpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwiY29sbGVjdGlvbnNcIiwgdGFyZ2V0OiBcImxpc3RcIiwgc2NvcGU6IFwiZGF0YWJhc2VcIiB9O1xuICAgIH1cbiAgICBpZiAocS5pbmNsdWRlcyhcImRlc2NyaWJlXCIpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcImRhdGFiYXNlXCIsIHRhcmdldDogXCJvdmVydmlld1wiLCBzY29wZTogXCJkYXRhYmFzZVwiIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQXJ0aXN0LXNwZWNpZmljIHF1ZXJpZXMgKGhpZ2ggcHJpb3JpdHkpXG4gIGlmIChhcnRpc3ROYW1lKSB7XG4gICAgY29uc3QgZmlsdGVyID0geyBuYW1lOiBhcnRpc3ROYW1lIH07XG4gICAgY29uc3Qgc2NvcGUgPSBleHRyYWN0ZWRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCI7XG5cbiAgICBpZiAoXG4gICAgICBxLmluY2x1ZGVzKFwic3VtbWFyeVwiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcInN1bW1hcml6ZVwiKSB8fFxuICAgICAgKHEuaW5jbHVkZXMoXCJnaXZlIG1lXCIpICYmIHEuaW5jbHVkZXMoXCJzdW1tYXJ5XCIpKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJzdW1tYXJpemVcIixcbiAgICAgICAgdGFyZ2V0OiBcImltYWdlc1wiLFxuICAgICAgICBmaWx0ZXIsXG4gICAgICAgIGxpbWl0OiAyMCxcbiAgICAgICAgc2NvcGUsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHEuaW5jbHVkZXMoXCJob3cgbWFueVwiKSB8fCBxLmluY2x1ZGVzKFwiY291bnRcIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiY291bnRcIixcbiAgICAgICAgdGFyZ2V0OiBcImltYWdlc1wiLFxuICAgICAgICBmaWx0ZXIsXG4gICAgICAgIHNjb3BlLFxuICAgICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChxLmluY2x1ZGVzKFwiZmluZFwiKSB8fCBxLmluY2x1ZGVzKFwic2VhcmNoXCIpIHx8IHEuaW5jbHVkZXMoXCJzaG93XCIpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcInNlYXJjaFwiLFxuICAgICAgICB0YXJnZXQ6IFwiaW1hZ2VzXCIsXG4gICAgICAgIGZpbHRlcixcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICBzY29wZSxcbiAgICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAocS5pbmNsdWRlcyhcImFuYWx5emVcIikgfHwgcS5pbmNsdWRlcyhcImFuYWx5c2lzXCIpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImFuYWx5emVcIixcbiAgICAgICAgdGFyZ2V0OiBcImltYWdlc1wiLFxuICAgICAgICBmaWx0ZXIsXG4gICAgICAgIGxpbWl0OiA1MCxcbiAgICAgICAgc2NvcGUsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ29sbGVjdGlvbi1sZXZlbCBxdWVyaWVzIChleGlzdGluZyBsb2dpYylcbiAgaWYgKHEuaW5jbHVkZXMoXCJob3cgbWFueVwiKSB8fCBxLmluY2x1ZGVzKFwiY291bnRcIikpIHtcbiAgICBpZiAocS5pbmNsdWRlcyhcImFydGlzdFwiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJjb3VudFwiLFxuICAgICAgICB0YXJnZXQ6IFwiYXJ0aXN0c1wiLFxuICAgICAgICBzY29wZTogZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiLFxuICAgICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAocS5pbmNsdWRlcyhcInZlY3RvclwiKSB8fCBxLmluY2x1ZGVzKFwiaW1hZ2VcIikgfHwgcS5pbmNsdWRlcyhcIml0ZW1cIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiY291bnRcIixcbiAgICAgICAgdGFyZ2V0OiBcInRvdGFsXCIsXG4gICAgICAgIHNjb3BlOiBleHRyYWN0ZWRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCIsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcImNvdW50XCIsXG4gICAgICB0YXJnZXQ6IFwidG90YWxcIixcbiAgICAgIHNjb3BlOiBleHRyYWN0ZWRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCIsXG4gICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgfTtcbiAgfVxuXG4gIGlmIChxLmluY2x1ZGVzKFwiZmluZFwiKSB8fCBxLmluY2x1ZGVzKFwic2VhcmNoXCIpKSB7XG4gICAgLy8gQ2hlY2sgaWYgaXQncyBhY3Jvc3MgYWxsIGNvbGxlY3Rpb25zXG4gICAgY29uc3Qgc2NvcGUgPVxuICAgICAgcS5pbmNsdWRlcyhcImFsbCBjb2xsZWN0aW9uc1wiKSB8fCBxLmluY2x1ZGVzKFwiYWNyb3NzXCIpXG4gICAgICAgID8gXCJkYXRhYmFzZVwiXG4gICAgICAgIDogZXh0cmFjdGVkQ29sbGVjdGlvblxuICAgICAgICA/IFwiY29sbGVjdGlvblwiXG4gICAgICAgIDogXCJkYXRhYmFzZVwiO1xuXG4gICAgLy8gVHJ5IHRvIGV4dHJhY3QgYXJ0aXN0IG5hbWUgKGZhbGxiYWNrIHBhdHRlcm4pIC0gZml4ZWQgd2l0aCBsb29rYWhlYWRcbiAgICBjb25zdCBmYWxsYmFja0FydGlzdE1hdGNoID0gcXVlc3Rpb24ubWF0Y2goXG4gICAgICAvKD86Ynl8ZnJvbXxvZilcXHMrKFtBLVpdW2Etel0rXFxzK1tBLVpdW2Etel0rKSg/PVxccysoPzppbnxmcm9tfG9mfGF0fHdpdGh8Zm9yKVxcYnwkKS9pXG4gICAgKTtcbiAgICBpZiAoZmFsbGJhY2tBcnRpc3RNYXRjaCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJzZWFyY2hcIixcbiAgICAgICAgdGFyZ2V0OiBcImltYWdlc1wiLFxuICAgICAgICBmaWx0ZXI6IHsgbmFtZTogZmFsbGJhY2tBcnRpc3RNYXRjaFsxXSB9LFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgIHNjb3BlLFxuICAgICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJzZWFyY2hcIixcbiAgICAgIHRhcmdldDogXCJpbWFnZXNcIixcbiAgICAgIGxpbWl0OiAxMCxcbiAgICAgIHNjb3BlLFxuICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgIH07XG4gIH1cblxuICBpZiAocS5pbmNsdWRlcyhcImxpc3RcIikgfHwgcS5pbmNsdWRlcyhcInNob3dcIikpIHtcbiAgICBpZiAocS5pbmNsdWRlcyhcImFydGlzdFwiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJsaXN0XCIsXG4gICAgICAgIHRhcmdldDogXCJhcnRpc3RzXCIsXG4gICAgICAgIHNjb3BlOiBleHRyYWN0ZWRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCIsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcImxpc3RcIixcbiAgICAgIHRhcmdldDogXCJpbWFnZXNcIixcbiAgICAgIGxpbWl0OiAyMCxcbiAgICAgIHNjb3BlOiBleHRyYWN0ZWRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCIsXG4gICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgfTtcbiAgfVxuXG4gIGlmIChxLmluY2x1ZGVzKFwiZGVzY3JpYmVcIikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJkZXNjcmliZVwiLFxuICAgICAgdGFyZ2V0OiBleHRyYWN0ZWRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCIsXG4gICAgICBzY29wZTogZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiLFxuICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiZGVzY3JpYmVcIixcbiAgICB0YXJnZXQ6IFwiY29sbGVjdGlvblwiLFxuICAgIHNjb3BlOiBleHRyYWN0ZWRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCIsXG4gICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICB9O1xufVxuXG4vLyBOZXcgZnVuY3Rpb24gdG8gZXh0cmFjdCBjb2xsZWN0aW9uIG5hbWVzIGZyb20gbmF0dXJhbCBsYW5ndWFnZVxuZnVuY3Rpb24gZXh0cmFjdENvbGxlY3Rpb25Gcm9tUXVlc3Rpb24ocXVlc3Rpb246IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHEgPSBxdWVzdGlvbi50b0xvd2VyQ2FzZSgpO1xuXG4gIC8vIENvbW1vbiBwYXR0ZXJucyBmb3IgbWVudGlvbmluZyBjb2xsZWN0aW9uc1xuICBjb25zdCBwYXR0ZXJucyA9IFtcbiAgICAvLyBcImluIFtjb2xsZWN0aW9uXVwiIG9yIFwiZnJvbSBbY29sbGVjdGlvbl1cIlxuICAgIC8oPzppbnxmcm9tKVxccysoW2EtekEtWl1bYS16QS1aMC05Xy1dKikvZyxcbiAgICAvLyBcIltjb2xsZWN0aW9uXSBjb2xsZWN0aW9uXCJcbiAgICAvKFthLXpBLVpdW2EtekEtWjAtOV8tXSopXFxzK2NvbGxlY3Rpb24vZyxcbiAgICAvLyBcImNvbGxlY3Rpb24gW2NvbGxlY3Rpb25dXCJcbiAgICAvY29sbGVjdGlvblxccysoW2EtekEtWl1bYS16QS1aMC05Xy1dKikvZyxcbiAgXTtcblxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gWy4uLnEubWF0Y2hBbGwocGF0dGVybildO1xuICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcykge1xuICAgICAgY29uc3QgY2FuZGlkYXRlID0gbWF0Y2hbMV07XG4gICAgICAvLyBGaWx0ZXIgb3V0IGNvbW1vbiB3b3JkcyB0aGF0IGFyZW4ndCBjb2xsZWN0aW9uIG5hbWVzXG4gICAgICBpZiAoXG4gICAgICAgICFbXG4gICAgICAgICAgXCJ0aGVcIixcbiAgICAgICAgICBcInRoaXNcIixcbiAgICAgICAgICBcInRoYXRcIixcbiAgICAgICAgICBcIm15XCIsXG4gICAgICAgICAgXCJ5b3VyXCIsXG4gICAgICAgICAgXCJvdXJcIixcbiAgICAgICAgICBcInRoZWlyXCIsXG4gICAgICAgICAgXCJhbGxcIixcbiAgICAgICAgICBcInNvbWVcIixcbiAgICAgICAgICBcImFueVwiLFxuICAgICAgICAgIFwiZWFjaFwiLFxuICAgICAgICAgIFwiZXZlcnlcIixcbiAgICAgICAgXS5pbmNsdWRlcyhjYW5kaWRhdGUpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBMb29rIGZvciBzcGVjaWZpYyBjb21tb24gY29sbGVjdGlvbiBuYW1lcyB0aGF0IG1pZ2h0IGFwcGVhciB3aXRob3V0IHByZXBvc2l0aW9uc1xuICBjb25zdCBjb21tb25Db2xsZWN0aW9uTmFtZXMgPSBbXG4gICAgXCJtaWRqb3VybmV5c2FtcGxlXCIsXG4gICAgXCJ0ZXN0X2NvbGxlY3Rpb25cIixcbiAgICBcIm15X2RvY3NcIixcbiAgICBcInRlc3Rfc21hbGxcIixcbiAgICBcIm5ld190ZXN0X3llYXJuXCIsXG4gICAgXCJkb2NzX29wZW5haVwiLFxuICAgIFwiZG9jc19nZW1pbmlcIixcbiAgXTtcbiAgZm9yIChjb25zdCBuYW1lIG9mIGNvbW1vbkNvbGxlY3Rpb25OYW1lcykge1xuICAgIGlmIChxLmluY2x1ZGVzKG5hbWUpKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5hc3luYyBmdW5jdGlvbiBleGVjdXRlUXVlcnkoXG4gIGNvbGxlY3Rpb246IHN0cmluZyB8IG51bGwsXG4gIGludGVudDogUXVlcnlJbnRlbnRcbik6IFByb21pc2U8YW55PiB7XG4gIGlmIChpbnRlbnQuc2NvcGUgPT09IFwiZGF0YWJhc2VcIikge1xuICAgIHJldHVybiBhd2FpdCBleGVjdXRlRGF0YWJhc2VRdWVyeShpbnRlbnQpO1xuICB9IGVsc2Uge1xuICAgIC8vIENvbGxlY3Rpb24tbGV2ZWwgcXVlcnkgLSByZXF1aXJlIGNvbGxlY3Rpb24gbmFtZVxuICAgIGlmICghY29sbGVjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNvbGxlY3Rpb24gbmFtZSBpcyByZXF1aXJlZCBmb3IgY29sbGVjdGlvbi1sZXZlbCBxdWVyaWVzXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBleGVjdXRlQ29sbGVjdGlvblF1ZXJ5KGNvbGxlY3Rpb24sIGludGVudCk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZURhdGFiYXNlUXVlcnkoaW50ZW50OiBRdWVyeUludGVudCk6IFByb21pc2U8YW55PiB7XG4gIHN3aXRjaCAoaW50ZW50LnR5cGUpIHtcbiAgICBjYXNlIFwiY291bnRcIjpcbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImNvbGxlY3Rpb25zXCIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvdW50Q29sbGVjdGlvbnMoKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImFydGlzdHNcIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgY291bnRBcnRpc3RzQWNyb3NzRGF0YWJhc2UoKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImltYWdlc1wiICYmIGludGVudC5maWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvdW50SW1hZ2VzQnlBcnRpc3RBY3Jvc3NEYXRhYmFzZShpbnRlbnQuZmlsdGVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcInRvdGFsXCIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvdW50VG90YWxWZWN0b3JzQWNyb3NzRGF0YWJhc2UoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcImNvbGxlY3Rpb25zXCI6XG4gICAgICByZXR1cm4gYXdhaXQgbGlzdENvbGxlY3Rpb25zKCk7XG5cbiAgICBjYXNlIFwiZGF0YWJhc2VcIjpcbiAgICAgIHJldHVybiBhd2FpdCBkZXNjcmliZURhdGFiYXNlSW5mbygpO1xuXG4gICAgY2FzZSBcInNlYXJjaFwiOlxuICAgICAgaWYgKGludGVudC5maWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlYXJjaEFjcm9zc0NvbGxlY3Rpb25zKGludGVudC5maWx0ZXIsIGludGVudC5saW1pdCB8fCAxMCk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJzdW1tYXJpemVcIjpcbiAgICAgIGlmIChpbnRlbnQuZmlsdGVyKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBzdW1tYXJpemVBcnRpc3RBY3Jvc3NEYXRhYmFzZShcbiAgICAgICAgICBpbnRlbnQuZmlsdGVyLFxuICAgICAgICAgIGludGVudC5saW1pdCB8fCAyMFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwibGlzdFwiOlxuICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiYXJ0aXN0c1wiKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBsaXN0QXJ0aXN0c0Fjcm9zc0RhdGFiYXNlKGludGVudC5saW1pdCB8fCA1MCk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBEYXRhYmFzZS1sZXZlbCBxdWVyeSB0eXBlICcke2ludGVudC50eXBlfScgbm90IGltcGxlbWVudGVkIHlldGBcbiAgICAgICk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvbGxlY3Rpb25RdWVyeShcbiAgY29sbGVjdGlvbjogc3RyaW5nLFxuICBpbnRlbnQ6IFF1ZXJ5SW50ZW50XG4pOiBQcm9taXNlPGFueT4ge1xuICBzd2l0Y2ggKGludGVudC50eXBlKSB7XG4gICAgY2FzZSBcImNvdW50XCI6XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJhcnRpc3RzXCIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvdW50VW5pcXVlQXJ0aXN0cyhjb2xsZWN0aW9uKTtcbiAgICAgIH0gZWxzZSBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJpbWFnZXNcIiAmJiBpbnRlbnQuZmlsdGVyKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjb3VudEltYWdlc0J5QXJ0aXN0KGNvbGxlY3Rpb24sIGludGVudC5maWx0ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvdW50VG90YWwoY29sbGVjdGlvbik7XG4gICAgICB9XG5cbiAgICBjYXNlIFwic2VhcmNoXCI6XG4gICAgICByZXR1cm4gYXdhaXQgc2VhcmNoSW1hZ2VzKGNvbGxlY3Rpb24sIGludGVudC5maWx0ZXIsIGludGVudC5saW1pdCB8fCAxMCk7XG5cbiAgICBjYXNlIFwic3VtbWFyaXplXCI6XG4gICAgICByZXR1cm4gYXdhaXQgc3VtbWFyaXplQXJ0aXN0V29yayhcbiAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgaW50ZW50LmZpbHRlcixcbiAgICAgICAgaW50ZW50LmxpbWl0IHx8IDIwXG4gICAgICApO1xuXG4gICAgY2FzZSBcImFuYWx5emVcIjpcbiAgICAgIHJldHVybiBhd2FpdCBhbmFseXplQXJ0aXN0V29yayhcbiAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgaW50ZW50LmZpbHRlcixcbiAgICAgICAgaW50ZW50LmxpbWl0IHx8IDUwXG4gICAgICApO1xuXG4gICAgY2FzZSBcImxpc3RcIjpcbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImFydGlzdHNcIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgbGlzdFVuaXF1ZUFydGlzdHMoY29sbGVjdGlvbiwgaW50ZW50LmxpbWl0IHx8IDUwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBsaXN0SW1hZ2VzKGNvbGxlY3Rpb24sIGludGVudC5saW1pdCB8fCAyMCk7XG4gICAgICB9XG5cbiAgICBjYXNlIFwiZmlsdGVyXCI6XG4gICAgICByZXR1cm4gYXdhaXQgZmlsdGVySW1hZ2VzKGNvbGxlY3Rpb24sIGludGVudC5maWx0ZXIsIGludGVudC5saW1pdCB8fCAyMCk7XG5cbiAgICBjYXNlIFwiZGVzY3JpYmVcIjpcbiAgICAgIHJldHVybiBhd2FpdCBkZXNjcmliZUNvbGxlY3Rpb24oY29sbGVjdGlvbik7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGNvbGxlY3Rpb24tbGV2ZWwgcXVlcnkgdHlwZTogJHtpbnRlbnQudHlwZX1gKTtcbiAgfVxufVxuXG4vLyBOZXcgZGF0YWJhc2UtbGV2ZWwgZnVuY3Rpb25zXG5hc3luYyBmdW5jdGlvbiBjb3VudENvbGxlY3Rpb25zKCk6IFByb21pc2U8e1xuICBjb3VudDogbnVtYmVyO1xuICBjb2xsZWN0aW9uczogc3RyaW5nW107XG59PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zSW5mbyA9IGF3YWl0IGNsaWVudC5nZXRDb2xsZWN0aW9ucygpO1xuICBjb25zdCBjb2xsZWN0aW9ucyA9IGNvbGxlY3Rpb25zSW5mby5jb2xsZWN0aW9ucy5tYXAoKGM6IGFueSkgPT4gYy5uYW1lKTtcblxuICByZXR1cm4ge1xuICAgIGNvdW50OiBjb2xsZWN0aW9ucy5sZW5ndGgsXG4gICAgY29sbGVjdGlvbnM6IGNvbGxlY3Rpb25zLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0Q29sbGVjdGlvbnMoKTogUHJvbWlzZTx7XG4gIGNvbGxlY3Rpb25zOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgdmVjdG9yc19jb3VudD86IG51bWJlciB9Pjtcbn0+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNJbmZvID0gYXdhaXQgY2xpZW50LmdldENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IGNvbGxlY3Rpb25zID0gY29sbGVjdGlvbnNJbmZvLmNvbGxlY3Rpb25zO1xuXG4gIC8vIEdldCBkZXRhaWxlZCBpbmZvIGZvciBlYWNoIGNvbGxlY3Rpb24gdXNpbmcgYWN0dWFsIGNvdW50XG4gIGNvbnN0IGRldGFpbGVkQ29sbGVjdGlvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICBjb2xsZWN0aW9ucy5tYXAoYXN5bmMgKGNvbGxlY3Rpb246IGFueSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVXNlIHRoZSBzYW1lIGNvdW50IG1ldGhvZCB0aGF0IHdvcmtzIGZvciBpbmRpdmlkdWFsIHF1ZXJpZXNcbiAgICAgICAgY29uc3QgY291bnRSZXN1bHQgPSBhd2FpdCBjbGllbnQuY291bnQoY29sbGVjdGlvbi5uYW1lLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbmFtZTogY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgIHZlY3RvcnNfY291bnQ6IGNvdW50UmVzdWx0LmNvdW50IHx8IDAsXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYEZhaWxlZCB0byBjb3VudCB2ZWN0b3JzIGluIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uLm5hbWV9OmAsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuYW1lOiBjb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgdmVjdG9yc19jb3VudDogMCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KVxuICApO1xuXG4gIHJldHVybiB7IGNvbGxlY3Rpb25zOiBkZXRhaWxlZENvbGxlY3Rpb25zIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlc2NyaWJlRGF0YWJhc2VJbmZvKCk6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zRGF0YSA9IGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuICBjb25zdCB0b3RhbFZlY3RvcnMgPSBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMucmVkdWNlKFxuICAgIChzdW0sIGNvbCkgPT4gc3VtICsgKGNvbC52ZWN0b3JzX2NvdW50IHx8IDApLFxuICAgIDBcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIHRvdGFsX2NvbGxlY3Rpb25zOiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMubGVuZ3RoLFxuICAgIHRvdGFsX3ZlY3RvcnM6IHRvdGFsVmVjdG9ycyxcbiAgICBjb2xsZWN0aW9uczogY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hBY3Jvc3NDb2xsZWN0aW9ucyhcbiAgZmlsdGVyOiBhbnksXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zRGF0YSA9IGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuICBjb25zdCBhbGxSZXN1bHRzOiBhbnlbXSA9IFtdO1xuXG4gIC8vIFNlYXJjaCBlYWNoIGNvbGxlY3Rpb25cbiAgZm9yIChjb25zdCBjb2xsZWN0aW9uIG9mIGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgc2VhcmNoSW1hZ2VzKGNvbGxlY3Rpb24ubmFtZSwgZmlsdGVyLCBsaW1pdCk7XG4gICAgICBpZiAocmVzdWx0cy5pbWFnZXMgJiYgcmVzdWx0cy5pbWFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBhbGxSZXN1bHRzLnB1c2goe1xuICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICBjb3VudDogcmVzdWx0cy5jb3VudCxcbiAgICAgICAgICBpbWFnZXM6IHJlc3VsdHMuaW1hZ2VzLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gc2VhcmNoIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uLm5hbWV9OmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCB0b3RhbENvdW50ID0gYWxsUmVzdWx0cy5yZWR1Y2UoKHN1bSwgcmVzdWx0KSA9PiBzdW0gKyByZXN1bHQuY291bnQsIDApO1xuXG4gIHJldHVybiB7XG4gICAgdG90YWxfY291bnQ6IHRvdGFsQ291bnQsXG4gICAgY29sbGVjdGlvbnNfc2VhcmNoZWQ6IGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucy5sZW5ndGgsXG4gICAgcmVzdWx0c19ieV9jb2xsZWN0aW9uOiBhbGxSZXN1bHRzLFxuICB9O1xufVxuXG4vLyBFeGlzdGluZyBjb2xsZWN0aW9uLWxldmVsIGZ1bmN0aW9ucyByZW1haW4gdGhlIHNhbWVcbmFzeW5jIGZ1bmN0aW9uIGNvdW50VG90YWwoY29sbGVjdGlvbjogc3RyaW5nKTogUHJvbWlzZTx7IGNvdW50OiBudW1iZXIgfT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5jb3VudChjb2xsZWN0aW9uLCB7fSk7XG4gIHJldHVybiB7IGNvdW50OiByZXNwb25zZS5jb3VudCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBjb3VudFVuaXF1ZUFydGlzdHMoXG4gIGNvbGxlY3Rpb246IHN0cmluZ1xuKTogUHJvbWlzZTx7IGNvdW50OiBudW1iZXI7IGFydGlzdHM6IHN0cmluZ1tdIH0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICBsaW1pdDogMTAwMCxcbiAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICB9KTtcblxuICBjb25zdCBhcnRpc3RzID0gbmV3IFNldChcbiAgICByZXNwb25zZS5wb2ludHMubWFwKChwb2ludDogYW55KSA9PiBwb2ludC5wYXlsb2FkPy5uYW1lKS5maWx0ZXIoQm9vbGVhbilcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIGNvdW50OiBhcnRpc3RzLnNpemUsXG4gICAgYXJ0aXN0czogQXJyYXkuZnJvbShhcnRpc3RzKS5zbGljZSgwLCAyMCksXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaEltYWdlcyhcbiAgY29sbGVjdGlvbjogc3RyaW5nLFxuICBmaWx0ZXI6IGFueSxcbiAgbGltaXQ6IG51bWJlclxuKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICBsaW1pdDogMTAwMCxcbiAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICB9KTtcblxuICBsZXQgZmlsdGVyZWRQb2ludHMgPSByZXNwb25zZS5wb2ludHM7XG5cbiAgaWYgKGZpbHRlcikge1xuICAgIGZpbHRlcmVkUG9pbnRzID0gcmVzcG9uc2UucG9pbnRzLmZpbHRlcigocG9pbnQ6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGZpbHRlcikuZXZlcnkoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICByZXR1cm4gcG9pbnQucGF5bG9hZD8uW2tleV0gPT09IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBsaW1pdGVkUG9pbnRzID0gZmlsdGVyZWRQb2ludHMuc2xpY2UoMCwgbGltaXQpO1xuXG4gIHJldHVybiB7XG4gICAgY291bnQ6IGxpbWl0ZWRQb2ludHMubGVuZ3RoLFxuICAgIGltYWdlczogbGltaXRlZFBvaW50cyxcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdFVuaXF1ZUFydGlzdHMoXG4gIGNvbGxlY3Rpb246IHN0cmluZyxcbiAgbGltaXQ6IG51bWJlclxuKTogUHJvbWlzZTx7IGFydGlzdHM6IHN0cmluZ1tdIH0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICBsaW1pdCxcbiAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICB9KTtcblxuICBjb25zdCBhcnRpc3RzID0gbmV3IFNldChcbiAgICByZXNwb25zZS5wb2ludHMubWFwKChwb2ludDogYW55KSA9PiBwb2ludC5wYXlsb2FkPy5uYW1lKS5maWx0ZXIoQm9vbGVhbilcbiAgKTtcblxuICByZXR1cm4geyBhcnRpc3RzOiBBcnJheS5mcm9tKGFydGlzdHMpIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RJbWFnZXMoY29sbGVjdGlvbjogc3RyaW5nLCBsaW1pdDogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICBsaW1pdCxcbiAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGNvdW50OiByZXNwb25zZS5wb2ludHMubGVuZ3RoLFxuICAgIGltYWdlczogcmVzcG9uc2UucG9pbnRzLm1hcCgocG9pbnQ6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBwb2ludC5pZCxcbiAgICAgIGFydGlzdDogcG9pbnQucGF5bG9hZD8ubmFtZSxcbiAgICAgIGZpbGVuYW1lOiBwb2ludC5wYXlsb2FkPy5maWxlX25hbWUsXG4gICAgfSkpLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBmaWx0ZXJJbWFnZXMoXG4gIGNvbGxlY3Rpb246IHN0cmluZyxcbiAgZmlsdGVyOiBhbnksXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8YW55PiB7XG4gIHJldHVybiBhd2FpdCBzZWFyY2hJbWFnZXMoY29sbGVjdGlvbiwgZmlsdGVyLCBsaW1pdCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlc2NyaWJlQ29sbGVjdGlvbihjb2xsZWN0aW9uOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCB0b3RhbENvdW50ID0gYXdhaXQgY291bnRUb3RhbChjb2xsZWN0aW9uKTtcbiAgY29uc3QgYXJ0aXN0c0RhdGEgPSBhd2FpdCBjb3VudFVuaXF1ZUFydGlzdHMoY29sbGVjdGlvbik7XG4gIGNvbnN0IHNhbXBsZUltYWdlcyA9IGF3YWl0IGxpc3RJbWFnZXMoY29sbGVjdGlvbiwgNSk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3RhbF9pbWFnZXM6IHRvdGFsQ291bnQuY291bnQsXG4gICAgdW5pcXVlX2FydGlzdHM6IGFydGlzdHNEYXRhLmNvdW50LFxuICAgIHNhbXBsZV9hcnRpc3RzOiBhcnRpc3RzRGF0YS5hcnRpc3RzLnNsaWNlKDAsIDEwKSxcbiAgICBzYW1wbGVfaW1hZ2VzOiBzYW1wbGVJbWFnZXMuaW1hZ2VzLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVJlc3BvbnNlKFxuICBxdWVzdGlvbjogc3RyaW5nLFxuICBpbnRlbnQ6IFF1ZXJ5SW50ZW50LFxuICBkYXRhOiBhbnksXG4gIHByb3ZpZGVyOiBFbWJlZGRpbmdQcm92aWRlcixcbiAgbW9kZWw/OiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGZhbGxiYWNrUmVzcG9uc2UgPSBnZW5lcmF0ZUZhbGxiYWNrUmVzcG9uc2UocXVlc3Rpb24sIGludGVudCwgZGF0YSk7XG5cbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSAmJiAhcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpIHtcbiAgICByZXR1cm4gZmFsbGJhY2tSZXNwb25zZTtcbiAgfVxuXG4gIGNvbnN0IHN5c3RlbVByb21wdCA9IGBZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBleHBsYWlucyB2ZWN0b3IgZGF0YWJhc2UgcXVlcnkgcmVzdWx0cyBpbiBuYXR1cmFsIGxhbmd1YWdlLlxuICBcblRoZSB1c2VyIGFza2VkOiBcIiR7cXVlc3Rpb259XCJcblRoZSBxdWVyeSB0eXBlIHdhczogJHtpbnRlbnQudHlwZX1cblRoZSBxdWVyeSBzY29wZSB3YXM6ICR7aW50ZW50LnNjb3BlfVxuVGhlIGRhdGEgcmV0dXJuZWQgaXM6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMil9XG5cblByb3ZpZGUgYSBjb25jaXNlLCBuYXR1cmFsIGxhbmd1YWdlIHJlc3BvbnNlIHRoYXQgZGlyZWN0bHkgYW5zd2VycyB0aGUgdXNlcidzIHF1ZXN0aW9uLiBCZSBzcGVjaWZpYyB3aXRoIG51bWJlcnMgYW5kIG5hbWVzIHdoZW4gYXZhaWxhYmxlLmA7XG5cbiAgdHJ5IHtcbiAgICBsZXQgcmVzcG9uc2U6IHN0cmluZztcblxuICAgIGlmIChwcm92aWRlciA9PT0gXCJnZW1pbmlcIiAmJiBwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSkge1xuICAgICAgY29uc3QgZ2VtaW5pTW9kZWwgPSBnZW5BSS5nZXRHZW5lcmF0aXZlTW9kZWwoe1xuICAgICAgICBtb2RlbDogbW9kZWwgfHwgXCJnZW1pbmktMi4wLWZsYXNoXCIsIC8vIFVzZSBzcGVjaWZpYyBtb2RlbCBwYXJhbWV0ZXJcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2VtaW5pTW9kZWwuZ2VuZXJhdGVDb250ZW50KHN5c3RlbVByb21wdCk7XG4gICAgICByZXNwb25zZSA9IHJlc3VsdC5yZXNwb25zZS50ZXh0KCk7XG4gICAgfSBlbHNlIGlmIChwcm92aWRlciA9PT0gXCJvcGVuYWlcIiAmJiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkge1xuICAgICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICAgIG1vZGVsOiBtb2RlbCB8fCBcImdwdC0zLjUtdHVyYm9cIiwgLy8gVXNlIHNwZWNpZmljIG1vZGVsIHBhcmFtZXRlclxuICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogc3lzdGVtUHJvbXB0IH1dLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxuICAgICAgICBtYXhfdG9rZW5zOiAyMDAsXG4gICAgICB9KTtcbiAgICAgIHJlc3BvbnNlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCB8fCBmYWxsYmFja1Jlc3BvbnNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsbGJhY2tSZXNwb25zZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2UudHJpbSgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBnZW5lcmF0ZSBMTE0gcmVzcG9uc2UsIHVzaW5nIGZhbGxiYWNrOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbGxiYWNrUmVzcG9uc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVGYWxsYmFja1Jlc3BvbnNlKFxuICBxdWVzdGlvbjogc3RyaW5nLFxuICBpbnRlbnQ6IFF1ZXJ5SW50ZW50LFxuICBkYXRhOiBhbnlcbik6IHN0cmluZyB7XG4gIGlmIChpbnRlbnQuc2NvcGUgPT09IFwiZGF0YWJhc2VcIikge1xuICAgIHN3aXRjaCAoaW50ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgXCJjb3VudFwiOlxuICAgICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJjb2xsZWN0aW9uc1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGBJIGZvdW5kICR7ZGF0YS5jb3VudCB8fCAwfSBjb2xsZWN0aW9ucyBpbiB0aGUgZGF0YWJhc2U6ICR7XG4gICAgICAgICAgICBkYXRhLmNvbGxlY3Rpb25zPy5qb2luKFwiLCBcIikgfHwgXCJOb25lIGZvdW5kXCJcbiAgICAgICAgICB9LmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiYXJ0aXN0c1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGBJIGZvdW5kICR7XG4gICAgICAgICAgICBkYXRhLmNvdW50IHx8IDBcbiAgICAgICAgICB9IHVuaXF1ZSBhcnRpc3RzIGFjcm9zcyBhbGwgY29sbGVjdGlvbnMuIFNvbWUgb2YgdGhlbSBpbmNsdWRlOiAke1xuICAgICAgICAgICAgZGF0YS5hcnRpc3RzPy5zbGljZSgwLCA1KS5qb2luKFwiLCBcIikgfHwgXCJObyBhcnRpc3RzIGZvdW5kXCJcbiAgICAgICAgICB9LmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiaW1hZ2VzXCIgJiYgaW50ZW50LmZpbHRlcj8ubmFtZSkge1xuICAgICAgICAgIHJldHVybiBgSSBmb3VuZCAke2RhdGEuY291bnQgfHwgMH0gaW1hZ2VzIGJ5ICR7XG4gICAgICAgICAgICBkYXRhLmFydGlzdFxuICAgICAgICAgIH0gYWNyb3NzIGFsbCBjb2xsZWN0aW9ucy4gJHtcbiAgICAgICAgICAgIGRhdGEuYnlfY29sbGVjdGlvbj8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgICA/IGBGb3VuZCBpbjogJHtkYXRhLmJ5X2NvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICAgIC5tYXAoKGM6IGFueSkgPT4gYCR7Yy5jb2xsZWN0aW9ufSAoJHtjLmNvdW50fSlgKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX0uYFxuICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICB9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJ0b3RhbFwiKSB7XG4gICAgICAgICAgcmV0dXJuIGBUaGUgZGF0YWJhc2UgY29udGFpbnMgJHtcbiAgICAgICAgICAgIGRhdGEuY291bnQgfHwgMFxuICAgICAgICAgIH0gdG90YWwgdmVjdG9ycyBhY3Jvc3MgYWxsIGNvbGxlY3Rpb25zLmA7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiY29sbGVjdGlvbnNcIjpcbiAgICAgICAgcmV0dXJuIGBUaGUgZGF0YWJhc2UgY29udGFpbnMgJHtcbiAgICAgICAgICBkYXRhLmNvbGxlY3Rpb25zPy5sZW5ndGggfHwgMFxuICAgICAgICB9IGNvbGxlY3Rpb25zOiAke1xuICAgICAgICAgIGRhdGEuY29sbGVjdGlvbnNcbiAgICAgICAgICAgID8ubWFwKChjOiBhbnkpID0+IGAke2MubmFtZX0gKCR7Yy52ZWN0b3JzX2NvdW50IHx8IDB9IHZlY3RvcnMpYClcbiAgICAgICAgICAgIC5qb2luKFwiLCBcIikgfHwgXCJOb25lIGZvdW5kXCJcbiAgICAgICAgfS5gO1xuICAgICAgY2FzZSBcImRhdGFiYXNlXCI6XG4gICAgICAgIHJldHVybiBgVGhlIGRhdGFiYXNlIGNvbnRhaW5zICR7XG4gICAgICAgICAgZGF0YS50b3RhbF9jb2xsZWN0aW9ucyB8fCAwXG4gICAgICAgIH0gY29sbGVjdGlvbnMgd2l0aCBhIHRvdGFsIG9mICR7ZGF0YS50b3RhbF92ZWN0b3JzIHx8IDB9IHZlY3RvcnMuYDtcbiAgICAgIGNhc2UgXCJzZWFyY2hcIjpcbiAgICAgICAgcmV0dXJuIGBJIHNlYXJjaGVkIGFjcm9zcyAke1xuICAgICAgICAgIGRhdGEuY29sbGVjdGlvbnNfc2VhcmNoZWQgfHwgMFxuICAgICAgICB9IGNvbGxlY3Rpb25zIGFuZCBmb3VuZCAke2RhdGEudG90YWxfY291bnQgfHwgMH0gbWF0Y2hpbmcgaXRlbXMuYDtcbiAgICAgIGNhc2UgXCJzdW1tYXJpemVcIjpcbiAgICAgICAgaWYgKGludGVudC5maWx0ZXI/Lm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgYCoqU3VtbWFyeSBvZiAke2RhdGEuYXJ0aXN0fSdzIHdvcmsgYWNyb3NzIHRoZSBkYXRhYmFzZToqKlxcblxcbmAgK1xuICAgICAgICAgICAgYOKAoiAqKlRvdGFsIEltYWdlcyoqOiAke2RhdGEudG90YWxfaW1hZ2VzIHx8IDB9XFxuYCArXG4gICAgICAgICAgICBg4oCiICoqQ29sbGVjdGlvbnMqKjogRm91bmQgaW4gJHtcbiAgICAgICAgICAgICAgZGF0YS5jb2xsZWN0aW9uc19mb3VuZCB8fCAwXG4gICAgICAgICAgICB9IGNvbGxlY3Rpb25zXFxuYCArXG4gICAgICAgICAgICBg4oCiICoqRmlsZSBUeXBlcyoqOiAke1xuICAgICAgICAgICAgICBkYXRhLmZpbGVfdHlwZXM/LmpvaW4oXCIsIFwiKSB8fCBcIlZhcmlvdXNcIlxuICAgICAgICAgICAgfVxcblxcbmAgK1xuICAgICAgICAgICAgYCoqQnJlYWtkb3duIGJ5IGNvbGxlY3Rpb246KipcXG4ke1xuICAgICAgICAgICAgICBkYXRhLmJ5X2NvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICA/Lm1hcCgoYzogYW55KSA9PiBg4oCiICR7Yy5jb2xsZWN0aW9ufTogJHtjLmltYWdlX2NvdW50fSBpbWFnZXNgKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpIHx8IFwiTm8gY29sbGVjdGlvbnMgZm91bmRcIlxuICAgICAgICAgICAgfVxcblxcbmAgK1xuICAgICAgICAgICAgYCoqU2FtcGxlIEltYWdlcyoqOiAke1xuICAgICAgICAgICAgICBkYXRhLnNhbXBsZV9pbWFnZXNcbiAgICAgICAgICAgICAgICA/LnNsaWNlKDAsIDMpXG4gICAgICAgICAgICAgICAgLm1hcCgoaW1nOiBhbnkpID0+IGAke2ltZy5maWxlbmFtZX0gKCR7aW1nLmNvbGxlY3Rpb259KWApXG4gICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKSB8fCBcIk5vbmUgZm91bmRcIlxuICAgICAgICAgICAgfWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImxpc3RcIjpcbiAgICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiYXJ0aXN0c1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGBJIGZvdW5kICR7XG4gICAgICAgICAgICBkYXRhLmFydGlzdHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgfSB1bmlxdWUgYXJ0aXN0cyBhY3Jvc3MgYWxsIGNvbGxlY3Rpb25zOiAke1xuICAgICAgICAgICAgZGF0YS5hcnRpc3RzPy5zbGljZSgwLCAxMCkuam9pbihcIiwgXCIpIHx8IFwiTm8gYXJ0aXN0cyBmb3VuZFwiXG4gICAgICAgICAgfS5gO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIENvbGxlY3Rpb24tbGV2ZWwgcmVzcG9uc2VzXG4gIHN3aXRjaCAoaW50ZW50LnR5cGUpIHtcbiAgICBjYXNlIFwiY291bnRcIjpcbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImFydGlzdHNcIikge1xuICAgICAgICByZXR1cm4gYEkgZm91bmQgJHtcbiAgICAgICAgICBkYXRhLmNvdW50IHx8IDBcbiAgICAgICAgfSB1bmlxdWUgYXJ0aXN0cyBpbiB0aGUgY29sbGVjdGlvbi4gU29tZSBvZiB0aGVtIGluY2x1ZGU6ICR7XG4gICAgICAgICAgZGF0YS5hcnRpc3RzPy5zbGljZSgwLCA1KS5qb2luKFwiLCBcIikgfHwgXCJObyBhcnRpc3RzIGZvdW5kXCJcbiAgICAgICAgfS5gO1xuICAgICAgfSBlbHNlIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImltYWdlc1wiICYmIGludGVudC5maWx0ZXI/Lm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGBJIGZvdW5kICR7ZGF0YS5jb3VudCB8fCAwfSBpbWFnZXMgYnkgJHtcbiAgICAgICAgICBkYXRhLmFydGlzdFxuICAgICAgICB9IGluIHRoaXMgY29sbGVjdGlvbi4ke1xuICAgICAgICAgIGRhdGEuc2FtcGxlX2ltYWdlcz8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyBgIFNhbXBsZSBmaWxlczogJHtkYXRhLnNhbXBsZV9pbWFnZXNcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMylcbiAgICAgICAgICAgICAgICAubWFwKChpbWc6IGFueSkgPT4gaW1nLmZpbGVuYW1lKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9LmBcbiAgICAgICAgICAgIDogXCJcIlxuICAgICAgICB9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBgVGhlIGNvbGxlY3Rpb24gY29udGFpbnMgJHtkYXRhLmNvdW50IHx8IDB9IHRvdGFsIGltYWdlcy5gO1xuICAgICAgfVxuXG4gICAgY2FzZSBcInNlYXJjaFwiOlxuICAgIGNhc2UgXCJmaWx0ZXJcIjpcbiAgICAgIHJldHVybiBgSSBmb3VuZCAke2RhdGEuY291bnQgfHwgMH0gaW1hZ2VzIG1hdGNoaW5nIHlvdXIgY3JpdGVyaWEuYDtcblxuICAgIGNhc2UgXCJzdW1tYXJpemVcIjpcbiAgICAgIGlmIChpbnRlbnQuZmlsdGVyPy5uYW1lKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgYCoqU3VtbWFyeSBvZiAke2RhdGEuYXJ0aXN0fSdzIHdvcmsgaW4gdGhpcyBjb2xsZWN0aW9uOioqXFxuXFxuYCArXG4gICAgICAgICAgYOKAoiAqKlRvdGFsIEltYWdlcyoqOiAke2RhdGEudG90YWxfaW1hZ2VzIHx8IDB9XFxuYCArXG4gICAgICAgICAgYOKAoiAqKkZpbGUgVHlwZXMqKjogJHtkYXRhLmZpbGVfdHlwZXM/LmpvaW4oXCIsIFwiKSB8fCBcIlZhcmlvdXNcIn1cXG5gICtcbiAgICAgICAgICBg4oCiICoqU2FtcGxlIEZpbGVzKio6ICR7XG4gICAgICAgICAgICBkYXRhLnNhbXBsZV9maWxlbmFtZXM/LnNsaWNlKDAsIDUpLmpvaW4oXCIsIFwiKSB8fCBcIk5vbmVcIlxuICAgICAgICAgIH1cXG5cXG5gICtcbiAgICAgICAgICBgKipJbWFnZSBEZXRhaWxzOioqXFxuJHtcbiAgICAgICAgICAgIGRhdGEuaW1hZ2VzXG4gICAgICAgICAgICAgID8uc2xpY2UoMCwgNSlcbiAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAoaW1nOiBhbnksIGk6IG51bWJlcikgPT5cbiAgICAgICAgICAgICAgICAgIGAke2kgKyAxfS4gJHtpbWcuZmlsZW5hbWUgfHwgXCJVbmtub3duIGZpbGVcIn1gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIikgfHwgXCJObyBpbWFnZXMgZm91bmRcIlxuICAgICAgICAgIH1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJhbmFseXplXCI6XG4gICAgICBpZiAoaW50ZW50LmZpbHRlcj8ubmFtZSkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGAqKkFuYWx5c2lzIG9mICR7ZGF0YS5hcnRpc3R9J3Mgd29yayBwYXR0ZXJuczoqKlxcblxcbmAgK1xuICAgICAgICAgIGDigKIgKipUb3RhbCBJbWFnZXMqKjogJHtkYXRhLnRvdGFsX2ltYWdlcyB8fCAwfVxcbmAgK1xuICAgICAgICAgIGDigKIgKipGaWxlIFR5cGVzKio6ICR7XG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhkYXRhLmZpbGVfdHlwZV9kaXN0cmlidXRpb24gfHwge30pXG4gICAgICAgICAgICAgIC5tYXAoKFt0eXBlLCBjb3VudF0pID0+IGAke3R5cGV9ICgke2NvdW50fSlgKVxuICAgICAgICAgICAgICAuam9pbihcIiwgXCIpIHx8IFwiVmFyaW91c1wiXG4gICAgICAgICAgfVxcbmAgK1xuICAgICAgICAgIGDigKIgKipDb21tb24gUGF0dGVybnMqKjogJHtcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGRhdGEuY29tbW9uX25hbWluZ19wYXR0ZXJucyB8fCB7fSlcbiAgICAgICAgICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAgICAgICAgIC5tYXAoKFtwYXR0ZXJuLCBjb3VudF0pID0+IGBcIiR7cGF0dGVybn1cIiAoJHtjb3VudH0gZmlsZXMpYClcbiAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKSB8fCBcIk5vIHBhdHRlcm5zIGZvdW5kXCJcbiAgICAgICAgICB9XFxuYCArXG4gICAgICAgICAgYOKAoiAqKlNvdXJjZSBEb21haW5zKio6ICR7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhLnNvdXJjZV9kb21haW5zIHx8IHt9KS5qb2luKFwiLCBcIikgfHwgXCJWYXJpb3VzXCJcbiAgICAgICAgICB9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwibGlzdFwiOlxuICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiYXJ0aXN0c1wiKSB7XG4gICAgICAgIHJldHVybiBgSGVyZSBhcmUgdGhlIGFydGlzdHMgaW4gdGhlIGNvbGxlY3Rpb246ICR7XG4gICAgICAgICAgZGF0YS5hcnRpc3RzPy5zbGljZSgwLCAxMCkuam9pbihcIiwgXCIpIHx8IFwiTm8gYXJ0aXN0cyBmb3VuZFwiXG4gICAgICAgIH0ke2RhdGEuYXJ0aXN0cz8ubGVuZ3RoID4gMTAgPyBcIi4uLlwiIDogXCJcIn0uYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBgSSBmb3VuZCAke2RhdGEuY291bnQgfHwgMH0gaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb24uYDtcbiAgICAgIH1cblxuICAgIGNhc2UgXCJkZXNjcmliZVwiOlxuICAgICAgcmV0dXJuIGBUaGlzIGNvbGxlY3Rpb24gY29udGFpbnMgJHtkYXRhLnRvdGFsX2ltYWdlcyB8fCAwfSBpbWFnZXMgZnJvbSAke1xuICAgICAgICBkYXRhLnVuaXF1ZV9hcnRpc3RzIHx8IDBcbiAgICAgIH0gdW5pcXVlIGFydGlzdHMuIFNvbWUgZmVhdHVyZWQgYXJ0aXN0cyBpbmNsdWRlOiAke1xuICAgICAgICBkYXRhLnNhbXBsZV9hcnRpc3RzPy5zbGljZSgwLCA1KS5qb2luKFwiLCBcIikgfHwgXCJObyBhcnRpc3RzIGZvdW5kXCJcbiAgICAgIH0uYDtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJJIHByb2Nlc3NlZCB5b3VyIHF1ZXJ5IHN1Y2Nlc3NmdWxseSB1c2luZyBwYXR0ZXJuIG1hdGNoaW5nLlwiO1xuICB9XG5cbiAgcmV0dXJuIFwiSSBwcm9jZXNzZWQgeW91ciBxdWVyeSBzdWNjZXNzZnVsbHkuXCI7XG59XG5cbi8vIE5ldyBkYXRhYmFzZS1sZXZlbCBmdW5jdGlvbnMgZm9yIGFydGlzdHMgYW5kIHRvdGFsIGNvdW50c1xuYXN5bmMgZnVuY3Rpb24gY291bnRBcnRpc3RzQWNyb3NzRGF0YWJhc2UoKTogUHJvbWlzZTx7XG4gIGNvdW50OiBudW1iZXI7XG4gIGFydGlzdHM6IHN0cmluZ1tdO1xufT4ge1xuICBjb25zdCBjb2xsZWN0aW9uc0RhdGEgPSBhd2FpdCBsaXN0Q29sbGVjdGlvbnMoKTtcbiAgY29uc3QgYWxsQXJ0aXN0cyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIC8vIENvbGxlY3QgYXJ0aXN0cyBmcm9tIGVhY2ggY29sbGVjdGlvblxuICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgJiYgY29sbGVjdGlvbi52ZWN0b3JzX2NvdW50ID4gMCkge1xuICAgICAgICBjb25zdCBhcnRpc3RzRGF0YSA9IGF3YWl0IGNvdW50VW5pcXVlQXJ0aXN0cyhjb2xsZWN0aW9uLm5hbWUpO1xuICAgICAgICBhcnRpc3RzRGF0YS5hcnRpc3RzLmZvckVhY2goKGFydGlzdCkgPT4gYWxsQXJ0aXN0cy5hZGQoYXJ0aXN0KSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYEZhaWxlZCB0byBnZXQgYXJ0aXN0cyBmcm9tIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uLm5hbWV9OmAsXG4gICAgICAgIGVycm9yXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY291bnQ6IGFsbEFydGlzdHMuc2l6ZSxcbiAgICBhcnRpc3RzOiBBcnJheS5mcm9tKGFsbEFydGlzdHMpLnNsaWNlKDAsIDIwKSwgLy8gU2hvdyBmaXJzdCAyMFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBjb3VudFRvdGFsVmVjdG9yc0Fjcm9zc0RhdGFiYXNlKCk6IFByb21pc2U8e1xuICBjb3VudDogbnVtYmVyO1xuICBieV9jb2xsZWN0aW9uOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgY291bnQ6IG51bWJlciB9Pjtcbn0+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNEYXRhID0gYXdhaXQgbGlzdENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IHRvdGFsVmVjdG9ycyA9IGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucy5yZWR1Y2UoXG4gICAgKHN1bSwgY29sKSA9PiBzdW0gKyAoY29sLnZlY3RvcnNfY291bnQgfHwgMCksXG4gICAgMFxuICApO1xuXG4gIHJldHVybiB7XG4gICAgY291bnQ6IHRvdGFsVmVjdG9ycyxcbiAgICBieV9jb2xsZWN0aW9uOiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMubWFwKChjb2wpID0+ICh7XG4gICAgICBuYW1lOiBjb2wubmFtZSxcbiAgICAgIGNvdW50OiBjb2wudmVjdG9yc19jb3VudCB8fCAwLFxuICAgIH0pKSxcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdEFydGlzdHNBY3Jvc3NEYXRhYmFzZShsaW1pdDogbnVtYmVyKTogUHJvbWlzZTx7XG4gIGFydGlzdHM6IHN0cmluZ1tdO1xuICBieV9jb2xsZWN0aW9uOiBBcnJheTx7IGNvbGxlY3Rpb246IHN0cmluZzsgYXJ0aXN0czogc3RyaW5nW10gfT47XG59PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zRGF0YSA9IGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuICBjb25zdCBhbGxBcnRpc3RzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IGJ5Q29sbGVjdGlvbjogQXJyYXk8eyBjb2xsZWN0aW9uOiBzdHJpbmc7IGFydGlzdHM6IHN0cmluZ1tdIH0+ID0gW107XG5cbiAgLy8gQ29sbGVjdCBhcnRpc3RzIGZyb20gZWFjaCBjb2xsZWN0aW9uXG4gIGZvciAoY29uc3QgY29sbGVjdGlvbiBvZiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGNvbGxlY3Rpb24udmVjdG9yc19jb3VudCAmJiBjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgPiAwKSB7XG4gICAgICAgIGNvbnN0IGFydGlzdHNEYXRhID0gYXdhaXQgbGlzdFVuaXF1ZUFydGlzdHMoXG4gICAgICAgICAgY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgIE1hdGgubWluKGxpbWl0LCAyMClcbiAgICAgICAgKTtcbiAgICAgICAgYXJ0aXN0c0RhdGEuYXJ0aXN0cy5mb3JFYWNoKChhcnRpc3QpID0+IGFsbEFydGlzdHMuYWRkKGFydGlzdCkpO1xuICAgICAgICBieUNvbGxlY3Rpb24ucHVzaCh7XG4gICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgIGFydGlzdHM6IGFydGlzdHNEYXRhLmFydGlzdHMsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBGYWlsZWQgdG8gZ2V0IGFydGlzdHMgZnJvbSBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbi5uYW1lfTpgLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFydGlzdHM6IEFycmF5LmZyb20oYWxsQXJ0aXN0cykuc2xpY2UoMCwgbGltaXQpLFxuICAgIGJ5X2NvbGxlY3Rpb246IGJ5Q29sbGVjdGlvbixcbiAgfTtcbn1cblxuLy8gTmV3IGZ1bmN0aW9uIHRvIGNvdW50IGltYWdlcyBieSBzcGVjaWZpYyBhcnRpc3RcbmFzeW5jIGZ1bmN0aW9uIGNvdW50SW1hZ2VzQnlBcnRpc3QoXG4gIGNvbGxlY3Rpb246IHN0cmluZyxcbiAgZmlsdGVyOiBhbnlcbik6IFByb21pc2U8eyBjb3VudDogbnVtYmVyOyBhcnRpc3Q6IHN0cmluZzsgc2FtcGxlX2ltYWdlczogYW55W10gfT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5zY3JvbGwoY29sbGVjdGlvbiwge1xuICAgIGxpbWl0OiAxMDAwLFxuICAgIHdpdGhfcGF5bG9hZDogdHJ1ZSxcbiAgICB3aXRoX3ZlY3RvcjogZmFsc2UsXG4gIH0pO1xuXG4gIGxldCBmaWx0ZXJlZFBvaW50cyA9IHJlc3BvbnNlLnBvaW50cztcbiAgaWYgKGZpbHRlcikge1xuICAgIGZpbHRlcmVkUG9pbnRzID0gcmVzcG9uc2UucG9pbnRzLmZpbHRlcigocG9pbnQ6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGZpbHRlcikuZXZlcnkoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICByZXR1cm4gcG9pbnQucGF5bG9hZD8uW2tleV0gPT09IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvdW50OiBmaWx0ZXJlZFBvaW50cy5sZW5ndGgsXG4gICAgYXJ0aXN0OiBmaWx0ZXI/Lm5hbWUgfHwgXCJ1bmtub3duXCIsXG4gICAgc2FtcGxlX2ltYWdlczogZmlsdGVyZWRQb2ludHMuc2xpY2UoMCwgNSkubWFwKChwb2ludDogYW55KSA9PiAoe1xuICAgICAgaWQ6IHBvaW50LmlkLFxuICAgICAgZmlsZW5hbWU6IHBvaW50LnBheWxvYWQ/LmZpbGVfbmFtZSxcbiAgICAgIHVybDogcG9pbnQucGF5bG9hZD8uaW1hZ2VfdXJsLFxuICAgIH0pKSxcbiAgfTtcbn1cblxuLy8gTmV3IGZ1bmN0aW9uIHRvIHByb3ZpZGUgZGV0YWlsZWQgc3VtbWFyeSBvZiBhcnRpc3QncyB3b3JrXG5hc3luYyBmdW5jdGlvbiBzdW1tYXJpemVBcnRpc3RXb3JrKFxuICBjb2xsZWN0aW9uOiBzdHJpbmcsXG4gIGZpbHRlcjogYW55LFxuICBsaW1pdDogbnVtYmVyXG4pOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5zY3JvbGwoY29sbGVjdGlvbiwge1xuICAgIGxpbWl0OiAxMDAwLFxuICAgIHdpdGhfcGF5bG9hZDogdHJ1ZSxcbiAgICB3aXRoX3ZlY3RvcjogZmFsc2UsXG4gIH0pO1xuXG4gIGxldCBmaWx0ZXJlZFBvaW50cyA9IHJlc3BvbnNlLnBvaW50cztcbiAgaWYgKGZpbHRlcikge1xuICAgIGZpbHRlcmVkUG9pbnRzID0gcmVzcG9uc2UucG9pbnRzLmZpbHRlcigocG9pbnQ6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGZpbHRlcikuZXZlcnkoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICByZXR1cm4gcG9pbnQucGF5bG9hZD8uW2tleV0gPT09IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBsaW1pdGVkUG9pbnRzID0gZmlsdGVyZWRQb2ludHMuc2xpY2UoMCwgbGltaXQpO1xuXG4gIC8vIEFuYWx5emUgZmlsZSB0eXBlcyBhbmQgcGF0dGVybnNcbiAgY29uc3QgZmlsZUV4dGVuc2lvbnMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgY29uc3QgZmlsZU5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBpbWFnZVVybHM6IHN0cmluZ1tdID0gW107XG5cbiAgbGltaXRlZFBvaW50cy5mb3JFYWNoKChwb2ludDogYW55KSA9PiB7XG4gICAgaWYgKHBvaW50LnBheWxvYWQ/LmZpbGVfbmFtZSkge1xuICAgICAgY29uc3QgZXh0ID0gcG9pbnQucGF5bG9hZC5maWxlX25hbWUuc3BsaXQoXCIuXCIpLnBvcCgpPy50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGV4dCkgZmlsZUV4dGVuc2lvbnMuYWRkKGV4dCk7XG4gICAgICBmaWxlTmFtZXMucHVzaChwb2ludC5wYXlsb2FkLmZpbGVfbmFtZSk7XG4gICAgfVxuICAgIGlmIChwb2ludC5wYXlsb2FkPy5pbWFnZV91cmwpIHtcbiAgICAgIGltYWdlVXJscy5wdXNoKHBvaW50LnBheWxvYWQuaW1hZ2VfdXJsKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgYXJ0aXN0OiBmaWx0ZXI/Lm5hbWUgfHwgXCJ1bmtub3duXCIsXG4gICAgdG90YWxfaW1hZ2VzOiBmaWx0ZXJlZFBvaW50cy5sZW5ndGgsXG4gICAgZGlzcGxheWVkX2ltYWdlczogbGltaXRlZFBvaW50cy5sZW5ndGgsXG4gICAgZmlsZV90eXBlczogQXJyYXkuZnJvbShmaWxlRXh0ZW5zaW9ucyksXG4gICAgc2FtcGxlX2ZpbGVuYW1lczogZmlsZU5hbWVzLnNsaWNlKDAsIDgpLFxuICAgIHNhbXBsZV91cmxzOiBpbWFnZVVybHMuc2xpY2UoMCwgNSksXG4gICAgaW1hZ2VzOiBsaW1pdGVkUG9pbnRzLm1hcCgocG9pbnQ6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBwb2ludC5pZCxcbiAgICAgIGZpbGVuYW1lOiBwb2ludC5wYXlsb2FkPy5maWxlX25hbWUsXG4gICAgICBpbWFnZV91cmw6IHBvaW50LnBheWxvYWQ/LmltYWdlX3VybCxcbiAgICAgIHN0eWxlX3VybDogcG9pbnQucGF5bG9hZD8udXJsLFxuICAgIH0pKSxcbiAgfTtcbn1cblxuLy8gTmV3IGZ1bmN0aW9uIHRvIGFuYWx5emUgYXJ0aXN0J3Mgd29yayBwYXR0ZXJuc1xuYXN5bmMgZnVuY3Rpb24gYW5hbHl6ZUFydGlzdFdvcmsoXG4gIGNvbGxlY3Rpb246IHN0cmluZyxcbiAgZmlsdGVyOiBhbnksXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnNjcm9sbChjb2xsZWN0aW9uLCB7XG4gICAgbGltaXQ6IDEwMDAsXG4gICAgd2l0aF9wYXlsb2FkOiB0cnVlLFxuICAgIHdpdGhfdmVjdG9yOiBmYWxzZSxcbiAgfSk7XG5cbiAgbGV0IGZpbHRlcmVkUG9pbnRzID0gcmVzcG9uc2UucG9pbnRzO1xuICBpZiAoZmlsdGVyKSB7XG4gICAgZmlsdGVyZWRQb2ludHMgPSByZXNwb25zZS5wb2ludHMuZmlsdGVyKChwb2ludDogYW55KSA9PiB7XG4gICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZmlsdGVyKS5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIHJldHVybiBwb2ludC5wYXlsb2FkPy5ba2V5XSA9PT0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEFuYWx5emUgcGF0dGVybnMgaW4gdGhlIGFydGlzdCdzIHdvcmtcbiAgY29uc3QgZmlsZVR5cGVzID0gbmV3IE1hcCgpO1xuICBjb25zdCBuYW1pbmdQYXR0ZXJucyA9IG5ldyBNYXAoKTtcbiAgY29uc3QgdXJsUGF0dGVybnMgPSBuZXcgTWFwKCk7XG5cbiAgZmlsdGVyZWRQb2ludHMuZm9yRWFjaCgocG9pbnQ6IGFueSkgPT4ge1xuICAgIC8vIEZpbGUgdHlwZSBhbmFseXNpc1xuICAgIGlmIChwb2ludC5wYXlsb2FkPy5maWxlX25hbWUpIHtcbiAgICAgIGNvbnN0IGV4dCA9IHBvaW50LnBheWxvYWQuZmlsZV9uYW1lLnNwbGl0KFwiLlwiKS5wb3AoKT8udG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChleHQpIHtcbiAgICAgICAgZmlsZVR5cGVzLnNldChleHQsIChmaWxlVHlwZXMuZ2V0KGV4dCkgfHwgMCkgKyAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gTmFtaW5nIHBhdHRlcm4gYW5hbHlzaXNcbiAgICAgIGNvbnN0IG5hbWVQYXR0ZXJuID0gcG9pbnQucGF5bG9hZC5maWxlX25hbWVcbiAgICAgICAgLnJlcGxhY2UoL1xcZCsvZywgXCIjXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXC4oanBnfGpwZWd8cG5nfGdpZnx3ZWJwKSQvaSwgXCJcIik7XG4gICAgICBuYW1pbmdQYXR0ZXJucy5zZXQoXG4gICAgICAgIG5hbWVQYXR0ZXJuLFxuICAgICAgICAobmFtaW5nUGF0dGVybnMuZ2V0KG5hbWVQYXR0ZXJuKSB8fCAwKSArIDFcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVVJMIHBhdHRlcm4gYW5hbHlzaXNcbiAgICBpZiAocG9pbnQucGF5bG9hZD8udXJsKSB7XG4gICAgICBjb25zdCBkb21haW4gPSBwb2ludC5wYXlsb2FkLnVybC5zcGxpdChcIi9cIilbMl07XG4gICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgIHVybFBhdHRlcm5zLnNldChkb21haW4sICh1cmxQYXR0ZXJucy5nZXQoZG9tYWluKSB8fCAwKSArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhcnRpc3Q6IGZpbHRlcj8ubmFtZSB8fCBcInVua25vd25cIixcbiAgICB0b3RhbF9pbWFnZXM6IGZpbHRlcmVkUG9pbnRzLmxlbmd0aCxcbiAgICBmaWxlX3R5cGVfZGlzdHJpYnV0aW9uOiBPYmplY3QuZnJvbUVudHJpZXMoZmlsZVR5cGVzKSxcbiAgICBjb21tb25fbmFtaW5nX3BhdHRlcm5zOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBBcnJheS5mcm9tKG5hbWluZ1BhdHRlcm5zLmVudHJpZXMoKSlcbiAgICAgICAgLmZpbHRlcigoW18sIGNvdW50XSkgPT4gY291bnQgPiAxKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pXG4gICAgICAgIC5zbGljZSgwLCA1KVxuICAgICksXG4gICAgc291cmNlX2RvbWFpbnM6IE9iamVjdC5mcm9tRW50cmllcyh1cmxQYXR0ZXJucyksXG4gICAgc2FtcGxlX2ltYWdlczogZmlsdGVyZWRQb2ludHMuc2xpY2UoMCwgMTApLm1hcCgocG9pbnQ6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBwb2ludC5pZCxcbiAgICAgIGZpbGVuYW1lOiBwb2ludC5wYXlsb2FkPy5maWxlX25hbWUsXG4gICAgICBpbWFnZV91cmw6IHBvaW50LnBheWxvYWQ/LmltYWdlX3VybCxcbiAgICB9KSksXG4gIH07XG59XG5cbi8vIE5ldyBmdW5jdGlvbiB0byBjb3VudCBzcGVjaWZpYyBhcnRpc3QgaW1hZ2VzIGFjcm9zcyBhbGwgY29sbGVjdGlvbnNcbmFzeW5jIGZ1bmN0aW9uIGNvdW50SW1hZ2VzQnlBcnRpc3RBY3Jvc3NEYXRhYmFzZShmaWx0ZXI6IGFueSk6IFByb21pc2U8e1xuICBjb3VudDogbnVtYmVyO1xuICBhcnRpc3Q6IHN0cmluZztcbiAgYnlfY29sbGVjdGlvbjogQXJyYXk8eyBjb2xsZWN0aW9uOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT47XG59PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zRGF0YSA9IGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuICBjb25zdCByZXN1bHRzQnlDb2xsZWN0aW9uOiBBcnJheTx7IGNvbGxlY3Rpb246IHN0cmluZzsgY291bnQ6IG51bWJlciB9PiA9IFtdO1xuICBsZXQgdG90YWxDb3VudCA9IDA7XG5cbiAgZm9yIChjb25zdCBjb2xsZWN0aW9uIG9mIGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICBpZiAoY29sbGVjdGlvbi52ZWN0b3JzX2NvdW50ICYmIGNvbGxlY3Rpb24udmVjdG9yc19jb3VudCA+IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY291bnRJbWFnZXNCeUFydGlzdChjb2xsZWN0aW9uLm5hbWUsIGZpbHRlcik7XG4gICAgICAgIGlmIChyZXN1bHQuY291bnQgPiAwKSB7XG4gICAgICAgICAgcmVzdWx0c0J5Q29sbGVjdGlvbi5wdXNoKHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICAgIGNvdW50OiByZXN1bHQuY291bnQsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdG90YWxDb3VudCArPSByZXN1bHQuY291bnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgRmFpbGVkIHRvIGNvdW50IGltYWdlcyBpbiBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbi5uYW1lfTpgLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvdW50OiB0b3RhbENvdW50LFxuICAgIGFydGlzdDogZmlsdGVyPy5uYW1lIHx8IFwidW5rbm93blwiLFxuICAgIGJ5X2NvbGxlY3Rpb246IHJlc3VsdHNCeUNvbGxlY3Rpb24sXG4gIH07XG59XG5cbi8vIE5ldyBmdW5jdGlvbiB0byBzdW1tYXJpemUgYXJ0aXN0IHdvcmsgYWNyb3NzIGFsbCBjb2xsZWN0aW9uc1xuYXN5bmMgZnVuY3Rpb24gc3VtbWFyaXplQXJ0aXN0QWNyb3NzRGF0YWJhc2UoXG4gIGZpbHRlcjogYW55LFxuICBsaW1pdDogbnVtYmVyXG4pOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCBjb2xsZWN0aW9uc0RhdGEgPSBhd2FpdCBsaXN0Q29sbGVjdGlvbnMoKTtcbiAgY29uc3QgYWxsSW1hZ2VzOiBhbnlbXSA9IFtdO1xuICBjb25zdCBjb2xsZWN0aW9uU3VtbWFyaWVzOiBhbnlbXSA9IFtdO1xuICBjb25zdCBmaWxlVHlwZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgJiYgY29sbGVjdGlvbi52ZWN0b3JzX2NvdW50ID4gMCkge1xuICAgICAgICBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgc3VtbWFyaXplQXJ0aXN0V29yayhjb2xsZWN0aW9uLm5hbWUsIGZpbHRlciwgNTApO1xuICAgICAgICBpZiAoc3VtbWFyeS50b3RhbF9pbWFnZXMgPiAwKSB7XG4gICAgICAgICAgY29sbGVjdGlvblN1bW1hcmllcy5wdXNoKHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICAgIC4uLnN1bW1hcnksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYWxsSW1hZ2VzLnB1c2goLi4uc3VtbWFyeS5pbWFnZXMpO1xuICAgICAgICAgIHN1bW1hcnkuZmlsZV90eXBlcz8uZm9yRWFjaCgodHlwZTogc3RyaW5nKSA9PiBmaWxlVHlwZXMuYWRkKHR5cGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBGYWlsZWQgdG8gc3VtbWFyaXplIGFydGlzdCB3b3JrIGluIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uLm5hbWV9OmAsXG4gICAgICAgIGVycm9yXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHRvdGFsSW1hZ2VzID0gYWxsSW1hZ2VzLmxlbmd0aDtcbiAgY29uc3QgZGlzcGxheWVkSW1hZ2VzID0gYWxsSW1hZ2VzLnNsaWNlKDAsIGxpbWl0KTtcblxuICByZXR1cm4ge1xuICAgIGFydGlzdDogZmlsdGVyPy5uYW1lIHx8IFwidW5rbm93blwiLFxuICAgIHRvdGFsX2ltYWdlczogdG90YWxJbWFnZXMsXG4gICAgZGlzcGxheWVkX2ltYWdlczogZGlzcGxheWVkSW1hZ2VzLmxlbmd0aCxcbiAgICBjb2xsZWN0aW9uc19mb3VuZDogY29sbGVjdGlvblN1bW1hcmllcy5sZW5ndGgsXG4gICAgZmlsZV90eXBlczogQXJyYXkuZnJvbShmaWxlVHlwZXMpLFxuICAgIGJ5X2NvbGxlY3Rpb246IGNvbGxlY3Rpb25TdW1tYXJpZXMubWFwKChzdW1tYXJ5KSA9PiAoe1xuICAgICAgY29sbGVjdGlvbjogc3VtbWFyeS5jb2xsZWN0aW9uLFxuICAgICAgaW1hZ2VfY291bnQ6IHN1bW1hcnkudG90YWxfaW1hZ2VzLFxuICAgICAgc2FtcGxlX2ZpbGVuYW1lczogc3VtbWFyeS5zYW1wbGVfZmlsZW5hbWVzPy5zbGljZSgwLCAzKSxcbiAgICB9KSksXG4gICAgc2FtcGxlX2ltYWdlczogZGlzcGxheWVkSW1hZ2VzLm1hcCgoaW1hZ2U6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBpbWFnZS5pZCxcbiAgICAgIGZpbGVuYW1lOiBpbWFnZS5maWxlbmFtZSxcbiAgICAgIGltYWdlX3VybDogaW1hZ2UuaW1hZ2VfdXJsLFxuICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvblN1bW1hcmllcy5maW5kKChjKSA9PlxuICAgICAgICBjLmltYWdlcz8uc29tZSgoaW1nOiBhbnkpID0+IGltZy5pZCA9PT0gaW1hZ2UuaWQpXG4gICAgICApPy5jb2xsZWN0aW9uLFxuICAgIH0pKSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJHb29nbGVHZW5lcmF0aXZlQUkiLCJjbGllbnQiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJnZW5BSSIsIkdFTUlOSV9BUElfS0VZIiwicHJvY2Vzc05hdHVyYWxRdWVyeSIsImNvbGxlY3Rpb24iLCJxdWVzdGlvbiIsInByb3ZpZGVyIiwibW9kZWwiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiaW50ZW50IiwicGFyc2VRdWVyeUludGVudCIsImZpbmFsQ29sbGVjdGlvbiIsImV4dHJhY3RlZENvbGxlY3Rpb24iLCJyZXN1bHQiLCJleGVjdXRlUXVlcnkiLCJhbnN3ZXIiLCJnZW5lcmF0ZVJlc3BvbnNlIiwiZXhlY3V0aW9uX3RpbWVfbXMiLCJxdWVyeV90eXBlIiwidHlwZSIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJmYWxsYmFja0Fuc3dlciIsImdlbmVyYXRlRmFsbGJhY2tSZXNwb25zZSIsImluZmVySW50ZW50RnJvbVF1ZXN0aW9uIiwiY291bnQiLCJmYWxsYmFja0ludGVudCIsImxvZyIsInN5c3RlbVByb21wdCIsInJlc3BvbnNlIiwiZ2VtaW5pTW9kZWwiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJnZW5lcmF0ZUNvbnRlbnQiLCJ0ZXh0IiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsImNob2ljZXMiLCJtZXNzYWdlIiwiRXJyb3IiLCJqc29uTWF0Y2giLCJtYXRjaCIsImpzb25TdHIiLCJKU09OIiwicGFyc2UiLCJlIiwid2FybiIsInEiLCJ0b0xvd2VyQ2FzZSIsImV4dHJhY3RDb2xsZWN0aW9uRnJvbVF1ZXN0aW9uIiwiYXJ0aXN0TWF0Y2giLCJhcnRpc3ROYW1lIiwidHJpbSIsImluY2x1ZGVzIiwidGFyZ2V0Iiwic2NvcGUiLCJmaWx0ZXIiLCJuYW1lIiwibGltaXQiLCJmYWxsYmFja0FydGlzdE1hdGNoIiwicGF0dGVybnMiLCJwYXR0ZXJuIiwibWF0Y2hlcyIsIm1hdGNoQWxsIiwiY2FuZGlkYXRlIiwiY29tbW9uQ29sbGVjdGlvbk5hbWVzIiwidW5kZWZpbmVkIiwiZXhlY3V0ZURhdGFiYXNlUXVlcnkiLCJleGVjdXRlQ29sbGVjdGlvblF1ZXJ5IiwiY291bnRDb2xsZWN0aW9ucyIsImNvdW50QXJ0aXN0c0Fjcm9zc0RhdGFiYXNlIiwiY291bnRJbWFnZXNCeUFydGlzdEFjcm9zc0RhdGFiYXNlIiwiY291bnRUb3RhbFZlY3RvcnNBY3Jvc3NEYXRhYmFzZSIsImxpc3RDb2xsZWN0aW9ucyIsImRlc2NyaWJlRGF0YWJhc2VJbmZvIiwic2VhcmNoQWNyb3NzQ29sbGVjdGlvbnMiLCJzdW1tYXJpemVBcnRpc3RBY3Jvc3NEYXRhYmFzZSIsImxpc3RBcnRpc3RzQWNyb3NzRGF0YWJhc2UiLCJjb3VudFVuaXF1ZUFydGlzdHMiLCJjb3VudEltYWdlc0J5QXJ0aXN0IiwiY291bnRUb3RhbCIsInNlYXJjaEltYWdlcyIsInN1bW1hcml6ZUFydGlzdFdvcmsiLCJhbmFseXplQXJ0aXN0V29yayIsImxpc3RVbmlxdWVBcnRpc3RzIiwibGlzdEltYWdlcyIsImZpbHRlckltYWdlcyIsImRlc2NyaWJlQ29sbGVjdGlvbiIsImNvbGxlY3Rpb25zSW5mbyIsImdldENvbGxlY3Rpb25zIiwiY29sbGVjdGlvbnMiLCJtYXAiLCJjIiwibGVuZ3RoIiwiZGV0YWlsZWRDb2xsZWN0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJjb3VudFJlc3VsdCIsInZlY3RvcnNfY291bnQiLCJjb2xsZWN0aW9uc0RhdGEiLCJ0b3RhbFZlY3RvcnMiLCJyZWR1Y2UiLCJzdW0iLCJjb2wiLCJ0b3RhbF9jb2xsZWN0aW9ucyIsInRvdGFsX3ZlY3RvcnMiLCJhbGxSZXN1bHRzIiwicmVzdWx0cyIsImltYWdlcyIsInB1c2giLCJ0b3RhbENvdW50IiwidG90YWxfY291bnQiLCJjb2xsZWN0aW9uc19zZWFyY2hlZCIsInJlc3VsdHNfYnlfY29sbGVjdGlvbiIsInNjcm9sbCIsIndpdGhfcGF5bG9hZCIsIndpdGhfdmVjdG9yIiwiYXJ0aXN0cyIsIlNldCIsInBvaW50cyIsInBvaW50IiwicGF5bG9hZCIsIkJvb2xlYW4iLCJzaXplIiwiQXJyYXkiLCJmcm9tIiwic2xpY2UiLCJmaWx0ZXJlZFBvaW50cyIsIk9iamVjdCIsImVudHJpZXMiLCJldmVyeSIsImtleSIsInZhbHVlIiwibGltaXRlZFBvaW50cyIsImlkIiwiYXJ0aXN0IiwiZmlsZW5hbWUiLCJmaWxlX25hbWUiLCJhcnRpc3RzRGF0YSIsInNhbXBsZUltYWdlcyIsInRvdGFsX2ltYWdlcyIsInVuaXF1ZV9hcnRpc3RzIiwic2FtcGxlX2FydGlzdHMiLCJzYW1wbGVfaW1hZ2VzIiwiZmFsbGJhY2tSZXNwb25zZSIsInN0cmluZ2lmeSIsIm1heF90b2tlbnMiLCJqb2luIiwiYnlfY29sbGVjdGlvbiIsImNvbGxlY3Rpb25zX2ZvdW5kIiwiZmlsZV90eXBlcyIsImltYWdlX2NvdW50IiwiaW1nIiwic2FtcGxlX2ZpbGVuYW1lcyIsImkiLCJmaWxlX3R5cGVfZGlzdHJpYnV0aW9uIiwiY29tbW9uX25hbWluZ19wYXR0ZXJucyIsImtleXMiLCJzb3VyY2VfZG9tYWlucyIsImFsbEFydGlzdHMiLCJmb3JFYWNoIiwiYWRkIiwiYnlDb2xsZWN0aW9uIiwiTWF0aCIsIm1pbiIsInVybCIsImltYWdlX3VybCIsImZpbGVFeHRlbnNpb25zIiwiZmlsZU5hbWVzIiwiaW1hZ2VVcmxzIiwiZXh0Iiwic3BsaXQiLCJwb3AiLCJkaXNwbGF5ZWRfaW1hZ2VzIiwic2FtcGxlX3VybHMiLCJzdHlsZV91cmwiLCJmaWxlVHlwZXMiLCJNYXAiLCJuYW1pbmdQYXR0ZXJucyIsInVybFBhdHRlcm5zIiwic2V0IiwiZ2V0IiwibmFtZVBhdHRlcm4iLCJyZXBsYWNlIiwiZG9tYWluIiwiZnJvbUVudHJpZXMiLCJfIiwic29ydCIsImEiLCJiIiwicmVzdWx0c0J5Q29sbGVjdGlvbiIsImFsbEltYWdlcyIsImNvbGxlY3Rpb25TdW1tYXJpZXMiLCJzdW1tYXJ5IiwidG90YWxJbWFnZXMiLCJkaXNwbGF5ZWRJbWFnZXMiLCJpbWFnZSIsImZpbmQiLCJzb21lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/qdrant/nlp-query.ts\n");

/***/ }),

/***/ "(api)/./lib/types.ts":
/*!**********************!*\
  !*** ./lib/types.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AVAILABLE_MODELS\": () => (/* binding */ AVAILABLE_MODELS)\n/* harmony export */ });\n// Available models\nconst AVAILABLE_MODELS = {\n    // OpenAI models (latest first)\n    o1: {\n        provider: \"openai\",\n        name: \"GPT-o1 (Reasoning)\"\n    },\n    \"o1-mini\": {\n        provider: \"openai\",\n        name: \"GPT-o1 Mini\"\n    },\n    \"gpt-4o\": {\n        provider: \"openai\",\n        name: \"GPT-4o\"\n    },\n    \"gpt-4o-mini\": {\n        provider: \"openai\",\n        name: \"GPT-4o Mini\"\n    },\n    \"gpt-4-turbo\": {\n        provider: \"openai\",\n        name: \"GPT-4 Turbo\"\n    },\n    \"gpt-3.5-turbo\": {\n        provider: \"openai\",\n        name: \"GPT-3.5 Turbo\"\n    },\n    // Gemini models\n    \"gemini-2.0-flash\": {\n        provider: \"gemini\",\n        name: \"Gemini 2.0 Flash\"\n    },\n    \"gemini-2.0-flash-lite\": {\n        provider: \"gemini\",\n        name: \"Gemini 2.0 Flash-Lite\"\n    },\n    \"gemini-2.5-flash\": {\n        provider: \"gemini\",\n        name: \"Gemini 2.5 Flash\"\n    },\n    \"gemini-2.5-pro\": {\n        provider: \"gemini\",\n        name: \"Gemini 2.5 Pro\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdHlwZXMudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQXdCQSxtQkFBbUI7QUFDWixNQUFNQSxnQkFBZ0IsR0FBRztJQUM5QiwrQkFBK0I7SUFDL0JDLEVBQUUsRUFBRTtRQUFFQyxRQUFRLEVBQUUsUUFBUTtRQUFFQyxJQUFJLEVBQUUsb0JBQW9CO0tBQUU7SUFDdEQsU0FBUyxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxhQUFhO0tBQUU7SUFDdEQsUUFBUSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxRQUFRO0tBQUU7SUFDaEQsYUFBYSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxhQUFhO0tBQUU7SUFDMUQsYUFBYSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxhQUFhO0tBQUU7SUFDMUQsZUFBZSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxlQUFlO0tBQUU7SUFFOUQsZ0JBQWdCO0lBQ2hCLGtCQUFrQixFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxrQkFBa0I7S0FBRTtJQUNwRSx1QkFBdUIsRUFBRTtRQUN2QkQsUUFBUSxFQUFFLFFBQVE7UUFDbEJDLElBQUksRUFBRSx1QkFBdUI7S0FDOUI7SUFDRCxrQkFBa0IsRUFBRTtRQUFFRCxRQUFRLEVBQUUsUUFBUTtRQUFFQyxJQUFJLEVBQUUsa0JBQWtCO0tBQUU7SUFDcEUsZ0JBQWdCLEVBQUU7UUFBRUQsUUFBUSxFQUFFLFFBQVE7UUFBRUMsSUFBSSxFQUFFLGdCQUFnQjtLQUFFO0NBQ2pFLENBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95ZWFybi8uL2xpYi90eXBlcy50cz8yYTU1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgTmF0dXJhbFF1ZXJ5UmVxdWVzdCB7XG4gIGNvbGxlY3Rpb24/OiBzdHJpbmc7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIG1vZGVsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5hdHVyYWxRdWVyeVJlc3BvbnNlIHtcbiAgcXVlc3Rpb246IHN0cmluZztcbiAgYW5zd2VyOiBzdHJpbmc7XG4gIHF1ZXJ5X3R5cGU6IHN0cmluZztcbiAgZGF0YT86IGFueTtcbiAgZXhlY3V0aW9uX3RpbWVfbXM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaGF0TWVzc2FnZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6IFwidXNlclwiIHwgXCJhc3Npc3RhbnRcIjtcbiAgY29udGVudDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHF1ZXJ5VHlwZT86IHN0cmluZztcbiAgZXhlY3V0aW9uVGltZT86IG51bWJlcjtcbiAgZGF0YT86IGFueTtcbn1cblxuLy8gQXZhaWxhYmxlIG1vZGVsc1xuZXhwb3J0IGNvbnN0IEFWQUlMQUJMRV9NT0RFTFMgPSB7XG4gIC8vIE9wZW5BSSBtb2RlbHMgKGxhdGVzdCBmaXJzdClcbiAgbzE6IHsgcHJvdmlkZXI6IFwib3BlbmFpXCIsIG5hbWU6IFwiR1BULW8xIChSZWFzb25pbmcpXCIgfSxcbiAgXCJvMS1taW5pXCI6IHsgcHJvdmlkZXI6IFwib3BlbmFpXCIsIG5hbWU6IFwiR1BULW8xIE1pbmlcIiB9LFxuICBcImdwdC00b1wiOiB7IHByb3ZpZGVyOiBcIm9wZW5haVwiLCBuYW1lOiBcIkdQVC00b1wiIH0sXG4gIFwiZ3B0LTRvLW1pbmlcIjogeyBwcm92aWRlcjogXCJvcGVuYWlcIiwgbmFtZTogXCJHUFQtNG8gTWluaVwiIH0sXG4gIFwiZ3B0LTQtdHVyYm9cIjogeyBwcm92aWRlcjogXCJvcGVuYWlcIiwgbmFtZTogXCJHUFQtNCBUdXJib1wiIH0sXG4gIFwiZ3B0LTMuNS10dXJib1wiOiB7IHByb3ZpZGVyOiBcIm9wZW5haVwiLCBuYW1lOiBcIkdQVC0zLjUgVHVyYm9cIiB9LFxuXG4gIC8vIEdlbWluaSBtb2RlbHNcbiAgXCJnZW1pbmktMi4wLWZsYXNoXCI6IHsgcHJvdmlkZXI6IFwiZ2VtaW5pXCIsIG5hbWU6IFwiR2VtaW5pIDIuMCBGbGFzaFwiIH0sXG4gIFwiZ2VtaW5pLTIuMC1mbGFzaC1saXRlXCI6IHtcbiAgICBwcm92aWRlcjogXCJnZW1pbmlcIixcbiAgICBuYW1lOiBcIkdlbWluaSAyLjAgRmxhc2gtTGl0ZVwiLFxuICB9LFxuICBcImdlbWluaS0yLjUtZmxhc2hcIjogeyBwcm92aWRlcjogXCJnZW1pbmlcIiwgbmFtZTogXCJHZW1pbmkgMi41IEZsYXNoXCIgfSxcbiAgXCJnZW1pbmktMi41LXByb1wiOiB7IHByb3ZpZGVyOiBcImdlbWluaVwiLCBuYW1lOiBcIkdlbWluaSAyLjUgUHJvXCIgfSxcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIE1vZGVsS2V5ID0ga2V5b2YgdHlwZW9mIEFWQUlMQUJMRV9NT0RFTFM7XG5leHBvcnQgdHlwZSBFbWJlZGRpbmdQcm92aWRlciA9IFwib3BlbmFpXCIgfCBcImdlbWluaVwiO1xuIl0sIm5hbWVzIjpbIkFWQUlMQUJMRV9NT0RFTFMiLCJvMSIsInByb3ZpZGVyIiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/types.ts\n");

/***/ }),

/***/ "(api)/./pages/api/ask.ts":
/*!**************************!*\
  !*** ./pages/api/ask.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/qdrant/nlp-query */ \"(api)/./lib/qdrant/nlp-query.ts\");\n/* harmony import */ var _lib_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/types */ \"(api)/./lib/types.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n    // Enable CORS\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET, POST, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type\");\n    if (req.method === \"OPTIONS\") {\n        res.status(200).end();\n        return;\n    }\n    if (req.method !== \"POST\") {\n        res.setHeader(\"Allow\", [\n            \"POST\"\n        ]);\n        res.status(405).json({\n            error: `Method ${req.method} Not Allowed`\n        });\n        return;\n    }\n    try {\n        const { collection , question , model  } = req.body;\n        if (!question) {\n            res.status(400).json({\n                error: \"Missing required field: question\"\n            });\n            return;\n        }\n        // Determine provider from model, default to gemini-2.0-flash\n        const selectedModel = model || \"gemini-2.0-flash\";\n        const modelInfo = _lib_types__WEBPACK_IMPORTED_MODULE_1__.AVAILABLE_MODELS[selectedModel];\n        const provider = modelInfo?.provider || \"gemini\";\n        console.log(`Processing natural language query: \"${question}\" for collection: ${collection || \"database-level\"} using model: ${selectedModel}`);\n        const result = await (0,_lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__.processNaturalQuery)(collection || null, question, provider, selectedModel // Pass the specific model\n        );\n        // Transform the result to match NaturalQueryResponse interface\n        const response = {\n            question,\n            answer: result.answer,\n            query_type: result.query_type,\n            data: result.data,\n            execution_time_ms: result.execution_time_ms\n        };\n        res.status(200).json(response);\n    } catch (error) {\n        console.error(\"Error processing natural language query:\", error);\n        res.status(500).json({\n            error: error instanceof Error ? error.message : \"Internal server error\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Iiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWVhcm4vLi9wYWdlcy9hcGkvYXNrLnRzPzY2NDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IHByb2Nlc3NOYXR1cmFsUXVlcnkgfSBmcm9tIFwiLi4vLi4vbGliL3FkcmFudC9ubHAtcXVlcnlcIjtcbmltcG9ydCB7XG4gIE5hdHVyYWxRdWVyeVJlcXVlc3QsXG4gIE5hdHVyYWxRdWVyeVJlc3BvbnNlLFxuICBBVkFJTEFCTEVfTU9ERUxTLFxufSBmcm9tIFwiLi4vLi4vbGliL3R5cGVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlPE5hdHVyYWxRdWVyeVJlc3BvbnNlIHwgeyBlcnJvcjogc3RyaW5nIH0+XG4pIHtcbiAgLy8gRW5hYmxlIENPUlNcbiAgcmVzLnNldEhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiLCBcIipcIik7XG4gIHJlcy5zZXRIZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzXCIsIFwiR0VULCBQT1NULCBPUFRJT05TXCIpO1xuICByZXMuc2V0SGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyc1wiLCBcIkNvbnRlbnQtVHlwZVwiKTtcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gXCJPUFRJT05TXCIpIHtcbiAgICByZXMuc3RhdHVzKDIwMCkuZW5kKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHJlcS5tZXRob2QgIT09IFwiUE9TVFwiKSB7XG4gICAgcmVzLnNldEhlYWRlcihcIkFsbG93XCIsIFtcIlBPU1RcIl0pO1xuICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb24sIHF1ZXN0aW9uLCBtb2RlbCB9ID0gcmVxLmJvZHkgYXMgTmF0dXJhbFF1ZXJ5UmVxdWVzdDtcblxuICAgIGlmICghcXVlc3Rpb24pIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiTWlzc2luZyByZXF1aXJlZCBmaWVsZDogcXVlc3Rpb25cIixcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSBwcm92aWRlciBmcm9tIG1vZGVsLCBkZWZhdWx0IHRvIGdlbWluaS0yLjAtZmxhc2hcbiAgICBjb25zdCBzZWxlY3RlZE1vZGVsID0gbW9kZWwgfHwgXCJnZW1pbmktMi4wLWZsYXNoXCI7XG4gICAgY29uc3QgbW9kZWxJbmZvID1cbiAgICAgIEFWQUlMQUJMRV9NT0RFTFNbc2VsZWN0ZWRNb2RlbCBhcyBrZXlvZiB0eXBlb2YgQVZBSUxBQkxFX01PREVMU107XG4gICAgY29uc3QgcHJvdmlkZXIgPSBtb2RlbEluZm8/LnByb3ZpZGVyIHx8IFwiZ2VtaW5pXCI7XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBQcm9jZXNzaW5nIG5hdHVyYWwgbGFuZ3VhZ2UgcXVlcnk6IFwiJHtxdWVzdGlvbn1cIiBmb3IgY29sbGVjdGlvbjogJHtcbiAgICAgICAgY29sbGVjdGlvbiB8fCBcImRhdGFiYXNlLWxldmVsXCJcbiAgICAgIH0gdXNpbmcgbW9kZWw6ICR7c2VsZWN0ZWRNb2RlbH1gXG4gICAgKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2Nlc3NOYXR1cmFsUXVlcnkoXG4gICAgICBjb2xsZWN0aW9uIHx8IG51bGwsIC8vIEFsbG93IG51bGwgZm9yIGRhdGFiYXNlLWxldmVsIHF1ZXJpZXNcbiAgICAgIHF1ZXN0aW9uLFxuICAgICAgcHJvdmlkZXIsXG4gICAgICBzZWxlY3RlZE1vZGVsIC8vIFBhc3MgdGhlIHNwZWNpZmljIG1vZGVsXG4gICAgKTtcblxuICAgIC8vIFRyYW5zZm9ybSB0aGUgcmVzdWx0IHRvIG1hdGNoIE5hdHVyYWxRdWVyeVJlc3BvbnNlIGludGVyZmFjZVxuICAgIGNvbnN0IHJlc3BvbnNlOiBOYXR1cmFsUXVlcnlSZXNwb25zZSA9IHtcbiAgICAgIHF1ZXN0aW9uLFxuICAgICAgYW5zd2VyOiByZXN1bHQuYW5zd2VyLFxuICAgICAgcXVlcnlfdHlwZTogcmVzdWx0LnF1ZXJ5X3R5cGUsXG4gICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICAgIGV4ZWN1dGlvbl90aW1lX21zOiByZXN1bHQuZXhlY3V0aW9uX3RpbWVfbXMsXG4gICAgfTtcblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3BvbnNlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBuYXR1cmFsIGxhbmd1YWdlIHF1ZXJ5OlwiLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInByb2Nlc3NOYXR1cmFsUXVlcnkiLCJBVkFJTEFCTEVfTU9ERUxTIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInNldEhlYWRlciIsIm1ldGhvZCIsInN0YXR1cyIsImVuZCIsImpzb24iLCJlcnJvciIsImNvbGxlY3Rpb24iLCJxdWVzdGlvbiIsIm1vZGVsIiwiYm9keSIsInNlbGVjdGVkTW9kZWwiLCJtb2RlbEluZm8iLCJwcm92aWRlciIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJyZXNwb25zZSIsImFuc3dlciIsInF1ZXJ5X3R5cGUiLCJkYXRhIiwiZXhlY3V0aW9uX3RpbWVfbXMiLCJFcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/ask.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/ask.ts"));
module.exports = __webpack_exports__;

})();