"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/ask";
exports.ids = ["pages/api/ask"];
exports.modules = {

/***/ "@google/generative-ai":
/*!****************************************!*\
  !*** external "@google/generative-ai" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@google/generative-ai");;

/***/ }),

/***/ "@qdrant/js-client-rest":
/*!*****************************************!*\
  !*** external "@qdrant/js-client-rest" ***!
  \*****************************************/
/***/ ((module) => {

module.exports = import("@qdrant/js-client-rest");;

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./lib/qdrant/db.ts":
/*!**************************!*\
  !*** ./lib/qdrant/db.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"client\": () => (/* binding */ client),\n/* harmony export */   \"createCollection\": () => (/* binding */ createCollection),\n/* harmony export */   \"testConnection\": () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var _qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @qdrant/js-client-rest */ \"@qdrant/js-client-rest\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__]);\n_qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Initialize client with support for both local and cloud instances\nconst qdrantUrl = \"https://1555b3af-2ea7-409c-83a3-3a49207ac217.us-east4-0.gcp.cloud.qdrant.io:6333\" || 0;\nconst qdrantApiKey = process.env.QDRANT_API_KEY;\nlet clientConfig;\n// For cloud instances, use the recommended format from documentation\nif (qdrantApiKey) {\n    // Parse the URL to extract host\n    const url = new URL(qdrantUrl);\n    const host = url.hostname;\n    const isHttps = url.protocol === \"https:\";\n    clientConfig = {\n        host: host,\n        port: null,\n        https: isHttps,\n        apiKey: qdrantApiKey\n    };\n    console.log(`Connecting to Qdrant Cloud at ${host} (HTTPS: ${isHttps})`);\n} else {\n    // For local instances without API key\n    clientConfig = {\n        url: qdrantUrl\n    };\n    console.log(`Connecting to local Qdrant at ${qdrantUrl}`);\n}\nconst client = new _qdrant_js_client_rest__WEBPACK_IMPORTED_MODULE_0__.QdrantClient(clientConfig);\n\n// Test Qdrant connection\nasync function testConnection() {\n    try {\n        // Use getCollections as a simple health check\n        await client.getCollections();\n        console.log(\"Qdrant connection successful\");\n        return true;\n    } catch (error) {\n        console.error(\"Qdrant connection failed:\", error);\n        return false;\n    }\n}\nasync function createCollection(name = \"my_collection\", dimension = 768) {\n    try {\n        // First test the connection\n        const isConnected = await testConnection();\n        if (!isConnected) {\n            throw new Error(\"Cannot connect to Qdrant database. Please check your configuration.\");\n        }\n        // Check if collection already exists\n        try {\n            await client.getCollection(name);\n            console.log(`Collection \"${name}\" already exists`);\n            return;\n        } catch (error) {\n            // Collection doesn't exist, create it\n            console.log(`Collection \"${name}\" does not exist, creating...`);\n            // Check if it's a different error than \"not found\"\n            if (error.status && error.status !== 404) {\n                console.error(\"Unexpected error checking collection:\", error);\n                throw error;\n            }\n        }\n        await client.createCollection(name, {\n            vectors: {\n                size: dimension,\n                distance: \"Cosine\"\n            }\n        });\n        console.log(`Collection \"${name}\" created successfully with dimension ${dimension}`);\n    } catch (error1) {\n        console.error(`Error creating collection \"${name}\":`, error1);\n        // Provide more specific error messages\n        if (error1.message?.includes(\"authentication\") || error1.status === 401 || error1.status === 403) {\n            throw new Error(\"Authentication failed. Please check your QDRANT_API_KEY and QDRANT_URL.\");\n        } else if (error1.message?.includes(\"connection\") || error1.code === \"ECONNREFUSED\") {\n            throw new Error(\"Cannot connect to Qdrant. Please check your QDRANT_URL.\");\n        } else {\n            throw error1;\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2xDTSxPQUFPLEVBQUU7Z0JBQ1BDLElBQUksRUFBRU4sU0FBUztnQkFDZk8sUUFBUSxFQUFFLFFBQVE7YUFDbkI7U0FDRixDQUFDLENBQUM7UUFFSGYsT0FBTyxDQUFDQyxHQUFHLENBQ1QsQ0FBQyxZQUFZLEVBQUVNLElBQUksQ0FBQyxzQ0FBc0MsRUFBRUMsU0FBUyxDQUFDLENBQUMsQ0FDeEUsQ0FBQztJQUNKLEVBQUUsT0FBT0gsTUFBSyxFQUFPO1FBQ25CTCxPQUFPLENBQUNLLEtBQUssQ0FBQyxDQUFDLDJCQUEyQixFQUFFRSxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUVGLE1BQUssQ0FBQyxDQUFDO1FBRTdELHVDQUF1QztRQUN2QyxJQUNFQSxNQUFLLENBQUNXLE9BQU8sRUFBRUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLElBQ3pDWixNQUFLLENBQUNPLE1BQU0sS0FBSyxHQUFHLElBQ3BCUCxNQUFLLENBQUNPLE1BQU0sS0FBSyxHQUFHLEVBQ3BCO1lBQ0EsTUFBTSxJQUFJRixLQUFLLENBQ2IseUVBQXlFLENBQzFFLENBQUM7UUFDSixPQUFPLElBQ0xMLE1BQUssQ0FBQ1csT0FBTyxFQUFFQyxRQUFRLENBQUMsWUFBWSxDQUFDLElBQ3JDWixNQUFLLENBQUNhLElBQUksS0FBSyxjQUFjLEVBQzdCO1lBQ0EsTUFBTSxJQUFJUixLQUFLLENBQ2IseURBQXlELENBQzFELENBQUM7UUFDSixPQUFPO1lBQ0wsTUFBTUwsTUFBSyxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWVhcm4vLi9saWIvcWRyYW50L2RiLnRzPzM5NjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUWRyYW50Q2xpZW50IH0gZnJvbSBcIkBxZHJhbnQvanMtY2xpZW50LXJlc3RcIjtcblxuLy8gSW5pdGlhbGl6ZSBjbGllbnQgd2l0aCBzdXBwb3J0IGZvciBib3RoIGxvY2FsIGFuZCBjbG91ZCBpbnN0YW5jZXNcbmNvbnN0IHFkcmFudFVybCA9IHByb2Nlc3MuZW52LlFEUkFOVF9VUkwgfHwgXCJodHRwOi8vbG9jYWxob3N0OjYzMzNcIjtcbmNvbnN0IHFkcmFudEFwaUtleSA9IHByb2Nlc3MuZW52LlFEUkFOVF9BUElfS0VZO1xuXG5sZXQgY2xpZW50Q29uZmlnOiBhbnk7XG5cbi8vIEZvciBjbG91ZCBpbnN0YW5jZXMsIHVzZSB0aGUgcmVjb21tZW5kZWQgZm9ybWF0IGZyb20gZG9jdW1lbnRhdGlvblxuaWYgKHFkcmFudEFwaUtleSkge1xuICAvLyBQYXJzZSB0aGUgVVJMIHRvIGV4dHJhY3QgaG9zdFxuICBjb25zdCB1cmwgPSBuZXcgVVJMKHFkcmFudFVybCk7XG4gIGNvbnN0IGhvc3QgPSB1cmwuaG9zdG5hbWU7XG4gIGNvbnN0IGlzSHR0cHMgPSB1cmwucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XG5cbiAgY2xpZW50Q29uZmlnID0ge1xuICAgIGhvc3Q6IGhvc3QsXG4gICAgcG9ydDogbnVsbCwgLy8gVGhpcyBpcyBjcml0aWNhbCBmb3IgY2xvdWQgaW5zdGFuY2VzIC0gcHJldmVudHMgOjYzMzMgYmVpbmcgYXBwZW5kZWRcbiAgICBodHRwczogaXNIdHRwcyxcbiAgICBhcGlLZXk6IHFkcmFudEFwaUtleSxcbiAgfTtcblxuICBjb25zb2xlLmxvZyhgQ29ubmVjdGluZyB0byBRZHJhbnQgQ2xvdWQgYXQgJHtob3N0fSAoSFRUUFM6ICR7aXNIdHRwc30pYCk7XG59IGVsc2Uge1xuICAvLyBGb3IgbG9jYWwgaW5zdGFuY2VzIHdpdGhvdXQgQVBJIGtleVxuICBjbGllbnRDb25maWcgPSB7XG4gICAgdXJsOiBxZHJhbnRVcmwsXG4gIH07XG5cbiAgY29uc29sZS5sb2coYENvbm5lY3RpbmcgdG8gbG9jYWwgUWRyYW50IGF0ICR7cWRyYW50VXJsfWApO1xufVxuXG5jb25zdCBjbGllbnQgPSBuZXcgUWRyYW50Q2xpZW50KGNsaWVudENvbmZpZyk7XG5cbmV4cG9ydCB7IGNsaWVudCB9O1xuXG4vLyBUZXN0IFFkcmFudCBjb25uZWN0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgLy8gVXNlIGdldENvbGxlY3Rpb25zIGFzIGEgc2ltcGxlIGhlYWx0aCBjaGVja1xuICAgIGF3YWl0IGNsaWVudC5nZXRDb2xsZWN0aW9ucygpO1xuICAgIGNvbnNvbGUubG9nKFwiUWRyYW50IGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bFwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiUWRyYW50IGNvbm5lY3Rpb24gZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDb2xsZWN0aW9uKFxuICBuYW1lOiBzdHJpbmcgPSBcIm15X2NvbGxlY3Rpb25cIixcbiAgZGltZW5zaW9uOiBudW1iZXIgPSA3Njhcbik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIC8vIEZpcnN0IHRlc3QgdGhlIGNvbm5lY3Rpb25cbiAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IGF3YWl0IHRlc3RDb25uZWN0aW9uKCk7XG4gICAgaWYgKCFpc0Nvbm5lY3RlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbm5vdCBjb25uZWN0IHRvIFFkcmFudCBkYXRhYmFzZS4gUGxlYXNlIGNoZWNrIHlvdXIgY29uZmlndXJhdGlvbi5cIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBjb2xsZWN0aW9uIGFscmVhZHkgZXhpc3RzXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNsaWVudC5nZXRDb2xsZWN0aW9uKG5hbWUpO1xuICAgICAgY29uc29sZS5sb2coYENvbGxlY3Rpb24gXCIke25hbWV9XCIgYWxyZWFkeSBleGlzdHNgKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAvLyBDb2xsZWN0aW9uIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdFxuICAgICAgY29uc29sZS5sb2coYENvbGxlY3Rpb24gXCIke25hbWV9XCIgZG9lcyBub3QgZXhpc3QsIGNyZWF0aW5nLi4uYCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBkaWZmZXJlbnQgZXJyb3IgdGhhbiBcIm5vdCBmb3VuZFwiXG4gICAgICBpZiAoZXJyb3Iuc3RhdHVzICYmIGVycm9yLnN0YXR1cyAhPT0gNDA0KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yIGNoZWNraW5nIGNvbGxlY3Rpb246XCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgY2xpZW50LmNyZWF0ZUNvbGxlY3Rpb24obmFtZSwge1xuICAgICAgdmVjdG9yczoge1xuICAgICAgICBzaXplOiBkaW1lbnNpb24sXG4gICAgICAgIGRpc3RhbmNlOiBcIkNvc2luZVwiLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYENvbGxlY3Rpb24gXCIke25hbWV9XCIgY3JlYXRlZCBzdWNjZXNzZnVsbHkgd2l0aCBkaW1lbnNpb24gJHtkaW1lbnNpb259YFxuICAgICk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyBjb2xsZWN0aW9uIFwiJHtuYW1lfVwiOmAsIGVycm9yKTtcblxuICAgIC8vIFByb3ZpZGUgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlc1xuICAgIGlmIChcbiAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKFwiYXV0aGVudGljYXRpb25cIikgfHxcbiAgICAgIGVycm9yLnN0YXR1cyA9PT0gNDAxIHx8XG4gICAgICBlcnJvci5zdGF0dXMgPT09IDQwM1xuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZC4gUGxlYXNlIGNoZWNrIHlvdXIgUURSQU5UX0FQSV9LRVkgYW5kIFFEUkFOVF9VUkwuXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKFwiY29ubmVjdGlvblwiKSB8fFxuICAgICAgZXJyb3IuY29kZSA9PT0gXCJFQ09OTlJFRlVTRURcIlxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbm5vdCBjb25uZWN0IHRvIFFkcmFudC4gUGxlYXNlIGNoZWNrIHlvdXIgUURSQU5UX1VSTC5cIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiUWRyYW50Q2xpZW50IiwicWRyYW50VXJsIiwicHJvY2VzcyIsImVudiIsIlFEUkFOVF9VUkwiLCJxZHJhbnRBcGlLZXkiLCJRRFJBTlRfQVBJX0tFWSIsImNsaWVudENvbmZpZyIsInVybCIsIlVSTCIsImhvc3QiLCJob3N0bmFtZSIsImlzSHR0cHMiLCJwcm90b2NvbCIsInBvcnQiLCJodHRwcyIsImFwaUtleSIsImNvbnNvbGUiLCJsb2ciLCJjbGllbnQiLCJ0ZXN0Q29ubmVjdGlvbiIsImdldENvbGxlY3Rpb25zIiwiZXJyb3IiLCJjcmVhdGVDb2xsZWN0aW9uIiwibmFtZSIsImRpbWVuc2lvbiIsImlzQ29ubmVjdGVkIiwiRXJyb3IiLCJnZXRDb2xsZWN0aW9uIiwic3RhdHVzIiwidmVjdG9ycyIsInNpemUiLCJkaXN0YW5jZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImNvZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/qdrant/db.ts\n");

/***/ }),

/***/ "(api)/./lib/qdrant/nlp-query.ts":
/*!*********************************!*\
  !*** ./lib/qdrant/nlp-query.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"processNaturalQuery\": () => (/* binding */ processNaturalQuery)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @google/generative-ai */ \"@google/generative-ai\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db */ \"(api)/./lib/qdrant/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__, _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__, _db__WEBPACK_IMPORTED_MODULE_2__]);\n([openai__WEBPACK_IMPORTED_MODULE_0__, _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__, _db__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_1__.GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\n// Default configuration - can be overridden via environment variables or config\nconst DEFAULT_CONFIG = {\n    entityField: process.env.ENTITY_FIELD || \"name\",\n    entityType: process.env.ENTITY_TYPE || \"artists\",\n    itemType: process.env.ITEM_TYPE || \"images\",\n    additionalFields: {\n        filename: process.env.FILENAME_FIELD || \"file_name\",\n        url: process.env.URL_FIELD || \"image_url\",\n        description: process.env.DESCRIPTION_FIELD || \"description\"\n    }\n};\n// Helper function to get entity value from a point\nfunction getEntityValue(point, config = DEFAULT_CONFIG) {\n    return point.payload?.[config.entityField] || null;\n}\n// Helper function to get additional field values\nfunction getFieldValue(point, fieldName) {\n    return point.payload?.[fieldName] || null;\n}\nasync function processNaturalQuery(collection, question, provider = \"openai\", model, context // Add conversation context\n) {\n    const startTime = Date.now();\n    try {\n        // Step 1: Resolve context and enrich the question\n        const { enrichedQuestion , resolvedCollection , updatedContext  } = await resolveContext(question, collection, context);\n        // Step 2: Parse intent with context awareness\n        const intent = await parseQueryIntent(enrichedQuestion, provider, model, updatedContext);\n        // Step 3: Use resolved collection or extracted collection\n        const finalCollection = resolvedCollection || intent.extractedCollection || null;\n        // Step 4: Execute the appropriate operation\n        const result = await executeQuery(finalCollection, intent);\n        // Step 5: Generate natural language response\n        const answer = await generateResponse(enrichedQuestion, intent, result, provider, model);\n        // Step 6: Update conversation context\n        const finalContext = updateConversationContext(updatedContext, question, intent, result, finalCollection);\n        const execution_time_ms = Date.now() - startTime;\n        return {\n            answer,\n            query_type: intent.type,\n            data: result,\n            execution_time_ms,\n            context: finalContext\n        };\n    } catch (error) {\n        console.error(\"Error processing natural query:\", error);\n        // Create fallback response\n        const fallbackAnswer = \"I encountered an issue processing your query, but I'm using pattern matching to help. \" + generateFallbackResponse(question, inferIntentFromQuestion(question, context), {\n            count: 0\n        });\n        return {\n            answer: fallbackAnswer,\n            query_type: \"fallback\",\n            data: null,\n            execution_time_ms: Date.now() - startTime,\n            context: context || {\n                conversationHistory: []\n            }\n        };\n    }\n}\nasync function resolveContext(question, collection, context) {\n    // Initialize context if not provided\n    const currentContext = context || {\n        conversationHistory: []\n    };\n    let enrichedQuestion = question;\n    let resolvedCollection = collection;\n    console.log(\"\\uD83E\\uDDE0 CONTEXT RESOLUTION:\");\n    console.log(\"Original question:\", question);\n    console.log(\"Current context:\", JSON.stringify(currentContext, null, 2));\n    // Detect contextual references\n    const lowercaseQuestion = question.toLowerCase();\n    // Handle pronoun references to entities\n    if ((lowercaseQuestion.includes(\"their\") || lowercaseQuestion.includes(\"his\") || lowercaseQuestion.includes(\"her\") || lowercaseQuestion.includes(\"its\")) && currentContext.lastEntity) {\n        console.log(\"\\uD83D\\uDD04 Resolving possessive pronoun to:\", currentContext.lastEntity);\n        enrichedQuestion = enrichedQuestion.replace(/\\b(their|his|her|its)\\b/gi, currentContext.lastEntity + \"'s\");\n    }\n    // Handle \"he\" and \"him\" references\n    if ((lowercaseQuestion.includes(\"he \") || lowercaseQuestion.includes(\"him \") || lowercaseQuestion.includes(\" he\") || lowercaseQuestion.includes(\" him\")) && currentContext.lastEntity) {\n        console.log(\"\\uD83D\\uDD04 Resolving 'he/him' to:\", currentContext.lastEntity);\n        enrichedQuestion = enrichedQuestion.replace(/\\b(he|him)\\b/gi, currentContext.lastEntity);\n    }\n    // Handle \"also\" references\n    if (lowercaseQuestion.includes(\"also\") && currentContext.lastEntity) {\n        if (!enrichedQuestion.includes(currentContext.lastEntity)) {\n            console.log(\"\\uD83D\\uDD04 Resolving 'also' reference to:\", currentContext.lastEntity);\n            enrichedQuestion = enrichedQuestion.replace(/also/i, `also for ${currentContext.lastEntity}`);\n        }\n    }\n    // Handle \"them\" references\n    if (lowercaseQuestion.includes(\"them\") && currentContext.lastEntity) {\n        console.log(\"\\uD83D\\uDD04 Resolving 'them' to:\", currentContext.lastEntity);\n        enrichedQuestion = enrichedQuestion.replace(/\\bthem\\b/gi, currentContext.lastEntity);\n    }\n    // Handle \"they\" references\n    if (lowercaseQuestion.includes(\"they\") && currentContext.lastEntity) {\n        console.log(\"\\uD83D\\uDD04 Resolving 'they' to:\", currentContext.lastEntity);\n        enrichedQuestion = enrichedQuestion.replace(/\\bthey\\b/gi, currentContext.lastEntity);\n    }\n    // Handle \"it\" references to collections\n    if (lowercaseQuestion.includes(\"it\") && currentContext.lastCollection) {\n        console.log(\"\\uD83D\\uDD04 Resolving 'it' to collection:\", currentContext.lastCollection);\n        enrichedQuestion = enrichedQuestion.replace(/\\bit\\b/gi, currentContext.lastCollection);\n    }\n    // Handle continuation phrases\n    if ((lowercaseQuestion.includes(\"what about\") || lowercaseQuestion.includes(\"how about\") || lowercaseQuestion.includes(\"and\")) && currentContext.lastQueryType && currentContext.lastTarget) {\n        // If question is like \"what about John Doe?\", expand to full context\n        const entityMatch = question.match(/(?:what about|how about|and)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*)/i);\n        if (entityMatch) {\n            const newEntity = entityMatch[1];\n            const lastQueryType = currentContext.lastQueryType;\n            console.log(\"\\uD83D\\uDD04 Resolving continuation to:\", `${lastQueryType} ${currentContext.lastTarget} by ${newEntity}`);\n            enrichedQuestion = `${lastQueryType} ${currentContext.lastTarget} by ${newEntity}`;\n        }\n    }\n    // Resolve collection context\n    if (!resolvedCollection && currentContext.lastCollection) {\n        // If no collection specified but we have context, check if query seems collection-specific\n        if (lowercaseQuestion.includes(\"this collection\") || lowercaseQuestion.includes(\"that collection\") || lowercaseQuestion.includes(\"same collection\") || lowercaseQuestion.includes(\"the collection\") || lowercaseQuestion.includes(\"in that\") || lowercaseQuestion.includes(\"in this\") || !lowercaseQuestion.includes(\"all collections\") && !lowercaseQuestion.includes(\"database\") && !lowercaseQuestion.includes(\"across collections\")) {\n            console.log(\"\\uD83D\\uDD04 Resolving collection context to:\", currentContext.lastCollection);\n            resolvedCollection = currentContext.lastCollection;\n        }\n    }\n    // Special handling for queries that reference previous results\n    if (currentContext.conversationHistory.length > 0) {\n        const lastTurn = currentContext.conversationHistory[currentContext.conversationHistory.length - 1];\n        // If the last query returned collection-specific results, use that collection\n        if (lastTurn.result?.results_by_collection && !resolvedCollection) {\n            const collectionsWithResults = lastTurn.result.results_by_collection.filter((r)=>r.count > 0);\n            if (collectionsWithResults.length === 1) {\n                console.log(\"\\uD83D\\uDD04 Inferring collection from previous results:\", collectionsWithResults[0].collection);\n                resolvedCollection = collectionsWithResults[0].collection;\n            }\n        }\n    }\n    console.log(\"âœ… Enriched question:\", enrichedQuestion);\n    console.log(\"âœ… Resolved collection:\", resolvedCollection);\n    return {\n        enrichedQuestion,\n        resolvedCollection,\n        updatedContext: currentContext\n    };\n}\nfunction updateConversationContext(context, question, intent, result, collection) {\n    console.log(\"\\uD83D\\uDCBE UPDATING CONVERSATION CONTEXT:\");\n    console.log(\"Previous context:\", JSON.stringify(context, null, 2));\n    console.log(\"Intent:\", JSON.stringify(intent, null, 2));\n    console.log(\"Collection:\", collection);\n    // Create new conversation turn\n    const turn = {\n        id: Date.now().toString(),\n        question,\n        intent: {\n            type: intent.type,\n            target: intent.target,\n            filter: intent.filter,\n            scope: intent.scope,\n            extractedCollection: intent.extractedCollection\n        },\n        result,\n        timestamp: new Date()\n    };\n    // Update context\n    const updatedContext = {\n        ...context,\n        conversationHistory: [\n            ...context.conversationHistory,\n            turn\n        ].slice(-10)\n    };\n    // Update last entity if filter contains a name\n    if (intent.filter?.name) {\n        updatedContext.lastEntity = intent.filter.name;\n        console.log(\"\\uD83D\\uDCDD Updated lastEntity to:\", intent.filter.name);\n    }\n    // Update last collection\n    if (collection) {\n        updatedContext.lastCollection = collection;\n        console.log(\"\\uD83D\\uDCDD Updated lastCollection to:\", collection);\n    }\n    // Update last query type and target\n    updatedContext.lastQueryType = intent.type;\n    updatedContext.lastTarget = intent.target;\n    console.log(\"\\uD83D\\uDCDD Updated lastQueryType to:\", intent.type);\n    console.log(\"\\uD83D\\uDCDD Updated lastTarget to:\", intent.target);\n    // Update current topic based on query content\n    if (intent.filter?.name) {\n        updatedContext.currentTopic = `${intent.filter.name} ${intent.target}`;\n        console.log(\"\\uD83D\\uDCDD Updated currentTopic to:\", updatedContext.currentTopic);\n    }\n    console.log(\"âœ… Final updated context:\", JSON.stringify(updatedContext, null, 2));\n    return updatedContext;\n}\nasync function parseQueryIntent(question, provider, model, context) {\n    // Get available collections to help with intent parsing\n    let availableCollections = [];\n    try {\n        const collectionsData = await listCollections();\n        availableCollections = collectionsData.collections.map((c)=>c.name);\n        console.log(\"\\uD83D\\uDCCB Available collections for intent parsing:\", availableCollections);\n    } catch (error) {\n        console.warn(\"Failed to get collections for intent parsing:\", error);\n    }\n    // First try simple pattern matching as fallback\n    const fallbackIntent = inferIntentFromQuestion(question, context, availableCollections);\n    // Build context-aware system prompt\n    let systemPrompt = `You are a query intent parser for a vector database system. Parse the user's question to determine:\n1. Query type (count, search, list, filter, describe, summarize, analyze, collections, database, top, ranking)\n2. What to target (items, entities, collections, etc.)\n3. Any filters to apply (especially entity names)\n4. Query scope (collection-specific or database-wide)\n5. Collection name if mentioned\n6. Sort criteria for ranking queries\n\nAvailable collections in this database: ${availableCollections.join(\", \")}\n\nIMPORTANT: When parsing the query, check if mentioned names are collection names first before treating them as entity names.\n- If a name matches a collection name, set \"extractedCollection\" and \"scope\" to \"collection\"\n- If a name doesn't match any collection, treat it as an entity name in the filter\n\nAvailable scopes:\n- \"collection\": query operates on a specific collection\n- \"database\": query operates on the entire database\n\nAvailable query types:\n- \"top\": find top N items by some criteria (e.g., \"top 5 artists by image count\")\n- \"ranking\": rank items by some criteria (e.g., \"which artist has the most images\")\n- \"count\": count items matching criteria\n- \"search\": find specific items\n- \"list\": list items or entities\n- \"summarize\": provide summary of items\n- \"analyze\": analyze patterns in items\n\nIMPORTANT: Extract entity names from natural language variations:\n- \"by [Name]\", \"from [Name]\", \"of [Name]\"\n- \"done by [Name]\", \"created by [Name]\", \"made by [Name]\"\n- \"pieces by [Name]\", \"work by [Name]\", \"items by [Name]\"\n- \"[Name] items\", \"[Name] work\", \"[Name] pieces\"\n- Look for proper nouns (capitalized names) that could be entities\n\nFor ranking/top queries, identify what to sort by:\n- \"most images\" â†’ sortBy: \"image_count\", sortOrder: \"desc\"\n- \"least popular\" â†’ sortBy: \"popularity\", sortOrder: \"asc\"\n- \"top artists\" â†’ sortBy: \"image_count\", sortOrder: \"desc\"\n\nWhen you find an entity name, put it in the filter with a generic field name \"name\".`;\n    // Add conversation context if available\n    if (context && context.conversationHistory.length > 0) {\n        systemPrompt += `\n\nCONVERSATION CONTEXT:\nRecent conversation history (use this to resolve references and continuations):\n`;\n        // Add last few turns for context\n        const recentTurns = context.conversationHistory.slice(-3);\n        recentTurns.forEach((turn, index)=>{\n            systemPrompt += `\n${index + 1}. User asked: \"${turn.question}\"\n   Intent: ${turn.intent.type} ${turn.intent.target}${turn.intent.filter ? ` (filter: ${JSON.stringify(turn.intent.filter)})` : \"\"}\n   Collection: ${turn.intent.extractedCollection || \"database-wide\"}`;\n        });\n        if (context.lastEntity) {\n            systemPrompt += `\nLast mentioned entity: ${context.lastEntity}`;\n        }\n        if (context.lastCollection) {\n            systemPrompt += `\nLast used collection: ${context.lastCollection}`;\n        }\n        if (context.currentTopic) {\n            systemPrompt += `\nCurrent conversation topic: ${context.currentTopic}`;\n        }\n        systemPrompt += `\n\nUse this context to resolve pronouns (they, them, their, it), continuations (also, what about), and implied references.\nFor example:\n- \"their work\" when last entity was \"John Doe\" should become filter: {\"name\": \"John Doe\"}\n- \"what about Alice?\" after asking about \"John Doe's paintings\" should become \"search paintings by Alice\"\n- \"also show me Bob\" after \"count items by Alice\" should become \"search items by Bob\"`;\n    }\n    systemPrompt += `\n\nReturn ONLY a JSON object in this format:\n{\n  \"type\": \"count|search|list|filter|describe|summarize|analyze|collections|database|top|ranking\",\n  \"target\": \"what to count/search/list (e.g., 'items', 'entities', 'collections')\",\n  \"filter\": {\"name\": \"extracted_entity_name\"} or null,\n  \"limit\": number or null,\n  \"scope\": \"collection|database\",\n  \"extractedCollection\": \"collection_name_if_mentioned_in_query\" or null,\n  \"sortBy\": \"image_count|popularity|name\" or null,\n  \"sortOrder\": \"asc|desc\" or null\n}\n\nExamples:\n- \"How many items by John Doe?\" â†’ {\"type\": \"count\", \"target\": \"items\", \"filter\": {\"name\": \"John Doe\"}, \"limit\": null, \"scope\": \"database\", \"extractedCollection\": null}\n- \"Which artist has the most images?\" â†’ {\"type\": \"ranking\", \"target\": \"entities\", \"filter\": null, \"limit\": 1, \"scope\": \"database\", \"extractedCollection\": null, \"sortBy\": \"image_count\", \"sortOrder\": \"desc\"}\n- \"Top 5 artists by image count in mycollection\" â†’ {\"type\": \"top\", \"target\": \"entities\", \"filter\": null, \"limit\": 5, \"scope\": \"collection\", \"extractedCollection\": \"mycollection\", \"sortBy\": \"image_count\", \"sortOrder\": \"desc\"}\n- \"Which artist in that collection has the most images?\" â†’ {\"type\": \"ranking\", \"target\": \"entities\", \"filter\": null, \"limit\": 1, \"scope\": \"collection\", \"extractedCollection\": null, \"sortBy\": \"image_count\", \"sortOrder\": \"desc\"}\n- \"Summarize Alice Smith's work in mycollection\" â†’ {\"type\": \"summarize\", \"target\": \"items\", \"filter\": {\"name\": \"Alice Smith\"}, \"limit\": 10, \"scope\": \"collection\", \"extractedCollection\": \"mycollection\"}\n- \"Can you summarise the pieces done by Bob Johnson?\" â†’ {\"type\": \"summarize\", \"target\": \"items\", \"filter\": {\"name\": \"Bob Johnson\"}, \"limit\": 10, \"scope\": \"database\", \"extractedCollection\": null}\n- \"Find all Maria Garcia artwork\" â†’ {\"type\": \"search\", \"target\": \"items\", \"filter\": {\"name\": \"Maria Garcia\"}, \"limit\": 20, \"scope\": \"database\", \"extractedCollection\": null}\n- \"Show me data created by AI Assistant\" â†’ {\"type\": \"search\", \"target\": \"items\", \"filter\": {\"name\": \"AI Assistant\"}, \"limit\": 10, \"scope\": \"database\", \"extractedCollection\": null}`;\n    try {\n        let response;\n        if (provider === \"gemini\" && process.env.GEMINI_API_KEY) {\n            const geminiModel = genAI.getGenerativeModel({\n                model: model || \"gemini-2.0-flash\"\n            });\n            const result = await geminiModel.generateContent([\n                {\n                    text: systemPrompt\n                },\n                {\n                    text: `Question: \"${question}\"`\n                }, \n            ]);\n            response = result.response.text();\n        } else if (provider === \"openai\" && process.env.OPENAI_API_KEY) {\n            try {\n                const completion = await openai.chat.completions.create({\n                    model: model || \"gpt-3.5-turbo\",\n                    messages: [\n                        {\n                            role: \"system\",\n                            content: systemPrompt\n                        },\n                        {\n                            role: \"user\",\n                            content: `Question: \"${question}\"`\n                        }, \n                    ],\n                    temperature: 0\n                });\n                response = completion.choices[0].message.content || \"{}\";\n            } catch (openaiError) {\n                console.warn(\"OpenAI failed, trying Gemini fallback:\", openaiError.message);\n                // Auto-fallback to Gemini if OpenAI fails\n                if (process.env.GEMINI_API_KEY) {\n                    const geminiModel1 = genAI.getGenerativeModel({\n                        model: \"gemini-2.0-flash\"\n                    });\n                    const result1 = await geminiModel1.generateContent([\n                        {\n                            text: systemPrompt\n                        },\n                        {\n                            text: `Question: \"${question}\"`\n                        }, \n                    ]);\n                    response = result1.response.text();\n                } else {\n                    throw openaiError; // Re-throw if no Gemini fallback available\n                }\n            }\n        } else {\n            throw new Error(\"No valid API key for the specified provider\");\n        }\n        // Extract JSON from response (in case there's extra text)\n        const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n        const jsonStr = jsonMatch ? jsonMatch[0] : response;\n        return JSON.parse(jsonStr);\n    } catch (e) {\n        // Fallback parsing with context awareness\n        console.warn(\"Failed to parse LLM response, using context-aware fallback:\", e);\n        return fallbackIntent;\n    }\n}\nfunction inferIntentFromQuestion(question, context, availableCollections) {\n    const q = question.toLowerCase();\n    // Try to extract collection name from the question, checking against available collections\n    const extractedCollection = extractCollectionFromQuestion(question, availableCollections);\n    // Check if any mentioned names are collection names\n    let isCollectionQuery = false;\n    let targetCollection = extractedCollection;\n    if (availableCollections && availableCollections.length > 0) {\n        // Look for collection names mentioned in the question\n        for (const collectionName of availableCollections){\n            if (q.includes(collectionName.toLowerCase())) {\n                isCollectionQuery = true;\n                targetCollection = collectionName;\n                console.log(`ðŸŽ¯ Detected collection name in query: ${collectionName}`);\n                break;\n            }\n        }\n    }\n    // Handle pronouns in fallback if context is available\n    let processedQuestion = question;\n    if (context?.lastEntity) {\n        // Handle pronouns using context\n        if (q.includes(\" he \") || q.includes(\" him \") || q.includes(\"he \") || q.includes(\"him \")) {\n            console.log(\"\\uD83D\\uDD04 FALLBACK: Resolving 'he/him' to:\", context.lastEntity);\n            processedQuestion = processedQuestion.replace(/\\b(he|him)\\b/gi, context.lastEntity);\n        }\n        if (q.includes(\" they \") || q.includes(\" them \") || q.includes(\"they \") || q.includes(\"them \")) {\n            console.log(\"\\uD83D\\uDD04 FALLBACK: Resolving 'they/them' to:\", context.lastEntity);\n            processedQuestion = processedQuestion.replace(/\\b(they|them)\\b/gi, context.lastEntity);\n        }\n        if (q.includes(\" their \") || q.includes(\" his \") || q.includes(\" her \")) {\n            console.log(\"\\uD83D\\uDD04 FALLBACK: Resolving possessive to:\", context.lastEntity);\n            processedQuestion = processedQuestion.replace(/\\b(their|his|her)\\b/gi, context.lastEntity + \"'s\");\n        }\n    }\n    // Handle ranking and \"most\" queries\n    if (q.includes(\"which\") && (q.includes(\"most\") || q.includes(\"top\") || q.includes(\"best\") || q.includes(\"highest\"))) {\n        const scope = extractedCollection ? \"collection\" : \"database\";\n        if (q.includes(\"artist\") && q.includes(\"most\") && q.includes(\"image\")) {\n            return {\n                type: \"ranking\",\n                target: \"entities\",\n                filter: null,\n                limit: 1,\n                scope,\n                sortBy: \"image_count\",\n                sortOrder: \"desc\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"artist\") && q.includes(\"most\")) {\n            return {\n                type: \"ranking\",\n                target: \"entities\",\n                filter: null,\n                limit: 1,\n                scope,\n                sortBy: \"image_count\",\n                sortOrder: \"desc\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n    }\n    // Handle \"top N\" queries\n    if (q.includes(\"top\") && /top\\s+(\\d+)/.test(q)) {\n        const limitMatch = q.match(/top\\s+(\\d+)/);\n        const limit = limitMatch ? parseInt(limitMatch[1]) : 5;\n        const scope1 = extractedCollection ? \"collection\" : \"database\";\n        if (q.includes(\"artist\")) {\n            return {\n                type: \"top\",\n                target: \"entities\",\n                filter: null,\n                limit,\n                scope: scope1,\n                sortBy: \"image_count\",\n                sortOrder: \"desc\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n    }\n    // Check for entity-specific queries with generic patterns (use processed question)\n    // But first check if the mentioned name is actually a collection name\n    const entityMatch = processedQuestion.match(/(?:by|from|of)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*?)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i) || processedQuestion.match(/(?:done\\s+by|created\\s+by|made\\s+by|work\\s+by|items\\s+by|pieces\\s+by)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*?)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i) || processedQuestion.match(/([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)+)(?:\\s+(?:work|items|pieces|data|content))/i);\n    let entityName = null;\n    if (entityMatch) {\n        const candidateName = entityMatch[1].trim();\n        // Check if this is actually a collection name\n        if (availableCollections && availableCollections.some((col)=>col.toLowerCase() === candidateName.toLowerCase())) {\n            // This is a collection name, not an entity name\n            isCollectionQuery = true;\n            targetCollection = candidateName;\n            console.log(`ðŸŽ¯ Detected collection name in entity pattern: ${candidateName}`);\n        } else {\n            // This is an entity name\n            entityName = candidateName;\n        }\n    }\n    // Entity-specific queries (high priority)\n    if (entityName) {\n        const filter = {\n            name: entityName\n        };\n        const scope2 = targetCollection ? \"collection\" : \"database\";\n        if (q.includes(\"summary\") || q.includes(\"summarize\") || q.includes(\"summarise\") || q.includes(\"give me\") && q.includes(\"summary\")) {\n            return {\n                type: \"summarize\",\n                target: \"items\",\n                filter,\n                limit: 20,\n                scope: scope2,\n                ...targetCollection && {\n                    extractedCollection: targetCollection\n                }\n            };\n        }\n        if (q.includes(\"how many\") || q.includes(\"count\")) {\n            return {\n                type: \"count\",\n                target: \"items\",\n                filter,\n                scope: scope2,\n                ...targetCollection && {\n                    extractedCollection: targetCollection\n                }\n            };\n        }\n        if (q.includes(\"find\") || q.includes(\"search\") || q.includes(\"show\")) {\n            return {\n                type: \"search\",\n                target: \"items\",\n                filter,\n                limit: 10,\n                scope: scope2,\n                ...targetCollection && {\n                    extractedCollection: targetCollection\n                }\n            };\n        }\n        if (q.includes(\"analyze\") || q.includes(\"analysis\")) {\n            return {\n                type: \"analyze\",\n                target: \"items\",\n                filter,\n                limit: 50,\n                scope: scope2,\n                ...targetCollection && {\n                    extractedCollection: targetCollection\n                }\n            };\n        }\n    }\n    // Handle collection-specific queries (when no entity is specified)\n    if (isCollectionQuery && targetCollection && !entityName) {\n        const scope3 = \"collection\";\n        if (q.includes(\"summarize\") || q.includes(\"summarise\") || q.includes(\"summary\")) {\n            return {\n                type: \"describe\",\n                target: \"collection\",\n                scope: scope3,\n                extractedCollection: targetCollection\n            };\n        }\n        if (q.includes(\"describe\")) {\n            return {\n                type: \"describe\",\n                target: \"collection\",\n                scope: scope3,\n                extractedCollection: targetCollection\n            };\n        }\n    }\n    // Database-level queries\n    if (q.includes(\"collections\") || q.includes(\"database\")) {\n        if (q.includes(\"how many\") || q.includes(\"count\")) {\n            return {\n                type: \"count\",\n                target: \"collections\",\n                scope: \"database\"\n            };\n        }\n        if (q.includes(\"list\") || q.includes(\"what\") || q.includes(\"show\")) {\n            return {\n                type: \"collections\",\n                target: \"list\",\n                scope: \"database\"\n            };\n        }\n        if (q.includes(\"describe\")) {\n            return {\n                type: \"database\",\n                target: \"overview\",\n                scope: \"database\"\n            };\n        }\n    }\n    // Collection-level queries (existing logic)\n    if (q.includes(\"how many\") || q.includes(\"count\")) {\n        if (q.includes(\"entities\") || q.includes(\"names\") || q.includes(\"creators\")) {\n            return {\n                type: \"count\",\n                target: \"entities\",\n                scope: extractedCollection ? \"collection\" : \"database\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        if (q.includes(\"vector\") || q.includes(\"item\") || q.includes(\"record\")) {\n            return {\n                type: \"count\",\n                target: \"total\",\n                scope: extractedCollection ? \"collection\" : \"database\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        return {\n            type: \"count\",\n            target: \"total\",\n            scope: extractedCollection ? \"collection\" : \"database\",\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    if (q.includes(\"find\") || q.includes(\"search\")) {\n        // Check if it's across all collections\n        const scope4 = q.includes(\"all collections\") || q.includes(\"across\") ? \"database\" : extractedCollection ? \"collection\" : \"database\";\n        // Try to extract entity name (fallback pattern) - generic patterns\n        const fallbackEntityMatch = question.match(/(?:by|from|of)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*?)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i) || question.match(/(?:done\\s+by|created\\s+by|made\\s+by)\\s+([A-Z][a-z]+(?:\\s+[A-Z][a-z]+)*?)(?=\\s+(?:in|from|of|at|with|for)\\b|$)/i);\n        if (fallbackEntityMatch) {\n            return {\n                type: \"search\",\n                target: \"items\",\n                filter: {\n                    name: fallbackEntityMatch[1]\n                },\n                limit: 10,\n                scope: scope4,\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        return {\n            type: \"search\",\n            target: \"items\",\n            limit: 10,\n            scope: scope4,\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    if (q.includes(\"list\") || q.includes(\"show\")) {\n        if (q.includes(\"entities\") || q.includes(\"names\") || q.includes(\"creators\")) {\n            return {\n                type: \"list\",\n                target: \"entities\",\n                scope: extractedCollection ? \"collection\" : \"database\",\n                ...extractedCollection && {\n                    extractedCollection\n                }\n            };\n        }\n        return {\n            type: \"list\",\n            target: \"items\",\n            limit: 20,\n            scope: extractedCollection ? \"collection\" : \"database\",\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    if (q.includes(\"describe\")) {\n        return {\n            type: \"describe\",\n            target: extractedCollection ? \"collection\" : \"database\",\n            scope: extractedCollection ? \"collection\" : \"database\",\n            ...extractedCollection && {\n                extractedCollection\n            }\n        };\n    }\n    return {\n        type: \"describe\",\n        target: \"collection\",\n        scope: extractedCollection ? \"collection\" : \"database\",\n        ...extractedCollection && {\n            extractedCollection\n        }\n    };\n}\n// New function to extract collection names from natural language\nfunction extractCollectionFromQuestion(question, availableCollections) {\n    const q = question.toLowerCase();\n    // First, check against available collections if provided\n    if (availableCollections && availableCollections.length > 0) {\n        for (const collectionName of availableCollections){\n            if (q.includes(collectionName.toLowerCase())) {\n                console.log(`ðŸŽ¯ Found collection name in question: ${collectionName}`);\n                return collectionName;\n            }\n        }\n    }\n    // Common patterns for mentioning collections\n    const patterns = [\n        // \"in [collection]\" or \"from [collection]\"\n        /(?:in|from)\\s+([a-zA-Z][a-zA-Z0-9_-]*)/g,\n        // \"[collection] collection\"\n        /([a-zA-Z][a-zA-Z0-9_-]*)\\s+collection/g,\n        // \"collection [collection]\"\n        /collection\\s+([a-zA-Z][a-zA-Z0-9_-]*)/g, \n    ];\n    for (const pattern of patterns){\n        let match;\n        while((match = pattern.exec(q)) !== null){\n            const candidate = match[1];\n            // Filter out common words that aren't collection names\n            if (![\n                \"the\",\n                \"this\",\n                \"that\",\n                \"my\",\n                \"your\",\n                \"our\",\n                \"their\",\n                \"all\",\n                \"some\",\n                \"any\",\n                \"each\",\n                \"every\", \n            ].includes(candidate)) {\n                // If we have available collections, check if this candidate matches\n                if (availableCollections && availableCollections.length > 0) {\n                    const matchingCollection = availableCollections.find((col)=>col.toLowerCase() === candidate.toLowerCase());\n                    if (matchingCollection) {\n                        return matchingCollection;\n                    }\n                } else {\n                    return candidate;\n                }\n            }\n        }\n    }\n    return undefined;\n}\nasync function executeQuery(collection, intent) {\n    if (intent.scope === \"database\") {\n        return await executeDatabaseQuery(intent);\n    } else {\n        // Collection-level query - require collection name\n        if (!collection) {\n            throw new Error(\"Collection name is required for collection-level queries\");\n        }\n        return await executeCollectionQuery(collection, intent);\n    }\n}\nasync function executeDatabaseQuery(intent) {\n    switch(intent.type){\n        case \"count\":\n            if (intent.target === \"collections\") {\n                return await countCollections();\n            }\n            if (intent.target === \"artists\") {\n                return await countArtistsAcrossDatabase();\n            }\n            if ((intent.target === \"images\" || intent.target === \"items\") && intent.filter) {\n                return await countImagesByArtistAcrossDatabase(intent.filter);\n            }\n            if (intent.target === \"total\") {\n                return await countTotalVectorsAcrossDatabase();\n            }\n            // Fallback for count operations\n            return await countTotalVectorsAcrossDatabase();\n        case \"collections\":\n            return await listCollections();\n        case \"database\":\n            return await describeDatabaseInfo();\n        case \"search\":\n            if (intent.filter) {\n                return await searchAcrossCollections(intent.filter, intent.limit || 10);\n            }\n            break;\n        case \"summarize\":\n            if (intent.filter) {\n                return await summarizeArtistAcrossDatabase(intent.filter, intent.limit || 20);\n            }\n            break;\n        case \"list\":\n            if (intent.target === \"artists\" || intent.target === \"entities\") {\n                return await listArtistsAcrossDatabase(intent.limit || 50);\n            }\n            break;\n        case \"top\":\n        case \"ranking\":\n            if (intent.target === \"entities\" && intent.sortBy === \"image_count\") {\n                return await getTopArtistsByImageCountAcrossDatabase(intent.limit || 1);\n            }\n            break;\n        default:\n            throw new Error(`Database-level query type '${intent.type}' not implemented yet`);\n    }\n    throw new Error(`Database-level query could not be executed: ${intent.type} ${intent.target}`);\n}\nasync function executeCollectionQuery(collection, intent) {\n    switch(intent.type){\n        case \"count\":\n            if (intent.target === \"artists\") {\n                return await countUniqueArtists(collection);\n            } else if ((intent.target === \"images\" || intent.target === \"items\") && intent.filter) {\n                return await countImagesByArtist(collection, intent.filter);\n            } else {\n                return await countTotal(collection);\n            }\n        case \"search\":\n            return await searchImages(collection, intent.filter, intent.limit || 10);\n        case \"summarize\":\n            return await summarizeArtistWork(collection, intent.filter, intent.limit || 20);\n        case \"analyze\":\n            return await analyzeArtistWork(collection, intent.filter, intent.limit || 50);\n        case \"list\":\n            if (intent.target === \"artists\" || intent.target === \"entities\") {\n                return await listUniqueArtists(collection, intent.limit || 50);\n            } else {\n                return await listImages(collection, intent.limit || 20);\n            }\n        case \"filter\":\n            return await filterImages(collection, intent.filter, intent.limit || 20);\n        case \"describe\":\n            return await describeCollection(collection);\n        case \"top\":\n        case \"ranking\":\n            if (intent.target === \"entities\" && intent.sortBy === \"image_count\") {\n                return await getTopArtistsByImageCountInCollection(collection, intent.limit || 1);\n            }\n            break;\n        default:\n            throw new Error(`Unknown collection-level query type: ${intent.type}`);\n    }\n}\n// New database-level functions\nasync function countCollections() {\n    const collectionsInfo = await _db__WEBPACK_IMPORTED_MODULE_2__.client.getCollections();\n    const collections = collectionsInfo.collections.map((c)=>c.name);\n    return {\n        count: collections.length,\n        collections: collections\n    };\n}\nasync function listCollections() {\n    const collectionsInfo = await _db__WEBPACK_IMPORTED_MODULE_2__.client.getCollections();\n    const collections = collectionsInfo.collections;\n    // Get detailed info for each collection using actual count\n    const detailedCollections = await Promise.all(collections.map(async (collection)=>{\n        try {\n            // Use the same count method that works for individual queries\n            const countResult = await _db__WEBPACK_IMPORTED_MODULE_2__.client.count(collection.name, {});\n            return {\n                name: collection.name,\n                vectors_count: countResult.count || 0\n            };\n        } catch (error) {\n            console.warn(`Failed to count vectors in collection ${collection.name}:`, error);\n            return {\n                name: collection.name,\n                vectors_count: 0\n            };\n        }\n    }));\n    return {\n        collections: detailedCollections\n    };\n}\nasync function describeDatabaseInfo() {\n    const collectionsData = await listCollections();\n    const totalVectors = collectionsData.collections.reduce((sum, col)=>sum + (col.vectors_count || 0), 0);\n    return {\n        total_collections: collectionsData.collections.length,\n        total_vectors: totalVectors,\n        collections: collectionsData.collections\n    };\n}\nasync function searchAcrossCollections(filter, limit) {\n    const collectionsData = await listCollections();\n    const allResults = [];\n    // Search each collection\n    for (const collection of collectionsData.collections){\n        try {\n            const results = await searchImages(collection.name, filter, limit);\n            if (results.images && results.images.length > 0) {\n                allResults.push({\n                    collection: collection.name,\n                    count: results.count,\n                    images: results.images\n                });\n            }\n        } catch (error) {\n            console.warn(`Failed to search collection ${collection.name}:`, error);\n        }\n    }\n    const totalCount = allResults.reduce((sum, result)=>sum + result.count, 0);\n    return {\n        total_count: totalCount,\n        collections_searched: collectionsData.collections.length,\n        results_by_collection: allResults\n    };\n}\n// Existing collection-level functions remain the same\nasync function countTotal(collection) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.count(collection, {});\n    return {\n        count: response.count\n    };\n}\nasync function countUniqueArtists(collection, config = DEFAULT_CONFIG) {\n    // Get ALL points from the collection, not just 1000\n    let allPoints = [];\n    let offset = undefined;\n    // Scroll through all points in the collection\n    do {\n        const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n            limit: 1000,\n            ...offset !== undefined && {\n                offset\n            },\n            with_payload: true,\n            with_vector: false\n        });\n        allPoints.push(...response.points);\n        // Safely handle the offset type\n        const nextOffset = response.next_page_offset;\n        if (typeof nextOffset === \"string\" || typeof nextOffset === \"number\") {\n            offset = nextOffset;\n        } else {\n            offset = undefined;\n        }\n    }while (offset !== null && offset !== undefined);\n    const entities = new Set(allPoints.map((point)=>getEntityValue(point, config)).filter((value)=>Boolean(value)));\n    return {\n        count: entities.size,\n        artists: Array.from(entities).slice(0, 20)\n    };\n}\nasync function searchImages(collection, filter, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    const limitedPoints = filteredPoints.slice(0, limit);\n    return {\n        count: limitedPoints.length,\n        images: limitedPoints\n    };\n}\nasync function listUniqueArtists(collection, limit) {\n    // Get ALL points from the collection to ensure accurate artist listing\n    let allPoints = [];\n    let offset = undefined;\n    // Scroll through all points in the collection\n    do {\n        const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n            limit: 1000,\n            ...offset !== undefined && {\n                offset\n            },\n            with_payload: true,\n            with_vector: false\n        });\n        allPoints.push(...response.points);\n        // Safely handle the offset type\n        const nextOffset = response.next_page_offset;\n        if (typeof nextOffset === \"string\" || typeof nextOffset === \"number\") {\n            offset = nextOffset;\n        } else {\n            offset = undefined;\n        }\n    }while (offset !== null && offset !== undefined);\n    const artists = new Set(allPoints.map((point)=>point.payload?.name).filter(Boolean));\n    // Return the requested number of artists\n    return {\n        artists: Array.from(artists).slice(0, limit)\n    };\n}\nasync function listImages(collection, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit,\n        with_payload: true,\n        with_vector: false\n    });\n    return {\n        count: response.points.length,\n        images: response.points.map((point)=>({\n                id: point.id,\n                artist: point.payload?.name,\n                filename: point.payload?.file_name\n            }))\n    };\n}\nasync function filterImages(collection, filter, limit) {\n    return await searchImages(collection, filter, limit);\n}\nasync function describeCollection(collection) {\n    const totalCount = await countTotal(collection);\n    const artistsData = await countUniqueArtists(collection);\n    const sampleImages = await listImages(collection, 5);\n    return {\n        total_images: totalCount.count,\n        unique_artists: artistsData.count,\n        sample_artists: artistsData.artists.slice(0, 10),\n        sample_images: sampleImages.images\n    };\n}\nasync function generateResponse(question, intent, data, provider, model) {\n    const fallbackResponse = generateFallbackResponse(question, intent, data);\n    if (!process.env.OPENAI_API_KEY && !process.env.GEMINI_API_KEY) {\n        return fallbackResponse;\n    }\n    const systemPrompt = `You are a helpful assistant that explains vector database query results in natural language.\n  \nThe user asked: \"${question}\"\nThe query type was: ${intent.type}\nThe data returned is: ${JSON.stringify(data, null, 2)}\n\nIMPORTANT GUIDELINES FOR RANKING/TOP QUERIES:\n- If there are ties (multiple artists with the same count), ALWAYS mention this explicitly\n- Don't say \"X has the most\" if there are ties - say \"X is tied for the most\" or \"X and Y are tied\"\n- Pay attention to the \"has_tie\", \"tie_count\", and \"artists_with_max_count\" fields in the data\n- Be precise with singular/plural forms (1 image vs 2 images)\n- If the user asked for \"the artist with most\" but there's a tie, explain the tie situation clearly\n\nProvide a concise, natural language response that directly answers the user's question. Be specific with numbers and names when available, and always be accurate about ties and rankings.`;\n    try {\n        let response;\n        if (provider === \"gemini\" && process.env.GEMINI_API_KEY) {\n            const geminiModel = genAI.getGenerativeModel({\n                model: model || \"gemini-2.0-flash\"\n            });\n            const result = await geminiModel.generateContent(systemPrompt);\n            response = result.response.text();\n        } else if (provider === \"openai\" && process.env.OPENAI_API_KEY) {\n            try {\n                const completion = await openai.chat.completions.create({\n                    model: model || \"gpt-3.5-turbo\",\n                    messages: [\n                        {\n                            role: \"system\",\n                            content: systemPrompt\n                        }\n                    ],\n                    temperature: 0.3,\n                    max_tokens: 200\n                });\n                response = completion.choices[0].message.content || fallbackResponse;\n            } catch (openaiError) {\n                console.warn(\"OpenAI failed in generateResponse, trying Gemini fallback:\", openaiError.message);\n                // Auto-fallback to Gemini if OpenAI fails\n                if (process.env.GEMINI_API_KEY) {\n                    const geminiModel1 = genAI.getGenerativeModel({\n                        model: \"gemini-2.0-flash\"\n                    });\n                    const result1 = await geminiModel1.generateContent(systemPrompt);\n                    response = result1.response.text();\n                } else {\n                    throw openaiError; // Re-throw if no Gemini fallback available\n                }\n            }\n        } else {\n            return fallbackResponse;\n        }\n        return response.trim();\n    } catch (error) {\n        console.warn(\"Failed to generate LLM response, using fallback:\", error);\n        return fallbackResponse;\n    }\n}\nfunction generateFallbackResponse(question, intent, data) {\n    // Safely handle null/undefined data\n    const safeData = data || {};\n    if (intent.scope === \"database\") {\n        switch(intent.type){\n            case \"count\":\n                if (intent.target === \"collections\") {\n                    return `I found ${safeData.count || 0} collections in the database: ${safeData.collections?.join(\", \") || \"None found\"}.`;\n                }\n                if (intent.target === \"artists\") {\n                    return `I found ${safeData.count || 0} unique artists across all collections. Some of them include: ${safeData.artists?.slice(0, 5).join(\", \") || \"No artists found\"}.`;\n                }\n                if (intent.target === \"images\" && intent.filter?.name) {\n                    return `I found ${safeData.count || 0} images by ${safeData.artist || intent.filter.name} across all collections. ${safeData.by_collection?.length > 0 ? `Found in: ${safeData.by_collection.map((c)=>`${c.collection} (${c.count})`).join(\", \")}.` : \"\"}`;\n                }\n                if (intent.target === \"total\") {\n                    return `The database contains ${safeData.count || 0} total vectors across all collections.`;\n                }\n                break;\n            case \"collections\":\n                return `The database contains ${safeData.collections?.length || 0} collections: ${safeData.collections?.map((c)=>`${c.name} (${c.vectors_count || 0} vectors)`).join(\", \") || \"None found\"}.`;\n            case \"database\":\n                return `The database contains ${safeData.total_collections || 0} collections with a total of ${safeData.total_vectors || 0} vectors.`;\n            case \"search\":\n                return `I searched across ${safeData.collections_searched || 0} collections and found ${safeData.total_count || 0} matching items.`;\n            case \"summarize\":\n                if (intent.filter?.name) {\n                    return `Summary of ${safeData.artist || intent.filter.name}'s work across the database:\\n\\n` + `Total Images: ${safeData.total_images || 0}\\n` + `Collections: Found in ${safeData.collections_found || 0} collections\\n` + `File Types: ${safeData.file_types?.join(\", \") || \"Various\"}\\n\\n` + `Breakdown by collection:\\n${safeData.by_collection?.map((c)=>`â€¢ ${c.collection}: ${c.image_count} images`).join(\"\\n\") || \"No collections found\"}\\n\\n` + `Sample Images: ${safeData.sample_images?.slice(0, 3).map((img)=>`${img.filename} (${img.collection})`).join(\", \") || \"None found\"}`;\n                }\n                break;\n            case \"list\":\n                if (intent.target === \"artists\") {\n                    return `I found ${safeData.artists?.length || 0} unique artists across all collections: ${safeData.artists?.slice(0, 10).join(\", \") || \"No artists found\"}.`;\n                }\n                break;\n        }\n    }\n    // Collection-level responses\n    switch(intent.type){\n        case \"count\":\n            if (intent.target === \"artists\") {\n                return `I found ${safeData.count || 0} unique artists in the collection. Some of them include: ${safeData.artists?.slice(0, 5).join(\", \") || \"No artists found\"}.`;\n            } else if (intent.target === \"images\" && intent.filter?.name) {\n                return `I found ${safeData.count || 0} images by ${safeData.artist || intent.filter.name} in this collection.${safeData.sample_images?.length > 0 ? ` Sample files: ${safeData.sample_images.slice(0, 3).map((img)=>img.filename).join(\", \")}.` : \"\"}`;\n            } else {\n                return `The collection contains ${safeData.count || 0} total images.`;\n            }\n        case \"search\":\n        case \"filter\":\n            return `I found ${safeData.count || 0} images matching your criteria.`;\n        case \"summarize\":\n            if (intent.filter?.name) {\n                return `Summary of ${safeData.artist || intent.filter.name}'s work in this collection:\\n\\n` + `Total Images: ${safeData.total_images || 0}\\n` + `File Types: ${safeData.file_types?.join(\", \") || \"Various\"}\\n` + `Sample Files: ${safeData.sample_filenames?.slice(0, 5).join(\", \") || \"None\"}\\n\\n` + `Image Details:\\n${safeData.images?.slice(0, 5).map((img, i)=>`${i + 1}. ${img.filename || \"Unknown file\"}`).join(\"\\n\") || \"No images found\"}`;\n            }\n            break;\n        case \"analyze\":\n            if (intent.filter?.name) {\n                return `Analysis of ${safeData.artist || intent.filter.name}'s work patterns:\\n\\n` + `Total Images: ${safeData.total_images || 0}\\n` + `File Types: ${Object.entries(safeData.file_type_distribution || {}).map(([type, count])=>`${type} (${count})`).join(\", \") || \"Various\"}\\n` + `Common Patterns: ${Object.entries(safeData.common_naming_patterns || {}).slice(0, 3).map(([pattern, count])=>`\"${pattern}\" (${count} files)`).join(\", \") || \"No patterns found\"}\\n` + `Source Domains: ${Object.keys(safeData.source_domains || {}).join(\", \") || \"Various\"}`;\n            }\n            break;\n        case \"list\":\n            if (intent.target === \"artists\") {\n                return `Here are the artists in the collection: ${safeData.artists?.slice(0, 10).join(\", \") || \"No artists found\"}${safeData.artists?.length > 10 ? \"...\" : \"\"}.`;\n            } else {\n                return `I found ${safeData.count || 0} items in the collection.`;\n            }\n        case \"describe\":\n            return `This collection contains ${safeData.total_images || 0} images from ${safeData.unique_artists || 0} unique artists. Some featured artists include: ${safeData.sample_artists?.slice(0, 5).join(\", \") || \"No artists found\"}.`;\n        case \"top\":\n        case \"ranking\":\n            if (safeData.top_artists && safeData.top_artists.length > 0) {\n                // Check for ties at the top\n                if (safeData.has_tie && intent.limit === 1) {\n                    // Handle the case where user asked for \"the artist with most\" but there's a tie\n                    const tiedArtists = safeData.artists_with_max_count || safeData.top_artists.filter((artist)=>artist.image_count === safeData.max_image_count);\n                    if (tiedArtists.length === 2) {\n                        return `There's a tie! Both ${tiedArtists[0].name} and ${tiedArtists[1].name} have the most images with ${safeData.max_image_count} image${safeData.max_image_count === 1 ? \"\" : \"s\"} each.`;\n                    } else if (tiedArtists.length > 2) {\n                        const lastArtist = tiedArtists[tiedArtists.length - 1].name;\n                        const otherArtists = tiedArtists.slice(0, -1).map((a)=>a.name).join(\", \");\n                        return `There's a ${tiedArtists.length}-way tie! ${otherArtists}, and ${lastArtist} all have the most images with ${safeData.max_image_count} image${safeData.max_image_count === 1 ? \"\" : \"s\"} each.`;\n                    }\n                }\n                // Handle regular cases (no tie or user asked for multiple results)\n                if (intent.limit === 1 && !safeData.has_tie) {\n                    const topArtist = safeData.top_artists[0];\n                    return `${topArtist.name} has the most images with ${topArtist.image_count} image${topArtist.image_count === 1 ? \"\" : \"s\"}.`;\n                } else {\n                    // Multiple results or tie situation where we show the list\n                    const artistList = safeData.top_artists.map((artist, index)=>`${index + 1}. ${artist.name} (${artist.image_count} image${artist.image_count === 1 ? \"\" : \"s\"})`).join(\", \");\n                    let response = `Top ${intent.limit || safeData.top_artists.length} artists by image count: ${artistList}`;\n                    // Add tie information if relevant\n                    if (safeData.has_tie && safeData.tie_count > 1) {\n                        response += `. Note: ${safeData.tie_count} artists are tied for the highest count of ${safeData.max_image_count} image${safeData.max_image_count === 1 ? \"\" : \"s\"}.`;\n                    }\n                    return response;\n                }\n            }\n            return \"No artists found with images.\";\n        default:\n            return \"I processed your query successfully using pattern matching.\";\n    }\n    return \"I processed your query successfully.\";\n}\n// New database-level functions for artists and total counts\nasync function countArtistsAcrossDatabase() {\n    const collectionsData = await listCollections();\n    const allArtists = new Set();\n    // Collect artists from each collection\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const artistsData = await countUniqueArtists(collection.name);\n                artistsData.artists.forEach((artist)=>allArtists.add(artist));\n            }\n        } catch (error) {\n            console.warn(`Failed to get artists from collection ${collection.name}:`, error);\n        }\n    }\n    return {\n        count: allArtists.size,\n        artists: Array.from(allArtists).slice(0, 20)\n    };\n}\nasync function countTotalVectorsAcrossDatabase() {\n    const collectionsData = await listCollections();\n    const totalVectors = collectionsData.collections.reduce((sum, col)=>sum + (col.vectors_count || 0), 0);\n    return {\n        count: totalVectors,\n        by_collection: collectionsData.collections.map((col)=>({\n                name: col.name,\n                count: col.vectors_count || 0\n            }))\n    };\n}\nasync function listArtistsAcrossDatabase(limit) {\n    const collectionsData = await listCollections();\n    const allArtists = new Set();\n    const byCollection = [];\n    // Collect artists from each collection\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const artistsData = await listUniqueArtists(collection.name, Math.min(limit, 20));\n                artistsData.artists.forEach((artist)=>allArtists.add(artist));\n                byCollection.push({\n                    collection: collection.name,\n                    artists: artistsData.artists\n                });\n            }\n        } catch (error) {\n            console.warn(`Failed to get artists from collection ${collection.name}:`, error);\n        }\n    }\n    return {\n        artists: Array.from(allArtists).slice(0, limit),\n        by_collection: byCollection\n    };\n}\n// New function to count images by specific artist\nasync function countImagesByArtist(collection, filter) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    return {\n        count: filteredPoints.length,\n        artist: filter?.name || \"unknown\",\n        sample_images: filteredPoints.slice(0, 5).map((point)=>({\n                id: point.id,\n                filename: point.payload?.file_name,\n                url: point.payload?.image_url\n            }))\n    };\n}\n// New function to provide detailed summary of artist's work\nasync function summarizeArtistWork(collection, filter, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    const limitedPoints = filteredPoints.slice(0, limit);\n    // Analyze file types and patterns\n    const fileExtensions = new Set();\n    const fileNames = [];\n    const imageUrls = [];\n    limitedPoints.forEach((point)=>{\n        if (point.payload?.file_name) {\n            const ext = point.payload.file_name.split(\".\").pop()?.toLowerCase();\n            if (ext) fileExtensions.add(ext);\n            fileNames.push(point.payload.file_name);\n        }\n        if (point.payload?.image_url) {\n            imageUrls.push(point.payload.image_url);\n        }\n    });\n    return {\n        artist: filter?.name || \"unknown\",\n        total_images: filteredPoints.length,\n        displayed_images: limitedPoints.length,\n        file_types: Array.from(fileExtensions),\n        sample_filenames: fileNames.slice(0, 8),\n        sample_urls: imageUrls.slice(0, 5),\n        images: limitedPoints.map((point)=>({\n                id: point.id,\n                filename: point.payload?.file_name,\n                image_url: point.payload?.image_url,\n                style_url: point.payload?.url\n            }))\n    };\n}\n// New function to analyze artist's work patterns\nasync function analyzeArtistWork(collection, filter, limit) {\n    const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n        limit: 1000,\n        with_payload: true,\n        with_vector: false\n    });\n    let filteredPoints = response.points;\n    if (filter) {\n        filteredPoints = response.points.filter((point)=>{\n            return Object.entries(filter).every(([key, value])=>{\n                return point.payload?.[key] === value;\n            });\n        });\n    }\n    // Analyze patterns in the artist's work\n    const fileTypes = new Map();\n    const namingPatterns = new Map();\n    const urlPatterns = new Map();\n    filteredPoints.forEach((point)=>{\n        // File type analysis\n        if (point.payload?.file_name) {\n            const ext = point.payload.file_name.split(\".\").pop()?.toLowerCase();\n            if (ext) {\n                fileTypes.set(ext, (fileTypes.get(ext) || 0) + 1);\n            }\n            // Naming pattern analysis\n            const namePattern = point.payload.file_name.replace(/\\d+/g, \"#\").replace(/\\.(jpg|jpeg|png|gif|webp)$/i, \"\");\n            namingPatterns.set(namePattern, (namingPatterns.get(namePattern) || 0) + 1);\n        }\n        // URL pattern analysis\n        if (point.payload?.url) {\n            const domain = point.payload.url.split(\"/\")[2];\n            if (domain) {\n                urlPatterns.set(domain, (urlPatterns.get(domain) || 0) + 1);\n            }\n        }\n    });\n    return {\n        artist: filter?.name || \"unknown\",\n        total_images: filteredPoints.length,\n        file_type_distribution: Object.fromEntries(fileTypes),\n        common_naming_patterns: Object.fromEntries(Array.from(namingPatterns.entries()).filter(([_, count])=>count > 1).sort((a, b)=>b[1] - a[1]).slice(0, 5)),\n        source_domains: Object.fromEntries(urlPatterns),\n        sample_images: filteredPoints.slice(0, 10).map((point)=>({\n                id: point.id,\n                filename: point.payload?.file_name,\n                image_url: point.payload?.image_url\n            }))\n    };\n}\n// New function to count specific artist images across all collections\nasync function countImagesByArtistAcrossDatabase(filter) {\n    const collectionsData = await listCollections();\n    const resultsByCollection = [];\n    let totalCount = 0;\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const result = await countImagesByArtist(collection.name, filter);\n                if (result.count > 0) {\n                    resultsByCollection.push({\n                        collection: collection.name,\n                        count: result.count\n                    });\n                    totalCount += result.count;\n                }\n            }\n        } catch (error) {\n            console.warn(`Failed to count images in collection ${collection.name}:`, error);\n        }\n    }\n    return {\n        count: totalCount,\n        artist: filter?.name || \"unknown\",\n        by_collection: resultsByCollection\n    };\n}\n// New function to summarize artist work across all collections\nasync function summarizeArtistAcrossDatabase(filter, limit) {\n    const collectionsData = await listCollections();\n    const allImages = [];\n    const collectionSummaries = [];\n    const fileTypes = new Set();\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                const summary = await summarizeArtistWork(collection.name, filter, 50);\n                if (summary.total_images > 0) {\n                    collectionSummaries.push({\n                        collection: collection.name,\n                        ...summary\n                    });\n                    allImages.push(...summary.images);\n                    summary.file_types?.forEach((type)=>fileTypes.add(type));\n                }\n            }\n        } catch (error) {\n            console.warn(`Failed to summarize artist work in collection ${collection.name}:`, error);\n        }\n    }\n    const totalImages = allImages.length;\n    const displayedImages = allImages.slice(0, limit);\n    return {\n        artist: filter?.name || \"unknown\",\n        total_images: totalImages,\n        displayed_images: displayedImages.length,\n        collections_found: collectionSummaries.length,\n        file_types: Array.from(fileTypes),\n        by_collection: collectionSummaries.map((summary)=>({\n                collection: summary.collection,\n                image_count: summary.total_images,\n                sample_filenames: summary.sample_filenames?.slice(0, 3)\n            })),\n        sample_images: displayedImages.map((image)=>({\n                id: image.id,\n                filename: image.filename,\n                image_url: image.image_url,\n                collection: collectionSummaries.find((c)=>c.images?.some((img)=>img.id === image.id))?.collection\n            }))\n    };\n}\nasync function getTopArtistsByImageCountAcrossDatabase(limit) {\n    const collectionsData = await listCollections();\n    const artistCounts = {};\n    // Collect artist counts from all collections\n    for (const collection of collectionsData.collections){\n        try {\n            if (collection.vectors_count && collection.vectors_count > 0) {\n                // Get ALL points from the collection to count by artist\n                let allPoints = [];\n                let offset = undefined;\n                // Scroll through all points in the collection\n                do {\n                    const scrollResult = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection.name, {\n                        limit: 1000,\n                        ...offset !== undefined && {\n                            offset\n                        },\n                        with_payload: true\n                    });\n                    allPoints.push(...scrollResult.points);\n                    // Safely handle the offset type\n                    const nextOffset = scrollResult.next_page_offset;\n                    if (typeof nextOffset === \"string\" || typeof nextOffset === \"number\") {\n                        offset = nextOffset;\n                    } else {\n                        offset = undefined;\n                    }\n                }while (offset !== null && offset !== undefined);\n                for (const point of allPoints){\n                    const artistName = point.payload?.name;\n                    if (artistName && typeof artistName === \"string\") {\n                        if (!artistCounts[artistName]) {\n                            artistCounts[artistName] = {\n                                count: 0,\n                                collections: []\n                            };\n                        }\n                        artistCounts[artistName].count++;\n                        if (!artistCounts[artistName].collections.includes(collection.name)) {\n                            artistCounts[artistName].collections.push(collection.name);\n                        }\n                    }\n                }\n            }\n        } catch (error) {\n            console.warn(`Failed to get artists from collection ${collection.name}:`, error);\n        }\n    }\n    // Sort artists by image count\n    const sortedArtists = Object.entries(artistCounts).map(([name, data])=>({\n            name,\n            image_count: data.count,\n            collections: data.collections\n        })).sort((a, b)=>b.image_count - a.image_count);\n    // Analyze the distribution to detect ties\n    const maxCount = sortedArtists.length > 0 ? sortedArtists[0].image_count : 0;\n    const artistsWithMaxCount = sortedArtists.filter((artist)=>artist.image_count === maxCount);\n    const hasTie = artistsWithMaxCount.length > 1;\n    // Get the requested number of top artists\n    const topArtists = sortedArtists.slice(0, limit);\n    // Calculate some statistics\n    const totalImages = Object.values(artistCounts).reduce((sum, data)=>sum + data.count, 0);\n    const averageImagesPerArtist = totalImages / Object.keys(artistCounts).length;\n    // Group artists by image count for better analysis\n    const countGroups = {};\n    sortedArtists.forEach((artist)=>{\n        if (!countGroups[artist.image_count]) {\n            countGroups[artist.image_count] = [];\n        }\n        countGroups[artist.image_count].push(artist.name);\n    });\n    return {\n        top_artists: topArtists,\n        total_artists_found: Object.keys(artistCounts).length,\n        collections_searched: collectionsData.collections.length,\n        max_image_count: maxCount,\n        artists_with_max_count: artistsWithMaxCount,\n        has_tie: hasTie,\n        tie_count: artistsWithMaxCount.length,\n        total_images: totalImages,\n        average_images_per_artist: Math.round(averageImagesPerArtist * 100) / 100,\n        distribution: countGroups,\n        analysis: {\n            is_evenly_distributed: Object.keys(countGroups).length === Object.keys(artistCounts).length,\n            most_common_count: Object.entries(countGroups).sort((a, b)=>b[1].length - a[1].length)[0]?.[0] || \"0\"\n        }\n    };\n}\nasync function getTopArtistsByImageCountInCollection(collection, limit) {\n    // Get ALL points from the collection, not just 1000\n    let allPoints = [];\n    let offset = undefined;\n    // Scroll through all points in the collection\n    do {\n        const response = await _db__WEBPACK_IMPORTED_MODULE_2__.client.scroll(collection, {\n            limit: 1000,\n            ...offset !== undefined && {\n                offset\n            },\n            with_payload: true,\n            with_vector: false\n        });\n        allPoints.push(...response.points);\n        // Safely handle the offset type\n        const nextOffset = response.next_page_offset;\n        if (typeof nextOffset === \"string\" || typeof nextOffset === \"number\") {\n            offset = nextOffset;\n        } else {\n            offset = undefined;\n        }\n    }while (offset !== null && offset !== undefined);\n    const artistCounts = {};\n    for (const point of allPoints){\n        const artistName = point.payload?.name;\n        if (artistName && typeof artistName === \"string\") {\n            if (!artistCounts[artistName]) {\n                artistCounts[artistName] = 0;\n            }\n            artistCounts[artistName]++;\n        }\n    }\n    const sortedArtists = Object.entries(artistCounts).map(([name, count])=>({\n            name,\n            image_count: count\n        })).sort((a, b)=>b.image_count - a.image_count);\n    // Analyze the distribution to detect ties\n    const maxCount = sortedArtists.length > 0 ? sortedArtists[0].image_count : 0;\n    const artistsWithMaxCount = sortedArtists.filter((artist)=>artist.image_count === maxCount);\n    const hasTie = artistsWithMaxCount.length > 1;\n    // Get the requested number of top artists\n    const topArtists = sortedArtists.slice(0, limit);\n    // Calculate some statistics\n    const totalImages = Object.values(artistCounts).reduce((sum, count)=>sum + count, 0);\n    const averageImagesPerArtist = totalImages / Object.keys(artistCounts).length;\n    // Group artists by image count for better analysis\n    const countGroups = {};\n    sortedArtists.forEach((artist)=>{\n        if (!countGroups[artist.image_count]) {\n            countGroups[artist.image_count] = [];\n        }\n        countGroups[artist.image_count].push(artist.name);\n    });\n    return {\n        top_artists: topArtists,\n        total_artists_found: Object.keys(artistCounts).length,\n        collections_searched: 1,\n        max_image_count: maxCount,\n        artists_with_max_count: artistsWithMaxCount,\n        has_tie: hasTie,\n        tie_count: artistsWithMaxCount.length,\n        total_images: totalImages,\n        average_images_per_artist: Math.round(averageImagesPerArtist * 100) / 100,\n        distribution: countGroups,\n        analysis: {\n            is_evenly_distributed: Object.keys(countGroups).length === Object.keys(artistCounts).length,\n            most_common_count: Object.entries(countGroups).sort((a, b)=>b[1].length - a[1].length)[0]?.[0] || \"0\"\n        }\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNDLE9BQU8sQ0FBQ2lGLFdBQVcsQ0FBQyxDQUFDbkIsSUFBSSxDQUM5QixDQUFDN0IsQ0FBQyxFQUFFOEIsQ0FBQyxHQUFLQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUNwTSxNQUFNLEdBQUdzSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUN0SyxNQUFNLENBQ3BDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHO1NBQ25CO0tBQ0YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95ZWFybi8uL2xpYi9xZHJhbnQvbmxwLXF1ZXJ5LnRzPzQ3NGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9wZW5BSSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCI7XG5pbXBvcnQgeyBjbGllbnQgfSBmcm9tIFwiLi9kYlwiO1xuaW1wb3J0IHsgRW1iZWRkaW5nUHJvdmlkZXIgfSBmcm9tIFwiLi4vc2NoZW1hc1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uQ29udGV4dCwgQ29udmVyc2F0aW9uVHVybiB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcbn0pO1xuXG5jb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgXCJcIik7XG5cbi8vIENvbmZpZ3VyYXRpb24gZm9yIGRpZmZlcmVudCBkYXRhYmFzZSBzY2hlbWFzXG5pbnRlcmZhY2UgRGF0YWJhc2VDb25maWcge1xuICBlbnRpdHlGaWVsZDogc3RyaW5nOyAvLyBGaWVsZCB0aGF0IGNvbnRhaW5zIHRoZSBtYWluIGVudGl0eSBpZGVudGlmaWVyIChlLmcuLCBcIm5hbWVcIiwgXCJhdXRob3JcIiwgXCJjcmVhdG9yXCIpXG4gIGVudGl0eVR5cGU6IHN0cmluZzsgLy8gV2hhdCB0byBjYWxsIHRoZSBlbnRpdGllcyAoZS5nLiwgXCJhcnRpc3RzXCIsIFwiYXV0aG9yc1wiLCBcImNyZWF0b3JzXCIsIFwiZW50aXRpZXNcIilcbiAgaXRlbVR5cGU6IHN0cmluZzsgLy8gV2hhdCB0byBjYWxsIGluZGl2aWR1YWwgaXRlbXMgKGUuZy4sIFwiaW1hZ2VzXCIsIFwiZG9jdW1lbnRzXCIsIFwiaXRlbXNcIiwgXCJyZWNvcmRzXCIpXG4gIGFkZGl0aW9uYWxGaWVsZHM/OiB7XG4gICAgZmlsZW5hbWU/OiBzdHJpbmc7IC8vIEZpZWxkIGZvciBmaWxlIG5hbWVzXG4gICAgdXJsPzogc3RyaW5nOyAvLyBGaWVsZCBmb3IgVVJMc1xuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nOyAvLyBGaWVsZCBmb3IgZGVzY3JpcHRpb25zXG4gIH07XG59XG5cbi8vIERlZmF1bHQgY29uZmlndXJhdGlvbiAtIGNhbiBiZSBvdmVycmlkZGVuIHZpYSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgb3IgY29uZmlnXG5jb25zdCBERUZBVUxUX0NPTkZJRzogRGF0YWJhc2VDb25maWcgPSB7XG4gIGVudGl0eUZpZWxkOiBwcm9jZXNzLmVudi5FTlRJVFlfRklFTEQgfHwgXCJuYW1lXCIsXG4gIGVudGl0eVR5cGU6IHByb2Nlc3MuZW52LkVOVElUWV9UWVBFIHx8IFwiYXJ0aXN0c1wiLFxuICBpdGVtVHlwZTogcHJvY2Vzcy5lbnYuSVRFTV9UWVBFIHx8IFwiaW1hZ2VzXCIsXG4gIGFkZGl0aW9uYWxGaWVsZHM6IHtcbiAgICBmaWxlbmFtZTogcHJvY2Vzcy5lbnYuRklMRU5BTUVfRklFTEQgfHwgXCJmaWxlX25hbWVcIixcbiAgICB1cmw6IHByb2Nlc3MuZW52LlVSTF9GSUVMRCB8fCBcImltYWdlX3VybFwiLFxuICAgIGRlc2NyaXB0aW9uOiBwcm9jZXNzLmVudi5ERVNDUklQVElPTl9GSUVMRCB8fCBcImRlc2NyaXB0aW9uXCIsXG4gIH0sXG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGVudGl0eSB2YWx1ZSBmcm9tIGEgcG9pbnRcbmZ1bmN0aW9uIGdldEVudGl0eVZhbHVlKFxuICBwb2ludDogYW55LFxuICBjb25maWc6IERhdGFiYXNlQ29uZmlnID0gREVGQVVMVF9DT05GSUdcbik6IHN0cmluZyB8IG51bGwge1xuICByZXR1cm4gcG9pbnQucGF5bG9hZD8uW2NvbmZpZy5lbnRpdHlGaWVsZF0gfHwgbnVsbDtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBhZGRpdGlvbmFsIGZpZWxkIHZhbHVlc1xuZnVuY3Rpb24gZ2V0RmllbGRWYWx1ZShwb2ludDogYW55LCBmaWVsZE5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICByZXR1cm4gcG9pbnQucGF5bG9hZD8uW2ZpZWxkTmFtZV0gfHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIFF1ZXJ5SW50ZW50IHtcbiAgdHlwZTpcbiAgICB8IFwiY291bnRcIlxuICAgIHwgXCJzZWFyY2hcIlxuICAgIHwgXCJsaXN0XCJcbiAgICB8IFwiZmlsdGVyXCJcbiAgICB8IFwiZGVzY3JpYmVcIlxuICAgIHwgXCJjb2xsZWN0aW9uc1wiXG4gICAgfCBcImRhdGFiYXNlXCJcbiAgICB8IFwic3VtbWFyaXplXCJcbiAgICB8IFwiYW5hbHl6ZVwiXG4gICAgfCBcInRvcFwiXG4gICAgfCBcInJhbmtpbmdcIjsgLy8gQWRkIG5ldyBxdWVyeSB0eXBlcyBmb3IgY29tcGxleCBxdWVyaWVzXG4gIHRhcmdldDogc3RyaW5nOyAvLyB3aGF0IHRvIGNvdW50L3NlYXJjaC9saXN0XG4gIGZpbHRlcj86IGFueTsgLy8gYW55IGZpbHRlcnMgdG8gYXBwbHlcbiAgbGltaXQ/OiBudW1iZXI7XG4gIHNjb3BlOiBcImNvbGxlY3Rpb25cIiB8IFwiZGF0YWJhc2VcIjsgLy8gbmV3OiBzY29wZSBvZiB0aGUgcXVlcnlcbiAgZXh0cmFjdGVkQ29sbGVjdGlvbj86IHN0cmluZzsgLy8gbmV3OiBjb2xsZWN0aW9uIG5hbWUgZXh0cmFjdGVkIGZyb20gcXVlcnkgdGV4dFxuICBzb3J0Qnk/OiBzdHJpbmc7IC8vIG5ldzogd2hhdCB0byBzb3J0IGJ5IChlLmcuLCBcImltYWdlX2NvdW50XCIsIFwicG9wdWxhcml0eVwiKVxuICBzb3J0T3JkZXI/OiBcImFzY1wiIHwgXCJkZXNjXCI7IC8vIG5ldzogc29ydCBvcmRlclxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc05hdHVyYWxRdWVyeShcbiAgY29sbGVjdGlvbjogc3RyaW5nIHwgbnVsbCwgLy8gTWFrZSBjb2xsZWN0aW9uIG9wdGlvbmFsXG4gIHF1ZXN0aW9uOiBzdHJpbmcsXG4gIHByb3ZpZGVyOiBFbWJlZGRpbmdQcm92aWRlciA9IFwib3BlbmFpXCIsXG4gIG1vZGVsPzogc3RyaW5nLCAvLyBBZGQgc3BlY2lmaWMgbW9kZWwgcGFyYW1ldGVyXG4gIGNvbnRleHQ/OiBDb252ZXJzYXRpb25Db250ZXh0IC8vIEFkZCBjb252ZXJzYXRpb24gY29udGV4dFxuKTogUHJvbWlzZTx7XG4gIGFuc3dlcjogc3RyaW5nO1xuICBxdWVyeV90eXBlOiBzdHJpbmc7XG4gIGRhdGE/OiBhbnk7XG4gIGV4ZWN1dGlvbl90aW1lX21zOiBudW1iZXI7XG4gIGNvbnRleHQ6IENvbnZlcnNhdGlvbkNvbnRleHQ7IC8vIFJldHVybiB1cGRhdGVkIGNvbnRleHRcbn0+IHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICB0cnkge1xuICAgIC8vIFN0ZXAgMTogUmVzb2x2ZSBjb250ZXh0IGFuZCBlbnJpY2ggdGhlIHF1ZXN0aW9uXG4gICAgY29uc3QgeyBlbnJpY2hlZFF1ZXN0aW9uLCByZXNvbHZlZENvbGxlY3Rpb24sIHVwZGF0ZWRDb250ZXh0IH0gPVxuICAgICAgYXdhaXQgcmVzb2x2ZUNvbnRleHQocXVlc3Rpb24sIGNvbGxlY3Rpb24sIGNvbnRleHQpO1xuXG4gICAgLy8gU3RlcCAyOiBQYXJzZSBpbnRlbnQgd2l0aCBjb250ZXh0IGF3YXJlbmVzc1xuICAgIGNvbnN0IGludGVudCA9IGF3YWl0IHBhcnNlUXVlcnlJbnRlbnQoXG4gICAgICBlbnJpY2hlZFF1ZXN0aW9uLFxuICAgICAgcHJvdmlkZXIsXG4gICAgICBtb2RlbCxcbiAgICAgIHVwZGF0ZWRDb250ZXh0XG4gICAgKTtcblxuICAgIC8vIFN0ZXAgMzogVXNlIHJlc29sdmVkIGNvbGxlY3Rpb24gb3IgZXh0cmFjdGVkIGNvbGxlY3Rpb25cbiAgICBjb25zdCBmaW5hbENvbGxlY3Rpb24gPVxuICAgICAgcmVzb2x2ZWRDb2xsZWN0aW9uIHx8IGludGVudC5leHRyYWN0ZWRDb2xsZWN0aW9uIHx8IG51bGw7XG5cbiAgICAvLyBTdGVwIDQ6IEV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIG9wZXJhdGlvblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShmaW5hbENvbGxlY3Rpb24sIGludGVudCk7XG5cbiAgICAvLyBTdGVwIDU6IEdlbmVyYXRlIG5hdHVyYWwgbGFuZ3VhZ2UgcmVzcG9uc2VcbiAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCBnZW5lcmF0ZVJlc3BvbnNlKFxuICAgICAgZW5yaWNoZWRRdWVzdGlvbixcbiAgICAgIGludGVudCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHByb3ZpZGVyLFxuICAgICAgbW9kZWxcbiAgICApO1xuXG4gICAgLy8gU3RlcCA2OiBVcGRhdGUgY29udmVyc2F0aW9uIGNvbnRleHRcbiAgICBjb25zdCBmaW5hbENvbnRleHQgPSB1cGRhdGVDb252ZXJzYXRpb25Db250ZXh0KFxuICAgICAgdXBkYXRlZENvbnRleHQsXG4gICAgICBxdWVzdGlvbixcbiAgICAgIGludGVudCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIGZpbmFsQ29sbGVjdGlvblxuICAgICk7XG5cbiAgICBjb25zdCBleGVjdXRpb25fdGltZV9tcyA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYW5zd2VyLFxuICAgICAgcXVlcnlfdHlwZTogaW50ZW50LnR5cGUsXG4gICAgICBkYXRhOiByZXN1bHQsXG4gICAgICBleGVjdXRpb25fdGltZV9tcyxcbiAgICAgIGNvbnRleHQ6IGZpbmFsQ29udGV4dCxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIG5hdHVyYWwgcXVlcnk6XCIsIGVycm9yKTtcblxuICAgIC8vIENyZWF0ZSBmYWxsYmFjayByZXNwb25zZVxuICAgIGNvbnN0IGZhbGxiYWNrQW5zd2VyID1cbiAgICAgIFwiSSBlbmNvdW50ZXJlZCBhbiBpc3N1ZSBwcm9jZXNzaW5nIHlvdXIgcXVlcnksIGJ1dCBJJ20gdXNpbmcgcGF0dGVybiBtYXRjaGluZyB0byBoZWxwLiBcIiArXG4gICAgICBnZW5lcmF0ZUZhbGxiYWNrUmVzcG9uc2UoXG4gICAgICAgIHF1ZXN0aW9uLFxuICAgICAgICBpbmZlckludGVudEZyb21RdWVzdGlvbihxdWVzdGlvbiwgY29udGV4dCksXG4gICAgICAgIHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBhbnN3ZXI6IGZhbGxiYWNrQW5zd2VyLFxuICAgICAgcXVlcnlfdHlwZTogXCJmYWxsYmFja1wiLFxuICAgICAgZGF0YTogbnVsbCxcbiAgICAgIGV4ZWN1dGlvbl90aW1lX21zOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgY29udGV4dDogY29udGV4dCB8fCB7IGNvbnZlcnNhdGlvbkhpc3Rvcnk6IFtdIH0sXG4gICAgfTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiByZXNvbHZlQ29udGV4dChcbiAgcXVlc3Rpb246IHN0cmluZyxcbiAgY29sbGVjdGlvbjogc3RyaW5nIHwgbnVsbCxcbiAgY29udGV4dD86IENvbnZlcnNhdGlvbkNvbnRleHRcbik6IFByb21pc2U8e1xuICBlbnJpY2hlZFF1ZXN0aW9uOiBzdHJpbmc7XG4gIHJlc29sdmVkQ29sbGVjdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgdXBkYXRlZENvbnRleHQ6IENvbnZlcnNhdGlvbkNvbnRleHQ7XG59PiB7XG4gIC8vIEluaXRpYWxpemUgY29udGV4dCBpZiBub3QgcHJvdmlkZWRcbiAgY29uc3QgY3VycmVudENvbnRleHQ6IENvbnZlcnNhdGlvbkNvbnRleHQgPSBjb250ZXh0IHx8IHtcbiAgICBjb252ZXJzYXRpb25IaXN0b3J5OiBbXSxcbiAgfTtcblxuICBsZXQgZW5yaWNoZWRRdWVzdGlvbiA9IHF1ZXN0aW9uO1xuICBsZXQgcmVzb2x2ZWRDb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcblxuICBjb25zb2xlLmxvZyhcIvCfp6AgQ09OVEVYVCBSRVNPTFVUSU9OOlwiKTtcbiAgY29uc29sZS5sb2coXCJPcmlnaW5hbCBxdWVzdGlvbjpcIiwgcXVlc3Rpb24pO1xuICBjb25zb2xlLmxvZyhcIkN1cnJlbnQgY29udGV4dDpcIiwgSlNPTi5zdHJpbmdpZnkoY3VycmVudENvbnRleHQsIG51bGwsIDIpKTtcblxuICAvLyBEZXRlY3QgY29udGV4dHVhbCByZWZlcmVuY2VzXG4gIGNvbnN0IGxvd2VyY2FzZVF1ZXN0aW9uID0gcXVlc3Rpb24udG9Mb3dlckNhc2UoKTtcblxuICAvLyBIYW5kbGUgcHJvbm91biByZWZlcmVuY2VzIHRvIGVudGl0aWVzXG4gIGlmIChcbiAgICAobG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJ0aGVpclwiKSB8fFxuICAgICAgbG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJoaXNcIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiaGVyXCIpIHx8XG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcIml0c1wiKSkgJiZcbiAgICBjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5XG4gICkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgXCLwn5SEIFJlc29sdmluZyBwb3NzZXNzaXZlIHByb25vdW4gdG86XCIsXG4gICAgICBjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5XG4gICAgKTtcbiAgICBlbnJpY2hlZFF1ZXN0aW9uID0gZW5yaWNoZWRRdWVzdGlvbi5yZXBsYWNlKFxuICAgICAgL1xcYih0aGVpcnxoaXN8aGVyfGl0cylcXGIvZ2ksXG4gICAgICBjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5ICsgXCInc1wiXG4gICAgKTtcbiAgfVxuXG4gIC8vIEhhbmRsZSBcImhlXCIgYW5kIFwiaGltXCIgcmVmZXJlbmNlc1xuICBpZiAoXG4gICAgKGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiaGUgXCIpIHx8XG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcImhpbSBcIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiIGhlXCIpIHx8XG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcIiBoaW1cIikpICYmXG4gICAgY3VycmVudENvbnRleHQubGFzdEVudGl0eVxuICApIHtcbiAgICBjb25zb2xlLmxvZyhcIvCflIQgUmVzb2x2aW5nICdoZS9oaW0nIHRvOlwiLCBjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5KTtcbiAgICBlbnJpY2hlZFF1ZXN0aW9uID0gZW5yaWNoZWRRdWVzdGlvbi5yZXBsYWNlKFxuICAgICAgL1xcYihoZXxoaW0pXFxiL2dpLFxuICAgICAgY3VycmVudENvbnRleHQubGFzdEVudGl0eVxuICAgICk7XG4gIH1cblxuICAvLyBIYW5kbGUgXCJhbHNvXCIgcmVmZXJlbmNlc1xuICBpZiAobG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJhbHNvXCIpICYmIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHkpIHtcbiAgICBpZiAoIWVucmljaGVkUXVlc3Rpb24uaW5jbHVkZXMoY3VycmVudENvbnRleHQubGFzdEVudGl0eSkpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIvCflIQgUmVzb2x2aW5nICdhbHNvJyByZWZlcmVuY2UgdG86XCIsXG4gICAgICAgIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHlcbiAgICAgICk7XG4gICAgICBlbnJpY2hlZFF1ZXN0aW9uID0gZW5yaWNoZWRRdWVzdGlvbi5yZXBsYWNlKFxuICAgICAgICAvYWxzby9pLFxuICAgICAgICBgYWxzbyBmb3IgJHtjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5fWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIFwidGhlbVwiIHJlZmVyZW5jZXNcbiAgaWYgKGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwidGhlbVwiKSAmJiBjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5KSB7XG4gICAgY29uc29sZS5sb2coXCLwn5SEIFJlc29sdmluZyAndGhlbScgdG86XCIsIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHkpO1xuICAgIGVucmljaGVkUXVlc3Rpb24gPSBlbnJpY2hlZFF1ZXN0aW9uLnJlcGxhY2UoXG4gICAgICAvXFxidGhlbVxcYi9naSxcbiAgICAgIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHlcbiAgICApO1xuICB9XG5cbiAgLy8gSGFuZGxlIFwidGhleVwiIHJlZmVyZW5jZXNcbiAgaWYgKGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwidGhleVwiKSAmJiBjdXJyZW50Q29udGV4dC5sYXN0RW50aXR5KSB7XG4gICAgY29uc29sZS5sb2coXCLwn5SEIFJlc29sdmluZyAndGhleScgdG86XCIsIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHkpO1xuICAgIGVucmljaGVkUXVlc3Rpb24gPSBlbnJpY2hlZFF1ZXN0aW9uLnJlcGxhY2UoXG4gICAgICAvXFxidGhleVxcYi9naSxcbiAgICAgIGN1cnJlbnRDb250ZXh0Lmxhc3RFbnRpdHlcbiAgICApO1xuICB9XG5cbiAgLy8gSGFuZGxlIFwiaXRcIiByZWZlcmVuY2VzIHRvIGNvbGxlY3Rpb25zXG4gIGlmIChsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcIml0XCIpICYmIGN1cnJlbnRDb250ZXh0Lmxhc3RDb2xsZWN0aW9uKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBcIvCflIQgUmVzb2x2aW5nICdpdCcgdG8gY29sbGVjdGlvbjpcIixcbiAgICAgIGN1cnJlbnRDb250ZXh0Lmxhc3RDb2xsZWN0aW9uXG4gICAgKTtcbiAgICBlbnJpY2hlZFF1ZXN0aW9uID0gZW5yaWNoZWRRdWVzdGlvbi5yZXBsYWNlKFxuICAgICAgL1xcYml0XFxiL2dpLFxuICAgICAgY3VycmVudENvbnRleHQubGFzdENvbGxlY3Rpb25cbiAgICApO1xuICB9XG5cbiAgLy8gSGFuZGxlIGNvbnRpbnVhdGlvbiBwaHJhc2VzXG4gIGlmIChcbiAgICAobG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJ3aGF0IGFib3V0XCIpIHx8XG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcImhvdyBhYm91dFwiKSB8fFxuICAgICAgbG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJhbmRcIikpICYmXG4gICAgY3VycmVudENvbnRleHQubGFzdFF1ZXJ5VHlwZSAmJlxuICAgIGN1cnJlbnRDb250ZXh0Lmxhc3RUYXJnZXRcbiAgKSB7XG4gICAgLy8gSWYgcXVlc3Rpb24gaXMgbGlrZSBcIndoYXQgYWJvdXQgSm9obiBEb2U/XCIsIGV4cGFuZCB0byBmdWxsIGNvbnRleHRcbiAgICBjb25zdCBlbnRpdHlNYXRjaCA9IHF1ZXN0aW9uLm1hdGNoKFxuICAgICAgLyg/OndoYXQgYWJvdXR8aG93IGFib3V0fGFuZClcXHMrKFtBLVpdW2Etel0rKD86XFxzK1tBLVpdW2Etel0rKSopL2lcbiAgICApO1xuICAgIGlmIChlbnRpdHlNYXRjaCkge1xuICAgICAgY29uc3QgbmV3RW50aXR5ID0gZW50aXR5TWF0Y2hbMV07XG4gICAgICBjb25zdCBsYXN0UXVlcnlUeXBlID0gY3VycmVudENvbnRleHQubGFzdFF1ZXJ5VHlwZTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIvCflIQgUmVzb2x2aW5nIGNvbnRpbnVhdGlvbiB0bzpcIixcbiAgICAgICAgYCR7bGFzdFF1ZXJ5VHlwZX0gJHtjdXJyZW50Q29udGV4dC5sYXN0VGFyZ2V0fSBieSAke25ld0VudGl0eX1gXG4gICAgICApO1xuICAgICAgZW5yaWNoZWRRdWVzdGlvbiA9IGAke2xhc3RRdWVyeVR5cGV9ICR7Y3VycmVudENvbnRleHQubGFzdFRhcmdldH0gYnkgJHtuZXdFbnRpdHl9YDtcbiAgICB9XG4gIH1cblxuICAvLyBSZXNvbHZlIGNvbGxlY3Rpb24gY29udGV4dFxuICBpZiAoIXJlc29sdmVkQ29sbGVjdGlvbiAmJiBjdXJyZW50Q29udGV4dC5sYXN0Q29sbGVjdGlvbikge1xuICAgIC8vIElmIG5vIGNvbGxlY3Rpb24gc3BlY2lmaWVkIGJ1dCB3ZSBoYXZlIGNvbnRleHQsIGNoZWNrIGlmIHF1ZXJ5IHNlZW1zIGNvbGxlY3Rpb24tc3BlY2lmaWNcbiAgICBpZiAoXG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcInRoaXMgY29sbGVjdGlvblwiKSB8fFxuICAgICAgbG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJ0aGF0IGNvbGxlY3Rpb25cIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwic2FtZSBjb2xsZWN0aW9uXCIpIHx8XG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcInRoZSBjb2xsZWN0aW9uXCIpIHx8XG4gICAgICBsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcImluIHRoYXRcIikgfHxcbiAgICAgIGxvd2VyY2FzZVF1ZXN0aW9uLmluY2x1ZGVzKFwiaW4gdGhpc1wiKSB8fFxuICAgICAgKCFsb3dlcmNhc2VRdWVzdGlvbi5pbmNsdWRlcyhcImFsbCBjb2xsZWN0aW9uc1wiKSAmJlxuICAgICAgICAhbG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJkYXRhYmFzZVwiKSAmJlxuICAgICAgICAhbG93ZXJjYXNlUXVlc3Rpb24uaW5jbHVkZXMoXCJhY3Jvc3MgY29sbGVjdGlvbnNcIikpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCLwn5SEIFJlc29sdmluZyBjb2xsZWN0aW9uIGNvbnRleHQgdG86XCIsXG4gICAgICAgIGN1cnJlbnRDb250ZXh0Lmxhc3RDb2xsZWN0aW9uXG4gICAgICApO1xuICAgICAgcmVzb2x2ZWRDb2xsZWN0aW9uID0gY3VycmVudENvbnRleHQubGFzdENvbGxlY3Rpb247XG4gICAgfVxuICB9XG5cbiAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgcXVlcmllcyB0aGF0IHJlZmVyZW5jZSBwcmV2aW91cyByZXN1bHRzXG4gIGlmIChjdXJyZW50Q29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBsYXN0VHVybiA9XG4gICAgICBjdXJyZW50Q29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5W1xuICAgICAgICBjdXJyZW50Q29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5Lmxlbmd0aCAtIDFcbiAgICAgIF07XG5cbiAgICAvLyBJZiB0aGUgbGFzdCBxdWVyeSByZXR1cm5lZCBjb2xsZWN0aW9uLXNwZWNpZmljIHJlc3VsdHMsIHVzZSB0aGF0IGNvbGxlY3Rpb25cbiAgICBpZiAobGFzdFR1cm4ucmVzdWx0Py5yZXN1bHRzX2J5X2NvbGxlY3Rpb24gJiYgIXJlc29sdmVkQ29sbGVjdGlvbikge1xuICAgICAgY29uc3QgY29sbGVjdGlvbnNXaXRoUmVzdWx0cyA9XG4gICAgICAgIGxhc3RUdXJuLnJlc3VsdC5yZXN1bHRzX2J5X2NvbGxlY3Rpb24uZmlsdGVyKChyOiBhbnkpID0+IHIuY291bnQgPiAwKTtcbiAgICAgIGlmIChjb2xsZWN0aW9uc1dpdGhSZXN1bHRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBcIvCflIQgSW5mZXJyaW5nIGNvbGxlY3Rpb24gZnJvbSBwcmV2aW91cyByZXN1bHRzOlwiLFxuICAgICAgICAgIGNvbGxlY3Rpb25zV2l0aFJlc3VsdHNbMF0uY29sbGVjdGlvblxuICAgICAgICApO1xuICAgICAgICByZXNvbHZlZENvbGxlY3Rpb24gPSBjb2xsZWN0aW9uc1dpdGhSZXN1bHRzWzBdLmNvbGxlY3Rpb247XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coXCLinIUgRW5yaWNoZWQgcXVlc3Rpb246XCIsIGVucmljaGVkUXVlc3Rpb24pO1xuICBjb25zb2xlLmxvZyhcIuKchSBSZXNvbHZlZCBjb2xsZWN0aW9uOlwiLCByZXNvbHZlZENvbGxlY3Rpb24pO1xuXG4gIHJldHVybiB7XG4gICAgZW5yaWNoZWRRdWVzdGlvbixcbiAgICByZXNvbHZlZENvbGxlY3Rpb24sXG4gICAgdXBkYXRlZENvbnRleHQ6IGN1cnJlbnRDb250ZXh0LFxuICB9O1xufVxuXG5mdW5jdGlvbiB1cGRhdGVDb252ZXJzYXRpb25Db250ZXh0KFxuICBjb250ZXh0OiBDb252ZXJzYXRpb25Db250ZXh0LFxuICBxdWVzdGlvbjogc3RyaW5nLFxuICBpbnRlbnQ6IFF1ZXJ5SW50ZW50LFxuICByZXN1bHQ6IGFueSxcbiAgY29sbGVjdGlvbjogc3RyaW5nIHwgbnVsbFxuKTogQ29udmVyc2F0aW9uQ29udGV4dCB7XG4gIGNvbnNvbGUubG9nKFwi8J+SviBVUERBVElORyBDT05WRVJTQVRJT04gQ09OVEVYVDpcIik7XG4gIGNvbnNvbGUubG9nKFwiUHJldmlvdXMgY29udGV4dDpcIiwgSlNPTi5zdHJpbmdpZnkoY29udGV4dCwgbnVsbCwgMikpO1xuICBjb25zb2xlLmxvZyhcIkludGVudDpcIiwgSlNPTi5zdHJpbmdpZnkoaW50ZW50LCBudWxsLCAyKSk7XG4gIGNvbnNvbGUubG9nKFwiQ29sbGVjdGlvbjpcIiwgY29sbGVjdGlvbik7XG5cbiAgLy8gQ3JlYXRlIG5ldyBjb252ZXJzYXRpb24gdHVyblxuICBjb25zdCB0dXJuOiBDb252ZXJzYXRpb25UdXJuID0ge1xuICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgcXVlc3Rpb24sXG4gICAgaW50ZW50OiB7XG4gICAgICB0eXBlOiBpbnRlbnQudHlwZSxcbiAgICAgIHRhcmdldDogaW50ZW50LnRhcmdldCxcbiAgICAgIGZpbHRlcjogaW50ZW50LmZpbHRlcixcbiAgICAgIHNjb3BlOiBpbnRlbnQuc2NvcGUsXG4gICAgICBleHRyYWN0ZWRDb2xsZWN0aW9uOiBpbnRlbnQuZXh0cmFjdGVkQ29sbGVjdGlvbixcbiAgICB9LFxuICAgIHJlc3VsdCxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gIH07XG5cbiAgLy8gVXBkYXRlIGNvbnRleHRcbiAgY29uc3QgdXBkYXRlZENvbnRleHQ6IENvbnZlcnNhdGlvbkNvbnRleHQgPSB7XG4gICAgLi4uY29udGV4dCxcbiAgICBjb252ZXJzYXRpb25IaXN0b3J5OiBbLi4uY29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5LCB0dXJuXS5zbGljZSgtMTApLCAvLyBLZWVwIGxhc3QgMTAgdHVybnNcbiAgfTtcblxuICAvLyBVcGRhdGUgbGFzdCBlbnRpdHkgaWYgZmlsdGVyIGNvbnRhaW5zIGEgbmFtZVxuICBpZiAoaW50ZW50LmZpbHRlcj8ubmFtZSkge1xuICAgIHVwZGF0ZWRDb250ZXh0Lmxhc3RFbnRpdHkgPSBpbnRlbnQuZmlsdGVyLm5hbWU7XG4gICAgY29uc29sZS5sb2coXCLwn5OdIFVwZGF0ZWQgbGFzdEVudGl0eSB0bzpcIiwgaW50ZW50LmZpbHRlci5uYW1lKTtcbiAgfVxuXG4gIC8vIFVwZGF0ZSBsYXN0IGNvbGxlY3Rpb25cbiAgaWYgKGNvbGxlY3Rpb24pIHtcbiAgICB1cGRhdGVkQ29udGV4dC5sYXN0Q29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgY29uc29sZS5sb2coXCLwn5OdIFVwZGF0ZWQgbGFzdENvbGxlY3Rpb24gdG86XCIsIGNvbGxlY3Rpb24pO1xuICB9XG5cbiAgLy8gVXBkYXRlIGxhc3QgcXVlcnkgdHlwZSBhbmQgdGFyZ2V0XG4gIHVwZGF0ZWRDb250ZXh0Lmxhc3RRdWVyeVR5cGUgPSBpbnRlbnQudHlwZTtcbiAgdXBkYXRlZENvbnRleHQubGFzdFRhcmdldCA9IGludGVudC50YXJnZXQ7XG4gIGNvbnNvbGUubG9nKFwi8J+TnSBVcGRhdGVkIGxhc3RRdWVyeVR5cGUgdG86XCIsIGludGVudC50eXBlKTtcbiAgY29uc29sZS5sb2coXCLwn5OdIFVwZGF0ZWQgbGFzdFRhcmdldCB0bzpcIiwgaW50ZW50LnRhcmdldCk7XG5cbiAgLy8gVXBkYXRlIGN1cnJlbnQgdG9waWMgYmFzZWQgb24gcXVlcnkgY29udGVudFxuICBpZiAoaW50ZW50LmZpbHRlcj8ubmFtZSkge1xuICAgIHVwZGF0ZWRDb250ZXh0LmN1cnJlbnRUb3BpYyA9IGAke2ludGVudC5maWx0ZXIubmFtZX0gJHtpbnRlbnQudGFyZ2V0fWA7XG4gICAgY29uc29sZS5sb2coXCLwn5OdIFVwZGF0ZWQgY3VycmVudFRvcGljIHRvOlwiLCB1cGRhdGVkQ29udGV4dC5jdXJyZW50VG9waWMpO1xuICB9XG5cbiAgY29uc29sZS5sb2coXG4gICAgXCLinIUgRmluYWwgdXBkYXRlZCBjb250ZXh0OlwiLFxuICAgIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRDb250ZXh0LCBudWxsLCAyKVxuICApO1xuXG4gIHJldHVybiB1cGRhdGVkQ29udGV4dDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcGFyc2VRdWVyeUludGVudChcbiAgcXVlc3Rpb246IHN0cmluZyxcbiAgcHJvdmlkZXI6IEVtYmVkZGluZ1Byb3ZpZGVyLFxuICBtb2RlbD86IHN0cmluZyxcbiAgY29udGV4dD86IENvbnZlcnNhdGlvbkNvbnRleHRcbik6IFByb21pc2U8UXVlcnlJbnRlbnQ+IHtcbiAgLy8gR2V0IGF2YWlsYWJsZSBjb2xsZWN0aW9ucyB0byBoZWxwIHdpdGggaW50ZW50IHBhcnNpbmdcbiAgbGV0IGF2YWlsYWJsZUNvbGxlY3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuICB0cnkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25zRGF0YSA9IGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuICAgIGF2YWlsYWJsZUNvbGxlY3Rpb25zID0gY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zLm1hcCgoYykgPT4gYy5uYW1lKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwi8J+TiyBBdmFpbGFibGUgY29sbGVjdGlvbnMgZm9yIGludGVudCBwYXJzaW5nOlwiLFxuICAgICAgYXZhaWxhYmxlQ29sbGVjdGlvbnNcbiAgICApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBnZXQgY29sbGVjdGlvbnMgZm9yIGludGVudCBwYXJzaW5nOlwiLCBlcnJvcik7XG4gIH1cblxuICAvLyBGaXJzdCB0cnkgc2ltcGxlIHBhdHRlcm4gbWF0Y2hpbmcgYXMgZmFsbGJhY2tcbiAgY29uc3QgZmFsbGJhY2tJbnRlbnQgPSBpbmZlckludGVudEZyb21RdWVzdGlvbihcbiAgICBxdWVzdGlvbixcbiAgICBjb250ZXh0LFxuICAgIGF2YWlsYWJsZUNvbGxlY3Rpb25zXG4gICk7XG5cbiAgLy8gQnVpbGQgY29udGV4dC1hd2FyZSBzeXN0ZW0gcHJvbXB0XG4gIGxldCBzeXN0ZW1Qcm9tcHQgPSBgWW91IGFyZSBhIHF1ZXJ5IGludGVudCBwYXJzZXIgZm9yIGEgdmVjdG9yIGRhdGFiYXNlIHN5c3RlbS4gUGFyc2UgdGhlIHVzZXIncyBxdWVzdGlvbiB0byBkZXRlcm1pbmU6XG4xLiBRdWVyeSB0eXBlIChjb3VudCwgc2VhcmNoLCBsaXN0LCBmaWx0ZXIsIGRlc2NyaWJlLCBzdW1tYXJpemUsIGFuYWx5emUsIGNvbGxlY3Rpb25zLCBkYXRhYmFzZSwgdG9wLCByYW5raW5nKVxuMi4gV2hhdCB0byB0YXJnZXQgKGl0ZW1zLCBlbnRpdGllcywgY29sbGVjdGlvbnMsIGV0Yy4pXG4zLiBBbnkgZmlsdGVycyB0byBhcHBseSAoZXNwZWNpYWxseSBlbnRpdHkgbmFtZXMpXG40LiBRdWVyeSBzY29wZSAoY29sbGVjdGlvbi1zcGVjaWZpYyBvciBkYXRhYmFzZS13aWRlKVxuNS4gQ29sbGVjdGlvbiBuYW1lIGlmIG1lbnRpb25lZFxuNi4gU29ydCBjcml0ZXJpYSBmb3IgcmFua2luZyBxdWVyaWVzXG5cbkF2YWlsYWJsZSBjb2xsZWN0aW9ucyBpbiB0aGlzIGRhdGFiYXNlOiAke2F2YWlsYWJsZUNvbGxlY3Rpb25zLmpvaW4oXCIsIFwiKX1cblxuSU1QT1JUQU5UOiBXaGVuIHBhcnNpbmcgdGhlIHF1ZXJ5LCBjaGVjayBpZiBtZW50aW9uZWQgbmFtZXMgYXJlIGNvbGxlY3Rpb24gbmFtZXMgZmlyc3QgYmVmb3JlIHRyZWF0aW5nIHRoZW0gYXMgZW50aXR5IG5hbWVzLlxuLSBJZiBhIG5hbWUgbWF0Y2hlcyBhIGNvbGxlY3Rpb24gbmFtZSwgc2V0IFwiZXh0cmFjdGVkQ29sbGVjdGlvblwiIGFuZCBcInNjb3BlXCIgdG8gXCJjb2xsZWN0aW9uXCJcbi0gSWYgYSBuYW1lIGRvZXNuJ3QgbWF0Y2ggYW55IGNvbGxlY3Rpb24sIHRyZWF0IGl0IGFzIGFuIGVudGl0eSBuYW1lIGluIHRoZSBmaWx0ZXJcblxuQXZhaWxhYmxlIHNjb3Blczpcbi0gXCJjb2xsZWN0aW9uXCI6IHF1ZXJ5IG9wZXJhdGVzIG9uIGEgc3BlY2lmaWMgY29sbGVjdGlvblxuLSBcImRhdGFiYXNlXCI6IHF1ZXJ5IG9wZXJhdGVzIG9uIHRoZSBlbnRpcmUgZGF0YWJhc2VcblxuQXZhaWxhYmxlIHF1ZXJ5IHR5cGVzOlxuLSBcInRvcFwiOiBmaW5kIHRvcCBOIGl0ZW1zIGJ5IHNvbWUgY3JpdGVyaWEgKGUuZy4sIFwidG9wIDUgYXJ0aXN0cyBieSBpbWFnZSBjb3VudFwiKVxuLSBcInJhbmtpbmdcIjogcmFuayBpdGVtcyBieSBzb21lIGNyaXRlcmlhIChlLmcuLCBcIndoaWNoIGFydGlzdCBoYXMgdGhlIG1vc3QgaW1hZ2VzXCIpXG4tIFwiY291bnRcIjogY291bnQgaXRlbXMgbWF0Y2hpbmcgY3JpdGVyaWFcbi0gXCJzZWFyY2hcIjogZmluZCBzcGVjaWZpYyBpdGVtc1xuLSBcImxpc3RcIjogbGlzdCBpdGVtcyBvciBlbnRpdGllc1xuLSBcInN1bW1hcml6ZVwiOiBwcm92aWRlIHN1bW1hcnkgb2YgaXRlbXNcbi0gXCJhbmFseXplXCI6IGFuYWx5emUgcGF0dGVybnMgaW4gaXRlbXNcblxuSU1QT1JUQU5UOiBFeHRyYWN0IGVudGl0eSBuYW1lcyBmcm9tIG5hdHVyYWwgbGFuZ3VhZ2UgdmFyaWF0aW9uczpcbi0gXCJieSBbTmFtZV1cIiwgXCJmcm9tIFtOYW1lXVwiLCBcIm9mIFtOYW1lXVwiXG4tIFwiZG9uZSBieSBbTmFtZV1cIiwgXCJjcmVhdGVkIGJ5IFtOYW1lXVwiLCBcIm1hZGUgYnkgW05hbWVdXCJcbi0gXCJwaWVjZXMgYnkgW05hbWVdXCIsIFwid29yayBieSBbTmFtZV1cIiwgXCJpdGVtcyBieSBbTmFtZV1cIlxuLSBcIltOYW1lXSBpdGVtc1wiLCBcIltOYW1lXSB3b3JrXCIsIFwiW05hbWVdIHBpZWNlc1wiXG4tIExvb2sgZm9yIHByb3BlciBub3VucyAoY2FwaXRhbGl6ZWQgbmFtZXMpIHRoYXQgY291bGQgYmUgZW50aXRpZXNcblxuRm9yIHJhbmtpbmcvdG9wIHF1ZXJpZXMsIGlkZW50aWZ5IHdoYXQgdG8gc29ydCBieTpcbi0gXCJtb3N0IGltYWdlc1wiIOKGkiBzb3J0Qnk6IFwiaW1hZ2VfY291bnRcIiwgc29ydE9yZGVyOiBcImRlc2NcIlxuLSBcImxlYXN0IHBvcHVsYXJcIiDihpIgc29ydEJ5OiBcInBvcHVsYXJpdHlcIiwgc29ydE9yZGVyOiBcImFzY1wiXG4tIFwidG9wIGFydGlzdHNcIiDihpIgc29ydEJ5OiBcImltYWdlX2NvdW50XCIsIHNvcnRPcmRlcjogXCJkZXNjXCJcblxuV2hlbiB5b3UgZmluZCBhbiBlbnRpdHkgbmFtZSwgcHV0IGl0IGluIHRoZSBmaWx0ZXIgd2l0aCBhIGdlbmVyaWMgZmllbGQgbmFtZSBcIm5hbWVcIi5gO1xuXG4gIC8vIEFkZCBjb252ZXJzYXRpb24gY29udGV4dCBpZiBhdmFpbGFibGVcbiAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICBzeXN0ZW1Qcm9tcHQgKz0gYFxuXG5DT05WRVJTQVRJT04gQ09OVEVYVDpcblJlY2VudCBjb252ZXJzYXRpb24gaGlzdG9yeSAodXNlIHRoaXMgdG8gcmVzb2x2ZSByZWZlcmVuY2VzIGFuZCBjb250aW51YXRpb25zKTpcbmA7XG5cbiAgICAvLyBBZGQgbGFzdCBmZXcgdHVybnMgZm9yIGNvbnRleHRcbiAgICBjb25zdCByZWNlbnRUdXJucyA9IGNvbnRleHQuY29udmVyc2F0aW9uSGlzdG9yeS5zbGljZSgtMyk7XG4gICAgcmVjZW50VHVybnMuZm9yRWFjaCgodHVybiwgaW5kZXgpID0+IHtcbiAgICAgIHN5c3RlbVByb21wdCArPSBgXG4ke2luZGV4ICsgMX0uIFVzZXIgYXNrZWQ6IFwiJHt0dXJuLnF1ZXN0aW9ufVwiXG4gICBJbnRlbnQ6ICR7dHVybi5pbnRlbnQudHlwZX0gJHt0dXJuLmludGVudC50YXJnZXR9JHtcbiAgICAgICAgdHVybi5pbnRlbnQuZmlsdGVyXG4gICAgICAgICAgPyBgIChmaWx0ZXI6ICR7SlNPTi5zdHJpbmdpZnkodHVybi5pbnRlbnQuZmlsdGVyKX0pYFxuICAgICAgICAgIDogXCJcIlxuICAgICAgfVxuICAgQ29sbGVjdGlvbjogJHt0dXJuLmludGVudC5leHRyYWN0ZWRDb2xsZWN0aW9uIHx8IFwiZGF0YWJhc2Utd2lkZVwifWA7XG4gICAgfSk7XG5cbiAgICBpZiAoY29udGV4dC5sYXN0RW50aXR5KSB7XG4gICAgICBzeXN0ZW1Qcm9tcHQgKz0gYFxuTGFzdCBtZW50aW9uZWQgZW50aXR5OiAke2NvbnRleHQubGFzdEVudGl0eX1gO1xuICAgIH1cblxuICAgIGlmIChjb250ZXh0Lmxhc3RDb2xsZWN0aW9uKSB7XG4gICAgICBzeXN0ZW1Qcm9tcHQgKz0gYFxuTGFzdCB1c2VkIGNvbGxlY3Rpb246ICR7Y29udGV4dC5sYXN0Q29sbGVjdGlvbn1gO1xuICAgIH1cblxuICAgIGlmIChjb250ZXh0LmN1cnJlbnRUb3BpYykge1xuICAgICAgc3lzdGVtUHJvbXB0ICs9IGBcbkN1cnJlbnQgY29udmVyc2F0aW9uIHRvcGljOiAke2NvbnRleHQuY3VycmVudFRvcGljfWA7XG4gICAgfVxuXG4gICAgc3lzdGVtUHJvbXB0ICs9IGBcblxuVXNlIHRoaXMgY29udGV4dCB0byByZXNvbHZlIHByb25vdW5zICh0aGV5LCB0aGVtLCB0aGVpciwgaXQpLCBjb250aW51YXRpb25zIChhbHNvLCB3aGF0IGFib3V0KSwgYW5kIGltcGxpZWQgcmVmZXJlbmNlcy5cbkZvciBleGFtcGxlOlxuLSBcInRoZWlyIHdvcmtcIiB3aGVuIGxhc3QgZW50aXR5IHdhcyBcIkpvaG4gRG9lXCIgc2hvdWxkIGJlY29tZSBmaWx0ZXI6IHtcIm5hbWVcIjogXCJKb2huIERvZVwifVxuLSBcIndoYXQgYWJvdXQgQWxpY2U/XCIgYWZ0ZXIgYXNraW5nIGFib3V0IFwiSm9obiBEb2UncyBwYWludGluZ3NcIiBzaG91bGQgYmVjb21lIFwic2VhcmNoIHBhaW50aW5ncyBieSBBbGljZVwiXG4tIFwiYWxzbyBzaG93IG1lIEJvYlwiIGFmdGVyIFwiY291bnQgaXRlbXMgYnkgQWxpY2VcIiBzaG91bGQgYmVjb21lIFwic2VhcmNoIGl0ZW1zIGJ5IEJvYlwiYDtcbiAgfVxuXG4gIHN5c3RlbVByb21wdCArPSBgXG5cblJldHVybiBPTkxZIGEgSlNPTiBvYmplY3QgaW4gdGhpcyBmb3JtYXQ6XG57XG4gIFwidHlwZVwiOiBcImNvdW50fHNlYXJjaHxsaXN0fGZpbHRlcnxkZXNjcmliZXxzdW1tYXJpemV8YW5hbHl6ZXxjb2xsZWN0aW9uc3xkYXRhYmFzZXx0b3B8cmFua2luZ1wiLFxuICBcInRhcmdldFwiOiBcIndoYXQgdG8gY291bnQvc2VhcmNoL2xpc3QgKGUuZy4sICdpdGVtcycsICdlbnRpdGllcycsICdjb2xsZWN0aW9ucycpXCIsXG4gIFwiZmlsdGVyXCI6IHtcIm5hbWVcIjogXCJleHRyYWN0ZWRfZW50aXR5X25hbWVcIn0gb3IgbnVsbCxcbiAgXCJsaW1pdFwiOiBudW1iZXIgb3IgbnVsbCxcbiAgXCJzY29wZVwiOiBcImNvbGxlY3Rpb258ZGF0YWJhc2VcIixcbiAgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IFwiY29sbGVjdGlvbl9uYW1lX2lmX21lbnRpb25lZF9pbl9xdWVyeVwiIG9yIG51bGwsXG4gIFwic29ydEJ5XCI6IFwiaW1hZ2VfY291bnR8cG9wdWxhcml0eXxuYW1lXCIgb3IgbnVsbCxcbiAgXCJzb3J0T3JkZXJcIjogXCJhc2N8ZGVzY1wiIG9yIG51bGxcbn1cblxuRXhhbXBsZXM6XG4tIFwiSG93IG1hbnkgaXRlbXMgYnkgSm9obiBEb2U/XCIg4oaSIHtcInR5cGVcIjogXCJjb3VudFwiLCBcInRhcmdldFwiOiBcIml0ZW1zXCIsIFwiZmlsdGVyXCI6IHtcIm5hbWVcIjogXCJKb2huIERvZVwifSwgXCJsaW1pdFwiOiBudWxsLCBcInNjb3BlXCI6IFwiZGF0YWJhc2VcIiwgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IG51bGx9XG4tIFwiV2hpY2ggYXJ0aXN0IGhhcyB0aGUgbW9zdCBpbWFnZXM/XCIg4oaSIHtcInR5cGVcIjogXCJyYW5raW5nXCIsIFwidGFyZ2V0XCI6IFwiZW50aXRpZXNcIiwgXCJmaWx0ZXJcIjogbnVsbCwgXCJsaW1pdFwiOiAxLCBcInNjb3BlXCI6IFwiZGF0YWJhc2VcIiwgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IG51bGwsIFwic29ydEJ5XCI6IFwiaW1hZ2VfY291bnRcIiwgXCJzb3J0T3JkZXJcIjogXCJkZXNjXCJ9XG4tIFwiVG9wIDUgYXJ0aXN0cyBieSBpbWFnZSBjb3VudCBpbiBteWNvbGxlY3Rpb25cIiDihpIge1widHlwZVwiOiBcInRvcFwiLCBcInRhcmdldFwiOiBcImVudGl0aWVzXCIsIFwiZmlsdGVyXCI6IG51bGwsIFwibGltaXRcIjogNSwgXCJzY29wZVwiOiBcImNvbGxlY3Rpb25cIiwgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IFwibXljb2xsZWN0aW9uXCIsIFwic29ydEJ5XCI6IFwiaW1hZ2VfY291bnRcIiwgXCJzb3J0T3JkZXJcIjogXCJkZXNjXCJ9XG4tIFwiV2hpY2ggYXJ0aXN0IGluIHRoYXQgY29sbGVjdGlvbiBoYXMgdGhlIG1vc3QgaW1hZ2VzP1wiIOKGkiB7XCJ0eXBlXCI6IFwicmFua2luZ1wiLCBcInRhcmdldFwiOiBcImVudGl0aWVzXCIsIFwiZmlsdGVyXCI6IG51bGwsIFwibGltaXRcIjogMSwgXCJzY29wZVwiOiBcImNvbGxlY3Rpb25cIiwgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IG51bGwsIFwic29ydEJ5XCI6IFwiaW1hZ2VfY291bnRcIiwgXCJzb3J0T3JkZXJcIjogXCJkZXNjXCJ9XG4tIFwiU3VtbWFyaXplIEFsaWNlIFNtaXRoJ3Mgd29yayBpbiBteWNvbGxlY3Rpb25cIiDihpIge1widHlwZVwiOiBcInN1bW1hcml6ZVwiLCBcInRhcmdldFwiOiBcIml0ZW1zXCIsIFwiZmlsdGVyXCI6IHtcIm5hbWVcIjogXCJBbGljZSBTbWl0aFwifSwgXCJsaW1pdFwiOiAxMCwgXCJzY29wZVwiOiBcImNvbGxlY3Rpb25cIiwgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IFwibXljb2xsZWN0aW9uXCJ9XG4tIFwiQ2FuIHlvdSBzdW1tYXJpc2UgdGhlIHBpZWNlcyBkb25lIGJ5IEJvYiBKb2huc29uP1wiIOKGkiB7XCJ0eXBlXCI6IFwic3VtbWFyaXplXCIsIFwidGFyZ2V0XCI6IFwiaXRlbXNcIiwgXCJmaWx0ZXJcIjoge1wibmFtZVwiOiBcIkJvYiBKb2huc29uXCJ9LCBcImxpbWl0XCI6IDEwLCBcInNjb3BlXCI6IFwiZGF0YWJhc2VcIiwgXCJleHRyYWN0ZWRDb2xsZWN0aW9uXCI6IG51bGx9XG4tIFwiRmluZCBhbGwgTWFyaWEgR2FyY2lhIGFydHdvcmtcIiDihpIge1widHlwZVwiOiBcInNlYXJjaFwiLCBcInRhcmdldFwiOiBcIml0ZW1zXCIsIFwiZmlsdGVyXCI6IHtcIm5hbWVcIjogXCJNYXJpYSBHYXJjaWFcIn0sIFwibGltaXRcIjogMjAsIFwic2NvcGVcIjogXCJkYXRhYmFzZVwiLCBcImV4dHJhY3RlZENvbGxlY3Rpb25cIjogbnVsbH1cbi0gXCJTaG93IG1lIGRhdGEgY3JlYXRlZCBieSBBSSBBc3Npc3RhbnRcIiDihpIge1widHlwZVwiOiBcInNlYXJjaFwiLCBcInRhcmdldFwiOiBcIml0ZW1zXCIsIFwiZmlsdGVyXCI6IHtcIm5hbWVcIjogXCJBSSBBc3Npc3RhbnRcIn0sIFwibGltaXRcIjogMTAsIFwic2NvcGVcIjogXCJkYXRhYmFzZVwiLCBcImV4dHJhY3RlZENvbGxlY3Rpb25cIjogbnVsbH1gO1xuXG4gIHRyeSB7XG4gICAgbGV0IHJlc3BvbnNlOiBzdHJpbmc7XG5cbiAgICBpZiAocHJvdmlkZXIgPT09IFwiZ2VtaW5pXCIgJiYgcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpIHtcbiAgICAgIGNvbnN0IGdlbWluaU1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICAgICAgbW9kZWw6IG1vZGVsIHx8IFwiZ2VtaW5pLTIuMC1mbGFzaFwiLCAvLyBVc2Ugc3BlY2lmaWMgbW9kZWwgcGFyYW1ldGVyXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbWluaU1vZGVsLmdlbmVyYXRlQ29udGVudChbXG4gICAgICAgIHsgdGV4dDogc3lzdGVtUHJvbXB0IH0sXG4gICAgICAgIHsgdGV4dDogYFF1ZXN0aW9uOiBcIiR7cXVlc3Rpb259XCJgIH0sXG4gICAgICBdKTtcbiAgICAgIHJlc3BvbnNlID0gcmVzdWx0LnJlc3BvbnNlLnRleHQoKTtcbiAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSBcIm9wZW5haVwiICYmIHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgICBtb2RlbDogbW9kZWwgfHwgXCJncHQtMy41LXR1cmJvXCIsIC8vIFVzZSBzcGVjaWZpYyBtb2RlbCBwYXJhbWV0ZXJcbiAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgfSxcbiAgICAgICAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGBRdWVzdGlvbjogXCIke3F1ZXN0aW9ufVwiYCB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgdGVtcGVyYXR1cmU6IDAsXG4gICAgICAgIH0pO1xuICAgICAgICByZXNwb25zZSA9IGNvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQgfHwgXCJ7fVwiO1xuICAgICAgfSBjYXRjaCAob3BlbmFpRXJyb3I6IGFueSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJPcGVuQUkgZmFpbGVkLCB0cnlpbmcgR2VtaW5pIGZhbGxiYWNrOlwiLFxuICAgICAgICAgIG9wZW5haUVycm9yLm1lc3NhZ2VcbiAgICAgICAgKTtcbiAgICAgICAgLy8gQXV0by1mYWxsYmFjayB0byBHZW1pbmkgaWYgT3BlbkFJIGZhaWxzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSkge1xuICAgICAgICAgIGNvbnN0IGdlbWluaU1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICAgICAgICAgIG1vZGVsOiBcImdlbWluaS0yLjAtZmxhc2hcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW1pbmlNb2RlbC5nZW5lcmF0ZUNvbnRlbnQoW1xuICAgICAgICAgICAgeyB0ZXh0OiBzeXN0ZW1Qcm9tcHQgfSxcbiAgICAgICAgICAgIHsgdGV4dDogYFF1ZXN0aW9uOiBcIiR7cXVlc3Rpb259XCJgIH0sXG4gICAgICAgICAgXSk7XG4gICAgICAgICAgcmVzcG9uc2UgPSByZXN1bHQucmVzcG9uc2UudGV4dCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG9wZW5haUVycm9yOyAvLyBSZS10aHJvdyBpZiBubyBHZW1pbmkgZmFsbGJhY2sgYXZhaWxhYmxlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdmFsaWQgQVBJIGtleSBmb3IgdGhlIHNwZWNpZmllZCBwcm92aWRlclwiKTtcbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IEpTT04gZnJvbSByZXNwb25zZSAoaW4gY2FzZSB0aGVyZSdzIGV4dHJhIHRleHQpXG4gICAgY29uc3QganNvbk1hdGNoID0gcmVzcG9uc2UubWF0Y2goL1xce1tcXHNcXFNdKlxcfS8pO1xuICAgIGNvbnN0IGpzb25TdHIgPSBqc29uTWF0Y2ggPyBqc29uTWF0Y2hbMF0gOiByZXNwb25zZTtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uU3RyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIEZhbGxiYWNrIHBhcnNpbmcgd2l0aCBjb250ZXh0IGF3YXJlbmVzc1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiRmFpbGVkIHRvIHBhcnNlIExMTSByZXNwb25zZSwgdXNpbmcgY29udGV4dC1hd2FyZSBmYWxsYmFjazpcIixcbiAgICAgIGVcbiAgICApO1xuICAgIHJldHVybiBmYWxsYmFja0ludGVudDtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbmZlckludGVudEZyb21RdWVzdGlvbihcbiAgcXVlc3Rpb246IHN0cmluZyxcbiAgY29udGV4dD86IENvbnZlcnNhdGlvbkNvbnRleHQsXG4gIGF2YWlsYWJsZUNvbGxlY3Rpb25zPzogc3RyaW5nW11cbik6IFF1ZXJ5SW50ZW50IHtcbiAgY29uc3QgcSA9IHF1ZXN0aW9uLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gVHJ5IHRvIGV4dHJhY3QgY29sbGVjdGlvbiBuYW1lIGZyb20gdGhlIHF1ZXN0aW9uLCBjaGVja2luZyBhZ2FpbnN0IGF2YWlsYWJsZSBjb2xsZWN0aW9uc1xuICBjb25zdCBleHRyYWN0ZWRDb2xsZWN0aW9uID0gZXh0cmFjdENvbGxlY3Rpb25Gcm9tUXVlc3Rpb24oXG4gICAgcXVlc3Rpb24sXG4gICAgYXZhaWxhYmxlQ29sbGVjdGlvbnNcbiAgKTtcblxuICAvLyBDaGVjayBpZiBhbnkgbWVudGlvbmVkIG5hbWVzIGFyZSBjb2xsZWN0aW9uIG5hbWVzXG4gIGxldCBpc0NvbGxlY3Rpb25RdWVyeSA9IGZhbHNlO1xuICBsZXQgdGFyZ2V0Q29sbGVjdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkID0gZXh0cmFjdGVkQ29sbGVjdGlvbjtcblxuICBpZiAoYXZhaWxhYmxlQ29sbGVjdGlvbnMgJiYgYXZhaWxhYmxlQ29sbGVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIC8vIExvb2sgZm9yIGNvbGxlY3Rpb24gbmFtZXMgbWVudGlvbmVkIGluIHRoZSBxdWVzdGlvblxuICAgIGZvciAoY29uc3QgY29sbGVjdGlvbk5hbWUgb2YgYXZhaWxhYmxlQ29sbGVjdGlvbnMpIHtcbiAgICAgIGlmIChxLmluY2x1ZGVzKGNvbGxlY3Rpb25OYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgIGlzQ29sbGVjdGlvblF1ZXJ5ID0gdHJ1ZTtcbiAgICAgICAgdGFyZ2V0Q29sbGVjdGlvbiA9IGNvbGxlY3Rpb25OYW1lO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBEZXRlY3RlZCBjb2xsZWN0aW9uIG5hbWUgaW4gcXVlcnk6ICR7Y29sbGVjdGlvbk5hbWV9YCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBwcm9ub3VucyBpbiBmYWxsYmFjayBpZiBjb250ZXh0IGlzIGF2YWlsYWJsZVxuICBsZXQgcHJvY2Vzc2VkUXVlc3Rpb24gPSBxdWVzdGlvbjtcbiAgaWYgKGNvbnRleHQ/Lmxhc3RFbnRpdHkpIHtcbiAgICAvLyBIYW5kbGUgcHJvbm91bnMgdXNpbmcgY29udGV4dFxuICAgIGlmIChcbiAgICAgIHEuaW5jbHVkZXMoXCIgaGUgXCIpIHx8XG4gICAgICBxLmluY2x1ZGVzKFwiIGhpbSBcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJoZSBcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJoaW0gXCIpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIvCflIQgRkFMTEJBQ0s6IFJlc29sdmluZyAnaGUvaGltJyB0bzpcIiwgY29udGV4dC5sYXN0RW50aXR5KTtcbiAgICAgIHByb2Nlc3NlZFF1ZXN0aW9uID0gcHJvY2Vzc2VkUXVlc3Rpb24ucmVwbGFjZShcbiAgICAgICAgL1xcYihoZXxoaW0pXFxiL2dpLFxuICAgICAgICBjb250ZXh0Lmxhc3RFbnRpdHlcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHEuaW5jbHVkZXMoXCIgdGhleSBcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCIgdGhlbSBcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJ0aGV5IFwiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcInRoZW0gXCIpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIvCflIQgRkFMTEJBQ0s6IFJlc29sdmluZyAndGhleS90aGVtJyB0bzpcIiwgY29udGV4dC5sYXN0RW50aXR5KTtcbiAgICAgIHByb2Nlc3NlZFF1ZXN0aW9uID0gcHJvY2Vzc2VkUXVlc3Rpb24ucmVwbGFjZShcbiAgICAgICAgL1xcYih0aGV5fHRoZW0pXFxiL2dpLFxuICAgICAgICBjb250ZXh0Lmxhc3RFbnRpdHlcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChxLmluY2x1ZGVzKFwiIHRoZWlyIFwiKSB8fCBxLmluY2x1ZGVzKFwiIGhpcyBcIikgfHwgcS5pbmNsdWRlcyhcIiBoZXIgXCIpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIvCflIQgRkFMTEJBQ0s6IFJlc29sdmluZyBwb3NzZXNzaXZlIHRvOlwiLCBjb250ZXh0Lmxhc3RFbnRpdHkpO1xuICAgICAgcHJvY2Vzc2VkUXVlc3Rpb24gPSBwcm9jZXNzZWRRdWVzdGlvbi5yZXBsYWNlKFxuICAgICAgICAvXFxiKHRoZWlyfGhpc3xoZXIpXFxiL2dpLFxuICAgICAgICBjb250ZXh0Lmxhc3RFbnRpdHkgKyBcIidzXCJcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIHJhbmtpbmcgYW5kIFwibW9zdFwiIHF1ZXJpZXNcbiAgaWYgKFxuICAgIHEuaW5jbHVkZXMoXCJ3aGljaFwiKSAmJlxuICAgIChxLmluY2x1ZGVzKFwibW9zdFwiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcInRvcFwiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcImJlc3RcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJoaWdoZXN0XCIpKVxuICApIHtcbiAgICBjb25zdCBzY29wZSA9IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIjtcblxuICAgIGlmIChxLmluY2x1ZGVzKFwiYXJ0aXN0XCIpICYmIHEuaW5jbHVkZXMoXCJtb3N0XCIpICYmIHEuaW5jbHVkZXMoXCJpbWFnZVwiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJyYW5raW5nXCIsXG4gICAgICAgIHRhcmdldDogXCJlbnRpdGllc1wiLFxuICAgICAgICBmaWx0ZXI6IG51bGwsXG4gICAgICAgIGxpbWl0OiAxLFxuICAgICAgICBzY29wZSxcbiAgICAgICAgc29ydEJ5OiBcImltYWdlX2NvdW50XCIsXG4gICAgICAgIHNvcnRPcmRlcjogXCJkZXNjXCIsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHEuaW5jbHVkZXMoXCJhcnRpc3RcIikgJiYgcS5pbmNsdWRlcyhcIm1vc3RcIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwicmFua2luZ1wiLFxuICAgICAgICB0YXJnZXQ6IFwiZW50aXRpZXNcIixcbiAgICAgICAgZmlsdGVyOiBudWxsLFxuICAgICAgICBsaW1pdDogMSxcbiAgICAgICAgc2NvcGUsXG4gICAgICAgIHNvcnRCeTogXCJpbWFnZV9jb3VudFwiLFxuICAgICAgICBzb3J0T3JkZXI6IFwiZGVzY1wiLFxuICAgICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBcInRvcCBOXCIgcXVlcmllc1xuICBpZiAocS5pbmNsdWRlcyhcInRvcFwiKSAmJiAvdG9wXFxzKyhcXGQrKS8udGVzdChxKSkge1xuICAgIGNvbnN0IGxpbWl0TWF0Y2ggPSBxLm1hdGNoKC90b3BcXHMrKFxcZCspLyk7XG4gICAgY29uc3QgbGltaXQgPSBsaW1pdE1hdGNoID8gcGFyc2VJbnQobGltaXRNYXRjaFsxXSkgOiA1O1xuICAgIGNvbnN0IHNjb3BlID0gZXh0cmFjdGVkQ29sbGVjdGlvbiA/IFwiY29sbGVjdGlvblwiIDogXCJkYXRhYmFzZVwiO1xuXG4gICAgaWYgKHEuaW5jbHVkZXMoXCJhcnRpc3RcIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwidG9wXCIsXG4gICAgICAgIHRhcmdldDogXCJlbnRpdGllc1wiLFxuICAgICAgICBmaWx0ZXI6IG51bGwsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICBzY29wZSxcbiAgICAgICAgc29ydEJ5OiBcImltYWdlX2NvdW50XCIsXG4gICAgICAgIHNvcnRPcmRlcjogXCJkZXNjXCIsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGVudGl0eS1zcGVjaWZpYyBxdWVyaWVzIHdpdGggZ2VuZXJpYyBwYXR0ZXJucyAodXNlIHByb2Nlc3NlZCBxdWVzdGlvbilcbiAgLy8gQnV0IGZpcnN0IGNoZWNrIGlmIHRoZSBtZW50aW9uZWQgbmFtZSBpcyBhY3R1YWxseSBhIGNvbGxlY3Rpb24gbmFtZVxuICBjb25zdCBlbnRpdHlNYXRjaCA9XG4gICAgcHJvY2Vzc2VkUXVlc3Rpb24ubWF0Y2goXG4gICAgICAvKD86Ynl8ZnJvbXxvZilcXHMrKFtBLVpdW2Etel0rKD86XFxzK1tBLVpdW2Etel0rKSo/KSg/PVxccysoPzppbnxmcm9tfG9mfGF0fHdpdGh8Zm9yKVxcYnwkKS9pXG4gICAgKSB8fFxuICAgIHByb2Nlc3NlZFF1ZXN0aW9uLm1hdGNoKFxuICAgICAgLyg/OmRvbmVcXHMrYnl8Y3JlYXRlZFxccytieXxtYWRlXFxzK2J5fHdvcmtcXHMrYnl8aXRlbXNcXHMrYnl8cGllY2VzXFxzK2J5KVxccysoW0EtWl1bYS16XSsoPzpcXHMrW0EtWl1bYS16XSspKj8pKD89XFxzKyg/OmlufGZyb218b2Z8YXR8d2l0aHxmb3IpXFxifCQpL2lcbiAgICApIHx8XG4gICAgcHJvY2Vzc2VkUXVlc3Rpb24ubWF0Y2goXG4gICAgICAvKFtBLVpdW2Etel0rKD86XFxzK1tBLVpdW2Etel0rKSspKD86XFxzKyg/Ondvcmt8aXRlbXN8cGllY2VzfGRhdGF8Y29udGVudCkpL2lcbiAgICApO1xuXG4gIGxldCBlbnRpdHlOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgaWYgKGVudGl0eU1hdGNoKSB7XG4gICAgY29uc3QgY2FuZGlkYXRlTmFtZSA9IGVudGl0eU1hdGNoWzFdLnRyaW0oKTtcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGFjdHVhbGx5IGEgY29sbGVjdGlvbiBuYW1lXG4gICAgaWYgKFxuICAgICAgYXZhaWxhYmxlQ29sbGVjdGlvbnMgJiZcbiAgICAgIGF2YWlsYWJsZUNvbGxlY3Rpb25zLnNvbWUoXG4gICAgICAgIChjb2wpID0+IGNvbC50b0xvd2VyQ2FzZSgpID09PSBjYW5kaWRhdGVOYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIC8vIFRoaXMgaXMgYSBjb2xsZWN0aW9uIG5hbWUsIG5vdCBhbiBlbnRpdHkgbmFtZVxuICAgICAgaXNDb2xsZWN0aW9uUXVlcnkgPSB0cnVlO1xuICAgICAgdGFyZ2V0Q29sbGVjdGlvbiA9IGNhbmRpZGF0ZU5hbWU7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYPCfjq8gRGV0ZWN0ZWQgY29sbGVjdGlvbiBuYW1lIGluIGVudGl0eSBwYXR0ZXJuOiAke2NhbmRpZGF0ZU5hbWV9YFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhpcyBpcyBhbiBlbnRpdHkgbmFtZVxuICAgICAgZW50aXR5TmFtZSA9IGNhbmRpZGF0ZU5hbWU7XG4gICAgfVxuICB9XG5cbiAgLy8gRW50aXR5LXNwZWNpZmljIHF1ZXJpZXMgKGhpZ2ggcHJpb3JpdHkpXG4gIGlmIChlbnRpdHlOYW1lKSB7XG4gICAgY29uc3QgZmlsdGVyID0geyBuYW1lOiBlbnRpdHlOYW1lIH07XG4gICAgY29uc3Qgc2NvcGUgPSB0YXJnZXRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCI7XG5cbiAgICBpZiAoXG4gICAgICBxLmluY2x1ZGVzKFwic3VtbWFyeVwiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcInN1bW1hcml6ZVwiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcInN1bW1hcmlzZVwiKSB8fFxuICAgICAgKHEuaW5jbHVkZXMoXCJnaXZlIG1lXCIpICYmIHEuaW5jbHVkZXMoXCJzdW1tYXJ5XCIpKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJzdW1tYXJpemVcIixcbiAgICAgICAgdGFyZ2V0OiBcIml0ZW1zXCIsXG4gICAgICAgIGZpbHRlcixcbiAgICAgICAgbGltaXQ6IDIwLFxuICAgICAgICBzY29wZSxcbiAgICAgICAgLi4uKHRhcmdldENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uOiB0YXJnZXRDb2xsZWN0aW9uIH0pLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAocS5pbmNsdWRlcyhcImhvdyBtYW55XCIpIHx8IHEuaW5jbHVkZXMoXCJjb3VudFwiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJjb3VudFwiLFxuICAgICAgICB0YXJnZXQ6IFwiaXRlbXNcIixcbiAgICAgICAgZmlsdGVyLFxuICAgICAgICBzY29wZSxcbiAgICAgICAgLi4uKHRhcmdldENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uOiB0YXJnZXRDb2xsZWN0aW9uIH0pLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAocS5pbmNsdWRlcyhcImZpbmRcIikgfHwgcS5pbmNsdWRlcyhcInNlYXJjaFwiKSB8fCBxLmluY2x1ZGVzKFwic2hvd1wiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJzZWFyY2hcIixcbiAgICAgICAgdGFyZ2V0OiBcIml0ZW1zXCIsXG4gICAgICAgIGZpbHRlcixcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICBzY29wZSxcbiAgICAgICAgLi4uKHRhcmdldENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uOiB0YXJnZXRDb2xsZWN0aW9uIH0pLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAocS5pbmNsdWRlcyhcImFuYWx5emVcIikgfHwgcS5pbmNsdWRlcyhcImFuYWx5c2lzXCIpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImFuYWx5emVcIixcbiAgICAgICAgdGFyZ2V0OiBcIml0ZW1zXCIsXG4gICAgICAgIGZpbHRlcixcbiAgICAgICAgbGltaXQ6IDUwLFxuICAgICAgICBzY29wZSxcbiAgICAgICAgLi4uKHRhcmdldENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uOiB0YXJnZXRDb2xsZWN0aW9uIH0pLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgY29sbGVjdGlvbi1zcGVjaWZpYyBxdWVyaWVzICh3aGVuIG5vIGVudGl0eSBpcyBzcGVjaWZpZWQpXG4gIGlmIChpc0NvbGxlY3Rpb25RdWVyeSAmJiB0YXJnZXRDb2xsZWN0aW9uICYmICFlbnRpdHlOYW1lKSB7XG4gICAgY29uc3Qgc2NvcGUgPSBcImNvbGxlY3Rpb25cIjtcblxuICAgIGlmIChcbiAgICAgIHEuaW5jbHVkZXMoXCJzdW1tYXJpemVcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJzdW1tYXJpc2VcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJzdW1tYXJ5XCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImRlc2NyaWJlXCIsXG4gICAgICAgIHRhcmdldDogXCJjb2xsZWN0aW9uXCIsXG4gICAgICAgIHNjb3BlLFxuICAgICAgICBleHRyYWN0ZWRDb2xsZWN0aW9uOiB0YXJnZXRDb2xsZWN0aW9uLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAocS5pbmNsdWRlcyhcImRlc2NyaWJlXCIpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImRlc2NyaWJlXCIsXG4gICAgICAgIHRhcmdldDogXCJjb2xsZWN0aW9uXCIsXG4gICAgICAgIHNjb3BlLFxuICAgICAgICBleHRyYWN0ZWRDb2xsZWN0aW9uOiB0YXJnZXRDb2xsZWN0aW9uLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBEYXRhYmFzZS1sZXZlbCBxdWVyaWVzXG4gIGlmIChxLmluY2x1ZGVzKFwiY29sbGVjdGlvbnNcIikgfHwgcS5pbmNsdWRlcyhcImRhdGFiYXNlXCIpKSB7XG4gICAgaWYgKHEuaW5jbHVkZXMoXCJob3cgbWFueVwiKSB8fCBxLmluY2x1ZGVzKFwiY291bnRcIikpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwiY291bnRcIiwgdGFyZ2V0OiBcImNvbGxlY3Rpb25zXCIsIHNjb3BlOiBcImRhdGFiYXNlXCIgfTtcbiAgICB9XG4gICAgaWYgKHEuaW5jbHVkZXMoXCJsaXN0XCIpIHx8IHEuaW5jbHVkZXMoXCJ3aGF0XCIpIHx8IHEuaW5jbHVkZXMoXCJzaG93XCIpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcImNvbGxlY3Rpb25zXCIsIHRhcmdldDogXCJsaXN0XCIsIHNjb3BlOiBcImRhdGFiYXNlXCIgfTtcbiAgICB9XG4gICAgaWYgKHEuaW5jbHVkZXMoXCJkZXNjcmliZVwiKSkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJkYXRhYmFzZVwiLCB0YXJnZXQ6IFwib3ZlcnZpZXdcIiwgc2NvcGU6IFwiZGF0YWJhc2VcIiB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIENvbGxlY3Rpb24tbGV2ZWwgcXVlcmllcyAoZXhpc3RpbmcgbG9naWMpXG4gIGlmIChxLmluY2x1ZGVzKFwiaG93IG1hbnlcIikgfHwgcS5pbmNsdWRlcyhcImNvdW50XCIpKSB7XG4gICAgaWYgKFxuICAgICAgcS5pbmNsdWRlcyhcImVudGl0aWVzXCIpIHx8XG4gICAgICBxLmluY2x1ZGVzKFwibmFtZXNcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJjcmVhdG9yc1wiKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJjb3VudFwiLFxuICAgICAgICB0YXJnZXQ6IFwiZW50aXRpZXNcIixcbiAgICAgICAgc2NvcGU6IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIixcbiAgICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHEuaW5jbHVkZXMoXCJ2ZWN0b3JcIikgfHwgcS5pbmNsdWRlcyhcIml0ZW1cIikgfHwgcS5pbmNsdWRlcyhcInJlY29yZFwiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJjb3VudFwiLFxuICAgICAgICB0YXJnZXQ6IFwidG90YWxcIixcbiAgICAgICAgc2NvcGU6IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIixcbiAgICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiY291bnRcIixcbiAgICAgIHRhcmdldDogXCJ0b3RhbFwiLFxuICAgICAgc2NvcGU6IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIixcbiAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICB9O1xuICB9XG5cbiAgaWYgKHEuaW5jbHVkZXMoXCJmaW5kXCIpIHx8IHEuaW5jbHVkZXMoXCJzZWFyY2hcIikpIHtcbiAgICAvLyBDaGVjayBpZiBpdCdzIGFjcm9zcyBhbGwgY29sbGVjdGlvbnNcbiAgICBjb25zdCBzY29wZSA9XG4gICAgICBxLmluY2x1ZGVzKFwiYWxsIGNvbGxlY3Rpb25zXCIpIHx8IHEuaW5jbHVkZXMoXCJhY3Jvc3NcIilcbiAgICAgICAgPyBcImRhdGFiYXNlXCJcbiAgICAgICAgOiBleHRyYWN0ZWRDb2xsZWN0aW9uXG4gICAgICAgID8gXCJjb2xsZWN0aW9uXCJcbiAgICAgICAgOiBcImRhdGFiYXNlXCI7XG5cbiAgICAvLyBUcnkgdG8gZXh0cmFjdCBlbnRpdHkgbmFtZSAoZmFsbGJhY2sgcGF0dGVybikgLSBnZW5lcmljIHBhdHRlcm5zXG4gICAgY29uc3QgZmFsbGJhY2tFbnRpdHlNYXRjaCA9XG4gICAgICBxdWVzdGlvbi5tYXRjaChcbiAgICAgICAgLyg/OmJ5fGZyb218b2YpXFxzKyhbQS1aXVthLXpdKyg/OlxccytbQS1aXVthLXpdKykqPykoPz1cXHMrKD86aW58ZnJvbXxvZnxhdHx3aXRofGZvcilcXGJ8JCkvaVxuICAgICAgKSB8fFxuICAgICAgcXVlc3Rpb24ubWF0Y2goXG4gICAgICAgIC8oPzpkb25lXFxzK2J5fGNyZWF0ZWRcXHMrYnl8bWFkZVxccytieSlcXHMrKFtBLVpdW2Etel0rKD86XFxzK1tBLVpdW2Etel0rKSo/KSg/PVxccysoPzppbnxmcm9tfG9mfGF0fHdpdGh8Zm9yKVxcYnwkKS9pXG4gICAgICApO1xuICAgIGlmIChmYWxsYmFja0VudGl0eU1hdGNoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcInNlYXJjaFwiLFxuICAgICAgICB0YXJnZXQ6IFwiaXRlbXNcIixcbiAgICAgICAgZmlsdGVyOiB7IG5hbWU6IGZhbGxiYWNrRW50aXR5TWF0Y2hbMV0gfSxcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICBzY29wZSxcbiAgICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwic2VhcmNoXCIsXG4gICAgICB0YXJnZXQ6IFwiaXRlbXNcIixcbiAgICAgIGxpbWl0OiAxMCxcbiAgICAgIHNjb3BlLFxuICAgICAgLi4uKGV4dHJhY3RlZENvbGxlY3Rpb24gJiYgeyBleHRyYWN0ZWRDb2xsZWN0aW9uIH0pLFxuICAgIH07XG4gIH1cblxuICBpZiAocS5pbmNsdWRlcyhcImxpc3RcIikgfHwgcS5pbmNsdWRlcyhcInNob3dcIikpIHtcbiAgICBpZiAoXG4gICAgICBxLmluY2x1ZGVzKFwiZW50aXRpZXNcIikgfHxcbiAgICAgIHEuaW5jbHVkZXMoXCJuYW1lc1wiKSB8fFxuICAgICAgcS5pbmNsdWRlcyhcImNyZWF0b3JzXCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImxpc3RcIixcbiAgICAgICAgdGFyZ2V0OiBcImVudGl0aWVzXCIsXG4gICAgICAgIHNjb3BlOiBleHRyYWN0ZWRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCIsXG4gICAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcImxpc3RcIixcbiAgICAgIHRhcmdldDogXCJpdGVtc1wiLFxuICAgICAgbGltaXQ6IDIwLFxuICAgICAgc2NvcGU6IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIixcbiAgICAgIC4uLihleHRyYWN0ZWRDb2xsZWN0aW9uICYmIHsgZXh0cmFjdGVkQ29sbGVjdGlvbiB9KSxcbiAgICB9O1xuICB9XG5cbiAgaWYgKHEuaW5jbHVkZXMoXCJkZXNjcmliZVwiKSkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcImRlc2NyaWJlXCIsXG4gICAgICB0YXJnZXQ6IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIixcbiAgICAgIHNjb3BlOiBleHRyYWN0ZWRDb2xsZWN0aW9uID8gXCJjb2xsZWN0aW9uXCIgOiBcImRhdGFiYXNlXCIsXG4gICAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJkZXNjcmliZVwiLFxuICAgIHRhcmdldDogXCJjb2xsZWN0aW9uXCIsXG4gICAgc2NvcGU6IGV4dHJhY3RlZENvbGxlY3Rpb24gPyBcImNvbGxlY3Rpb25cIiA6IFwiZGF0YWJhc2VcIixcbiAgICAuLi4oZXh0cmFjdGVkQ29sbGVjdGlvbiAmJiB7IGV4dHJhY3RlZENvbGxlY3Rpb24gfSksXG4gIH07XG59XG5cbi8vIE5ldyBmdW5jdGlvbiB0byBleHRyYWN0IGNvbGxlY3Rpb24gbmFtZXMgZnJvbSBuYXR1cmFsIGxhbmd1YWdlXG5mdW5jdGlvbiBleHRyYWN0Q29sbGVjdGlvbkZyb21RdWVzdGlvbihcbiAgcXVlc3Rpb246IHN0cmluZyxcbiAgYXZhaWxhYmxlQ29sbGVjdGlvbnM/OiBzdHJpbmdbXVxuKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgcSA9IHF1ZXN0aW9uLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gRmlyc3QsIGNoZWNrIGFnYWluc3QgYXZhaWxhYmxlIGNvbGxlY3Rpb25zIGlmIHByb3ZpZGVkXG4gIGlmIChhdmFpbGFibGVDb2xsZWN0aW9ucyAmJiBhdmFpbGFibGVDb2xsZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChjb25zdCBjb2xsZWN0aW9uTmFtZSBvZiBhdmFpbGFibGVDb2xsZWN0aW9ucykge1xuICAgICAgaWYgKHEuaW5jbHVkZXMoY29sbGVjdGlvbk5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgY29uc29sZS5sb2coYPCfjq8gRm91bmQgY29sbGVjdGlvbiBuYW1lIGluIHF1ZXN0aW9uOiAke2NvbGxlY3Rpb25OYW1lfWApO1xuICAgICAgICByZXR1cm4gY29sbGVjdGlvbk5hbWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ29tbW9uIHBhdHRlcm5zIGZvciBtZW50aW9uaW5nIGNvbGxlY3Rpb25zXG4gIGNvbnN0IHBhdHRlcm5zID0gW1xuICAgIC8vIFwiaW4gW2NvbGxlY3Rpb25dXCIgb3IgXCJmcm9tIFtjb2xsZWN0aW9uXVwiXG4gICAgLyg/OmlufGZyb20pXFxzKyhbYS16QS1aXVthLXpBLVowLTlfLV0qKS9nLFxuICAgIC8vIFwiW2NvbGxlY3Rpb25dIGNvbGxlY3Rpb25cIlxuICAgIC8oW2EtekEtWl1bYS16QS1aMC05Xy1dKilcXHMrY29sbGVjdGlvbi9nLFxuICAgIC8vIFwiY29sbGVjdGlvbiBbY29sbGVjdGlvbl1cIlxuICAgIC9jb2xsZWN0aW9uXFxzKyhbYS16QS1aXVthLXpBLVowLTlfLV0qKS9nLFxuICBdO1xuXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBwYXR0ZXJucykge1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcGF0dGVybi5leGVjKHEpKSAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgY2FuZGlkYXRlID0gbWF0Y2hbMV07XG4gICAgICAvLyBGaWx0ZXIgb3V0IGNvbW1vbiB3b3JkcyB0aGF0IGFyZW4ndCBjb2xsZWN0aW9uIG5hbWVzXG4gICAgICBpZiAoXG4gICAgICAgICFbXG4gICAgICAgICAgXCJ0aGVcIixcbiAgICAgICAgICBcInRoaXNcIixcbiAgICAgICAgICBcInRoYXRcIixcbiAgICAgICAgICBcIm15XCIsXG4gICAgICAgICAgXCJ5b3VyXCIsXG4gICAgICAgICAgXCJvdXJcIixcbiAgICAgICAgICBcInRoZWlyXCIsXG4gICAgICAgICAgXCJhbGxcIixcbiAgICAgICAgICBcInNvbWVcIixcbiAgICAgICAgICBcImFueVwiLFxuICAgICAgICAgIFwiZWFjaFwiLFxuICAgICAgICAgIFwiZXZlcnlcIixcbiAgICAgICAgXS5pbmNsdWRlcyhjYW5kaWRhdGUpXG4gICAgICApIHtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhdmFpbGFibGUgY29sbGVjdGlvbnMsIGNoZWNrIGlmIHRoaXMgY2FuZGlkYXRlIG1hdGNoZXNcbiAgICAgICAgaWYgKGF2YWlsYWJsZUNvbGxlY3Rpb25zICYmIGF2YWlsYWJsZUNvbGxlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBtYXRjaGluZ0NvbGxlY3Rpb24gPSBhdmFpbGFibGVDb2xsZWN0aW9ucy5maW5kKFxuICAgICAgICAgICAgKGNvbCkgPT4gY29sLnRvTG93ZXJDYXNlKCkgPT09IGNhbmRpZGF0ZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAobWF0Y2hpbmdDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hpbmdDb2xsZWN0aW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5KFxuICBjb2xsZWN0aW9uOiBzdHJpbmcgfCBudWxsLFxuICBpbnRlbnQ6IFF1ZXJ5SW50ZW50XG4pOiBQcm9taXNlPGFueT4ge1xuICBpZiAoaW50ZW50LnNjb3BlID09PSBcImRhdGFiYXNlXCIpIHtcbiAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZURhdGFiYXNlUXVlcnkoaW50ZW50KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDb2xsZWN0aW9uLWxldmVsIHF1ZXJ5IC0gcmVxdWlyZSBjb2xsZWN0aW9uIG5hbWVcbiAgICBpZiAoIWNvbGxlY3Rpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJDb2xsZWN0aW9uIG5hbWUgaXMgcmVxdWlyZWQgZm9yIGNvbGxlY3Rpb24tbGV2ZWwgcXVlcmllc1wiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUNvbGxlY3Rpb25RdWVyeShjb2xsZWN0aW9uLCBpbnRlbnQpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVEYXRhYmFzZVF1ZXJ5KGludGVudDogUXVlcnlJbnRlbnQpOiBQcm9taXNlPGFueT4ge1xuICBzd2l0Y2ggKGludGVudC50eXBlKSB7XG4gICAgY2FzZSBcImNvdW50XCI6XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJjb2xsZWN0aW9uc1wiKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjb3VudENvbGxlY3Rpb25zKCk7XG4gICAgICB9XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJhcnRpc3RzXCIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvdW50QXJ0aXN0c0Fjcm9zc0RhdGFiYXNlKCk7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIChpbnRlbnQudGFyZ2V0ID09PSBcImltYWdlc1wiIHx8IGludGVudC50YXJnZXQgPT09IFwiaXRlbXNcIikgJiZcbiAgICAgICAgaW50ZW50LmZpbHRlclxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjb3VudEltYWdlc0J5QXJ0aXN0QWNyb3NzRGF0YWJhc2UoaW50ZW50LmZpbHRlcik7XG4gICAgICB9XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJ0b3RhbFwiKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjb3VudFRvdGFsVmVjdG9yc0Fjcm9zc0RhdGFiYXNlKCk7XG4gICAgICB9XG4gICAgICAvLyBGYWxsYmFjayBmb3IgY291bnQgb3BlcmF0aW9uc1xuICAgICAgcmV0dXJuIGF3YWl0IGNvdW50VG90YWxWZWN0b3JzQWNyb3NzRGF0YWJhc2UoKTtcblxuICAgIGNhc2UgXCJjb2xsZWN0aW9uc1wiOlxuICAgICAgcmV0dXJuIGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuXG4gICAgY2FzZSBcImRhdGFiYXNlXCI6XG4gICAgICByZXR1cm4gYXdhaXQgZGVzY3JpYmVEYXRhYmFzZUluZm8oKTtcblxuICAgIGNhc2UgXCJzZWFyY2hcIjpcbiAgICAgIGlmIChpbnRlbnQuZmlsdGVyKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBzZWFyY2hBY3Jvc3NDb2xsZWN0aW9ucyhpbnRlbnQuZmlsdGVyLCBpbnRlbnQubGltaXQgfHwgMTApO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwic3VtbWFyaXplXCI6XG4gICAgICBpZiAoaW50ZW50LmZpbHRlcikge1xuICAgICAgICByZXR1cm4gYXdhaXQgc3VtbWFyaXplQXJ0aXN0QWNyb3NzRGF0YWJhc2UoXG4gICAgICAgICAgaW50ZW50LmZpbHRlcixcbiAgICAgICAgICBpbnRlbnQubGltaXQgfHwgMjBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcImxpc3RcIjpcbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImFydGlzdHNcIiB8fCBpbnRlbnQudGFyZ2V0ID09PSBcImVudGl0aWVzXCIpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGxpc3RBcnRpc3RzQWNyb3NzRGF0YWJhc2UoaW50ZW50LmxpbWl0IHx8IDUwKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcInRvcFwiOlxuICAgIGNhc2UgXCJyYW5raW5nXCI6XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJlbnRpdGllc1wiICYmIGludGVudC5zb3J0QnkgPT09IFwiaW1hZ2VfY291bnRcIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgZ2V0VG9wQXJ0aXN0c0J5SW1hZ2VDb3VudEFjcm9zc0RhdGFiYXNlKGludGVudC5saW1pdCB8fCAxKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYERhdGFiYXNlLWxldmVsIHF1ZXJ5IHR5cGUgJyR7aW50ZW50LnR5cGV9JyBub3QgaW1wbGVtZW50ZWQgeWV0YFxuICAgICAgKTtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBgRGF0YWJhc2UtbGV2ZWwgcXVlcnkgY291bGQgbm90IGJlIGV4ZWN1dGVkOiAke2ludGVudC50eXBlfSAke2ludGVudC50YXJnZXR9YFxuICApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBleGVjdXRlQ29sbGVjdGlvblF1ZXJ5KFxuICBjb2xsZWN0aW9uOiBzdHJpbmcsXG4gIGludGVudDogUXVlcnlJbnRlbnRcbik6IFByb21pc2U8YW55PiB7XG4gIHN3aXRjaCAoaW50ZW50LnR5cGUpIHtcbiAgICBjYXNlIFwiY291bnRcIjpcbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImFydGlzdHNcIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgY291bnRVbmlxdWVBcnRpc3RzKGNvbGxlY3Rpb24pO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgKGludGVudC50YXJnZXQgPT09IFwiaW1hZ2VzXCIgfHwgaW50ZW50LnRhcmdldCA9PT0gXCJpdGVtc1wiKSAmJlxuICAgICAgICBpbnRlbnQuZmlsdGVyXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvdW50SW1hZ2VzQnlBcnRpc3QoY29sbGVjdGlvbiwgaW50ZW50LmZpbHRlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgY291bnRUb3RhbChjb2xsZWN0aW9uKTtcbiAgICAgIH1cblxuICAgIGNhc2UgXCJzZWFyY2hcIjpcbiAgICAgIHJldHVybiBhd2FpdCBzZWFyY2hJbWFnZXMoY29sbGVjdGlvbiwgaW50ZW50LmZpbHRlciwgaW50ZW50LmxpbWl0IHx8IDEwKTtcblxuICAgIGNhc2UgXCJzdW1tYXJpemVcIjpcbiAgICAgIHJldHVybiBhd2FpdCBzdW1tYXJpemVBcnRpc3RXb3JrKFxuICAgICAgICBjb2xsZWN0aW9uLFxuICAgICAgICBpbnRlbnQuZmlsdGVyLFxuICAgICAgICBpbnRlbnQubGltaXQgfHwgMjBcbiAgICAgICk7XG5cbiAgICBjYXNlIFwiYW5hbHl6ZVwiOlxuICAgICAgcmV0dXJuIGF3YWl0IGFuYWx5emVBcnRpc3RXb3JrKFxuICAgICAgICBjb2xsZWN0aW9uLFxuICAgICAgICBpbnRlbnQuZmlsdGVyLFxuICAgICAgICBpbnRlbnQubGltaXQgfHwgNTBcbiAgICAgICk7XG5cbiAgICBjYXNlIFwibGlzdFwiOlxuICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiYXJ0aXN0c1wiIHx8IGludGVudC50YXJnZXQgPT09IFwiZW50aXRpZXNcIikge1xuICAgICAgICByZXR1cm4gYXdhaXQgbGlzdFVuaXF1ZUFydGlzdHMoY29sbGVjdGlvbiwgaW50ZW50LmxpbWl0IHx8IDUwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBsaXN0SW1hZ2VzKGNvbGxlY3Rpb24sIGludGVudC5saW1pdCB8fCAyMCk7XG4gICAgICB9XG5cbiAgICBjYXNlIFwiZmlsdGVyXCI6XG4gICAgICByZXR1cm4gYXdhaXQgZmlsdGVySW1hZ2VzKGNvbGxlY3Rpb24sIGludGVudC5maWx0ZXIsIGludGVudC5saW1pdCB8fCAyMCk7XG5cbiAgICBjYXNlIFwiZGVzY3JpYmVcIjpcbiAgICAgIHJldHVybiBhd2FpdCBkZXNjcmliZUNvbGxlY3Rpb24oY29sbGVjdGlvbik7XG5cbiAgICBjYXNlIFwidG9wXCI6XG4gICAgY2FzZSBcInJhbmtpbmdcIjpcbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImVudGl0aWVzXCIgJiYgaW50ZW50LnNvcnRCeSA9PT0gXCJpbWFnZV9jb3VudFwiKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBnZXRUb3BBcnRpc3RzQnlJbWFnZUNvdW50SW5Db2xsZWN0aW9uKFxuICAgICAgICAgIGNvbGxlY3Rpb24sXG4gICAgICAgICAgaW50ZW50LmxpbWl0IHx8IDFcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBjb2xsZWN0aW9uLWxldmVsIHF1ZXJ5IHR5cGU6ICR7aW50ZW50LnR5cGV9YCk7XG4gIH1cbn1cblxuLy8gTmV3IGRhdGFiYXNlLWxldmVsIGZ1bmN0aW9uc1xuYXN5bmMgZnVuY3Rpb24gY291bnRDb2xsZWN0aW9ucygpOiBQcm9taXNlPHtcbiAgY291bnQ6IG51bWJlcjtcbiAgY29sbGVjdGlvbnM6IHN0cmluZ1tdO1xufT4ge1xuICBjb25zdCBjb2xsZWN0aW9uc0luZm8gPSBhd2FpdCBjbGllbnQuZ2V0Q29sbGVjdGlvbnMoKTtcbiAgY29uc3QgY29sbGVjdGlvbnMgPSBjb2xsZWN0aW9uc0luZm8uY29sbGVjdGlvbnMubWFwKChjOiBhbnkpID0+IGMubmFtZSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb3VudDogY29sbGVjdGlvbnMubGVuZ3RoLFxuICAgIGNvbGxlY3Rpb25zOiBjb2xsZWN0aW9ucyxcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdENvbGxlY3Rpb25zKCk6IFByb21pc2U8e1xuICBjb2xsZWN0aW9uczogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHZlY3RvcnNfY291bnQ/OiBudW1iZXIgfT47XG59PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zSW5mbyA9IGF3YWl0IGNsaWVudC5nZXRDb2xsZWN0aW9ucygpO1xuICBjb25zdCBjb2xsZWN0aW9ucyA9IGNvbGxlY3Rpb25zSW5mby5jb2xsZWN0aW9ucztcblxuICAvLyBHZXQgZGV0YWlsZWQgaW5mbyBmb3IgZWFjaCBjb2xsZWN0aW9uIHVzaW5nIGFjdHVhbCBjb3VudFxuICBjb25zdCBkZXRhaWxlZENvbGxlY3Rpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgY29sbGVjdGlvbnMubWFwKGFzeW5jIChjb2xsZWN0aW9uOiBhbnkpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFVzZSB0aGUgc2FtZSBjb3VudCBtZXRob2QgdGhhdCB3b3JrcyBmb3IgaW5kaXZpZHVhbCBxdWVyaWVzXG4gICAgICAgIGNvbnN0IGNvdW50UmVzdWx0ID0gYXdhaXQgY2xpZW50LmNvdW50KGNvbGxlY3Rpb24ubmFtZSwge30pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWU6IGNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICB2ZWN0b3JzX2NvdW50OiBjb3VudFJlc3VsdC5jb3VudCB8fCAwLFxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBGYWlsZWQgdG8gY291bnQgdmVjdG9ycyBpbiBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbi5uYW1lfTpgLFxuICAgICAgICAgIGVycm9yXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbmFtZTogY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgIHZlY3RvcnNfY291bnQ6IDAsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSlcbiAgKTtcblxuICByZXR1cm4geyBjb2xsZWN0aW9uczogZGV0YWlsZWRDb2xsZWN0aW9ucyB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBkZXNjcmliZURhdGFiYXNlSW5mbygpOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCBjb2xsZWN0aW9uc0RhdGEgPSBhd2FpdCBsaXN0Q29sbGVjdGlvbnMoKTtcbiAgY29uc3QgdG90YWxWZWN0b3JzID0gY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zLnJlZHVjZShcbiAgICAoc3VtLCBjb2wpID0+IHN1bSArIChjb2wudmVjdG9yc19jb3VudCB8fCAwKSxcbiAgICAwXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3RhbF9jb2xsZWN0aW9uczogY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zLmxlbmd0aCxcbiAgICB0b3RhbF92ZWN0b3JzOiB0b3RhbFZlY3RvcnMsXG4gICAgY29sbGVjdGlvbnM6IGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucyxcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoQWNyb3NzQ29sbGVjdGlvbnMoXG4gIGZpbHRlcjogYW55LFxuICBsaW1pdDogbnVtYmVyXG4pOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCBjb2xsZWN0aW9uc0RhdGEgPSBhd2FpdCBsaXN0Q29sbGVjdGlvbnMoKTtcbiAgY29uc3QgYWxsUmVzdWx0czogYW55W10gPSBbXTtcblxuICAvLyBTZWFyY2ggZWFjaCBjb2xsZWN0aW9uXG4gIGZvciAoY29uc3QgY29sbGVjdGlvbiBvZiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHNlYXJjaEltYWdlcyhjb2xsZWN0aW9uLm5hbWUsIGZpbHRlciwgbGltaXQpO1xuICAgICAgaWYgKHJlc3VsdHMuaW1hZ2VzICYmIHJlc3VsdHMuaW1hZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYWxsUmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgY291bnQ6IHJlc3VsdHMuY291bnQsXG4gICAgICAgICAgaW1hZ2VzOiByZXN1bHRzLmltYWdlcyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIHNlYXJjaCBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbi5uYW1lfTpgLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdG90YWxDb3VudCA9IGFsbFJlc3VsdHMucmVkdWNlKChzdW0sIHJlc3VsdCkgPT4gc3VtICsgcmVzdWx0LmNvdW50LCAwKTtcblxuICByZXR1cm4ge1xuICAgIHRvdGFsX2NvdW50OiB0b3RhbENvdW50LFxuICAgIGNvbGxlY3Rpb25zX3NlYXJjaGVkOiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMubGVuZ3RoLFxuICAgIHJlc3VsdHNfYnlfY29sbGVjdGlvbjogYWxsUmVzdWx0cyxcbiAgfTtcbn1cblxuLy8gRXhpc3RpbmcgY29sbGVjdGlvbi1sZXZlbCBmdW5jdGlvbnMgcmVtYWluIHRoZSBzYW1lXG5hc3luYyBmdW5jdGlvbiBjb3VudFRvdGFsKGNvbGxlY3Rpb246IHN0cmluZyk6IFByb21pc2U8eyBjb3VudDogbnVtYmVyIH0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuY291bnQoY29sbGVjdGlvbiwge30pO1xuICByZXR1cm4geyBjb3VudDogcmVzcG9uc2UuY291bnQgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY291bnRVbmlxdWVBcnRpc3RzKFxuICBjb2xsZWN0aW9uOiBzdHJpbmcsXG4gIGNvbmZpZzogRGF0YWJhc2VDb25maWcgPSBERUZBVUxUX0NPTkZJR1xuKTogUHJvbWlzZTx7IGNvdW50OiBudW1iZXI7IGFydGlzdHM6IHN0cmluZ1tdIH0+IHtcbiAgLy8gR2V0IEFMTCBwb2ludHMgZnJvbSB0aGUgY29sbGVjdGlvbiwgbm90IGp1c3QgMTAwMFxuICBsZXQgYWxsUG9pbnRzOiBhbnlbXSA9IFtdO1xuICBsZXQgb2Zmc2V0OiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgLy8gU2Nyb2xsIHRocm91Z2ggYWxsIHBvaW50cyBpbiB0aGUgY29sbGVjdGlvblxuICBkbyB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICAgIGxpbWl0OiAxMDAwLCAvLyBQcm9jZXNzIGluIGJhdGNoZXMgb2YgMTAwMFxuICAgICAgLi4uKG9mZnNldCAhPT0gdW5kZWZpbmVkICYmIHsgb2Zmc2V0IH0pLFxuICAgICAgd2l0aF9wYXlsb2FkOiB0cnVlLFxuICAgICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgYWxsUG9pbnRzLnB1c2goLi4ucmVzcG9uc2UucG9pbnRzKTtcbiAgICAvLyBTYWZlbHkgaGFuZGxlIHRoZSBvZmZzZXQgdHlwZVxuICAgIGNvbnN0IG5leHRPZmZzZXQgPSByZXNwb25zZS5uZXh0X3BhZ2Vfb2Zmc2V0O1xuICAgIGlmICh0eXBlb2YgbmV4dE9mZnNldCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgbmV4dE9mZnNldCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgb2Zmc2V0ID0gbmV4dE9mZnNldDtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSB3aGlsZSAob2Zmc2V0ICE9PSBudWxsICYmIG9mZnNldCAhPT0gdW5kZWZpbmVkKTtcblxuICBjb25zdCBlbnRpdGllcyA9IG5ldyBTZXQoXG4gICAgYWxsUG9pbnRzXG4gICAgICAubWFwKChwb2ludDogYW55KSA9PiBnZXRFbnRpdHlWYWx1ZShwb2ludCwgY29uZmlnKSlcbiAgICAgIC5maWx0ZXIoKHZhbHVlKTogdmFsdWUgaXMgc3RyaW5nID0+IEJvb2xlYW4odmFsdWUpKVxuICApO1xuXG4gIHJldHVybiB7XG4gICAgY291bnQ6IGVudGl0aWVzLnNpemUsXG4gICAgYXJ0aXN0czogQXJyYXkuZnJvbShlbnRpdGllcykuc2xpY2UoMCwgMjApLCAvLyBTdGlsbCBsaW1pdCB0aGUgcmV0dXJuZWQgbGlzdCBmb3IgZGlzcGxheVxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hJbWFnZXMoXG4gIGNvbGxlY3Rpb246IHN0cmluZyxcbiAgZmlsdGVyOiBhbnksXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnNjcm9sbChjb2xsZWN0aW9uLCB7XG4gICAgbGltaXQ6IDEwMDAsXG4gICAgd2l0aF9wYXlsb2FkOiB0cnVlLFxuICAgIHdpdGhfdmVjdG9yOiBmYWxzZSxcbiAgfSk7XG5cbiAgbGV0IGZpbHRlcmVkUG9pbnRzID0gcmVzcG9uc2UucG9pbnRzO1xuXG4gIGlmIChmaWx0ZXIpIHtcbiAgICBmaWx0ZXJlZFBvaW50cyA9IHJlc3BvbnNlLnBvaW50cy5maWx0ZXIoKHBvaW50OiBhbnkpID0+IHtcbiAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhmaWx0ZXIpLmV2ZXJ5KChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgcmV0dXJuIHBvaW50LnBheWxvYWQ/LltrZXldID09PSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgbGltaXRlZFBvaW50cyA9IGZpbHRlcmVkUG9pbnRzLnNsaWNlKDAsIGxpbWl0KTtcblxuICByZXR1cm4ge1xuICAgIGNvdW50OiBsaW1pdGVkUG9pbnRzLmxlbmd0aCxcbiAgICBpbWFnZXM6IGxpbWl0ZWRQb2ludHMsXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RVbmlxdWVBcnRpc3RzKFxuICBjb2xsZWN0aW9uOiBzdHJpbmcsXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8eyBhcnRpc3RzOiBzdHJpbmdbXSB9PiB7XG4gIC8vIEdldCBBTEwgcG9pbnRzIGZyb20gdGhlIGNvbGxlY3Rpb24gdG8gZW5zdXJlIGFjY3VyYXRlIGFydGlzdCBsaXN0aW5nXG4gIGxldCBhbGxQb2ludHM6IGFueVtdID0gW107XG4gIGxldCBvZmZzZXQ6IHN0cmluZyB8IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAvLyBTY3JvbGwgdGhyb3VnaCBhbGwgcG9pbnRzIGluIHRoZSBjb2xsZWN0aW9uXG4gIGRvIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5zY3JvbGwoY29sbGVjdGlvbiwge1xuICAgICAgbGltaXQ6IDEwMDAsIC8vIFByb2Nlc3MgaW4gYmF0Y2hlcyBvZiAxMDAwXG4gICAgICAuLi4ob2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgeyBvZmZzZXQgfSksXG4gICAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgICB3aXRoX3ZlY3RvcjogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBhbGxQb2ludHMucHVzaCguLi5yZXNwb25zZS5wb2ludHMpO1xuICAgIC8vIFNhZmVseSBoYW5kbGUgdGhlIG9mZnNldCB0eXBlXG4gICAgY29uc3QgbmV4dE9mZnNldCA9IHJlc3BvbnNlLm5leHRfcGFnZV9vZmZzZXQ7XG4gICAgaWYgKHR5cGVvZiBuZXh0T2Zmc2V0ID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBuZXh0T2Zmc2V0ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBvZmZzZXQgPSBuZXh0T2Zmc2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICBvZmZzZXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9IHdoaWxlIChvZmZzZXQgIT09IG51bGwgJiYgb2Zmc2V0ICE9PSB1bmRlZmluZWQpO1xuXG4gIGNvbnN0IGFydGlzdHMgPSBuZXcgU2V0KFxuICAgIGFsbFBvaW50cy5tYXAoKHBvaW50OiBhbnkpID0+IHBvaW50LnBheWxvYWQ/Lm5hbWUpLmZpbHRlcihCb29sZWFuKVxuICApO1xuXG4gIC8vIFJldHVybiB0aGUgcmVxdWVzdGVkIG51bWJlciBvZiBhcnRpc3RzXG4gIHJldHVybiB7IGFydGlzdHM6IEFycmF5LmZyb20oYXJ0aXN0cykuc2xpY2UoMCwgbGltaXQpIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RJbWFnZXMoY29sbGVjdGlvbjogc3RyaW5nLCBsaW1pdDogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICBsaW1pdCxcbiAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGNvdW50OiByZXNwb25zZS5wb2ludHMubGVuZ3RoLFxuICAgIGltYWdlczogcmVzcG9uc2UucG9pbnRzLm1hcCgocG9pbnQ6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBwb2ludC5pZCxcbiAgICAgIGFydGlzdDogcG9pbnQucGF5bG9hZD8ubmFtZSxcbiAgICAgIGZpbGVuYW1lOiBwb2ludC5wYXlsb2FkPy5maWxlX25hbWUsXG4gICAgfSkpLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBmaWx0ZXJJbWFnZXMoXG4gIGNvbGxlY3Rpb246IHN0cmluZyxcbiAgZmlsdGVyOiBhbnksXG4gIGxpbWl0OiBudW1iZXJcbik6IFByb21pc2U8YW55PiB7XG4gIHJldHVybiBhd2FpdCBzZWFyY2hJbWFnZXMoY29sbGVjdGlvbiwgZmlsdGVyLCBsaW1pdCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlc2NyaWJlQ29sbGVjdGlvbihjb2xsZWN0aW9uOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCB0b3RhbENvdW50ID0gYXdhaXQgY291bnRUb3RhbChjb2xsZWN0aW9uKTtcbiAgY29uc3QgYXJ0aXN0c0RhdGEgPSBhd2FpdCBjb3VudFVuaXF1ZUFydGlzdHMoY29sbGVjdGlvbik7XG4gIGNvbnN0IHNhbXBsZUltYWdlcyA9IGF3YWl0IGxpc3RJbWFnZXMoY29sbGVjdGlvbiwgNSk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3RhbF9pbWFnZXM6IHRvdGFsQ291bnQuY291bnQsXG4gICAgdW5pcXVlX2FydGlzdHM6IGFydGlzdHNEYXRhLmNvdW50LFxuICAgIHNhbXBsZV9hcnRpc3RzOiBhcnRpc3RzRGF0YS5hcnRpc3RzLnNsaWNlKDAsIDEwKSxcbiAgICBzYW1wbGVfaW1hZ2VzOiBzYW1wbGVJbWFnZXMuaW1hZ2VzLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVJlc3BvbnNlKFxuICBxdWVzdGlvbjogc3RyaW5nLFxuICBpbnRlbnQ6IFF1ZXJ5SW50ZW50LFxuICBkYXRhOiBhbnksXG4gIHByb3ZpZGVyOiBFbWJlZGRpbmdQcm92aWRlcixcbiAgbW9kZWw/OiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGZhbGxiYWNrUmVzcG9uc2UgPSBnZW5lcmF0ZUZhbGxiYWNrUmVzcG9uc2UocXVlc3Rpb24sIGludGVudCwgZGF0YSk7XG5cbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSAmJiAhcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpIHtcbiAgICByZXR1cm4gZmFsbGJhY2tSZXNwb25zZTtcbiAgfVxuXG4gIGNvbnN0IHN5c3RlbVByb21wdCA9IGBZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBleHBsYWlucyB2ZWN0b3IgZGF0YWJhc2UgcXVlcnkgcmVzdWx0cyBpbiBuYXR1cmFsIGxhbmd1YWdlLlxuICBcblRoZSB1c2VyIGFza2VkOiBcIiR7cXVlc3Rpb259XCJcblRoZSBxdWVyeSB0eXBlIHdhczogJHtpbnRlbnQudHlwZX1cblRoZSBkYXRhIHJldHVybmVkIGlzOiAke0pTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpfVxuXG5JTVBPUlRBTlQgR1VJREVMSU5FUyBGT1IgUkFOS0lORy9UT1AgUVVFUklFUzpcbi0gSWYgdGhlcmUgYXJlIHRpZXMgKG11bHRpcGxlIGFydGlzdHMgd2l0aCB0aGUgc2FtZSBjb3VudCksIEFMV0FZUyBtZW50aW9uIHRoaXMgZXhwbGljaXRseVxuLSBEb24ndCBzYXkgXCJYIGhhcyB0aGUgbW9zdFwiIGlmIHRoZXJlIGFyZSB0aWVzIC0gc2F5IFwiWCBpcyB0aWVkIGZvciB0aGUgbW9zdFwiIG9yIFwiWCBhbmQgWSBhcmUgdGllZFwiXG4tIFBheSBhdHRlbnRpb24gdG8gdGhlIFwiaGFzX3RpZVwiLCBcInRpZV9jb3VudFwiLCBhbmQgXCJhcnRpc3RzX3dpdGhfbWF4X2NvdW50XCIgZmllbGRzIGluIHRoZSBkYXRhXG4tIEJlIHByZWNpc2Ugd2l0aCBzaW5ndWxhci9wbHVyYWwgZm9ybXMgKDEgaW1hZ2UgdnMgMiBpbWFnZXMpXG4tIElmIHRoZSB1c2VyIGFza2VkIGZvciBcInRoZSBhcnRpc3Qgd2l0aCBtb3N0XCIgYnV0IHRoZXJlJ3MgYSB0aWUsIGV4cGxhaW4gdGhlIHRpZSBzaXR1YXRpb24gY2xlYXJseVxuXG5Qcm92aWRlIGEgY29uY2lzZSwgbmF0dXJhbCBsYW5ndWFnZSByZXNwb25zZSB0aGF0IGRpcmVjdGx5IGFuc3dlcnMgdGhlIHVzZXIncyBxdWVzdGlvbi4gQmUgc3BlY2lmaWMgd2l0aCBudW1iZXJzIGFuZCBuYW1lcyB3aGVuIGF2YWlsYWJsZSwgYW5kIGFsd2F5cyBiZSBhY2N1cmF0ZSBhYm91dCB0aWVzIGFuZCByYW5raW5ncy5gO1xuXG4gIHRyeSB7XG4gICAgbGV0IHJlc3BvbnNlOiBzdHJpbmc7XG5cbiAgICBpZiAocHJvdmlkZXIgPT09IFwiZ2VtaW5pXCIgJiYgcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpIHtcbiAgICAgIGNvbnN0IGdlbWluaU1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICAgICAgbW9kZWw6IG1vZGVsIHx8IFwiZ2VtaW5pLTIuMC1mbGFzaFwiLCAvLyBVc2Ugc3BlY2lmaWMgbW9kZWwgcGFyYW1ldGVyXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbWluaU1vZGVsLmdlbmVyYXRlQ29udGVudChzeXN0ZW1Qcm9tcHQpO1xuICAgICAgcmVzcG9uc2UgPSByZXN1bHQucmVzcG9uc2UudGV4dCgpO1xuICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09IFwib3BlbmFpXCIgJiYgcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgIG1vZGVsOiBtb2RlbCB8fCBcImdwdC0zLjUtdHVyYm9cIiwgLy8gVXNlIHNwZWNpZmljIG1vZGVsIHBhcmFtZXRlclxuICAgICAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgfV0sXG4gICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcbiAgICAgICAgICBtYXhfdG9rZW5zOiAyMDAsXG4gICAgICAgIH0pO1xuICAgICAgICByZXNwb25zZSA9IGNvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQgfHwgZmFsbGJhY2tSZXNwb25zZTtcbiAgICAgIH0gY2F0Y2ggKG9wZW5haUVycm9yOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiT3BlbkFJIGZhaWxlZCBpbiBnZW5lcmF0ZVJlc3BvbnNlLCB0cnlpbmcgR2VtaW5pIGZhbGxiYWNrOlwiLFxuICAgICAgICAgIG9wZW5haUVycm9yLm1lc3NhZ2VcbiAgICAgICAgKTtcbiAgICAgICAgLy8gQXV0by1mYWxsYmFjayB0byBHZW1pbmkgaWYgT3BlbkFJIGZhaWxzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSkge1xuICAgICAgICAgIGNvbnN0IGdlbWluaU1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICAgICAgICAgIG1vZGVsOiBcImdlbWluaS0yLjAtZmxhc2hcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW1pbmlNb2RlbC5nZW5lcmF0ZUNvbnRlbnQoc3lzdGVtUHJvbXB0KTtcbiAgICAgICAgICByZXNwb25zZSA9IHJlc3VsdC5yZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgb3BlbmFpRXJyb3I7IC8vIFJlLXRocm93IGlmIG5vIEdlbWluaSBmYWxsYmFjayBhdmFpbGFibGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsbGJhY2tSZXNwb25zZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2UudHJpbSgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBnZW5lcmF0ZSBMTE0gcmVzcG9uc2UsIHVzaW5nIGZhbGxiYWNrOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbGxiYWNrUmVzcG9uc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVGYWxsYmFja1Jlc3BvbnNlKFxuICBxdWVzdGlvbjogc3RyaW5nLFxuICBpbnRlbnQ6IFF1ZXJ5SW50ZW50LFxuICBkYXRhOiBhbnlcbik6IHN0cmluZyB7XG4gIC8vIFNhZmVseSBoYW5kbGUgbnVsbC91bmRlZmluZWQgZGF0YVxuICBjb25zdCBzYWZlRGF0YSA9IGRhdGEgfHwge307XG5cbiAgaWYgKGludGVudC5zY29wZSA9PT0gXCJkYXRhYmFzZVwiKSB7XG4gICAgc3dpdGNoIChpbnRlbnQudHlwZSkge1xuICAgICAgY2FzZSBcImNvdW50XCI6XG4gICAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImNvbGxlY3Rpb25zXCIpIHtcbiAgICAgICAgICByZXR1cm4gYEkgZm91bmQgJHtzYWZlRGF0YS5jb3VudCB8fCAwfSBjb2xsZWN0aW9ucyBpbiB0aGUgZGF0YWJhc2U6ICR7XG4gICAgICAgICAgICBzYWZlRGF0YS5jb2xsZWN0aW9ucz8uam9pbihcIiwgXCIpIHx8IFwiTm9uZSBmb3VuZFwiXG4gICAgICAgICAgfS5gO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImFydGlzdHNcIikge1xuICAgICAgICAgIHJldHVybiBgSSBmb3VuZCAke1xuICAgICAgICAgICAgc2FmZURhdGEuY291bnQgfHwgMFxuICAgICAgICAgIH0gdW5pcXVlIGFydGlzdHMgYWNyb3NzIGFsbCBjb2xsZWN0aW9ucy4gU29tZSBvZiB0aGVtIGluY2x1ZGU6ICR7XG4gICAgICAgICAgICBzYWZlRGF0YS5hcnRpc3RzPy5zbGljZSgwLCA1KS5qb2luKFwiLCBcIikgfHwgXCJObyBhcnRpc3RzIGZvdW5kXCJcbiAgICAgICAgICB9LmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVudC50YXJnZXQgPT09IFwiaW1hZ2VzXCIgJiYgaW50ZW50LmZpbHRlcj8ubmFtZSkge1xuICAgICAgICAgIHJldHVybiBgSSBmb3VuZCAke3NhZmVEYXRhLmNvdW50IHx8IDB9IGltYWdlcyBieSAke1xuICAgICAgICAgICAgc2FmZURhdGEuYXJ0aXN0IHx8IGludGVudC5maWx0ZXIubmFtZVxuICAgICAgICAgIH0gYWNyb3NzIGFsbCBjb2xsZWN0aW9ucy4gJHtcbiAgICAgICAgICAgIHNhZmVEYXRhLmJ5X2NvbGxlY3Rpb24/Lmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgPyBgRm91bmQgaW46ICR7c2FmZURhdGEuYnlfY29sbGVjdGlvblxuICAgICAgICAgICAgICAgICAgLm1hcCgoYzogYW55KSA9PiBgJHtjLmNvbGxlY3Rpb259ICgke2MuY291bnR9KWApXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfS5gXG4gICAgICAgICAgICAgIDogXCJcIlxuICAgICAgICAgIH1gO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcInRvdGFsXCIpIHtcbiAgICAgICAgICByZXR1cm4gYFRoZSBkYXRhYmFzZSBjb250YWlucyAke1xuICAgICAgICAgICAgc2FmZURhdGEuY291bnQgfHwgMFxuICAgICAgICAgIH0gdG90YWwgdmVjdG9ycyBhY3Jvc3MgYWxsIGNvbGxlY3Rpb25zLmA7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiY29sbGVjdGlvbnNcIjpcbiAgICAgICAgcmV0dXJuIGBUaGUgZGF0YWJhc2UgY29udGFpbnMgJHtcbiAgICAgICAgICBzYWZlRGF0YS5jb2xsZWN0aW9ucz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgfSBjb2xsZWN0aW9uczogJHtcbiAgICAgICAgICBzYWZlRGF0YS5jb2xsZWN0aW9uc1xuICAgICAgICAgICAgPy5tYXAoKGM6IGFueSkgPT4gYCR7Yy5uYW1lfSAoJHtjLnZlY3RvcnNfY291bnQgfHwgMH0gdmVjdG9ycylgKVxuICAgICAgICAgICAgLmpvaW4oXCIsIFwiKSB8fCBcIk5vbmUgZm91bmRcIlxuICAgICAgICB9LmA7XG4gICAgICBjYXNlIFwiZGF0YWJhc2VcIjpcbiAgICAgICAgcmV0dXJuIGBUaGUgZGF0YWJhc2UgY29udGFpbnMgJHtcbiAgICAgICAgICBzYWZlRGF0YS50b3RhbF9jb2xsZWN0aW9ucyB8fCAwXG4gICAgICAgIH0gY29sbGVjdGlvbnMgd2l0aCBhIHRvdGFsIG9mICR7c2FmZURhdGEudG90YWxfdmVjdG9ycyB8fCAwfSB2ZWN0b3JzLmA7XG4gICAgICBjYXNlIFwic2VhcmNoXCI6XG4gICAgICAgIHJldHVybiBgSSBzZWFyY2hlZCBhY3Jvc3MgJHtcbiAgICAgICAgICBzYWZlRGF0YS5jb2xsZWN0aW9uc19zZWFyY2hlZCB8fCAwXG4gICAgICAgIH0gY29sbGVjdGlvbnMgYW5kIGZvdW5kICR7c2FmZURhdGEudG90YWxfY291bnQgfHwgMH0gbWF0Y2hpbmcgaXRlbXMuYDtcbiAgICAgIGNhc2UgXCJzdW1tYXJpemVcIjpcbiAgICAgICAgaWYgKGludGVudC5maWx0ZXI/Lm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgYFN1bW1hcnkgb2YgJHtcbiAgICAgICAgICAgICAgc2FmZURhdGEuYXJ0aXN0IHx8IGludGVudC5maWx0ZXIubmFtZVxuICAgICAgICAgICAgfSdzIHdvcmsgYWNyb3NzIHRoZSBkYXRhYmFzZTpcXG5cXG5gICtcbiAgICAgICAgICAgIGBUb3RhbCBJbWFnZXM6ICR7c2FmZURhdGEudG90YWxfaW1hZ2VzIHx8IDB9XFxuYCArXG4gICAgICAgICAgICBgQ29sbGVjdGlvbnM6IEZvdW5kIGluICR7XG4gICAgICAgICAgICAgIHNhZmVEYXRhLmNvbGxlY3Rpb25zX2ZvdW5kIHx8IDBcbiAgICAgICAgICAgIH0gY29sbGVjdGlvbnNcXG5gICtcbiAgICAgICAgICAgIGBGaWxlIFR5cGVzOiAke3NhZmVEYXRhLmZpbGVfdHlwZXM/LmpvaW4oXCIsIFwiKSB8fCBcIlZhcmlvdXNcIn1cXG5cXG5gICtcbiAgICAgICAgICAgIGBCcmVha2Rvd24gYnkgY29sbGVjdGlvbjpcXG4ke1xuICAgICAgICAgICAgICBzYWZlRGF0YS5ieV9jb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgPy5tYXAoKGM6IGFueSkgPT4gYOKAoiAke2MuY29sbGVjdGlvbn06ICR7Yy5pbWFnZV9jb3VudH0gaW1hZ2VzYClcbiAgICAgICAgICAgICAgICAuam9pbihcIlxcblwiKSB8fCBcIk5vIGNvbGxlY3Rpb25zIGZvdW5kXCJcbiAgICAgICAgICAgIH1cXG5cXG5gICtcbiAgICAgICAgICAgIGBTYW1wbGUgSW1hZ2VzOiAke1xuICAgICAgICAgICAgICBzYWZlRGF0YS5zYW1wbGVfaW1hZ2VzXG4gICAgICAgICAgICAgICAgPy5zbGljZSgwLCAzKVxuICAgICAgICAgICAgICAgIC5tYXAoKGltZzogYW55KSA9PiBgJHtpbWcuZmlsZW5hbWV9ICgke2ltZy5jb2xsZWN0aW9ufSlgKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIikgfHwgXCJOb25lIGZvdW5kXCJcbiAgICAgICAgICAgIH1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJsaXN0XCI6XG4gICAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImFydGlzdHNcIikge1xuICAgICAgICAgIHJldHVybiBgSSBmb3VuZCAke1xuICAgICAgICAgICAgc2FmZURhdGEuYXJ0aXN0cz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICB9IHVuaXF1ZSBhcnRpc3RzIGFjcm9zcyBhbGwgY29sbGVjdGlvbnM6ICR7XG4gICAgICAgICAgICBzYWZlRGF0YS5hcnRpc3RzPy5zbGljZSgwLCAxMCkuam9pbihcIiwgXCIpIHx8IFwiTm8gYXJ0aXN0cyBmb3VuZFwiXG4gICAgICAgICAgfS5gO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIENvbGxlY3Rpb24tbGV2ZWwgcmVzcG9uc2VzXG4gIHN3aXRjaCAoaW50ZW50LnR5cGUpIHtcbiAgICBjYXNlIFwiY291bnRcIjpcbiAgICAgIGlmIChpbnRlbnQudGFyZ2V0ID09PSBcImFydGlzdHNcIikge1xuICAgICAgICByZXR1cm4gYEkgZm91bmQgJHtcbiAgICAgICAgICBzYWZlRGF0YS5jb3VudCB8fCAwXG4gICAgICAgIH0gdW5pcXVlIGFydGlzdHMgaW4gdGhlIGNvbGxlY3Rpb24uIFNvbWUgb2YgdGhlbSBpbmNsdWRlOiAke1xuICAgICAgICAgIHNhZmVEYXRhLmFydGlzdHM/LnNsaWNlKDAsIDUpLmpvaW4oXCIsIFwiKSB8fCBcIk5vIGFydGlzdHMgZm91bmRcIlxuICAgICAgICB9LmA7XG4gICAgICB9IGVsc2UgaWYgKGludGVudC50YXJnZXQgPT09IFwiaW1hZ2VzXCIgJiYgaW50ZW50LmZpbHRlcj8ubmFtZSkge1xuICAgICAgICByZXR1cm4gYEkgZm91bmQgJHtzYWZlRGF0YS5jb3VudCB8fCAwfSBpbWFnZXMgYnkgJHtcbiAgICAgICAgICBzYWZlRGF0YS5hcnRpc3QgfHwgaW50ZW50LmZpbHRlci5uYW1lXG4gICAgICAgIH0gaW4gdGhpcyBjb2xsZWN0aW9uLiR7XG4gICAgICAgICAgc2FmZURhdGEuc2FtcGxlX2ltYWdlcz8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyBgIFNhbXBsZSBmaWxlczogJHtzYWZlRGF0YS5zYW1wbGVfaW1hZ2VzXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAgICAgICAgICAgLm1hcCgoaW1nOiBhbnkpID0+IGltZy5maWxlbmFtZSlcbiAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfS5gXG4gICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYFRoZSBjb2xsZWN0aW9uIGNvbnRhaW5zICR7c2FmZURhdGEuY291bnQgfHwgMH0gdG90YWwgaW1hZ2VzLmA7XG4gICAgICB9XG5cbiAgICBjYXNlIFwic2VhcmNoXCI6XG4gICAgY2FzZSBcImZpbHRlclwiOlxuICAgICAgcmV0dXJuIGBJIGZvdW5kICR7c2FmZURhdGEuY291bnQgfHwgMH0gaW1hZ2VzIG1hdGNoaW5nIHlvdXIgY3JpdGVyaWEuYDtcblxuICAgIGNhc2UgXCJzdW1tYXJpemVcIjpcbiAgICAgIGlmIChpbnRlbnQuZmlsdGVyPy5uYW1lKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgYFN1bW1hcnkgb2YgJHtcbiAgICAgICAgICAgIHNhZmVEYXRhLmFydGlzdCB8fCBpbnRlbnQuZmlsdGVyLm5hbWVcbiAgICAgICAgICB9J3Mgd29yayBpbiB0aGlzIGNvbGxlY3Rpb246XFxuXFxuYCArXG4gICAgICAgICAgYFRvdGFsIEltYWdlczogJHtzYWZlRGF0YS50b3RhbF9pbWFnZXMgfHwgMH1cXG5gICtcbiAgICAgICAgICBgRmlsZSBUeXBlczogJHtzYWZlRGF0YS5maWxlX3R5cGVzPy5qb2luKFwiLCBcIikgfHwgXCJWYXJpb3VzXCJ9XFxuYCArXG4gICAgICAgICAgYFNhbXBsZSBGaWxlczogJHtcbiAgICAgICAgICAgIHNhZmVEYXRhLnNhbXBsZV9maWxlbmFtZXM/LnNsaWNlKDAsIDUpLmpvaW4oXCIsIFwiKSB8fCBcIk5vbmVcIlxuICAgICAgICAgIH1cXG5cXG5gICtcbiAgICAgICAgICBgSW1hZ2UgRGV0YWlsczpcXG4ke1xuICAgICAgICAgICAgc2FmZURhdGEuaW1hZ2VzXG4gICAgICAgICAgICAgID8uc2xpY2UoMCwgNSlcbiAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAoaW1nOiBhbnksIGk6IG51bWJlcikgPT5cbiAgICAgICAgICAgICAgICAgIGAke2kgKyAxfS4gJHtpbWcuZmlsZW5hbWUgfHwgXCJVbmtub3duIGZpbGVcIn1gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIikgfHwgXCJObyBpbWFnZXMgZm91bmRcIlxuICAgICAgICAgIH1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJhbmFseXplXCI6XG4gICAgICBpZiAoaW50ZW50LmZpbHRlcj8ubmFtZSkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGBBbmFseXNpcyBvZiAke1xuICAgICAgICAgICAgc2FmZURhdGEuYXJ0aXN0IHx8IGludGVudC5maWx0ZXIubmFtZVxuICAgICAgICAgIH0ncyB3b3JrIHBhdHRlcm5zOlxcblxcbmAgK1xuICAgICAgICAgIGBUb3RhbCBJbWFnZXM6ICR7c2FmZURhdGEudG90YWxfaW1hZ2VzIHx8IDB9XFxuYCArXG4gICAgICAgICAgYEZpbGUgVHlwZXM6ICR7XG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhzYWZlRGF0YS5maWxlX3R5cGVfZGlzdHJpYnV0aW9uIHx8IHt9KVxuICAgICAgICAgICAgICAubWFwKChbdHlwZSwgY291bnRdKSA9PiBgJHt0eXBlfSAoJHtjb3VudH0pYClcbiAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKSB8fCBcIlZhcmlvdXNcIlxuICAgICAgICAgIH1cXG5gICtcbiAgICAgICAgICBgQ29tbW9uIFBhdHRlcm5zOiAke1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoc2FmZURhdGEuY29tbW9uX25hbWluZ19wYXR0ZXJucyB8fCB7fSlcbiAgICAgICAgICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAgICAgICAgIC5tYXAoKFtwYXR0ZXJuLCBjb3VudF0pID0+IGBcIiR7cGF0dGVybn1cIiAoJHtjb3VudH0gZmlsZXMpYClcbiAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKSB8fCBcIk5vIHBhdHRlcm5zIGZvdW5kXCJcbiAgICAgICAgICB9XFxuYCArXG4gICAgICAgICAgYFNvdXJjZSBEb21haW5zOiAke1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc2FmZURhdGEuc291cmNlX2RvbWFpbnMgfHwge30pLmpvaW4oXCIsIFwiKSB8fCBcIlZhcmlvdXNcIlxuICAgICAgICAgIH1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJsaXN0XCI6XG4gICAgICBpZiAoaW50ZW50LnRhcmdldCA9PT0gXCJhcnRpc3RzXCIpIHtcbiAgICAgICAgcmV0dXJuIGBIZXJlIGFyZSB0aGUgYXJ0aXN0cyBpbiB0aGUgY29sbGVjdGlvbjogJHtcbiAgICAgICAgICBzYWZlRGF0YS5hcnRpc3RzPy5zbGljZSgwLCAxMCkuam9pbihcIiwgXCIpIHx8IFwiTm8gYXJ0aXN0cyBmb3VuZFwiXG4gICAgICAgIH0ke3NhZmVEYXRhLmFydGlzdHM/Lmxlbmd0aCA+IDEwID8gXCIuLi5cIiA6IFwiXCJ9LmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYEkgZm91bmQgJHtzYWZlRGF0YS5jb3VudCB8fCAwfSBpdGVtcyBpbiB0aGUgY29sbGVjdGlvbi5gO1xuICAgICAgfVxuXG4gICAgY2FzZSBcImRlc2NyaWJlXCI6XG4gICAgICByZXR1cm4gYFRoaXMgY29sbGVjdGlvbiBjb250YWlucyAke1xuICAgICAgICBzYWZlRGF0YS50b3RhbF9pbWFnZXMgfHwgMFxuICAgICAgfSBpbWFnZXMgZnJvbSAke1xuICAgICAgICBzYWZlRGF0YS51bmlxdWVfYXJ0aXN0cyB8fCAwXG4gICAgICB9IHVuaXF1ZSBhcnRpc3RzLiBTb21lIGZlYXR1cmVkIGFydGlzdHMgaW5jbHVkZTogJHtcbiAgICAgICAgc2FmZURhdGEuc2FtcGxlX2FydGlzdHM/LnNsaWNlKDAsIDUpLmpvaW4oXCIsIFwiKSB8fCBcIk5vIGFydGlzdHMgZm91bmRcIlxuICAgICAgfS5gO1xuXG4gICAgY2FzZSBcInRvcFwiOlxuICAgIGNhc2UgXCJyYW5raW5nXCI6XG4gICAgICBpZiAoc2FmZURhdGEudG9wX2FydGlzdHMgJiYgc2FmZURhdGEudG9wX2FydGlzdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBDaGVjayBmb3IgdGllcyBhdCB0aGUgdG9wXG4gICAgICAgIGlmIChzYWZlRGF0YS5oYXNfdGllICYmIGludGVudC5saW1pdCA9PT0gMSkge1xuICAgICAgICAgIC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSB1c2VyIGFza2VkIGZvciBcInRoZSBhcnRpc3Qgd2l0aCBtb3N0XCIgYnV0IHRoZXJlJ3MgYSB0aWVcbiAgICAgICAgICBjb25zdCB0aWVkQXJ0aXN0cyA9XG4gICAgICAgICAgICBzYWZlRGF0YS5hcnRpc3RzX3dpdGhfbWF4X2NvdW50IHx8XG4gICAgICAgICAgICBzYWZlRGF0YS50b3BfYXJ0aXN0cy5maWx0ZXIoXG4gICAgICAgICAgICAgIChhcnRpc3Q6IGFueSkgPT4gYXJ0aXN0LmltYWdlX2NvdW50ID09PSBzYWZlRGF0YS5tYXhfaW1hZ2VfY291bnRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAodGllZEFydGlzdHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICByZXR1cm4gYFRoZXJlJ3MgYSB0aWUhIEJvdGggJHt0aWVkQXJ0aXN0c1swXS5uYW1lfSBhbmQgJHtcbiAgICAgICAgICAgICAgdGllZEFydGlzdHNbMV0ubmFtZVxuICAgICAgICAgICAgfSBoYXZlIHRoZSBtb3N0IGltYWdlcyB3aXRoICR7c2FmZURhdGEubWF4X2ltYWdlX2NvdW50fSBpbWFnZSR7XG4gICAgICAgICAgICAgIHNhZmVEYXRhLm1heF9pbWFnZV9jb3VudCA9PT0gMSA/IFwiXCIgOiBcInNcIlxuICAgICAgICAgICAgfSBlYWNoLmA7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aWVkQXJ0aXN0cy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0QXJ0aXN0ID0gdGllZEFydGlzdHNbdGllZEFydGlzdHMubGVuZ3RoIC0gMV0ubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyQXJ0aXN0cyA9IHRpZWRBcnRpc3RzXG4gICAgICAgICAgICAgIC5zbGljZSgwLCAtMSlcbiAgICAgICAgICAgICAgLm1hcCgoYTogYW55KSA9PiBhLm5hbWUpXG4gICAgICAgICAgICAgIC5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICByZXR1cm4gYFRoZXJlJ3MgYSAke1xuICAgICAgICAgICAgICB0aWVkQXJ0aXN0cy5sZW5ndGhcbiAgICAgICAgICAgIH0td2F5IHRpZSEgJHtvdGhlckFydGlzdHN9LCBhbmQgJHtsYXN0QXJ0aXN0fSBhbGwgaGF2ZSB0aGUgbW9zdCBpbWFnZXMgd2l0aCAke1xuICAgICAgICAgICAgICBzYWZlRGF0YS5tYXhfaW1hZ2VfY291bnRcbiAgICAgICAgICAgIH0gaW1hZ2Uke3NhZmVEYXRhLm1heF9pbWFnZV9jb3VudCA9PT0gMSA/IFwiXCIgOiBcInNcIn0gZWFjaC5gO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSByZWd1bGFyIGNhc2VzIChubyB0aWUgb3IgdXNlciBhc2tlZCBmb3IgbXVsdGlwbGUgcmVzdWx0cylcbiAgICAgICAgaWYgKGludGVudC5saW1pdCA9PT0gMSAmJiAhc2FmZURhdGEuaGFzX3RpZSkge1xuICAgICAgICAgIGNvbnN0IHRvcEFydGlzdCA9IHNhZmVEYXRhLnRvcF9hcnRpc3RzWzBdO1xuICAgICAgICAgIHJldHVybiBgJHt0b3BBcnRpc3QubmFtZX0gaGFzIHRoZSBtb3N0IGltYWdlcyB3aXRoICR7XG4gICAgICAgICAgICB0b3BBcnRpc3QuaW1hZ2VfY291bnRcbiAgICAgICAgICB9IGltYWdlJHt0b3BBcnRpc3QuaW1hZ2VfY291bnQgPT09IDEgPyBcIlwiIDogXCJzXCJ9LmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTXVsdGlwbGUgcmVzdWx0cyBvciB0aWUgc2l0dWF0aW9uIHdoZXJlIHdlIHNob3cgdGhlIGxpc3RcbiAgICAgICAgICBjb25zdCBhcnRpc3RMaXN0ID0gc2FmZURhdGEudG9wX2FydGlzdHNcbiAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgIChhcnRpc3Q6IGFueSwgaW5kZXg6IG51bWJlcikgPT5cbiAgICAgICAgICAgICAgICBgJHtpbmRleCArIDF9LiAke2FydGlzdC5uYW1lfSAoJHthcnRpc3QuaW1hZ2VfY291bnR9IGltYWdlJHtcbiAgICAgICAgICAgICAgICAgIGFydGlzdC5pbWFnZV9jb3VudCA9PT0gMSA/IFwiXCIgOiBcInNcIlxuICAgICAgICAgICAgICAgIH0pYFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmpvaW4oXCIsIFwiKTtcblxuICAgICAgICAgIGxldCByZXNwb25zZSA9IGBUb3AgJHtcbiAgICAgICAgICAgIGludGVudC5saW1pdCB8fCBzYWZlRGF0YS50b3BfYXJ0aXN0cy5sZW5ndGhcbiAgICAgICAgICB9IGFydGlzdHMgYnkgaW1hZ2UgY291bnQ6ICR7YXJ0aXN0TGlzdH1gO1xuXG4gICAgICAgICAgLy8gQWRkIHRpZSBpbmZvcm1hdGlvbiBpZiByZWxldmFudFxuICAgICAgICAgIGlmIChzYWZlRGF0YS5oYXNfdGllICYmIHNhZmVEYXRhLnRpZV9jb3VudCA+IDEpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlICs9IGAuIE5vdGU6ICR7XG4gICAgICAgICAgICAgIHNhZmVEYXRhLnRpZV9jb3VudFxuICAgICAgICAgICAgfSBhcnRpc3RzIGFyZSB0aWVkIGZvciB0aGUgaGlnaGVzdCBjb3VudCBvZiAke1xuICAgICAgICAgICAgICBzYWZlRGF0YS5tYXhfaW1hZ2VfY291bnRcbiAgICAgICAgICAgIH0gaW1hZ2Uke3NhZmVEYXRhLm1heF9pbWFnZV9jb3VudCA9PT0gMSA/IFwiXCIgOiBcInNcIn0uYDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBcIk5vIGFydGlzdHMgZm91bmQgd2l0aCBpbWFnZXMuXCI7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwiSSBwcm9jZXNzZWQgeW91ciBxdWVyeSBzdWNjZXNzZnVsbHkgdXNpbmcgcGF0dGVybiBtYXRjaGluZy5cIjtcbiAgfVxuXG4gIHJldHVybiBcIkkgcHJvY2Vzc2VkIHlvdXIgcXVlcnkgc3VjY2Vzc2Z1bGx5LlwiO1xufVxuXG4vLyBOZXcgZGF0YWJhc2UtbGV2ZWwgZnVuY3Rpb25zIGZvciBhcnRpc3RzIGFuZCB0b3RhbCBjb3VudHNcbmFzeW5jIGZ1bmN0aW9uIGNvdW50QXJ0aXN0c0Fjcm9zc0RhdGFiYXNlKCk6IFByb21pc2U8e1xuICBjb3VudDogbnVtYmVyO1xuICBhcnRpc3RzOiBzdHJpbmdbXTtcbn0+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNEYXRhID0gYXdhaXQgbGlzdENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IGFsbEFydGlzdHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAvLyBDb2xsZWN0IGFydGlzdHMgZnJvbSBlYWNoIGNvbGxlY3Rpb25cbiAgZm9yIChjb25zdCBjb2xsZWN0aW9uIG9mIGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICBpZiAoY29sbGVjdGlvbi52ZWN0b3JzX2NvdW50ICYmIGNvbGxlY3Rpb24udmVjdG9yc19jb3VudCA+IDApIHtcbiAgICAgICAgY29uc3QgYXJ0aXN0c0RhdGEgPSBhd2FpdCBjb3VudFVuaXF1ZUFydGlzdHMoY29sbGVjdGlvbi5uYW1lKTtcbiAgICAgICAgYXJ0aXN0c0RhdGEuYXJ0aXN0cy5mb3JFYWNoKChhcnRpc3QpID0+IGFsbEFydGlzdHMuYWRkKGFydGlzdCkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBGYWlsZWQgdG8gZ2V0IGFydGlzdHMgZnJvbSBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbi5uYW1lfTpgLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvdW50OiBhbGxBcnRpc3RzLnNpemUsXG4gICAgYXJ0aXN0czogQXJyYXkuZnJvbShhbGxBcnRpc3RzKS5zbGljZSgwLCAyMCksIC8vIFNob3cgZmlyc3QgMjBcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY291bnRUb3RhbFZlY3RvcnNBY3Jvc3NEYXRhYmFzZSgpOiBQcm9taXNlPHtcbiAgY291bnQ6IG51bWJlcjtcbiAgYnlfY29sbGVjdGlvbjogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT47XG59PiB7XG4gIGNvbnN0IGNvbGxlY3Rpb25zRGF0YSA9IGF3YWl0IGxpc3RDb2xsZWN0aW9ucygpO1xuICBjb25zdCB0b3RhbFZlY3RvcnMgPSBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMucmVkdWNlKFxuICAgIChzdW0sIGNvbCkgPT4gc3VtICsgKGNvbC52ZWN0b3JzX2NvdW50IHx8IDApLFxuICAgIDBcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIGNvdW50OiB0b3RhbFZlY3RvcnMsXG4gICAgYnlfY29sbGVjdGlvbjogY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zLm1hcCgoY29sKSA9PiAoe1xuICAgICAgbmFtZTogY29sLm5hbWUsXG4gICAgICBjb3VudDogY29sLnZlY3RvcnNfY291bnQgfHwgMCxcbiAgICB9KSksXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RBcnRpc3RzQWNyb3NzRGF0YWJhc2UobGltaXQ6IG51bWJlcik6IFByb21pc2U8e1xuICBhcnRpc3RzOiBzdHJpbmdbXTtcbiAgYnlfY29sbGVjdGlvbjogQXJyYXk8eyBjb2xsZWN0aW9uOiBzdHJpbmc7IGFydGlzdHM6IHN0cmluZ1tdIH0+O1xufT4ge1xuICBjb25zdCBjb2xsZWN0aW9uc0RhdGEgPSBhd2FpdCBsaXN0Q29sbGVjdGlvbnMoKTtcbiAgY29uc3QgYWxsQXJ0aXN0cyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCBieUNvbGxlY3Rpb246IEFycmF5PHsgY29sbGVjdGlvbjogc3RyaW5nOyBhcnRpc3RzOiBzdHJpbmdbXSB9PiA9IFtdO1xuXG4gIC8vIENvbGxlY3QgYXJ0aXN0cyBmcm9tIGVhY2ggY29sbGVjdGlvblxuICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgJiYgY29sbGVjdGlvbi52ZWN0b3JzX2NvdW50ID4gMCkge1xuICAgICAgICBjb25zdCBhcnRpc3RzRGF0YSA9IGF3YWl0IGxpc3RVbmlxdWVBcnRpc3RzKFxuICAgICAgICAgIGNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICBNYXRoLm1pbihsaW1pdCwgMjApXG4gICAgICAgICk7XG4gICAgICAgIGFydGlzdHNEYXRhLmFydGlzdHMuZm9yRWFjaCgoYXJ0aXN0KSA9PiBhbGxBcnRpc3RzLmFkZChhcnRpc3QpKTtcbiAgICAgICAgYnlDb2xsZWN0aW9uLnB1c2goe1xuICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICBhcnRpc3RzOiBhcnRpc3RzRGF0YS5hcnRpc3RzLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgRmFpbGVkIHRvIGdldCBhcnRpc3RzIGZyb20gY29sbGVjdGlvbiAke2NvbGxlY3Rpb24ubmFtZX06YCxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhcnRpc3RzOiBBcnJheS5mcm9tKGFsbEFydGlzdHMpLnNsaWNlKDAsIGxpbWl0KSxcbiAgICBieV9jb2xsZWN0aW9uOiBieUNvbGxlY3Rpb24sXG4gIH07XG59XG5cbi8vIE5ldyBmdW5jdGlvbiB0byBjb3VudCBpbWFnZXMgYnkgc3BlY2lmaWMgYXJ0aXN0XG5hc3luYyBmdW5jdGlvbiBjb3VudEltYWdlc0J5QXJ0aXN0KFxuICBjb2xsZWN0aW9uOiBzdHJpbmcsXG4gIGZpbHRlcjogYW55XG4pOiBQcm9taXNlPHsgY291bnQ6IG51bWJlcjsgYXJ0aXN0OiBzdHJpbmc7IHNhbXBsZV9pbWFnZXM6IGFueVtdIH0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICBsaW1pdDogMTAwMCxcbiAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICB9KTtcblxuICBsZXQgZmlsdGVyZWRQb2ludHMgPSByZXNwb25zZS5wb2ludHM7XG4gIGlmIChmaWx0ZXIpIHtcbiAgICBmaWx0ZXJlZFBvaW50cyA9IHJlc3BvbnNlLnBvaW50cy5maWx0ZXIoKHBvaW50OiBhbnkpID0+IHtcbiAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhmaWx0ZXIpLmV2ZXJ5KChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgcmV0dXJuIHBvaW50LnBheWxvYWQ/LltrZXldID09PSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjb3VudDogZmlsdGVyZWRQb2ludHMubGVuZ3RoLFxuICAgIGFydGlzdDogZmlsdGVyPy5uYW1lIHx8IFwidW5rbm93blwiLFxuICAgIHNhbXBsZV9pbWFnZXM6IGZpbHRlcmVkUG9pbnRzLnNsaWNlKDAsIDUpLm1hcCgocG9pbnQ6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBwb2ludC5pZCxcbiAgICAgIGZpbGVuYW1lOiBwb2ludC5wYXlsb2FkPy5maWxlX25hbWUsXG4gICAgICB1cmw6IHBvaW50LnBheWxvYWQ/LmltYWdlX3VybCxcbiAgICB9KSksXG4gIH07XG59XG5cbi8vIE5ldyBmdW5jdGlvbiB0byBwcm92aWRlIGRldGFpbGVkIHN1bW1hcnkgb2YgYXJ0aXN0J3Mgd29ya1xuYXN5bmMgZnVuY3Rpb24gc3VtbWFyaXplQXJ0aXN0V29yayhcbiAgY29sbGVjdGlvbjogc3RyaW5nLFxuICBmaWx0ZXI6IGFueSxcbiAgbGltaXQ6IG51bWJlclxuKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICBsaW1pdDogMTAwMCxcbiAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICB9KTtcblxuICBsZXQgZmlsdGVyZWRQb2ludHMgPSByZXNwb25zZS5wb2ludHM7XG4gIGlmIChmaWx0ZXIpIHtcbiAgICBmaWx0ZXJlZFBvaW50cyA9IHJlc3BvbnNlLnBvaW50cy5maWx0ZXIoKHBvaW50OiBhbnkpID0+IHtcbiAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhmaWx0ZXIpLmV2ZXJ5KChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgcmV0dXJuIHBvaW50LnBheWxvYWQ/LltrZXldID09PSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgbGltaXRlZFBvaW50cyA9IGZpbHRlcmVkUG9pbnRzLnNsaWNlKDAsIGxpbWl0KTtcblxuICAvLyBBbmFseXplIGZpbGUgdHlwZXMgYW5kIHBhdHRlcm5zXG4gIGNvbnN0IGZpbGVFeHRlbnNpb25zID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IGZpbGVOYW1lczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3QgaW1hZ2VVcmxzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGxpbWl0ZWRQb2ludHMuZm9yRWFjaCgocG9pbnQ6IGFueSkgPT4ge1xuICAgIGlmIChwb2ludC5wYXlsb2FkPy5maWxlX25hbWUpIHtcbiAgICAgIGNvbnN0IGV4dCA9IHBvaW50LnBheWxvYWQuZmlsZV9uYW1lLnNwbGl0KFwiLlwiKS5wb3AoKT8udG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChleHQpIGZpbGVFeHRlbnNpb25zLmFkZChleHQpO1xuICAgICAgZmlsZU5hbWVzLnB1c2gocG9pbnQucGF5bG9hZC5maWxlX25hbWUpO1xuICAgIH1cbiAgICBpZiAocG9pbnQucGF5bG9hZD8uaW1hZ2VfdXJsKSB7XG4gICAgICBpbWFnZVVybHMucHVzaChwb2ludC5wYXlsb2FkLmltYWdlX3VybCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGFydGlzdDogZmlsdGVyPy5uYW1lIHx8IFwidW5rbm93blwiLFxuICAgIHRvdGFsX2ltYWdlczogZmlsdGVyZWRQb2ludHMubGVuZ3RoLFxuICAgIGRpc3BsYXllZF9pbWFnZXM6IGxpbWl0ZWRQb2ludHMubGVuZ3RoLFxuICAgIGZpbGVfdHlwZXM6IEFycmF5LmZyb20oZmlsZUV4dGVuc2lvbnMpLFxuICAgIHNhbXBsZV9maWxlbmFtZXM6IGZpbGVOYW1lcy5zbGljZSgwLCA4KSxcbiAgICBzYW1wbGVfdXJsczogaW1hZ2VVcmxzLnNsaWNlKDAsIDUpLFxuICAgIGltYWdlczogbGltaXRlZFBvaW50cy5tYXAoKHBvaW50OiBhbnkpID0+ICh7XG4gICAgICBpZDogcG9pbnQuaWQsXG4gICAgICBmaWxlbmFtZTogcG9pbnQucGF5bG9hZD8uZmlsZV9uYW1lLFxuICAgICAgaW1hZ2VfdXJsOiBwb2ludC5wYXlsb2FkPy5pbWFnZV91cmwsXG4gICAgICBzdHlsZV91cmw6IHBvaW50LnBheWxvYWQ/LnVybCxcbiAgICB9KSksXG4gIH07XG59XG5cbi8vIE5ldyBmdW5jdGlvbiB0byBhbmFseXplIGFydGlzdCdzIHdvcmsgcGF0dGVybnNcbmFzeW5jIGZ1bmN0aW9uIGFuYWx5emVBcnRpc3RXb3JrKFxuICBjb2xsZWN0aW9uOiBzdHJpbmcsXG4gIGZpbHRlcjogYW55LFxuICBsaW1pdDogbnVtYmVyXG4pOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5zY3JvbGwoY29sbGVjdGlvbiwge1xuICAgIGxpbWl0OiAxMDAwLFxuICAgIHdpdGhfcGF5bG9hZDogdHJ1ZSxcbiAgICB3aXRoX3ZlY3RvcjogZmFsc2UsXG4gIH0pO1xuXG4gIGxldCBmaWx0ZXJlZFBvaW50cyA9IHJlc3BvbnNlLnBvaW50cztcbiAgaWYgKGZpbHRlcikge1xuICAgIGZpbHRlcmVkUG9pbnRzID0gcmVzcG9uc2UucG9pbnRzLmZpbHRlcigocG9pbnQ6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGZpbHRlcikuZXZlcnkoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICByZXR1cm4gcG9pbnQucGF5bG9hZD8uW2tleV0gPT09IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBBbmFseXplIHBhdHRlcm5zIGluIHRoZSBhcnRpc3QncyB3b3JrXG4gIGNvbnN0IGZpbGVUeXBlcyA9IG5ldyBNYXAoKTtcbiAgY29uc3QgbmFtaW5nUGF0dGVybnMgPSBuZXcgTWFwKCk7XG4gIGNvbnN0IHVybFBhdHRlcm5zID0gbmV3IE1hcCgpO1xuXG4gIGZpbHRlcmVkUG9pbnRzLmZvckVhY2goKHBvaW50OiBhbnkpID0+IHtcbiAgICAvLyBGaWxlIHR5cGUgYW5hbHlzaXNcbiAgICBpZiAocG9pbnQucGF5bG9hZD8uZmlsZV9uYW1lKSB7XG4gICAgICBjb25zdCBleHQgPSBwb2ludC5wYXlsb2FkLmZpbGVfbmFtZS5zcGxpdChcIi5cIikucG9wKCk/LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoZXh0KSB7XG4gICAgICAgIGZpbGVUeXBlcy5zZXQoZXh0LCAoZmlsZVR5cGVzLmdldChleHQpIHx8IDApICsgMSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE5hbWluZyBwYXR0ZXJuIGFuYWx5c2lzXG4gICAgICBjb25zdCBuYW1lUGF0dGVybiA9IHBvaW50LnBheWxvYWQuZmlsZV9uYW1lXG4gICAgICAgIC5yZXBsYWNlKC9cXGQrL2csIFwiI1wiKVxuICAgICAgICAucmVwbGFjZSgvXFwuKGpwZ3xqcGVnfHBuZ3xnaWZ8d2VicCkkL2ksIFwiXCIpO1xuICAgICAgbmFtaW5nUGF0dGVybnMuc2V0KFxuICAgICAgICBuYW1lUGF0dGVybixcbiAgICAgICAgKG5hbWluZ1BhdHRlcm5zLmdldChuYW1lUGF0dGVybikgfHwgMCkgKyAxXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFVSTCBwYXR0ZXJuIGFuYWx5c2lzXG4gICAgaWYgKHBvaW50LnBheWxvYWQ/LnVybCkge1xuICAgICAgY29uc3QgZG9tYWluID0gcG9pbnQucGF5bG9hZC51cmwuc3BsaXQoXCIvXCIpWzJdO1xuICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICB1cmxQYXR0ZXJucy5zZXQoZG9tYWluLCAodXJsUGF0dGVybnMuZ2V0KGRvbWFpbikgfHwgMCkgKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgYXJ0aXN0OiBmaWx0ZXI/Lm5hbWUgfHwgXCJ1bmtub3duXCIsXG4gICAgdG90YWxfaW1hZ2VzOiBmaWx0ZXJlZFBvaW50cy5sZW5ndGgsXG4gICAgZmlsZV90eXBlX2Rpc3RyaWJ1dGlvbjogT2JqZWN0LmZyb21FbnRyaWVzKGZpbGVUeXBlcyksXG4gICAgY29tbW9uX25hbWluZ19wYXR0ZXJuczogT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgQXJyYXkuZnJvbShuYW1pbmdQYXR0ZXJucy5lbnRyaWVzKCkpXG4gICAgICAgIC5maWx0ZXIoKFtfLCBjb3VudF0pID0+IGNvdW50ID4gMSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKVxuICAgICAgICAuc2xpY2UoMCwgNSlcbiAgICApLFxuICAgIHNvdXJjZV9kb21haW5zOiBPYmplY3QuZnJvbUVudHJpZXModXJsUGF0dGVybnMpLFxuICAgIHNhbXBsZV9pbWFnZXM6IGZpbHRlcmVkUG9pbnRzLnNsaWNlKDAsIDEwKS5tYXAoKHBvaW50OiBhbnkpID0+ICh7XG4gICAgICBpZDogcG9pbnQuaWQsXG4gICAgICBmaWxlbmFtZTogcG9pbnQucGF5bG9hZD8uZmlsZV9uYW1lLFxuICAgICAgaW1hZ2VfdXJsOiBwb2ludC5wYXlsb2FkPy5pbWFnZV91cmwsXG4gICAgfSkpLFxuICB9O1xufVxuXG4vLyBOZXcgZnVuY3Rpb24gdG8gY291bnQgc3BlY2lmaWMgYXJ0aXN0IGltYWdlcyBhY3Jvc3MgYWxsIGNvbGxlY3Rpb25zXG5hc3luYyBmdW5jdGlvbiBjb3VudEltYWdlc0J5QXJ0aXN0QWNyb3NzRGF0YWJhc2UoZmlsdGVyOiBhbnkpOiBQcm9taXNlPHtcbiAgY291bnQ6IG51bWJlcjtcbiAgYXJ0aXN0OiBzdHJpbmc7XG4gIGJ5X2NvbGxlY3Rpb246IEFycmF5PHsgY29sbGVjdGlvbjogc3RyaW5nOyBjb3VudDogbnVtYmVyIH0+O1xufT4ge1xuICBjb25zdCBjb2xsZWN0aW9uc0RhdGEgPSBhd2FpdCBsaXN0Q29sbGVjdGlvbnMoKTtcbiAgY29uc3QgcmVzdWx0c0J5Q29sbGVjdGlvbjogQXJyYXk8eyBjb2xsZWN0aW9uOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT4gPSBbXTtcbiAgbGV0IHRvdGFsQ291bnQgPSAwO1xuXG4gIGZvciAoY29uc3QgY29sbGVjdGlvbiBvZiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGNvbGxlY3Rpb24udmVjdG9yc19jb3VudCAmJiBjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgPiAwKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvdW50SW1hZ2VzQnlBcnRpc3QoY29sbGVjdGlvbi5uYW1lLCBmaWx0ZXIpO1xuICAgICAgICBpZiAocmVzdWx0LmNvdW50ID4gMCkge1xuICAgICAgICAgIHJlc3VsdHNCeUNvbGxlY3Rpb24ucHVzaCh7XG4gICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgICBjb3VudDogcmVzdWx0LmNvdW50LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRvdGFsQ291bnQgKz0gcmVzdWx0LmNvdW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYEZhaWxlZCB0byBjb3VudCBpbWFnZXMgaW4gY29sbGVjdGlvbiAke2NvbGxlY3Rpb24ubmFtZX06YCxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjb3VudDogdG90YWxDb3VudCxcbiAgICBhcnRpc3Q6IGZpbHRlcj8ubmFtZSB8fCBcInVua25vd25cIixcbiAgICBieV9jb2xsZWN0aW9uOiByZXN1bHRzQnlDb2xsZWN0aW9uLFxuICB9O1xufVxuXG4vLyBOZXcgZnVuY3Rpb24gdG8gc3VtbWFyaXplIGFydGlzdCB3b3JrIGFjcm9zcyBhbGwgY29sbGVjdGlvbnNcbmFzeW5jIGZ1bmN0aW9uIHN1bW1hcml6ZUFydGlzdEFjcm9zc0RhdGFiYXNlKFxuICBmaWx0ZXI6IGFueSxcbiAgbGltaXQ6IG51bWJlclxuKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNEYXRhID0gYXdhaXQgbGlzdENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IGFsbEltYWdlczogYW55W10gPSBbXTtcbiAgY29uc3QgY29sbGVjdGlvblN1bW1hcmllczogYW55W10gPSBbXTtcbiAgY29uc3QgZmlsZVR5cGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgZm9yIChjb25zdCBjb2xsZWN0aW9uIG9mIGNvbGxlY3Rpb25zRGF0YS5jb2xsZWN0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICBpZiAoY29sbGVjdGlvbi52ZWN0b3JzX2NvdW50ICYmIGNvbGxlY3Rpb24udmVjdG9yc19jb3VudCA+IDApIHtcbiAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGF3YWl0IHN1bW1hcml6ZUFydGlzdFdvcmsoY29sbGVjdGlvbi5uYW1lLCBmaWx0ZXIsIDUwKTtcbiAgICAgICAgaWYgKHN1bW1hcnkudG90YWxfaW1hZ2VzID4gMCkge1xuICAgICAgICAgIGNvbGxlY3Rpb25TdW1tYXJpZXMucHVzaCh7XG4gICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgICAuLi5zdW1tYXJ5LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFsbEltYWdlcy5wdXNoKC4uLnN1bW1hcnkuaW1hZ2VzKTtcbiAgICAgICAgICBzdW1tYXJ5LmZpbGVfdHlwZXM/LmZvckVhY2goKHR5cGU6IHN0cmluZykgPT4gZmlsZVR5cGVzLmFkZCh0eXBlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgRmFpbGVkIHRvIHN1bW1hcml6ZSBhcnRpc3Qgd29yayBpbiBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbi5uYW1lfTpgLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCB0b3RhbEltYWdlcyA9IGFsbEltYWdlcy5sZW5ndGg7XG4gIGNvbnN0IGRpc3BsYXllZEltYWdlcyA9IGFsbEltYWdlcy5zbGljZSgwLCBsaW1pdCk7XG5cbiAgcmV0dXJuIHtcbiAgICBhcnRpc3Q6IGZpbHRlcj8ubmFtZSB8fCBcInVua25vd25cIixcbiAgICB0b3RhbF9pbWFnZXM6IHRvdGFsSW1hZ2VzLFxuICAgIGRpc3BsYXllZF9pbWFnZXM6IGRpc3BsYXllZEltYWdlcy5sZW5ndGgsXG4gICAgY29sbGVjdGlvbnNfZm91bmQ6IGNvbGxlY3Rpb25TdW1tYXJpZXMubGVuZ3RoLFxuICAgIGZpbGVfdHlwZXM6IEFycmF5LmZyb20oZmlsZVR5cGVzKSxcbiAgICBieV9jb2xsZWN0aW9uOiBjb2xsZWN0aW9uU3VtbWFyaWVzLm1hcCgoc3VtbWFyeSkgPT4gKHtcbiAgICAgIGNvbGxlY3Rpb246IHN1bW1hcnkuY29sbGVjdGlvbixcbiAgICAgIGltYWdlX2NvdW50OiBzdW1tYXJ5LnRvdGFsX2ltYWdlcyxcbiAgICAgIHNhbXBsZV9maWxlbmFtZXM6IHN1bW1hcnkuc2FtcGxlX2ZpbGVuYW1lcz8uc2xpY2UoMCwgMyksXG4gICAgfSkpLFxuICAgIHNhbXBsZV9pbWFnZXM6IGRpc3BsYXllZEltYWdlcy5tYXAoKGltYWdlOiBhbnkpID0+ICh7XG4gICAgICBpZDogaW1hZ2UuaWQsXG4gICAgICBmaWxlbmFtZTogaW1hZ2UuZmlsZW5hbWUsXG4gICAgICBpbWFnZV91cmw6IGltYWdlLmltYWdlX3VybCxcbiAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TdW1tYXJpZXMuZmluZCgoYykgPT5cbiAgICAgICAgYy5pbWFnZXM/LnNvbWUoKGltZzogYW55KSA9PiBpbWcuaWQgPT09IGltYWdlLmlkKVxuICAgICAgKT8uY29sbGVjdGlvbixcbiAgICB9KSksXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFRvcEFydGlzdHNCeUltYWdlQ291bnRBY3Jvc3NEYXRhYmFzZShcbiAgbGltaXQ6IG51bWJlclxuKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgY29sbGVjdGlvbnNEYXRhID0gYXdhaXQgbGlzdENvbGxlY3Rpb25zKCk7XG4gIGNvbnN0IGFydGlzdENvdW50czoge1xuICAgIFthcnRpc3ROYW1lOiBzdHJpbmddOiB7IGNvdW50OiBudW1iZXI7IGNvbGxlY3Rpb25zOiBzdHJpbmdbXSB9O1xuICB9ID0ge307XG5cbiAgLy8gQ29sbGVjdCBhcnRpc3QgY291bnRzIGZyb20gYWxsIGNvbGxlY3Rpb25zXG4gIGZvciAoY29uc3QgY29sbGVjdGlvbiBvZiBjb2xsZWN0aW9uc0RhdGEuY29sbGVjdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGNvbGxlY3Rpb24udmVjdG9yc19jb3VudCAmJiBjb2xsZWN0aW9uLnZlY3RvcnNfY291bnQgPiAwKSB7XG4gICAgICAgIC8vIEdldCBBTEwgcG9pbnRzIGZyb20gdGhlIGNvbGxlY3Rpb24gdG8gY291bnQgYnkgYXJ0aXN0XG4gICAgICAgIGxldCBhbGxQb2ludHM6IGFueVtdID0gW107XG4gICAgICAgIGxldCBvZmZzZXQ6IHN0cmluZyB8IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBTY3JvbGwgdGhyb3VnaCBhbGwgcG9pbnRzIGluIHRoZSBjb2xsZWN0aW9uXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBjb25zdCBzY3JvbGxSZXN1bHQgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24ubmFtZSwge1xuICAgICAgICAgICAgbGltaXQ6IDEwMDAsIC8vIFByb2Nlc3MgaW4gYmF0Y2hlcyBvZiAxMDAwXG4gICAgICAgICAgICAuLi4ob2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgeyBvZmZzZXQgfSksXG4gICAgICAgICAgICB3aXRoX3BheWxvYWQ6IHRydWUsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbGxQb2ludHMucHVzaCguLi5zY3JvbGxSZXN1bHQucG9pbnRzKTtcbiAgICAgICAgICAvLyBTYWZlbHkgaGFuZGxlIHRoZSBvZmZzZXQgdHlwZVxuICAgICAgICAgIGNvbnN0IG5leHRPZmZzZXQgPSBzY3JvbGxSZXN1bHQubmV4dF9wYWdlX29mZnNldDtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlb2YgbmV4dE9mZnNldCA9PT0gXCJzdHJpbmdcIiB8fFxuICAgICAgICAgICAgdHlwZW9mIG5leHRPZmZzZXQgPT09IFwibnVtYmVyXCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIG9mZnNldCA9IG5leHRPZmZzZXQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKG9mZnNldCAhPT0gbnVsbCAmJiBvZmZzZXQgIT09IHVuZGVmaW5lZCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBwb2ludCBvZiBhbGxQb2ludHMpIHtcbiAgICAgICAgICBjb25zdCBhcnRpc3ROYW1lID0gcG9pbnQucGF5bG9hZD8ubmFtZTtcbiAgICAgICAgICBpZiAoYXJ0aXN0TmFtZSAmJiB0eXBlb2YgYXJ0aXN0TmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaWYgKCFhcnRpc3RDb3VudHNbYXJ0aXN0TmFtZV0pIHtcbiAgICAgICAgICAgICAgYXJ0aXN0Q291bnRzW2FydGlzdE5hbWVdID0geyBjb3VudDogMCwgY29sbGVjdGlvbnM6IFtdIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcnRpc3RDb3VudHNbYXJ0aXN0TmFtZV0uY291bnQrKztcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIWFydGlzdENvdW50c1thcnRpc3ROYW1lXS5jb2xsZWN0aW9ucy5pbmNsdWRlcyhjb2xsZWN0aW9uLm5hbWUpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgYXJ0aXN0Q291bnRzW2FydGlzdE5hbWVdLmNvbGxlY3Rpb25zLnB1c2goY29sbGVjdGlvbi5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgRmFpbGVkIHRvIGdldCBhcnRpc3RzIGZyb20gY29sbGVjdGlvbiAke2NvbGxlY3Rpb24ubmFtZX06YCxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLy8gU29ydCBhcnRpc3RzIGJ5IGltYWdlIGNvdW50XG4gIGNvbnN0IHNvcnRlZEFydGlzdHMgPSBPYmplY3QuZW50cmllcyhhcnRpc3RDb3VudHMpXG4gICAgLm1hcCgoW25hbWUsIGRhdGFdKSA9PiAoe1xuICAgICAgbmFtZSxcbiAgICAgIGltYWdlX2NvdW50OiBkYXRhLmNvdW50LFxuICAgICAgY29sbGVjdGlvbnM6IGRhdGEuY29sbGVjdGlvbnMsXG4gICAgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuaW1hZ2VfY291bnQgLSBhLmltYWdlX2NvdW50KTtcblxuICAvLyBBbmFseXplIHRoZSBkaXN0cmlidXRpb24gdG8gZGV0ZWN0IHRpZXNcbiAgY29uc3QgbWF4Q291bnQgPSBzb3J0ZWRBcnRpc3RzLmxlbmd0aCA+IDAgPyBzb3J0ZWRBcnRpc3RzWzBdLmltYWdlX2NvdW50IDogMDtcbiAgY29uc3QgYXJ0aXN0c1dpdGhNYXhDb3VudCA9IHNvcnRlZEFydGlzdHMuZmlsdGVyKFxuICAgIChhcnRpc3QpID0+IGFydGlzdC5pbWFnZV9jb3VudCA9PT0gbWF4Q291bnRcbiAgKTtcbiAgY29uc3QgaGFzVGllID0gYXJ0aXN0c1dpdGhNYXhDb3VudC5sZW5ndGggPiAxO1xuXG4gIC8vIEdldCB0aGUgcmVxdWVzdGVkIG51bWJlciBvZiB0b3AgYXJ0aXN0c1xuICBjb25zdCB0b3BBcnRpc3RzID0gc29ydGVkQXJ0aXN0cy5zbGljZSgwLCBsaW1pdCk7XG5cbiAgLy8gQ2FsY3VsYXRlIHNvbWUgc3RhdGlzdGljc1xuICBjb25zdCB0b3RhbEltYWdlcyA9IE9iamVjdC52YWx1ZXMoYXJ0aXN0Q291bnRzKS5yZWR1Y2UoXG4gICAgKHN1bSwgZGF0YSkgPT4gc3VtICsgZGF0YS5jb3VudCxcbiAgICAwXG4gICk7XG4gIGNvbnN0IGF2ZXJhZ2VJbWFnZXNQZXJBcnRpc3QgPSB0b3RhbEltYWdlcyAvIE9iamVjdC5rZXlzKGFydGlzdENvdW50cykubGVuZ3RoO1xuXG4gIC8vIEdyb3VwIGFydGlzdHMgYnkgaW1hZ2UgY291bnQgZm9yIGJldHRlciBhbmFseXNpc1xuICBjb25zdCBjb3VudEdyb3VwczogeyBbY291bnQ6IG51bWJlcl06IHN0cmluZ1tdIH0gPSB7fTtcbiAgc29ydGVkQXJ0aXN0cy5mb3JFYWNoKChhcnRpc3QpID0+IHtcbiAgICBpZiAoIWNvdW50R3JvdXBzW2FydGlzdC5pbWFnZV9jb3VudF0pIHtcbiAgICAgIGNvdW50R3JvdXBzW2FydGlzdC5pbWFnZV9jb3VudF0gPSBbXTtcbiAgICB9XG4gICAgY291bnRHcm91cHNbYXJ0aXN0LmltYWdlX2NvdW50XS5wdXNoKGFydGlzdC5uYW1lKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3BfYXJ0aXN0czogdG9wQXJ0aXN0cyxcbiAgICB0b3RhbF9hcnRpc3RzX2ZvdW5kOiBPYmplY3Qua2V5cyhhcnRpc3RDb3VudHMpLmxlbmd0aCxcbiAgICBjb2xsZWN0aW9uc19zZWFyY2hlZDogY29sbGVjdGlvbnNEYXRhLmNvbGxlY3Rpb25zLmxlbmd0aCxcbiAgICBtYXhfaW1hZ2VfY291bnQ6IG1heENvdW50LFxuICAgIGFydGlzdHNfd2l0aF9tYXhfY291bnQ6IGFydGlzdHNXaXRoTWF4Q291bnQsXG4gICAgaGFzX3RpZTogaGFzVGllLFxuICAgIHRpZV9jb3VudDogYXJ0aXN0c1dpdGhNYXhDb3VudC5sZW5ndGgsXG4gICAgdG90YWxfaW1hZ2VzOiB0b3RhbEltYWdlcyxcbiAgICBhdmVyYWdlX2ltYWdlc19wZXJfYXJ0aXN0OiBNYXRoLnJvdW5kKGF2ZXJhZ2VJbWFnZXNQZXJBcnRpc3QgKiAxMDApIC8gMTAwLFxuICAgIGRpc3RyaWJ1dGlvbjogY291bnRHcm91cHMsXG4gICAgYW5hbHlzaXM6IHtcbiAgICAgIGlzX2V2ZW5seV9kaXN0cmlidXRlZDpcbiAgICAgICAgT2JqZWN0LmtleXMoY291bnRHcm91cHMpLmxlbmd0aCA9PT0gT2JqZWN0LmtleXMoYXJ0aXN0Q291bnRzKS5sZW5ndGgsXG4gICAgICBtb3N0X2NvbW1vbl9jb3VudDpcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoY291bnRHcm91cHMpLnNvcnQoXG4gICAgICAgICAgKGEsIGIpID0+IGJbMV0ubGVuZ3RoIC0gYVsxXS5sZW5ndGhcbiAgICAgICAgKVswXT8uWzBdIHx8IFwiMFwiLFxuICAgIH0sXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFRvcEFydGlzdHNCeUltYWdlQ291bnRJbkNvbGxlY3Rpb24oXG4gIGNvbGxlY3Rpb246IHN0cmluZyxcbiAgbGltaXQ6IG51bWJlclxuKTogUHJvbWlzZTxhbnk+IHtcbiAgLy8gR2V0IEFMTCBwb2ludHMgZnJvbSB0aGUgY29sbGVjdGlvbiwgbm90IGp1c3QgMTAwMFxuICBsZXQgYWxsUG9pbnRzOiBhbnlbXSA9IFtdO1xuICBsZXQgb2Zmc2V0OiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgLy8gU2Nyb2xsIHRocm91Z2ggYWxsIHBvaW50cyBpbiB0aGUgY29sbGVjdGlvblxuICBkbyB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuc2Nyb2xsKGNvbGxlY3Rpb24sIHtcbiAgICAgIGxpbWl0OiAxMDAwLCAvLyBQcm9jZXNzIGluIGJhdGNoZXMgb2YgMTAwMFxuICAgICAgLi4uKG9mZnNldCAhPT0gdW5kZWZpbmVkICYmIHsgb2Zmc2V0IH0pLFxuICAgICAgd2l0aF9wYXlsb2FkOiB0cnVlLFxuICAgICAgd2l0aF92ZWN0b3I6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgYWxsUG9pbnRzLnB1c2goLi4ucmVzcG9uc2UucG9pbnRzKTtcbiAgICAvLyBTYWZlbHkgaGFuZGxlIHRoZSBvZmZzZXQgdHlwZVxuICAgIGNvbnN0IG5leHRPZmZzZXQgPSByZXNwb25zZS5uZXh0X3BhZ2Vfb2Zmc2V0O1xuICAgIGlmICh0eXBlb2YgbmV4dE9mZnNldCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgbmV4dE9mZnNldCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgb2Zmc2V0ID0gbmV4dE9mZnNldDtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSB3aGlsZSAob2Zmc2V0ICE9PSBudWxsICYmIG9mZnNldCAhPT0gdW5kZWZpbmVkKTtcblxuICBjb25zdCBhcnRpc3RDb3VudHM6IHsgW2FydGlzdE5hbWU6IHN0cmluZ106IG51bWJlciB9ID0ge307XG5cbiAgZm9yIChjb25zdCBwb2ludCBvZiBhbGxQb2ludHMpIHtcbiAgICBjb25zdCBhcnRpc3ROYW1lID0gcG9pbnQucGF5bG9hZD8ubmFtZTtcbiAgICBpZiAoYXJ0aXN0TmFtZSAmJiB0eXBlb2YgYXJ0aXN0TmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKCFhcnRpc3RDb3VudHNbYXJ0aXN0TmFtZV0pIHtcbiAgICAgICAgYXJ0aXN0Q291bnRzW2FydGlzdE5hbWVdID0gMDtcbiAgICAgIH1cbiAgICAgIGFydGlzdENvdW50c1thcnRpc3ROYW1lXSsrO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNvcnRlZEFydGlzdHMgPSBPYmplY3QuZW50cmllcyhhcnRpc3RDb3VudHMpXG4gICAgLm1hcCgoW25hbWUsIGNvdW50XSkgPT4gKHtcbiAgICAgIG5hbWUsXG4gICAgICBpbWFnZV9jb3VudDogY291bnQsXG4gICAgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuaW1hZ2VfY291bnQgLSBhLmltYWdlX2NvdW50KTtcblxuICAvLyBBbmFseXplIHRoZSBkaXN0cmlidXRpb24gdG8gZGV0ZWN0IHRpZXNcbiAgY29uc3QgbWF4Q291bnQgPSBzb3J0ZWRBcnRpc3RzLmxlbmd0aCA+IDAgPyBzb3J0ZWRBcnRpc3RzWzBdLmltYWdlX2NvdW50IDogMDtcbiAgY29uc3QgYXJ0aXN0c1dpdGhNYXhDb3VudCA9IHNvcnRlZEFydGlzdHMuZmlsdGVyKFxuICAgIChhcnRpc3QpID0+IGFydGlzdC5pbWFnZV9jb3VudCA9PT0gbWF4Q291bnRcbiAgKTtcbiAgY29uc3QgaGFzVGllID0gYXJ0aXN0c1dpdGhNYXhDb3VudC5sZW5ndGggPiAxO1xuXG4gIC8vIEdldCB0aGUgcmVxdWVzdGVkIG51bWJlciBvZiB0b3AgYXJ0aXN0c1xuICBjb25zdCB0b3BBcnRpc3RzID0gc29ydGVkQXJ0aXN0cy5zbGljZSgwLCBsaW1pdCk7XG5cbiAgLy8gQ2FsY3VsYXRlIHNvbWUgc3RhdGlzdGljc1xuICBjb25zdCB0b3RhbEltYWdlcyA9IE9iamVjdC52YWx1ZXMoYXJ0aXN0Q291bnRzKS5yZWR1Y2UoXG4gICAgKHN1bSwgY291bnQpID0+IHN1bSArIGNvdW50LFxuICAgIDBcbiAgKTtcbiAgY29uc3QgYXZlcmFnZUltYWdlc1BlckFydGlzdCA9IHRvdGFsSW1hZ2VzIC8gT2JqZWN0LmtleXMoYXJ0aXN0Q291bnRzKS5sZW5ndGg7XG5cbiAgLy8gR3JvdXAgYXJ0aXN0cyBieSBpbWFnZSBjb3VudCBmb3IgYmV0dGVyIGFuYWx5c2lzXG4gIGNvbnN0IGNvdW50R3JvdXBzOiB7IFtjb3VudDogbnVtYmVyXTogc3RyaW5nW10gfSA9IHt9O1xuICBzb3J0ZWRBcnRpc3RzLmZvckVhY2goKGFydGlzdCkgPT4ge1xuICAgIGlmICghY291bnRHcm91cHNbYXJ0aXN0LmltYWdlX2NvdW50XSkge1xuICAgICAgY291bnRHcm91cHNbYXJ0aXN0LmltYWdlX2NvdW50XSA9IFtdO1xuICAgIH1cbiAgICBjb3VudEdyb3Vwc1thcnRpc3QuaW1hZ2VfY291bnRdLnB1c2goYXJ0aXN0Lm5hbWUpO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIHRvcF9hcnRpc3RzOiB0b3BBcnRpc3RzLFxuICAgIHRvdGFsX2FydGlzdHNfZm91bmQ6IE9iamVjdC5rZXlzKGFydGlzdENvdW50cykubGVuZ3RoLFxuICAgIGNvbGxlY3Rpb25zX3NlYXJjaGVkOiAxLFxuICAgIG1heF9pbWFnZV9jb3VudDogbWF4Q291bnQsXG4gICAgYXJ0aXN0c193aXRoX21heF9jb3VudDogYXJ0aXN0c1dpdGhNYXhDb3VudCxcbiAgICBoYXNfdGllOiBoYXNUaWUsXG4gICAgdGllX2NvdW50OiBhcnRpc3RzV2l0aE1heENvdW50Lmxlbmd0aCxcbiAgICB0b3RhbF9pbWFnZXM6IHRvdGFsSW1hZ2VzLFxuICAgIGF2ZXJhZ2VfaW1hZ2VzX3Blcl9hcnRpc3Q6IE1hdGgucm91bmQoYXZlcmFnZUltYWdlc1BlckFydGlzdCAqIDEwMCkgLyAxMDAsXG4gICAgZGlzdHJpYnV0aW9uOiBjb3VudEdyb3VwcyxcbiAgICBhbmFseXNpczoge1xuICAgICAgaXNfZXZlbmx5X2Rpc3RyaWJ1dGVkOlxuICAgICAgICBPYmplY3Qua2V5cyhjb3VudEdyb3VwcykubGVuZ3RoID09PSBPYmplY3Qua2V5cyhhcnRpc3RDb3VudHMpLmxlbmd0aCxcbiAgICAgIG1vc3RfY29tbW9uX2NvdW50OlxuICAgICAgICBPYmplY3QuZW50cmllcyhjb3VudEdyb3Vwcykuc29ydChcbiAgICAgICAgICAoYSwgYikgPT4gYlsxXS5sZW5ndGggLSBhWzFdLmxlbmd0aFxuICAgICAgICApWzBdPy5bMF0gfHwgXCIwXCIsXG4gICAgfSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJHb29nbGVHZW5lcmF0aXZlQUkiLCJjbGllbnQiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJnZW5BSSIsIkdFTUlOSV9BUElfS0VZIiwiREVGQVVMVF9DT05GSUciLCJlbnRpdHlGaWVsZCIsIkVOVElUWV9GSUVMRCIsImVudGl0eVR5cGUiLCJFTlRJVFlfVFlQRSIsIml0ZW1UeXBlIiwiSVRFTV9UWVBFIiwiYWRkaXRpb25hbEZpZWxkcyIsImZpbGVuYW1lIiwiRklMRU5BTUVfRklFTEQiLCJ1cmwiLCJVUkxfRklFTEQiLCJkZXNjcmlwdGlvbiIsIkRFU0NSSVBUSU9OX0ZJRUxEIiwiZ2V0RW50aXR5VmFsdWUiLCJwb2ludCIsImNvbmZpZyIsInBheWxvYWQiLCJnZXRGaWVsZFZhbHVlIiwiZmllbGROYW1lIiwicHJvY2Vzc05hdHVyYWxRdWVyeSIsImNvbGxlY3Rpb24iLCJxdWVzdGlvbiIsInByb3ZpZGVyIiwibW9kZWwiLCJjb250ZXh0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImVucmljaGVkUXVlc3Rpb24iLCJyZXNvbHZlZENvbGxlY3Rpb24iLCJ1cGRhdGVkQ29udGV4dCIsInJlc29sdmVDb250ZXh0IiwiaW50ZW50IiwicGFyc2VRdWVyeUludGVudCIsImZpbmFsQ29sbGVjdGlvbiIsImV4dHJhY3RlZENvbGxlY3Rpb24iLCJyZXN1bHQiLCJleGVjdXRlUXVlcnkiLCJhbnN3ZXIiLCJnZW5lcmF0ZVJlc3BvbnNlIiwiZmluYWxDb250ZXh0IiwidXBkYXRlQ29udmVyc2F0aW9uQ29udGV4dCIsImV4ZWN1dGlvbl90aW1lX21zIiwicXVlcnlfdHlwZSIsInR5cGUiLCJkYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwiZmFsbGJhY2tBbnN3ZXIiLCJnZW5lcmF0ZUZhbGxiYWNrUmVzcG9uc2UiLCJpbmZlckludGVudEZyb21RdWVzdGlvbiIsImNvdW50IiwiY29udmVyc2F0aW9uSGlzdG9yeSIsImN1cnJlbnRDb250ZXh0IiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvd2VyY2FzZVF1ZXN0aW9uIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImxhc3RFbnRpdHkiLCJyZXBsYWNlIiwibGFzdENvbGxlY3Rpb24iLCJsYXN0UXVlcnlUeXBlIiwibGFzdFRhcmdldCIsImVudGl0eU1hdGNoIiwibWF0Y2giLCJuZXdFbnRpdHkiLCJsZW5ndGgiLCJsYXN0VHVybiIsInJlc3VsdHNfYnlfY29sbGVjdGlvbiIsImNvbGxlY3Rpb25zV2l0aFJlc3VsdHMiLCJmaWx0ZXIiLCJyIiwidHVybiIsImlkIiwidG9TdHJpbmciLCJ0YXJnZXQiLCJzY29wZSIsInRpbWVzdGFtcCIsInNsaWNlIiwibmFtZSIsImN1cnJlbnRUb3BpYyIsImF2YWlsYWJsZUNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbnNEYXRhIiwibGlzdENvbGxlY3Rpb25zIiwiY29sbGVjdGlvbnMiLCJtYXAiLCJjIiwid2FybiIsImZhbGxiYWNrSW50ZW50Iiwic3lzdGVtUHJvbXB0Iiwiam9pbiIsInJlY2VudFR1cm5zIiwiZm9yRWFjaCIsImluZGV4IiwicmVzcG9uc2UiLCJnZW1pbmlNb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsImdlbmVyYXRlQ29udGVudCIsInRleHQiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJvcGVuYWlFcnJvciIsIkVycm9yIiwianNvbk1hdGNoIiwianNvblN0ciIsInBhcnNlIiwiZSIsInEiLCJleHRyYWN0Q29sbGVjdGlvbkZyb21RdWVzdGlvbiIsImlzQ29sbGVjdGlvblF1ZXJ5IiwidGFyZ2V0Q29sbGVjdGlvbiIsImNvbGxlY3Rpb25OYW1lIiwicHJvY2Vzc2VkUXVlc3Rpb24iLCJsaW1pdCIsInNvcnRCeSIsInNvcnRPcmRlciIsInRlc3QiLCJsaW1pdE1hdGNoIiwicGFyc2VJbnQiLCJlbnRpdHlOYW1lIiwiY2FuZGlkYXRlTmFtZSIsInRyaW0iLCJzb21lIiwiY29sIiwiZmFsbGJhY2tFbnRpdHlNYXRjaCIsInBhdHRlcm5zIiwicGF0dGVybiIsImV4ZWMiLCJjYW5kaWRhdGUiLCJtYXRjaGluZ0NvbGxlY3Rpb24iLCJmaW5kIiwidW5kZWZpbmVkIiwiZXhlY3V0ZURhdGFiYXNlUXVlcnkiLCJleGVjdXRlQ29sbGVjdGlvblF1ZXJ5IiwiY291bnRDb2xsZWN0aW9ucyIsImNvdW50QXJ0aXN0c0Fjcm9zc0RhdGFiYXNlIiwiY291bnRJbWFnZXNCeUFydGlzdEFjcm9zc0RhdGFiYXNlIiwiY291bnRUb3RhbFZlY3RvcnNBY3Jvc3NEYXRhYmFzZSIsImRlc2NyaWJlRGF0YWJhc2VJbmZvIiwic2VhcmNoQWNyb3NzQ29sbGVjdGlvbnMiLCJzdW1tYXJpemVBcnRpc3RBY3Jvc3NEYXRhYmFzZSIsImxpc3RBcnRpc3RzQWNyb3NzRGF0YWJhc2UiLCJnZXRUb3BBcnRpc3RzQnlJbWFnZUNvdW50QWNyb3NzRGF0YWJhc2UiLCJjb3VudFVuaXF1ZUFydGlzdHMiLCJjb3VudEltYWdlc0J5QXJ0aXN0IiwiY291bnRUb3RhbCIsInNlYXJjaEltYWdlcyIsInN1bW1hcml6ZUFydGlzdFdvcmsiLCJhbmFseXplQXJ0aXN0V29yayIsImxpc3RVbmlxdWVBcnRpc3RzIiwibGlzdEltYWdlcyIsImZpbHRlckltYWdlcyIsImRlc2NyaWJlQ29sbGVjdGlvbiIsImdldFRvcEFydGlzdHNCeUltYWdlQ291bnRJbkNvbGxlY3Rpb24iLCJjb2xsZWN0aW9uc0luZm8iLCJnZXRDb2xsZWN0aW9ucyIsImRldGFpbGVkQ29sbGVjdGlvbnMiLCJQcm9taXNlIiwiYWxsIiwiY291bnRSZXN1bHQiLCJ2ZWN0b3JzX2NvdW50IiwidG90YWxWZWN0b3JzIiwicmVkdWNlIiwic3VtIiwidG90YWxfY29sbGVjdGlvbnMiLCJ0b3RhbF92ZWN0b3JzIiwiYWxsUmVzdWx0cyIsInJlc3VsdHMiLCJpbWFnZXMiLCJwdXNoIiwidG90YWxDb3VudCIsInRvdGFsX2NvdW50IiwiY29sbGVjdGlvbnNfc2VhcmNoZWQiLCJhbGxQb2ludHMiLCJvZmZzZXQiLCJzY3JvbGwiLCJ3aXRoX3BheWxvYWQiLCJ3aXRoX3ZlY3RvciIsInBvaW50cyIsIm5leHRPZmZzZXQiLCJuZXh0X3BhZ2Vfb2Zmc2V0IiwiZW50aXRpZXMiLCJTZXQiLCJ2YWx1ZSIsIkJvb2xlYW4iLCJzaXplIiwiYXJ0aXN0cyIsIkFycmF5IiwiZnJvbSIsImZpbHRlcmVkUG9pbnRzIiwiT2JqZWN0IiwiZW50cmllcyIsImV2ZXJ5Iiwia2V5IiwibGltaXRlZFBvaW50cyIsImFydGlzdCIsImZpbGVfbmFtZSIsImFydGlzdHNEYXRhIiwic2FtcGxlSW1hZ2VzIiwidG90YWxfaW1hZ2VzIiwidW5pcXVlX2FydGlzdHMiLCJzYW1wbGVfYXJ0aXN0cyIsInNhbXBsZV9pbWFnZXMiLCJmYWxsYmFja1Jlc3BvbnNlIiwibWF4X3Rva2VucyIsInNhZmVEYXRhIiwiYnlfY29sbGVjdGlvbiIsImNvbGxlY3Rpb25zX2ZvdW5kIiwiZmlsZV90eXBlcyIsImltYWdlX2NvdW50IiwiaW1nIiwic2FtcGxlX2ZpbGVuYW1lcyIsImkiLCJmaWxlX3R5cGVfZGlzdHJpYnV0aW9uIiwiY29tbW9uX25hbWluZ19wYXR0ZXJucyIsImtleXMiLCJzb3VyY2VfZG9tYWlucyIsInRvcF9hcnRpc3RzIiwiaGFzX3RpZSIsInRpZWRBcnRpc3RzIiwiYXJ0aXN0c193aXRoX21heF9jb3VudCIsIm1heF9pbWFnZV9jb3VudCIsImxhc3RBcnRpc3QiLCJvdGhlckFydGlzdHMiLCJhIiwidG9wQXJ0aXN0IiwiYXJ0aXN0TGlzdCIsInRpZV9jb3VudCIsImFsbEFydGlzdHMiLCJhZGQiLCJieUNvbGxlY3Rpb24iLCJNYXRoIiwibWluIiwiaW1hZ2VfdXJsIiwiZmlsZUV4dGVuc2lvbnMiLCJmaWxlTmFtZXMiLCJpbWFnZVVybHMiLCJleHQiLCJzcGxpdCIsInBvcCIsImRpc3BsYXllZF9pbWFnZXMiLCJzYW1wbGVfdXJscyIsInN0eWxlX3VybCIsImZpbGVUeXBlcyIsIk1hcCIsIm5hbWluZ1BhdHRlcm5zIiwidXJsUGF0dGVybnMiLCJzZXQiLCJnZXQiLCJuYW1lUGF0dGVybiIsImRvbWFpbiIsImZyb21FbnRyaWVzIiwiXyIsInNvcnQiLCJiIiwicmVzdWx0c0J5Q29sbGVjdGlvbiIsImFsbEltYWdlcyIsImNvbGxlY3Rpb25TdW1tYXJpZXMiLCJzdW1tYXJ5IiwidG90YWxJbWFnZXMiLCJkaXNwbGF5ZWRJbWFnZXMiLCJpbWFnZSIsImFydGlzdENvdW50cyIsInNjcm9sbFJlc3VsdCIsImFydGlzdE5hbWUiLCJzb3J0ZWRBcnRpc3RzIiwibWF4Q291bnQiLCJhcnRpc3RzV2l0aE1heENvdW50IiwiaGFzVGllIiwidG9wQXJ0aXN0cyIsInZhbHVlcyIsImF2ZXJhZ2VJbWFnZXNQZXJBcnRpc3QiLCJjb3VudEdyb3VwcyIsInRvdGFsX2FydGlzdHNfZm91bmQiLCJhdmVyYWdlX2ltYWdlc19wZXJfYXJ0aXN0Iiwicm91bmQiLCJkaXN0cmlidXRpb24iLCJhbmFseXNpcyIsImlzX2V2ZW5seV9kaXN0cmlidXRlZCIsIm1vc3RfY29tbW9uX2NvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/qdrant/nlp-query.ts\n");

/***/ }),

/***/ "(api)/./lib/types.ts":
/*!**********************!*\
  !*** ./lib/types.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AVAILABLE_MODELS\": () => (/* binding */ AVAILABLE_MODELS)\n/* harmony export */ });\n// Available models\nconst AVAILABLE_MODELS = {\n    // OpenAI models (using correct model names)\n    \"gpt-4o\": {\n        provider: \"openai\",\n        name: \"GPT-4o\"\n    },\n    \"gpt-4o-mini\": {\n        provider: \"openai\",\n        name: \"GPT-4o Mini\"\n    },\n    \"gpt-4-turbo\": {\n        provider: \"openai\",\n        name: \"GPT-4 Turbo\"\n    },\n    \"gpt-3.5-turbo\": {\n        provider: \"openai\",\n        name: \"GPT-3.5 Turbo\"\n    },\n    // Gemini models (using correct model names)\n    \"gemini-2.0-flash\": {\n        provider: \"gemini\",\n        name: \"Gemini 2.0 Flash\"\n    },\n    \"gemini-1.5-pro\": {\n        provider: \"gemini\",\n        name: \"Gemini 1.5 Pro\"\n    },\n    \"gemini-1.5-flash\": {\n        provider: \"gemini\",\n        name: \"Gemini 1.5 Flash\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdHlwZXMudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQWlEQSxtQkFBbUI7QUFDWixNQUFNQSxnQkFBZ0IsR0FBRztJQUM5Qiw0Q0FBNEM7SUFDNUMsUUFBUSxFQUFFO1FBQUVDLFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxRQUFRO0tBQUU7SUFDaEQsYUFBYSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxhQUFhO0tBQUU7SUFDMUQsYUFBYSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxhQUFhO0tBQUU7SUFDMUQsZUFBZSxFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxlQUFlO0tBQUU7SUFFOUQsNENBQTRDO0lBQzVDLGtCQUFrQixFQUFFO1FBQUVELFFBQVEsRUFBRSxRQUFRO1FBQUVDLElBQUksRUFBRSxrQkFBa0I7S0FBRTtJQUNwRSxnQkFBZ0IsRUFBRTtRQUFFRCxRQUFRLEVBQUUsUUFBUTtRQUFFQyxJQUFJLEVBQUUsZ0JBQWdCO0tBQUU7SUFDaEUsa0JBQWtCLEVBQUU7UUFBRUQsUUFBUSxFQUFFLFFBQVE7UUFBRUMsSUFBSSxFQUFFLGtCQUFrQjtLQUFFO0NBQ3JFLENBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95ZWFybi8uL2xpYi90eXBlcy50cz8yYTU1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgTmF0dXJhbFF1ZXJ5UmVxdWVzdCB7XG4gIGNvbGxlY3Rpb24/OiBzdHJpbmc7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIG1vZGVsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5hdHVyYWxRdWVyeVJlc3BvbnNlIHtcbiAgcXVlc3Rpb246IHN0cmluZztcbiAgYW5zd2VyOiBzdHJpbmc7XG4gIHF1ZXJ5X3R5cGU6IHN0cmluZztcbiAgZGF0YT86IGFueTtcbiAgZXhlY3V0aW9uX3RpbWVfbXM6IG51bWJlcjtcbiAgY29udGV4dD86IENvbnZlcnNhdGlvbkNvbnRleHQ7IC8vIEFkZCBjb252ZXJzYXRpb24gY29udGV4dCB0byByZXNwb25zZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnZlcnNhdGlvbkNvbnRleHQge1xuICBsYXN0RW50aXR5Pzogc3RyaW5nOyAvLyBMYXN0IG1lbnRpb25lZCBlbnRpdHkgKHBlcnNvbiwgY3JlYXRvciwgZXRjLilcbiAgbGFzdENvbGxlY3Rpb24/OiBzdHJpbmc7IC8vIExhc3QgbWVudGlvbmVkIG9yIHVzZWQgY29sbGVjdGlvblxuICBsYXN0UXVlcnlUeXBlPzogc3RyaW5nOyAvLyBMYXN0IHF1ZXJ5IHR5cGUgKHNlYXJjaCwgc3VtbWFyaXplLCBjb3VudCwgZXRjLilcbiAgbGFzdFRhcmdldD86IHN0cmluZzsgLy8gTGFzdCB0YXJnZXQgKGl0ZW1zLCBlbnRpdGllcywgZXRjLilcbiAgY29udmVyc2F0aW9uSGlzdG9yeTogQ29udmVyc2F0aW9uVHVybltdO1xuICBjdXJyZW50VG9waWM/OiBzdHJpbmc7IC8vIEN1cnJlbnQgdG9waWMgYmVpbmcgZGlzY3Vzc2VkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udmVyc2F0aW9uVHVybiB7XG4gIGlkOiBzdHJpbmc7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIGludGVudDoge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICB0YXJnZXQ6IHN0cmluZztcbiAgICBmaWx0ZXI/OiBhbnk7XG4gICAgc2NvcGU6IHN0cmluZztcbiAgICBleHRyYWN0ZWRDb2xsZWN0aW9uPzogc3RyaW5nO1xuICB9O1xuICByZXN1bHQ6IGFueTtcbiAgdGltZXN0YW1wOiBEYXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogXCJ1c2VyXCIgfCBcImFzc2lzdGFudFwiO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgcXVlcnlUeXBlPzogc3RyaW5nO1xuICBleGVjdXRpb25UaW1lPzogbnVtYmVyO1xuICBkYXRhPzogYW55O1xuICBjb250ZXh0PzogQ29udmVyc2F0aW9uQ29udGV4dDsgLy8gQWRkIGNvbnRleHQgdG8gbWVzc2FnZXNcbn1cblxuLy8gQXZhaWxhYmxlIG1vZGVsc1xuZXhwb3J0IGNvbnN0IEFWQUlMQUJMRV9NT0RFTFMgPSB7XG4gIC8vIE9wZW5BSSBtb2RlbHMgKHVzaW5nIGNvcnJlY3QgbW9kZWwgbmFtZXMpXG4gIFwiZ3B0LTRvXCI6IHsgcHJvdmlkZXI6IFwib3BlbmFpXCIsIG5hbWU6IFwiR1BULTRvXCIgfSxcbiAgXCJncHQtNG8tbWluaVwiOiB7IHByb3ZpZGVyOiBcIm9wZW5haVwiLCBuYW1lOiBcIkdQVC00byBNaW5pXCIgfSxcbiAgXCJncHQtNC10dXJib1wiOiB7IHByb3ZpZGVyOiBcIm9wZW5haVwiLCBuYW1lOiBcIkdQVC00IFR1cmJvXCIgfSxcbiAgXCJncHQtMy41LXR1cmJvXCI6IHsgcHJvdmlkZXI6IFwib3BlbmFpXCIsIG5hbWU6IFwiR1BULTMuNSBUdXJib1wiIH0sXG5cbiAgLy8gR2VtaW5pIG1vZGVscyAodXNpbmcgY29ycmVjdCBtb2RlbCBuYW1lcylcbiAgXCJnZW1pbmktMi4wLWZsYXNoXCI6IHsgcHJvdmlkZXI6IFwiZ2VtaW5pXCIsIG5hbWU6IFwiR2VtaW5pIDIuMCBGbGFzaFwiIH0sXG4gIFwiZ2VtaW5pLTEuNS1wcm9cIjogeyBwcm92aWRlcjogXCJnZW1pbmlcIiwgbmFtZTogXCJHZW1pbmkgMS41IFByb1wiIH0sXG4gIFwiZ2VtaW5pLTEuNS1mbGFzaFwiOiB7IHByb3ZpZGVyOiBcImdlbWluaVwiLCBuYW1lOiBcIkdlbWluaSAxLjUgRmxhc2hcIiB9LFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgTW9kZWxLZXkgPSBrZXlvZiB0eXBlb2YgQVZBSUxBQkxFX01PREVMUztcbmV4cG9ydCB0eXBlIEVtYmVkZGluZ1Byb3ZpZGVyID0gXCJvcGVuYWlcIiB8IFwiZ2VtaW5pXCI7XG4iXSwibmFtZXMiOlsiQVZBSUxBQkxFX01PREVMUyIsInByb3ZpZGVyIiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/types.ts\n");

/***/ }),

/***/ "(api)/./pages/api/ask.ts":
/*!**************************!*\
  !*** ./pages/api/ask.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/qdrant/nlp-query */ \"(api)/./lib/qdrant/nlp-query.ts\");\n/* harmony import */ var _lib_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/types */ \"(api)/./lib/types.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n    // Enable CORS\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET, POST, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type\");\n    if (req.method === \"OPTIONS\") {\n        res.status(200).end();\n        return;\n    }\n    if (req.method !== \"POST\") {\n        res.setHeader(\"Allow\", [\n            \"POST\"\n        ]);\n        res.status(405).json({\n            error: `Method ${req.method} Not Allowed`\n        });\n        return;\n    }\n    try {\n        const { question , collection , provider =\"openai\" , model , context  } = req.body;\n        if (!question) {\n            res.status(400).json({\n                error: \"Missing required field: question\"\n            });\n            return;\n        }\n        // Determine provider from model, default to gemini-2.0-flash\n        const selectedModel = model || \"gemini-2.0-flash\";\n        const modelInfo = _lib_types__WEBPACK_IMPORTED_MODULE_1__.AVAILABLE_MODELS[selectedModel];\n        const providerInfo = modelInfo?.provider || \"gemini\";\n        console.log(`Processing natural language query: \"${question}\" for collection: ${collection || \"database-level\"} using model: ${selectedModel}`);\n        const result = await (0,_lib_qdrant_nlp_query__WEBPACK_IMPORTED_MODULE_0__.processNaturalQuery)(collection || null, question, providerInfo, selectedModel, context // Pass context to processing function\n        );\n        // Transform the result to match NaturalQueryResponse interface\n        const response = {\n            question,\n            answer: result.answer,\n            query_type: result.query_type,\n            data: result.data,\n            execution_time_ms: result.execution_time_ms,\n            context: result.context\n        };\n        res.status(200).json(response);\n    } catch (error) {\n        console.error(\"Error processing natural language query:\", error);\n        res.status(500).json({\n            error: error instanceof Error ? error.message : \"Internal server error\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixLQUFLLEdBQUdsQixLQUFLLENBQUNtQixPQUFPLEdBQUcsdUJBQXVCO1NBQ3hFLENBQUMsQ0FBQztJQUNMLENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWVhcm4vLi9wYWdlcy9hcGkvYXNrLnRzPzY2NDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IHByb2Nlc3NOYXR1cmFsUXVlcnkgfSBmcm9tIFwiLi4vLi4vbGliL3FkcmFudC9ubHAtcXVlcnlcIjtcbmltcG9ydCB7XG4gIE5hdHVyYWxRdWVyeVJlcXVlc3QsXG4gIE5hdHVyYWxRdWVyeVJlc3BvbnNlLFxuICBBVkFJTEFCTEVfTU9ERUxTLFxuICBDb252ZXJzYXRpb25Db250ZXh0LFxufSBmcm9tIFwiLi4vLi4vbGliL3R5cGVzXCI7XG5pbXBvcnQgeyBFbWJlZGRpbmdQcm92aWRlciB9IGZyb20gXCIuLi8uLi9saWIvc2NoZW1hc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZTxOYXR1cmFsUXVlcnlSZXNwb25zZSB8IHsgZXJyb3I6IHN0cmluZyB9PlxuKSB7XG4gIC8vIEVuYWJsZSBDT1JTXG4gIHJlcy5zZXRIZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiwgXCIqXCIpO1xuICByZXMuc2V0SGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiLCBcIkdFVCwgUE9TVCwgT1BUSU9OU1wiKTtcbiAgcmVzLnNldEhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIiwgXCJDb250ZW50LVR5cGVcIik7XG5cbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiT1BUSU9OU1wiKSB7XG4gICAgcmVzLnN0YXR1cygyMDApLmVuZCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChyZXEubWV0aG9kICE9PSBcIlBPU1RcIikge1xuICAgIHJlcy5zZXRIZWFkZXIoXCJBbGxvd1wiLCBbXCJQT1NUXCJdKTtcbiAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3Qge1xuICAgICAgcXVlc3Rpb24sXG4gICAgICBjb2xsZWN0aW9uLFxuICAgICAgcHJvdmlkZXIgPSBcIm9wZW5haVwiLFxuICAgICAgbW9kZWwsXG4gICAgICBjb250ZXh0LCAvLyBBZGQgY29udmVyc2F0aW9uIGNvbnRleHQgcGFyYW1ldGVyXG4gICAgfToge1xuICAgICAgcXVlc3Rpb246IHN0cmluZztcbiAgICAgIGNvbGxlY3Rpb24/OiBzdHJpbmc7XG4gICAgICBwcm92aWRlcj86IEVtYmVkZGluZ1Byb3ZpZGVyO1xuICAgICAgbW9kZWw/OiBzdHJpbmc7XG4gICAgICBjb250ZXh0PzogQ29udmVyc2F0aW9uQ29udGV4dDsgLy8gQWRkIGNvbnRleHQgdHlwZVxuICAgIH0gPSByZXEuYm9keSBhcyBOYXR1cmFsUXVlcnlSZXF1ZXN0O1xuXG4gICAgaWYgKCFxdWVzdGlvbikge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJNaXNzaW5nIHJlcXVpcmVkIGZpZWxkOiBxdWVzdGlvblwiLFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHByb3ZpZGVyIGZyb20gbW9kZWwsIGRlZmF1bHQgdG8gZ2VtaW5pLTIuMC1mbGFzaFxuICAgIGNvbnN0IHNlbGVjdGVkTW9kZWwgPSBtb2RlbCB8fCBcImdlbWluaS0yLjAtZmxhc2hcIjtcbiAgICBjb25zdCBtb2RlbEluZm8gPVxuICAgICAgQVZBSUxBQkxFX01PREVMU1tzZWxlY3RlZE1vZGVsIGFzIGtleW9mIHR5cGVvZiBBVkFJTEFCTEVfTU9ERUxTXTtcbiAgICBjb25zdCBwcm92aWRlckluZm8gPSBtb2RlbEluZm8/LnByb3ZpZGVyIHx8IFwiZ2VtaW5pXCI7XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBQcm9jZXNzaW5nIG5hdHVyYWwgbGFuZ3VhZ2UgcXVlcnk6IFwiJHtxdWVzdGlvbn1cIiBmb3IgY29sbGVjdGlvbjogJHtcbiAgICAgICAgY29sbGVjdGlvbiB8fCBcImRhdGFiYXNlLWxldmVsXCJcbiAgICAgIH0gdXNpbmcgbW9kZWw6ICR7c2VsZWN0ZWRNb2RlbH1gXG4gICAgKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2Nlc3NOYXR1cmFsUXVlcnkoXG4gICAgICBjb2xsZWN0aW9uIHx8IG51bGwsXG4gICAgICBxdWVzdGlvbixcbiAgICAgIHByb3ZpZGVySW5mbyxcbiAgICAgIHNlbGVjdGVkTW9kZWwsXG4gICAgICBjb250ZXh0IC8vIFBhc3MgY29udGV4dCB0byBwcm9jZXNzaW5nIGZ1bmN0aW9uXG4gICAgKTtcblxuICAgIC8vIFRyYW5zZm9ybSB0aGUgcmVzdWx0IHRvIG1hdGNoIE5hdHVyYWxRdWVyeVJlc3BvbnNlIGludGVyZmFjZVxuICAgIGNvbnN0IHJlc3BvbnNlOiBOYXR1cmFsUXVlcnlSZXNwb25zZSA9IHtcbiAgICAgIHF1ZXN0aW9uLFxuICAgICAgYW5zd2VyOiByZXN1bHQuYW5zd2VyLFxuICAgICAgcXVlcnlfdHlwZTogcmVzdWx0LnF1ZXJ5X3R5cGUsXG4gICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICAgIGV4ZWN1dGlvbl90aW1lX21zOiByZXN1bHQuZXhlY3V0aW9uX3RpbWVfbXMsXG4gICAgICBjb250ZXh0OiByZXN1bHQuY29udGV4dCwgLy8gUmV0dXJuIHVwZGF0ZWQgY29udmVyc2F0aW9uIGNvbnRleHRcbiAgICB9O1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzcG9uc2UpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIG5hdHVyYWwgbGFuZ3VhZ2UgcXVlcnk6XCIsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsicHJvY2Vzc05hdHVyYWxRdWVyeSIsIkFWQUlMQUJMRV9NT0RFTFMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIiwianNvbiIsImVycm9yIiwicXVlc3Rpb24iLCJjb2xsZWN0aW9uIiwicHJvdmlkZXIiLCJtb2RlbCIsImNvbnRleHQiLCJib2R5Iiwic2VsZWN0ZWRNb2RlbCIsIm1vZGVsSW5mbyIsInByb3ZpZGVySW5mbyIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJyZXNwb25zZSIsImFuc3dlciIsInF1ZXJ5X3R5cGUiLCJkYXRhIiwiZXhlY3V0aW9uX3RpbWVfbXMiLCJFcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/ask.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/ask.ts"));
module.exports = __webpack_exports__;

})();